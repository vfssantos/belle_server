if(!function(t,e){"object"==typeof module&&"object"==typeof module.exports?module.exports=t.document?e(t,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return e(t)}:e(t)}("undefined"!=typeof window?window:this,function(t,e){function n(t){var e=t.length,n=Q.type(t);return"function"===n||Q.isWindow(t)?!1:1===t.nodeType&&e?!0:"array"===n||0===e||"number"==typeof e&&e>0&&e-1 in t}function i(t,e,n){if(Q.isFunction(e))return Q.grep(t,function(t,i){return!!e.call(t,i,t)!==n});if(e.nodeType)return Q.grep(t,function(t){return t===e!==n});if("string"==typeof e){if(st.test(e))return Q.filter(e,t,n);e=Q.filter(e,t)}return Q.grep(t,function(t){return q.call(e,t)>=0!==n})}function r(t,e){for(;(t=t[e])&&1!==t.nodeType;);return t}function o(t){var e=pt[t]={};return Q.each(t.match(ft)||[],function(t,n){e[n]=!0}),e}function a(){Z.removeEventListener("DOMContentLoaded",a,!1),t.removeEventListener("load",a,!1),Q.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Q.expando+s.uid++}function l(t,e,n){var i;if(void 0===n&&1===t.nodeType)if(i="data-"+e.replace(wt,"-$1").toLowerCase(),n=t.getAttribute(i),"string"==typeof n){try{n="true"===n?!0:"false"===n?!1:"null"===n?null:+n+""===n?+n:yt.test(n)?Q.parseJSON(n):n}catch(r){}bt.set(t,e,n)}else n=void 0;return n}function c(){return!0}function u(){return!1}function h(){try{return Z.activeElement}catch(t){}}function d(t,e){return Q.nodeName(t,"table")&&Q.nodeName(11!==e.nodeType?e:e.firstChild,"tr")?t.getElementsByTagName("tbody")[0]||t.appendChild(t.ownerDocument.createElement("tbody")):t}function f(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function p(t){var e=Lt.exec(t.type);return e?t.type=e[1]:t.removeAttribute("type"),t}function m(t,e){for(var n=0,i=t.length;i>n;n++)vt.set(t[n],"globalEval",!e||vt.get(e[n],"globalEval"))}function g(t,e){var n,i,r,o,a,s,l,c;if(1===e.nodeType){if(vt.hasData(t)&&(o=vt.access(t),a=vt.set(e,o),c=o.events)){delete a.handle,a.events={};for(r in c)for(n=0,i=c[r].length;i>n;n++)Q.event.add(e,r,c[r][n])}bt.hasData(t)&&(s=bt.access(t),l=Q.extend({},s),bt.set(e,l))}}function v(t,e){var n=t.getElementsByTagName?t.getElementsByTagName(e||"*"):t.querySelectorAll?t.querySelectorAll(e||"*"):[];return void 0===e||e&&Q.nodeName(t,e)?Q.merge([t],n):n}function b(t,e){var n=e.nodeName.toLowerCase();"input"===n&&$t.test(t.type)?e.checked=t.checked:("input"===n||"textarea"===n)&&(e.defaultValue=t.defaultValue)}function y(e,n){var i,r=Q(n.createElement(e)).appendTo(n.body),o=t.getDefaultComputedStyle&&(i=t.getDefaultComputedStyle(r[0]))?i.display:Q.css(r[0],"display");return r.detach(),o}function w(t){var e=Z,n=Ht[t];return n||(n=y(t,e),"none"!==n&&n||(Rt=(Rt||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(e.documentElement),e=Rt[0].contentDocument,e.write(),e.close(),n=y(t,e),Rt.detach()),Ht[t]=n),n}function x(t,e,n){var i,r,o,a,s=t.style;return n=n||zt(t),n&&(a=n.getPropertyValue(e)||n[e]),n&&(""!==a||Q.contains(t.ownerDocument,t)||(a=Q.style(t,e)),Wt.test(a)&&Bt.test(e)&&(i=s.width,r=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=i,s.minWidth=r,s.maxWidth=o)),void 0!==a?a+"":a}function C(t,e){return{get:function(){return t()?void delete this.get:(this.get=e).apply(this,arguments)}}}function _(t,e){if(e in t)return e;for(var n=e[0].toUpperCase()+e.slice(1),i=e,r=Gt.length;r--;)if(e=Gt[r]+n,e in t)return e;return i}function $(t,e,n){var i=Yt.exec(e);return i?Math.max(0,i[1]-(n||0))+(i[2]||"px"):e}function S(t,e,n,i,r){for(var o=n===(i?"border":"content")?4:"width"===e?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=Q.css(t,n+Ct[o],!0,r)),i?("content"===n&&(a-=Q.css(t,"padding"+Ct[o],!0,r)),"margin"!==n&&(a-=Q.css(t,"border"+Ct[o]+"Width",!0,r))):(a+=Q.css(t,"padding"+Ct[o],!0,r),"padding"!==n&&(a+=Q.css(t,"border"+Ct[o]+"Width",!0,r)));return a}function E(t,e,n){var i=!0,r="width"===e?t.offsetWidth:t.offsetHeight,o=zt(t),a="border-box"===Q.css(t,"boxSizing",!1,o);if(0>=r||null==r){if(r=x(t,e,o),(0>r||null==r)&&(r=t.style[e]),Wt.test(r))return r;i=a&&(K.boxSizingReliable()||r===t.style[e]),r=parseFloat(r)||0}return r+S(t,e,n||(a?"border":"content"),i,o)+"px"}function T(t,e){for(var n,i,r,o=[],a=0,s=t.length;s>a;a++)i=t[a],i.style&&(o[a]=vt.get(i,"olddisplay"),n=i.style.display,e?(o[a]||"none"!==n||(i.style.display=""),""===i.style.display&&_t(i)&&(o[a]=vt.access(i,"olddisplay",w(i.nodeName)))):(r=_t(i),"none"===n&&r||vt.set(i,"olddisplay",r?n:Q.css(i,"display"))));for(a=0;s>a;a++)i=t[a],i.style&&(e&&"none"!==i.style.display&&""!==i.style.display||(i.style.display=e?o[a]||"":"none"));return t}function k(t,e,n,i,r){return new k.prototype.init(t,e,n,i,r)}function A(){return setTimeout(function(){Kt=void 0}),Kt=Q.now()}function M(t,e){var n,i=0,r={height:t};for(e=e?1:0;4>i;i+=2-e)n=Ct[i],r["margin"+n]=r["padding"+n]=t;return e&&(r.opacity=r.width=t),r}function O(t,e,n){for(var i,r=(ne[e]||[]).concat(ne["*"]),o=0,a=r.length;a>o;o++)if(i=r[o].call(n,e,t))return i}function P(t,e,n){var i,r,o,a,s,l,c,u,h=this,d={},f=t.style,p=t.nodeType&&_t(t),m=vt.get(t,"fxshow");n.queue||(s=Q._queueHooks(t,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,h.always(function(){h.always(function(){s.unqueued--,Q.queue(t,"fx").length||s.empty.fire()})})),1===t.nodeType&&("height"in e||"width"in e)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],c=Q.css(t,"display"),u="none"===c?vt.get(t,"olddisplay")||w(t.nodeName):c,"inline"===u&&"none"===Q.css(t,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",h.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(i in e)if(r=e[i],Jt.exec(r)){if(delete e[i],o=o||"toggle"===r,r===(p?"hide":"show")){if("show"!==r||!m||void 0===m[i])continue;p=!0}d[i]=m&&m[i]||Q.style(t,i)}else c=void 0;if(Q.isEmptyObject(d))"inline"===("none"===c?w(t.nodeName):c)&&(f.display=c);else{m?"hidden"in m&&(p=m.hidden):m=vt.access(t,"fxshow",{}),o&&(m.hidden=!p),p?Q(t).show():h.done(function(){Q(t).hide()}),h.done(function(){var e;vt.remove(t,"fxshow");for(e in d)Q.style(t,e,d[e])});for(i in d)a=O(p?m[i]:0,i,h),i in m||(m[i]=a.start,p&&(a.end=a.start,a.start="width"===i||"height"===i?1:0))}}function I(t,e){var n,i,r,o,a;for(n in t)if(i=Q.camelCase(n),r=e[i],o=t[n],Q.isArray(o)&&(r=o[1],o=t[n]=o[0]),n!==i&&(t[i]=o,delete t[n]),a=Q.cssHooks[i],a&&"expand"in a){o=a.expand(o),delete t[i];for(n in o)n in t||(t[n]=o[n],e[n]=r)}else e[i]=r}function D(t,e,n){var i,r,o=0,a=ee.length,s=Q.Deferred().always(function(){delete l.elem}),l=function(){if(r)return!1;for(var e=Kt||A(),n=Math.max(0,c.startTime+c.duration-e),i=n/c.duration||0,o=1-i,a=0,l=c.tweens.length;l>a;a++)c.tweens[a].run(o);return s.notifyWith(t,[c,o,n]),1>o&&l?n:(s.resolveWith(t,[c]),!1)},c=s.promise({elem:t,props:Q.extend({},e),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:e,originalOptions:n,startTime:Kt||A(),duration:n.duration,tweens:[],createTween:function(e,n){var i=Q.Tween(t,c.opts,e,n,c.opts.specialEasing[e]||c.opts.easing);return c.tweens.push(i),i},stop:function(e){var n=0,i=e?c.tweens.length:0;if(r)return this;for(r=!0;i>n;n++)c.tweens[n].run(1);return e?s.resolveWith(t,[c,e]):s.rejectWith(t,[c,e]),this}}),u=c.props;for(I(u,c.opts.specialEasing);a>o;o++)if(i=ee[o].call(c,t,u,c.opts))return i;return Q.map(u,O,c),Q.isFunction(c.opts.start)&&c.opts.start.call(t,c),Q.fx.timer(Q.extend(l,{elem:t,anim:c,queue:c.opts.queue})),c.progress(c.opts.progress).done(c.opts.done,c.opts.complete).fail(c.opts.fail).always(c.opts.always)}function N(t){return function(e,n){"string"!=typeof e&&(n=e,e="*");var i,r=0,o=e.toLowerCase().match(ft)||[];if(Q.isFunction(n))for(;i=o[r++];)"+"===i[0]?(i=i.slice(1)||"*",(t[i]=t[i]||[]).unshift(n)):(t[i]=t[i]||[]).push(n)}}function L(t,e,n,i){function r(s){var l;return o[s]=!0,Q.each(t[s]||[],function(t,s){var c=s(e,n,i);return"string"!=typeof c||a||o[c]?a?!(l=c):void 0:(e.dataTypes.unshift(c),r(c),!1)}),l}var o={},a=t===ye;return r(e.dataTypes[0])||!o["*"]&&r("*")}function F(t,e){var n,i,r=Q.ajaxSettings.flatOptions||{};for(n in e)void 0!==e[n]&&((r[n]?t:i||(i={}))[n]=e[n]);return i&&Q.extend(!0,t,i),t}function j(t,e,n){for(var i,r,o,a,s=t.contents,l=t.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=t.mimeType||e.getResponseHeader("Content-Type"));if(i)for(r in s)if(s[r]&&s[r].test(i)){l.unshift(r);break}if(l[0]in n)o=l[0];else{for(r in n){if(!l[0]||t.converters[r+" "+l[0]]){o=r;break}a||(a=r)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function R(t,e,n,i){var r,o,a,s,l,c={},u=t.dataTypes.slice();if(u[1])for(a in t.converters)c[a.toLowerCase()]=t.converters[a];for(o=u.shift();o;)if(t.responseFields[o]&&(n[t.responseFields[o]]=e),!l&&i&&t.dataFilter&&(e=t.dataFilter(e,t.dataType)),l=o,o=u.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(a=c[l+" "+o]||c["* "+o],!a)for(r in c)if(s=r.split(" "),s[1]===o&&(a=c[l+" "+s[0]]||c["* "+s[0]])){a===!0?a=c[r]:c[r]!==!0&&(o=s[0],u.unshift(s[1]));break}if(a!==!0)if(a&&t["throws"])e=a(e);else try{e=a(e)}catch(h){return{state:"parsererror",error:a?h:"No conversion from "+l+" to "+o}}}return{state:"success",data:e}}function H(t,e,n,i){var r;if(Q.isArray(e))Q.each(e,function(e,r){n||$e.test(t)?i(t,r):H(t+"["+("object"==typeof r?e:"")+"]",r,n,i)});else if(n||"object"!==Q.type(e))i(t,e);else for(r in e)H(t+"["+r+"]",e[r],n,i)}function B(t){return Q.isWindow(t)?t:9===t.nodeType&&t.defaultView}var W=[],z=W.slice,U=W.concat,Y=W.push,q=W.indexOf,V={},X=V.toString,G=V.hasOwnProperty,K={},Z=t.document,J="2.1.3",Q=function(t,e){return new Q.fn.init(t,e)},tt=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,et=/^-ms-/,nt=/-([\da-z])/gi,it=function(t,e){return e.toUpperCase()};Q.fn=Q.prototype={jquery:J,constructor:Q,selector:"",length:0,toArray:function(){return z.call(this)},get:function(t){return null!=t?0>t?this[t+this.length]:this[t]:z.call(this)},pushStack:function(t){var e=Q.merge(this.constructor(),t);return e.prevObject=this,e.context=this.context,e},each:function(t,e){return Q.each(this,t,e)},map:function(t){return this.pushStack(Q.map(this,function(e,n){return t.call(e,n,e)}))},slice:function(){return this.pushStack(z.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(t){var e=this.length,n=+t+(0>t?e:0);return this.pushStack(n>=0&&e>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Y,sort:W.sort,splice:W.splice},Q.extend=Q.fn.extend=function(){var t,e,n,i,r,o,a=arguments[0]||{},s=1,l=arguments.length,c=!1;for("boolean"==typeof a&&(c=a,a=arguments[s]||{},s++),"object"==typeof a||Q.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(t=arguments[s]))for(e in t)n=a[e],i=t[e],a!==i&&(c&&i&&(Q.isPlainObject(i)||(r=Q.isArray(i)))?(r?(r=!1,o=n&&Q.isArray(n)?n:[]):o=n&&Q.isPlainObject(n)?n:{},a[e]=Q.extend(c,o,i)):void 0!==i&&(a[e]=i));return a},Q.extend({expando:"jQuery"+(J+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===Q.type(t)},isArray:Array.isArray,isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(t){return!Q.isArray(t)&&t-parseFloat(t)+1>=0},isPlainObject:function(t){return"object"!==Q.type(t)||t.nodeType||Q.isWindow(t)?!1:t.constructor&&!G.call(t.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(t){var e;for(e in t)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?V[X.call(t)]||"object":typeof t},globalEval:function(t){var e,n=eval;t=Q.trim(t),t&&(1===t.indexOf("use strict")?(e=Z.createElement("script"),e.text=t,Z.head.appendChild(e).parentNode.removeChild(e)):n(t))},camelCase:function(t){return t.replace(et,"ms-").replace(nt,it)},nodeName:function(t,e){return t.nodeName&&t.nodeName.toLowerCase()===e.toLowerCase()},each:function(t,e,i){var r,o=0,a=t.length,s=n(t);if(i){if(s)for(;a>o&&(r=e.apply(t[o],i),r!==!1);o++);else for(o in t)if(r=e.apply(t[o],i),r===!1)break}else if(s)for(;a>o&&(r=e.call(t[o],o,t[o]),r!==!1);o++);else for(o in t)if(r=e.call(t[o],o,t[o]),r===!1)break;return t},trim:function(t){return null==t?"":(t+"").replace(tt,"")},makeArray:function(t,e){var i=e||[];return null!=t&&(n(Object(t))?Q.merge(i,"string"==typeof t?[t]:t):Y.call(i,t)),i},inArray:function(t,e,n){return null==e?-1:q.call(e,t,n)},merge:function(t,e){for(var n=+e.length,i=0,r=t.length;n>i;i++)t[r++]=e[i];return t.length=r,t},grep:function(t,e,n){for(var i,r=[],o=0,a=t.length,s=!n;a>o;o++)i=!e(t[o],o),i!==s&&r.push(t[o]);return r},map:function(t,e,i){var r,o=0,a=t.length,s=n(t),l=[];if(s)for(;a>o;o++)r=e(t[o],o,i),null!=r&&l.push(r);else for(o in t)r=e(t[o],o,i),null!=r&&l.push(r);return U.apply([],l)},guid:1,proxy:function(t,e){var n,i,r;return"string"==typeof e&&(n=t[e],e=t,t=n),Q.isFunction(t)?(i=z.call(arguments,2),r=function(){return t.apply(e||this,i.concat(z.call(arguments)))},r.guid=t.guid=t.guid||Q.guid++,r):void 0},now:Date.now,support:K}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(t,e){V["[object "+e+"]"]=e.toLowerCase()});var rt=function(t){function e(t,e,n,i){var r,o,a,s,l,c,h,f,p,m;if((e?e.ownerDocument||e:H)!==P&&O(e),e=e||P,n=n||[],s=e.nodeType,"string"!=typeof t||!t||1!==s&&9!==s&&11!==s)return n;if(!i&&D){if(11!==s&&(r=bt.exec(t)))if(a=r[1]){if(9===s){if(o=e.getElementById(a),!o||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(e.ownerDocument&&(o=e.ownerDocument.getElementById(a))&&j(e,o)&&o.id===a)return n.push(o),n}else{if(r[2])return J.apply(n,e.getElementsByTagName(t)),n;if((a=r[3])&&x.getElementsByClassName)return J.apply(n,e.getElementsByClassName(a)),n}if(x.qsa&&(!N||!N.test(t))){if(f=h=R,p=e,m=1!==s&&t,1===s&&"object"!==e.nodeName.toLowerCase()){for(c=S(t),(h=e.getAttribute("id"))?f=h.replace(wt,"\\$&"):e.setAttribute("id",f),f="[id='"+f+"'] ",l=c.length;l--;)c[l]=f+d(c[l]);p=yt.test(t)&&u(e.parentNode)||e,m=c.join(",")}if(m)try{return J.apply(n,p.querySelectorAll(m)),n}catch(g){}finally{h||e.removeAttribute("id")}}}return T(t.replace(lt,"$1"),e,n,i)}function n(){function t(n,i){return e.push(n+" ")>C.cacheLength&&delete t[e.shift()],t[n+" "]=i}var e=[];return t}function i(t){return t[R]=!0,t}function r(t){var e=P.createElement("div");try{return!!t(e)}catch(n){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function o(t,e){for(var n=t.split("|"),i=t.length;i--;)C.attrHandle[n[i]]=e}function a(t,e){var n=e&&t,i=n&&1===t.nodeType&&1===e.nodeType&&(~e.sourceIndex||V)-(~t.sourceIndex||V);if(i)return i;if(n)for(;n=n.nextSibling;)if(n===e)return-1;return t?1:-1}function s(t){return function(e){var n=e.nodeName.toLowerCase();return"input"===n&&e.type===t}}function l(t){return function(e){var n=e.nodeName.toLowerCase();return("input"===n||"button"===n)&&e.type===t}}function c(t){return i(function(e){return e=+e,i(function(n,i){for(var r,o=t([],n.length,e),a=o.length;a--;)n[r=o[a]]&&(n[r]=!(i[r]=n[r]))})})}function u(t){return t&&"undefined"!=typeof t.getElementsByTagName&&t}function h(){}function d(t){for(var e=0,n=t.length,i="";n>e;e++)i+=t[e].value;return i}function f(t,e,n){var i=e.dir,r=n&&"parentNode"===i,o=W++;return e.first?function(e,n,o){for(;e=e[i];)if(1===e.nodeType||r)return t(e,n,o)}:function(e,n,a){var s,l,c=[B,o];if(a){for(;e=e[i];)if((1===e.nodeType||r)&&t(e,n,a))return!0}else for(;e=e[i];)if(1===e.nodeType||r){if(l=e[R]||(e[R]={}),(s=l[i])&&s[0]===B&&s[1]===o)return c[2]=s[2];if(l[i]=c,c[2]=t(e,n,a))return!0}}}function p(t){return t.length>1?function(e,n,i){for(var r=t.length;r--;)if(!t[r](e,n,i))return!1;return!0}:t[0]}function m(t,n,i){for(var r=0,o=n.length;o>r;r++)e(t,n[r],i);return i}function g(t,e,n,i,r){for(var o,a=[],s=0,l=t.length,c=null!=e;l>s;s++)(o=t[s])&&(!n||n(o,i,r))&&(a.push(o),c&&e.push(s));return a}function v(t,e,n,r,o,a){return r&&!r[R]&&(r=v(r)),o&&!o[R]&&(o=v(o,a)),i(function(i,a,s,l){var c,u,h,d=[],f=[],p=a.length,v=i||m(e||"*",s.nodeType?[s]:s,[]),b=!t||!i&&e?v:g(v,d,t,s,l),y=n?o||(i?t:p||r)?[]:a:b;if(n&&n(b,y,s,l),r)for(c=g(y,f),r(c,[],s,l),u=c.length;u--;)(h=c[u])&&(y[f[u]]=!(b[f[u]]=h));if(i){if(o||t){if(o){for(c=[],u=y.length;u--;)(h=y[u])&&c.push(b[u]=h);o(null,y=[],c,l)}for(u=y.length;u--;)(h=y[u])&&(c=o?tt(i,h):d[u])>-1&&(i[c]=!(a[c]=h))}}else y=g(y===a?y.splice(p,y.length):y),o?o(null,a,y,l):J.apply(a,y)})}function b(t){for(var e,n,i,r=t.length,o=C.relative[t[0].type],a=o||C.relative[" "],s=o?1:0,l=f(function(t){return t===e},a,!0),c=f(function(t){return tt(e,t)>-1},a,!0),u=[function(t,n,i){var r=!o&&(i||n!==k)||((e=n).nodeType?l(t,n,i):c(t,n,i));return e=null,r}];r>s;s++)if(n=C.relative[t[s].type])u=[f(p(u),n)];else{if(n=C.filter[t[s].type].apply(null,t[s].matches),n[R]){for(i=++s;r>i&&!C.relative[t[i].type];i++);return v(s>1&&p(u),s>1&&d(t.slice(0,s-1).concat({value:" "===t[s-2].type?"*":""})).replace(lt,"$1"),n,i>s&&b(t.slice(s,i)),r>i&&b(t=t.slice(i)),r>i&&d(t))}u.push(n)}return p(u)}function y(t,n){var r=n.length>0,o=t.length>0,a=function(i,a,s,l,c){var u,h,d,f=0,p="0",m=i&&[],v=[],b=k,y=i||o&&C.find.TAG("*",c),w=B+=null==b?1:Math.random()||.1,x=y.length;for(c&&(k=a!==P&&a);p!==x&&null!=(u=y[p]);p++){if(o&&u){for(h=0;d=t[h++];)if(d(u,a,s)){l.push(u);break}c&&(B=w)}r&&((u=!d&&u)&&f--,i&&m.push(u))}if(f+=p,r&&p!==f){for(h=0;d=n[h++];)d(m,v,a,s);if(i){if(f>0)for(;p--;)m[p]||v[p]||(v[p]=K.call(l));v=g(v)}J.apply(l,v),c&&!i&&v.length>0&&f+n.length>1&&e.uniqueSort(l)}return c&&(B=w,k=b),m};return r?i(a):a}var w,x,C,_,$,S,E,T,k,A,M,O,P,I,D,N,L,F,j,R="sizzle"+1*new Date,H=t.document,B=0,W=0,z=n(),U=n(),Y=n(),q=function(t,e){return t===e&&(M=!0),0},V=1<<31,X={}.hasOwnProperty,G=[],K=G.pop,Z=G.push,J=G.push,Q=G.slice,tt=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},et="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",nt="[\\x20\\t\\r\\n\\f]",it="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",rt=it.replace("w","w#"),ot="\\["+nt+"*("+it+")(?:"+nt+"*([*^$|!~]?=)"+nt+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+rt+"))|)"+nt+"*\\]",at=":("+it+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ot+")*)|.*)\\)|)",st=new RegExp(nt+"+","g"),lt=new RegExp("^"+nt+"+|((?:^|[^\\\\])(?:\\\\.)*)"+nt+"+$","g"),ct=new RegExp("^"+nt+"*,"+nt+"*"),ut=new RegExp("^"+nt+"*([>+~]|"+nt+")"+nt+"*"),ht=new RegExp("="+nt+"*([^\\]'\"]*?)"+nt+"*\\]","g"),dt=new RegExp(at),ft=new RegExp("^"+rt+"$"),pt={ID:new RegExp("^#("+it+")"),CLASS:new RegExp("^\\.("+it+")"),TAG:new RegExp("^("+it.replace("w","w*")+")"),ATTR:new RegExp("^"+ot),PSEUDO:new RegExp("^"+at),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+nt+"*(even|odd|(([+-]|)(\\d*)n|)"+nt+"*(?:([+-]|)"+nt+"*(\\d+)|))"+nt+"*\\)|)","i"),bool:new RegExp("^(?:"+et+")$","i"),needsContext:new RegExp("^"+nt+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+nt+"*((?:-\\d)?\\d*)"+nt+"*\\)|)(?=[^-]|$)","i")},mt=/^(?:input|select|textarea|button)$/i,gt=/^h\d$/i,vt=/^[^{]+\{\s*\[native \w/,bt=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,yt=/[+~]/,wt=/'|\\/g,xt=new RegExp("\\\\([\\da-f]{1,6}"+nt+"?|("+nt+")|.)","ig"),Ct=function(t,e,n){var i="0x"+e-65536;return i!==i||n?e:0>i?String.fromCharCode(i+65536):String.fromCharCode(i>>10|55296,1023&i|56320)},_t=function(){O()};try{J.apply(G=Q.call(H.childNodes),H.childNodes),G[H.childNodes.length].nodeType}catch($t){J={apply:G.length?function(t,e){Z.apply(t,Q.call(e))}:function(t,e){for(var n=t.length,i=0;t[n++]=e[i++];);t.length=n-1}}}x=e.support={},$=e.isXML=function(t){var e=t&&(t.ownerDocument||t).documentElement;return e?"HTML"!==e.nodeName:!1},O=e.setDocument=function(t){var e,n,i=t?t.ownerDocument||t:H;return i!==P&&9===i.nodeType&&i.documentElement?(P=i,I=i.documentElement,n=i.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",_t,!1):n.attachEvent&&n.attachEvent("onunload",_t)),D=!$(i),x.attributes=r(function(t){return t.className="i",!t.getAttribute("className")}),x.getElementsByTagName=r(function(t){return t.appendChild(i.createComment("")),!t.getElementsByTagName("*").length}),x.getElementsByClassName=vt.test(i.getElementsByClassName),x.getById=r(function(t){return I.appendChild(t).id=R,!i.getElementsByName||!i.getElementsByName(R).length}),x.getById?(C.find.ID=function(t,e){if("undefined"!=typeof e.getElementById&&D){var n=e.getElementById(t);return n&&n.parentNode?[n]:[]}},C.filter.ID=function(t){var e=t.replace(xt,Ct);return function(t){return t.getAttribute("id")===e}}):(delete C.find.ID,C.filter.ID=function(t){var e=t.replace(xt,Ct);return function(t){var n="undefined"!=typeof t.getAttributeNode&&t.getAttributeNode("id");return n&&n.value===e}}),C.find.TAG=x.getElementsByTagName?function(t,e){return"undefined"!=typeof e.getElementsByTagName?e.getElementsByTagName(t):x.qsa?e.querySelectorAll(t):void 0}:function(t,e){var n,i=[],r=0,o=e.getElementsByTagName(t);if("*"===t){for(;n=o[r++];)1===n.nodeType&&i.push(n);return i}return o},C.find.CLASS=x.getElementsByClassName&&function(t,e){return D?e.getElementsByClassName(t):void 0},L=[],N=[],(x.qsa=vt.test(i.querySelectorAll))&&(r(function(t){I.appendChild(t).innerHTML="<a id='"+R+"'></a><select id='"+R+"-\f]' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&N.push("[*^$]="+nt+"*(?:''|\"\")"),t.querySelectorAll("[selected]").length||N.push("\\["+nt+"*(?:value|"+et+")"),t.querySelectorAll("[id~="+R+"-]").length||N.push("~="),t.querySelectorAll(":checked").length||N.push(":checked"),t.querySelectorAll("a#"+R+"+*").length||N.push(".#.+[+~]")}),r(function(t){var e=i.createElement("input");e.setAttribute("type","hidden"),t.appendChild(e).setAttribute("name","D"),t.querySelectorAll("[name=d]").length&&N.push("name"+nt+"*[*^$|!~]?="),t.querySelectorAll(":enabled").length||N.push(":enabled",":disabled"),t.querySelectorAll("*,:x"),N.push(",.*:")})),(x.matchesSelector=vt.test(F=I.matches||I.webkitMatchesSelector||I.mozMatchesSelector||I.oMatchesSelector||I.msMatchesSelector))&&r(function(t){x.disconnectedMatch=F.call(t,"div"),F.call(t,"[s!='']:x"),L.push("!=",at)}),N=N.length&&new RegExp(N.join("|")),L=L.length&&new RegExp(L.join("|")),e=vt.test(I.compareDocumentPosition),j=e||vt.test(I.contains)?function(t,e){var n=9===t.nodeType?t.documentElement:t,i=e&&e.parentNode;return t===i||!(!i||1!==i.nodeType||!(n.contains?n.contains(i):t.compareDocumentPosition&&16&t.compareDocumentPosition(i)))}:function(t,e){if(e)for(;e=e.parentNode;)if(e===t)return!0;return!1},q=e?function(t,e){if(t===e)return M=!0,0;var n=!t.compareDocumentPosition-!e.compareDocumentPosition;return n?n:(n=(t.ownerDocument||t)===(e.ownerDocument||e)?t.compareDocumentPosition(e):1,1&n||!x.sortDetached&&e.compareDocumentPosition(t)===n?t===i||t.ownerDocument===H&&j(H,t)?-1:e===i||e.ownerDocument===H&&j(H,e)?1:A?tt(A,t)-tt(A,e):0:4&n?-1:1)}:function(t,e){if(t===e)return M=!0,0;var n,r=0,o=t.parentNode,s=e.parentNode,l=[t],c=[e];if(!o||!s)return t===i?-1:e===i?1:o?-1:s?1:A?tt(A,t)-tt(A,e):0;if(o===s)return a(t,e);for(n=t;n=n.parentNode;)l.unshift(n);for(n=e;n=n.parentNode;)c.unshift(n);for(;l[r]===c[r];)r++;return r?a(l[r],c[r]):l[r]===H?-1:c[r]===H?1:0},i):P},e.matches=function(t,n){return e(t,null,null,n)},e.matchesSelector=function(t,n){if((t.ownerDocument||t)!==P&&O(t),n=n.replace(ht,"='$1']"),!(!x.matchesSelector||!D||L&&L.test(n)||N&&N.test(n)))try{var i=F.call(t,n);if(i||x.disconnectedMatch||t.document&&11!==t.document.nodeType)return i}catch(r){}return e(n,P,null,[t]).length>0},e.contains=function(t,e){return(t.ownerDocument||t)!==P&&O(t),j(t,e)},e.attr=function(t,e){(t.ownerDocument||t)!==P&&O(t);var n=C.attrHandle[e.toLowerCase()],i=n&&X.call(C.attrHandle,e.toLowerCase())?n(t,e,!D):void 0;return void 0!==i?i:x.attributes||!D?t.getAttribute(e):(i=t.getAttributeNode(e))&&i.specified?i.value:null},e.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},e.uniqueSort=function(t){var e,n=[],i=0,r=0;if(M=!x.detectDuplicates,A=!x.sortStable&&t.slice(0),t.sort(q),M){for(;e=t[r++];)e===t[r]&&(i=n.push(r));for(;i--;)t.splice(n[i],1)}return A=null,t},_=e.getText=function(t){var e,n="",i=0,r=t.nodeType;if(r){if(1===r||9===r||11===r){if("string"==typeof t.textContent)return t.textContent;for(t=t.firstChild;t;t=t.nextSibling)n+=_(t)}else if(3===r||4===r)return t.nodeValue}else for(;e=t[i++];)n+=_(e);return n},C=e.selectors={cacheLength:50,createPseudo:i,match:pt,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(xt,Ct),t[3]=(t[3]||t[4]||t[5]||"").replace(xt,Ct),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||e.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&e.error(t[0]),t},PSEUDO:function(t){var e,n=!t[6]&&t[2];return pt.CHILD.test(t[0])?null:(t[3]?t[2]=t[4]||t[5]||"":n&&dt.test(n)&&(e=S(n,!0))&&(e=n.indexOf(")",n.length-e)-n.length)&&(t[0]=t[0].slice(0,e),t[2]=n.slice(0,e)),t.slice(0,3))}},filter:{TAG:function(t){var e=t.replace(xt,Ct).toLowerCase();return"*"===t?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===e}},CLASS:function(t){var e=z[t+" "];return e||(e=new RegExp("(^|"+nt+")"+t+"("+nt+"|$)"))&&z(t,function(t){return e.test("string"==typeof t.className&&t.className||"undefined"!=typeof t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,n,i){return function(r){var o=e.attr(r,t);return null==o?"!="===n:n?(o+="","="===n?o===i:"!="===n?o!==i:"^="===n?i&&0===o.indexOf(i):"*="===n?i&&o.indexOf(i)>-1:"$="===n?i&&o.slice(-i.length)===i:"~="===n?(" "+o.replace(st," ")+" ").indexOf(i)>-1:"|="===n?o===i||o.slice(0,i.length+1)===i+"-":!1):!0}},CHILD:function(t,e,n,i,r){var o="nth"!==t.slice(0,3),a="last"!==t.slice(-4),s="of-type"===e;return 1===i&&0===r?function(t){return!!t.parentNode}:function(e,n,l){var c,u,h,d,f,p,m=o!==a?"nextSibling":"previousSibling",g=e.parentNode,v=s&&e.nodeName.toLowerCase(),b=!l&&!s;if(g){if(o){for(;m;){for(h=e;h=h[m];)if(s?h.nodeName.toLowerCase()===v:1===h.nodeType)return!1;p=m="only"===t&&!p&&"nextSibling"}return!0}if(p=[a?g.firstChild:g.lastChild],a&&b){for(u=g[R]||(g[R]={}),c=u[t]||[],f=c[0]===B&&c[1],d=c[0]===B&&c[2],h=f&&g.childNodes[f];h=++f&&h&&h[m]||(d=f=0)||p.pop();)if(1===h.nodeType&&++d&&h===e){u[t]=[B,f,d];break}}else if(b&&(c=(e[R]||(e[R]={}))[t])&&c[0]===B)d=c[1];else for(;(h=++f&&h&&h[m]||(d=f=0)||p.pop())&&((s?h.nodeName.toLowerCase()!==v:1!==h.nodeType)||!++d||(b&&((h[R]||(h[R]={}))[t]=[B,d]),h!==e)););return d-=r,d===i||d%i===0&&d/i>=0}}},PSEUDO:function(t,n){var r,o=C.pseudos[t]||C.setFilters[t.toLowerCase()]||e.error("unsupported pseudo: "+t);return o[R]?o(n):o.length>1?(r=[t,t,"",n],C.setFilters.hasOwnProperty(t.toLowerCase())?i(function(t,e){for(var i,r=o(t,n),a=r.length;a--;)i=tt(t,r[a]),t[i]=!(e[i]=r[a])}):function(t){return o(t,0,r)}):o}},pseudos:{not:i(function(t){var e=[],n=[],r=E(t.replace(lt,"$1"));return r[R]?i(function(t,e,n,i){for(var o,a=r(t,null,i,[]),s=t.length;s--;)(o=a[s])&&(t[s]=!(e[s]=o))}):function(t,i,o){return e[0]=t,r(e,null,o,n),e[0]=null,!n.pop()}}),has:i(function(t){return function(n){return e(t,n).length>0}}),contains:i(function(t){return t=t.replace(xt,Ct),function(e){return(e.textContent||e.innerText||_(e)).indexOf(t)>-1}}),lang:i(function(t){return ft.test(t||"")||e.error("unsupported lang: "+t),t=t.replace(xt,Ct).toLowerCase(),function(e){var n;do if(n=D?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return n=n.toLowerCase(),n===t||0===n.indexOf(t+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var n=t.location&&t.location.hash;return n&&n.slice(1)===e.id},root:function(t){return t===I},focus:function(t){return t===P.activeElement&&(!P.hasFocus||P.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:function(t){return t.disabled===!1},disabled:function(t){return t.disabled===!0},checked:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&!!t.checked||"option"===e&&!!t.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,t.selected===!0},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(t.nodeType<6)return!1;return!0},parent:function(t){return!C.pseudos.empty(t)},header:function(t){return gt.test(t.nodeName)},input:function(t){return mt.test(t.nodeName)},button:function(t){var e=t.nodeName.toLowerCase();return"input"===e&&"button"===t.type||"button"===e},text:function(t){var e;return"input"===t.nodeName.toLowerCase()&&"text"===t.type&&(null==(e=t.getAttribute("type"))||"text"===e.toLowerCase())},first:c(function(){return[0]}),last:c(function(t,e){return[e-1]}),eq:c(function(t,e,n){return[0>n?n+e:n]}),even:c(function(t,e){for(var n=0;e>n;n+=2)t.push(n);return t}),odd:c(function(t,e){for(var n=1;e>n;n+=2)t.push(n);return t}),lt:c(function(t,e,n){for(var i=0>n?n+e:n;--i>=0;)t.push(i);return t}),gt:c(function(t,e,n){for(var i=0>n?n+e:n;++i<e;)t.push(i);return t})}},C.pseudos.nth=C.pseudos.eq;for(w in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})C.pseudos[w]=s(w);for(w in{submit:!0,reset:!0})C.pseudos[w]=l(w);return h.prototype=C.filters=C.pseudos,C.setFilters=new h,S=e.tokenize=function(t,n){var i,r,o,a,s,l,c,u=U[t+" "];if(u)return n?0:u.slice(0);for(s=t,l=[],c=C.preFilter;s;){(!i||(r=ct.exec(s)))&&(r&&(s=s.slice(r[0].length)||s),l.push(o=[])),i=!1,(r=ut.exec(s))&&(i=r.shift(),o.push({value:i,type:r[0].replace(lt," ")}),s=s.slice(i.length));for(a in C.filter)!(r=pt[a].exec(s))||c[a]&&!(r=c[a](r))||(i=r.shift(),o.push({value:i,type:a,matches:r}),s=s.slice(i.length));if(!i)break}return n?s.length:s?e.error(t):U(t,l).slice(0)},E=e.compile=function(t,e){var n,i=[],r=[],o=Y[t+" "];if(!o){for(e||(e=S(t)),n=e.length;n--;)o=b(e[n]),o[R]?i.push(o):r.push(o);o=Y(t,y(r,i)),o.selector=t}return o},T=e.select=function(t,e,n,i){var r,o,a,s,l,c="function"==typeof t&&t,h=!i&&S(t=c.selector||t);if(n=n||[],1===h.length){if(o=h[0]=h[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&x.getById&&9===e.nodeType&&D&&C.relative[o[1].type]){if(e=(C.find.ID(a.matches[0].replace(xt,Ct),e)||[])[0],!e)return n;c&&(e=e.parentNode),t=t.slice(o.shift().value.length)}for(r=pt.needsContext.test(t)?0:o.length;r--&&(a=o[r],!C.relative[s=a.type]);)if((l=C.find[s])&&(i=l(a.matches[0].replace(xt,Ct),yt.test(o[0].type)&&u(e.parentNode)||e))){if(o.splice(r,1),t=i.length&&d(o),!t)return J.apply(n,i),n;break}}return(c||E(t,h))(i,e,!D,n,yt.test(t)&&u(e.parentNode)||e),n},x.sortStable=R.split("").sort(q).join("")===R,x.detectDuplicates=!!M,O(),x.sortDetached=r(function(t){return 1&t.compareDocumentPosition(P.createElement("div"))}),r(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||o("type|href|height|width",function(t,e,n){return n?void 0:t.getAttribute(e,"type"===e.toLowerCase()?1:2)}),x.attributes&&r(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||o("value",function(t,e,n){return n||"input"!==t.nodeName.toLowerCase()?void 0:t.defaultValue}),r(function(t){return null==t.getAttribute("disabled")})||o(et,function(t,e,n){var i;return n?void 0:t[e]===!0?e.toLowerCase():(i=t.getAttributeNode(e))&&i.specified?i.value:null}),e}(t);Q.find=rt,Q.expr=rt.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=rt.uniqueSort,Q.text=rt.getText,Q.isXMLDoc=rt.isXML,Q.contains=rt.contains;var ot=Q.expr.match.needsContext,at=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,st=/^.[^:#\[\.,]*$/;Q.filter=function(t,e,n){var i=e[0];return n&&(t=":not("+t+")"),1===e.length&&1===i.nodeType?Q.find.matchesSelector(i,t)?[i]:[]:Q.find.matches(t,Q.grep(e,function(t){return 1===t.nodeType}))},Q.fn.extend({find:function(t){var e,n=this.length,i=[],r=this;if("string"!=typeof t)return this.pushStack(Q(t).filter(function(){
for(e=0;n>e;e++)if(Q.contains(r[e],this))return!0}));for(e=0;n>e;e++)Q.find(t,r[e],i);return i=this.pushStack(n>1?Q.unique(i):i),i.selector=this.selector?this.selector+" "+t:t,i},filter:function(t){return this.pushStack(i(this,t||[],!1))},not:function(t){return this.pushStack(i(this,t||[],!0))},is:function(t){return!!i(this,"string"==typeof t&&ot.test(t)?Q(t):t||[],!1).length}});var lt,ct=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,ut=Q.fn.init=function(t,e){var n,i;if(!t)return this;if("string"==typeof t){if(n="<"===t[0]&&">"===t[t.length-1]&&t.length>=3?[null,t,null]:ct.exec(t),!n||!n[1]&&e)return!e||e.jquery?(e||lt).find(t):this.constructor(e).find(t);if(n[1]){if(e=e instanceof Q?e[0]:e,Q.merge(this,Q.parseHTML(n[1],e&&e.nodeType?e.ownerDocument||e:Z,!0)),at.test(n[1])&&Q.isPlainObject(e))for(n in e)Q.isFunction(this[n])?this[n](e[n]):this.attr(n,e[n]);return this}return i=Z.getElementById(n[2]),i&&i.parentNode&&(this.length=1,this[0]=i),this.context=Z,this.selector=t,this}return t.nodeType?(this.context=this[0]=t,this.length=1,this):Q.isFunction(t)?"undefined"!=typeof lt.ready?lt.ready(t):t(Q):(void 0!==t.selector&&(this.selector=t.selector,this.context=t.context),Q.makeArray(t,this))};ut.prototype=Q.fn,lt=Q(Z);var ht=/^(?:parents|prev(?:Until|All))/,dt={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(t,e,n){for(var i=[],r=void 0!==n;(t=t[e])&&9!==t.nodeType;)if(1===t.nodeType){if(r&&Q(t).is(n))break;i.push(t)}return i},sibling:function(t,e){for(var n=[];t;t=t.nextSibling)1===t.nodeType&&t!==e&&n.push(t);return n}}),Q.fn.extend({has:function(t){var e=Q(t,this),n=e.length;return this.filter(function(){for(var t=0;n>t;t++)if(Q.contains(this,e[t]))return!0})},closest:function(t,e){for(var n,i=0,r=this.length,o=[],a=ot.test(t)||"string"!=typeof t?Q(t,e||this.context):0;r>i;i++)for(n=this[i];n&&n!==e;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Q.find.matchesSelector(n,t))){o.push(n);break}return this.pushStack(o.length>1?Q.unique(o):o)},index:function(t){return t?"string"==typeof t?q.call(Q(t),this[0]):q.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(t,e){return this.pushStack(Q.unique(Q.merge(this.get(),Q(t,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),Q.each({parent:function(t){var e=t.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return Q.dir(t,"parentNode")},parentsUntil:function(t,e,n){return Q.dir(t,"parentNode",n)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return Q.dir(t,"nextSibling")},prevAll:function(t){return Q.dir(t,"previousSibling")},nextUntil:function(t,e,n){return Q.dir(t,"nextSibling",n)},prevUntil:function(t,e,n){return Q.dir(t,"previousSibling",n)},siblings:function(t){return Q.sibling((t.parentNode||{}).firstChild,t)},children:function(t){return Q.sibling(t.firstChild)},contents:function(t){return t.contentDocument||Q.merge([],t.childNodes)}},function(t,e){Q.fn[t]=function(n,i){var r=Q.map(this,e,n);return"Until"!==t.slice(-5)&&(i=n),i&&"string"==typeof i&&(r=Q.filter(i,r)),this.length>1&&(dt[t]||Q.unique(r),ht.test(t)&&r.reverse()),this.pushStack(r)}});var ft=/\S+/g,pt={};Q.Callbacks=function(t){t="string"==typeof t?pt[t]||o(t):Q.extend({},t);var e,n,i,r,a,s,l=[],c=!t.once&&[],u=function(o){for(e=t.memory&&o,n=!0,s=r||0,r=0,a=l.length,i=!0;l&&a>s;s++)if(l[s].apply(o[0],o[1])===!1&&t.stopOnFalse){e=!1;break}i=!1,l&&(c?c.length&&u(c.shift()):e?l=[]:h.disable())},h={add:function(){if(l){var n=l.length;!function o(e){Q.each(e,function(e,n){var i=Q.type(n);"function"===i?t.unique&&h.has(n)||l.push(n):n&&n.length&&"string"!==i&&o(n)})}(arguments),i?a=l.length:e&&(r=n,u(e))}return this},remove:function(){return l&&Q.each(arguments,function(t,e){for(var n;(n=Q.inArray(e,l,n))>-1;)l.splice(n,1),i&&(a>=n&&a--,s>=n&&s--)}),this},has:function(t){return t?Q.inArray(t,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=c=e=void 0,this},disabled:function(){return!l},lock:function(){return c=void 0,e||h.disable(),this},locked:function(){return!c},fireWith:function(t,e){return!l||n&&!c||(e=e||[],e=[t,e.slice?e.slice():e],i?c.push(e):u(e)),this},fire:function(){return h.fireWith(this,arguments),this},fired:function(){return!!n}};return h},Q.extend({Deferred:function(t){var e=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",i={state:function(){return n},always:function(){return r.done(arguments).fail(arguments),this},then:function(){var t=arguments;return Q.Deferred(function(n){Q.each(e,function(e,o){var a=Q.isFunction(t[e])&&t[e];r[o[1]](function(){var t=a&&a.apply(this,arguments);t&&Q.isFunction(t.promise)?t.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===i?n.promise():this,a?[t]:arguments)})}),t=null}).promise()},promise:function(t){return null!=t?Q.extend(t,i):i}},r={};return i.pipe=i.then,Q.each(e,function(t,o){var a=o[2],s=o[3];i[o[1]]=a.add,s&&a.add(function(){n=s},e[1^t][2].disable,e[2][2].lock),r[o[0]]=function(){return r[o[0]+"With"](this===r?i:this,arguments),this},r[o[0]+"With"]=a.fireWith}),i.promise(r),t&&t.call(r,r),r},when:function(t){var e,n,i,r=0,o=z.call(arguments),a=o.length,s=1!==a||t&&Q.isFunction(t.promise)?a:0,l=1===s?t:Q.Deferred(),c=function(t,n,i){return function(r){n[t]=this,i[t]=arguments.length>1?z.call(arguments):r,i===e?l.notifyWith(n,i):--s||l.resolveWith(n,i)}};if(a>1)for(e=new Array(a),n=new Array(a),i=new Array(a);a>r;r++)o[r]&&Q.isFunction(o[r].promise)?o[r].promise().done(c(r,i,o)).fail(l.reject).progress(c(r,n,e)):--s;return s||l.resolveWith(i,o),l.promise()}});var mt;Q.fn.ready=function(t){return Q.ready.promise().done(t),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(t){t?Q.readyWait++:Q.ready(!0)},ready:function(t){(t===!0?--Q.readyWait:Q.isReady)||(Q.isReady=!0,t!==!0&&--Q.readyWait>0||(mt.resolveWith(Z,[Q]),Q.fn.triggerHandler&&(Q(Z).triggerHandler("ready"),Q(Z).off("ready"))))}}),Q.ready.promise=function(e){return mt||(mt=Q.Deferred(),"complete"===Z.readyState?setTimeout(Q.ready):(Z.addEventListener("DOMContentLoaded",a,!1),t.addEventListener("load",a,!1))),mt.promise(e)},Q.ready.promise();var gt=Q.access=function(t,e,n,i,r,o,a){var s=0,l=t.length,c=null==n;if("object"===Q.type(n)){r=!0;for(s in n)Q.access(t,e,s,n[s],!0,o,a)}else if(void 0!==i&&(r=!0,Q.isFunction(i)||(a=!0),c&&(a?(e.call(t,i),e=null):(c=e,e=function(t,e,n){return c.call(Q(t),n)})),e))for(;l>s;s++)e(t[s],n,a?i:i.call(t[s],s,e(t[s],n)));return r?t:c?e.call(t):l?e(t[0],n):o};Q.acceptData=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType},s.uid=1,s.accepts=Q.acceptData,s.prototype={key:function(t){if(!s.accepts(t))return 0;var e={},n=t[this.expando];if(!n){n=s.uid++;try{e[this.expando]={value:n},Object.defineProperties(t,e)}catch(i){e[this.expando]=n,Q.extend(t,e)}}return this.cache[n]||(this.cache[n]={}),n},set:function(t,e,n){var i,r=this.key(t),o=this.cache[r];if("string"==typeof e)o[e]=n;else if(Q.isEmptyObject(o))Q.extend(this.cache[r],e);else for(i in e)o[i]=e[i];return o},get:function(t,e){var n=this.cache[this.key(t)];return void 0===e?n:n[e]},access:function(t,e,n){var i;return void 0===e||e&&"string"==typeof e&&void 0===n?(i=this.get(t,e),void 0!==i?i:this.get(t,Q.camelCase(e))):(this.set(t,e,n),void 0!==n?n:e)},remove:function(t,e){var n,i,r,o=this.key(t),a=this.cache[o];if(void 0===e)this.cache[o]={};else{Q.isArray(e)?i=e.concat(e.map(Q.camelCase)):(r=Q.camelCase(e),e in a?i=[e,r]:(i=r,i=i in a?[i]:i.match(ft)||[])),n=i.length;for(;n--;)delete a[i[n]]}},hasData:function(t){return!Q.isEmptyObject(this.cache[t[this.expando]]||{})},discard:function(t){t[this.expando]&&delete this.cache[t[this.expando]]}};var vt=new s,bt=new s,yt=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,wt=/([A-Z])/g;Q.extend({hasData:function(t){return bt.hasData(t)||vt.hasData(t)},data:function(t,e,n){return bt.access(t,e,n)},removeData:function(t,e){bt.remove(t,e)},_data:function(t,e,n){return vt.access(t,e,n)},_removeData:function(t,e){vt.remove(t,e)}}),Q.fn.extend({data:function(t,e){var n,i,r,o=this[0],a=o&&o.attributes;if(void 0===t){if(this.length&&(r=bt.get(o),1===o.nodeType&&!vt.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&(i=a[n].name,0===i.indexOf("data-")&&(i=Q.camelCase(i.slice(5)),l(o,i,r[i])));vt.set(o,"hasDataAttrs",!0)}return r}return"object"==typeof t?this.each(function(){bt.set(this,t)}):gt(this,function(e){var n,i=Q.camelCase(t);if(o&&void 0===e){if(n=bt.get(o,t),void 0!==n)return n;if(n=bt.get(o,i),void 0!==n)return n;if(n=l(o,i,void 0),void 0!==n)return n}else this.each(function(){var n=bt.get(this,i);bt.set(this,i,e),-1!==t.indexOf("-")&&void 0!==n&&bt.set(this,t,e)})},null,e,arguments.length>1,null,!0)},removeData:function(t){return this.each(function(){bt.remove(this,t)})}}),Q.extend({queue:function(t,e,n){var i;return t?(e=(e||"fx")+"queue",i=vt.get(t,e),n&&(!i||Q.isArray(n)?i=vt.access(t,e,Q.makeArray(n)):i.push(n)),i||[]):void 0},dequeue:function(t,e){e=e||"fx";var n=Q.queue(t,e),i=n.length,r=n.shift(),o=Q._queueHooks(t,e),a=function(){Q.dequeue(t,e)};"inprogress"===r&&(r=n.shift(),i--),r&&("fx"===e&&n.unshift("inprogress"),delete o.stop,r.call(t,a,o)),!i&&o&&o.empty.fire()},_queueHooks:function(t,e){var n=e+"queueHooks";return vt.get(t,n)||vt.access(t,n,{empty:Q.Callbacks("once memory").add(function(){vt.remove(t,[e+"queue",n])})})}}),Q.fn.extend({queue:function(t,e){var n=2;return"string"!=typeof t&&(e=t,t="fx",n--),arguments.length<n?Q.queue(this[0],t):void 0===e?this:this.each(function(){var n=Q.queue(this,t,e);Q._queueHooks(this,t),"fx"===t&&"inprogress"!==n[0]&&Q.dequeue(this,t)})},dequeue:function(t){return this.each(function(){Q.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(t,e){var n,i=1,r=Q.Deferred(),o=this,a=this.length,s=function(){--i||r.resolveWith(o,[o])};for("string"!=typeof t&&(e=t,t=void 0),t=t||"fx";a--;)n=vt.get(o[a],t+"queueHooks"),n&&n.empty&&(i++,n.empty.add(s));return s(),r.promise(e)}});var xt=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ct=["Top","Right","Bottom","Left"],_t=function(t,e){return t=e||t,"none"===Q.css(t,"display")||!Q.contains(t.ownerDocument,t)},$t=/^(?:checkbox|radio)$/i;!function(){var t=Z.createDocumentFragment(),e=t.appendChild(Z.createElement("div")),n=Z.createElement("input");n.setAttribute("type","radio"),n.setAttribute("checked","checked"),n.setAttribute("name","t"),e.appendChild(n),K.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",K.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var St="undefined";K.focusinBubbles="onfocusin"in t;var Et=/^key/,Tt=/^(?:mouse|pointer|contextmenu)|click/,kt=/^(?:focusinfocus|focusoutblur)$/,At=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(t,e,n,i,r){var o,a,s,l,c,u,h,d,f,p,m,g=vt.get(t);if(g)for(n.handler&&(o=n,n=o.handler,r=o.selector),n.guid||(n.guid=Q.guid++),(l=g.events)||(l=g.events={}),(a=g.handle)||(a=g.handle=function(e){return typeof Q!==St&&Q.event.triggered!==e.type?Q.event.dispatch.apply(t,arguments):void 0}),e=(e||"").match(ft)||[""],c=e.length;c--;)s=At.exec(e[c])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f&&(h=Q.event.special[f]||{},f=(r?h.delegateType:h.bindType)||f,h=Q.event.special[f]||{},u=Q.extend({type:f,origType:m,data:i,handler:n,guid:n.guid,selector:r,needsContext:r&&Q.expr.match.needsContext.test(r),namespace:p.join(".")},o),(d=l[f])||(d=l[f]=[],d.delegateCount=0,h.setup&&h.setup.call(t,i,p,a)!==!1||t.addEventListener&&t.addEventListener(f,a,!1)),h.add&&(h.add.call(t,u),u.handler.guid||(u.handler.guid=n.guid)),r?d.splice(d.delegateCount++,0,u):d.push(u),Q.event.global[f]=!0)},remove:function(t,e,n,i,r){var o,a,s,l,c,u,h,d,f,p,m,g=vt.hasData(t)&&vt.get(t);if(g&&(l=g.events)){for(e=(e||"").match(ft)||[""],c=e.length;c--;)if(s=At.exec(e[c])||[],f=m=s[1],p=(s[2]||"").split(".").sort(),f){for(h=Q.event.special[f]||{},f=(i?h.delegateType:h.bindType)||f,d=l[f]||[],s=s[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=d.length;o--;)u=d[o],!r&&m!==u.origType||n&&n.guid!==u.guid||s&&!s.test(u.namespace)||i&&i!==u.selector&&("**"!==i||!u.selector)||(d.splice(o,1),u.selector&&d.delegateCount--,h.remove&&h.remove.call(t,u));a&&!d.length&&(h.teardown&&h.teardown.call(t,p,g.handle)!==!1||Q.removeEvent(t,f,g.handle),delete l[f])}else for(f in l)Q.event.remove(t,f+e[c],n,i,!0);Q.isEmptyObject(l)&&(delete g.handle,vt.remove(t,"events"))}},trigger:function(e,n,i,r){var o,a,s,l,c,u,h,d=[i||Z],f=G.call(e,"type")?e.type:e,p=G.call(e,"namespace")?e.namespace.split("."):[];if(a=s=i=i||Z,3!==i.nodeType&&8!==i.nodeType&&!kt.test(f+Q.event.triggered)&&(f.indexOf(".")>=0&&(p=f.split("."),f=p.shift(),p.sort()),c=f.indexOf(":")<0&&"on"+f,e=e[Q.expando]?e:new Q.Event(f,"object"==typeof e&&e),e.isTrigger=r?2:3,e.namespace=p.join("."),e.namespace_re=e.namespace?new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=i),n=null==n?[e]:Q.makeArray(n,[e]),h=Q.event.special[f]||{},r||!h.trigger||h.trigger.apply(i,n)!==!1)){if(!r&&!h.noBubble&&!Q.isWindow(i)){for(l=h.delegateType||f,kt.test(l+f)||(a=a.parentNode);a;a=a.parentNode)d.push(a),s=a;s===(i.ownerDocument||Z)&&d.push(s.defaultView||s.parentWindow||t)}for(o=0;(a=d[o++])&&!e.isPropagationStopped();)e.type=o>1?l:h.bindType||f,u=(vt.get(a,"events")||{})[e.type]&&vt.get(a,"handle"),u&&u.apply(a,n),u=c&&a[c],u&&u.apply&&Q.acceptData(a)&&(e.result=u.apply(a,n),e.result===!1&&e.preventDefault());return e.type=f,r||e.isDefaultPrevented()||h._default&&h._default.apply(d.pop(),n)!==!1||!Q.acceptData(i)||c&&Q.isFunction(i[f])&&!Q.isWindow(i)&&(s=i[c],s&&(i[c]=null),Q.event.triggered=f,i[f](),Q.event.triggered=void 0,s&&(i[c]=s)),e.result}},dispatch:function(t){t=Q.event.fix(t);var e,n,i,r,o,a=[],s=z.call(arguments),l=(vt.get(this,"events")||{})[t.type]||[],c=Q.event.special[t.type]||{};if(s[0]=t,t.delegateTarget=this,!c.preDispatch||c.preDispatch.call(this,t)!==!1){for(a=Q.event.handlers.call(this,t,l),e=0;(r=a[e++])&&!t.isPropagationStopped();)for(t.currentTarget=r.elem,n=0;(o=r.handlers[n++])&&!t.isImmediatePropagationStopped();)(!t.namespace_re||t.namespace_re.test(o.namespace))&&(t.handleObj=o,t.data=o.data,i=((Q.event.special[o.origType]||{}).handle||o.handler).apply(r.elem,s),void 0!==i&&(t.result=i)===!1&&(t.preventDefault(),t.stopPropagation()));return c.postDispatch&&c.postDispatch.call(this,t),t.result}},handlers:function(t,e){var n,i,r,o,a=[],s=e.delegateCount,l=t.target;if(s&&l.nodeType&&(!t.button||"click"!==t.type))for(;l!==this;l=l.parentNode||this)if(l.disabled!==!0||"click"!==t.type){for(i=[],n=0;s>n;n++)o=e[n],r=o.selector+" ",void 0===i[r]&&(i[r]=o.needsContext?Q(r,this).index(l)>=0:Q.find(r,this,null,[l]).length),i[r]&&i.push(o);i.length&&a.push({elem:l,handlers:i})}return s<e.length&&a.push({elem:this,handlers:e.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(t,e){return null==t.which&&(t.which=null!=e.charCode?e.charCode:e.keyCode),t}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(t,e){var n,i,r,o=e.button;return null==t.pageX&&null!=e.clientX&&(n=t.target.ownerDocument||Z,i=n.documentElement,r=n.body,t.pageX=e.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),t.pageY=e.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)),t.which||void 0===o||(t.which=1&o?1:2&o?3:4&o?2:0),t}},fix:function(t){if(t[Q.expando])return t;var e,n,i,r=t.type,o=t,a=this.fixHooks[r];for(a||(this.fixHooks[r]=a=Tt.test(r)?this.mouseHooks:Et.test(r)?this.keyHooks:{}),i=a.props?this.props.concat(a.props):this.props,t=new Q.Event(o),e=i.length;e--;)n=i[e],t[n]=o[n];return t.target||(t.target=Z),3===t.target.nodeType&&(t.target=t.target.parentNode),a.filter?a.filter(t,o):t},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==h()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(t){return Q.nodeName(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}},simulate:function(t,e,n,i){var r=Q.extend(new Q.Event,n,{type:t,isSimulated:!0,originalEvent:{}});i?Q.event.trigger(r,null,e):Q.event.dispatch.call(e,r),r.isDefaultPrevented()&&n.preventDefault()}},Q.removeEvent=function(t,e,n){t.removeEventListener&&t.removeEventListener(e,n,!1)},Q.Event=function(t,e){return this instanceof Q.Event?(t&&t.type?(this.originalEvent=t,this.type=t.type,this.isDefaultPrevented=t.defaultPrevented||void 0===t.defaultPrevented&&t.returnValue===!1?c:u):this.type=t,e&&Q.extend(this,e),this.timeStamp=t&&t.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(t,e)},Q.Event.prototype={isDefaultPrevented:u,isPropagationStopped:u,isImmediatePropagationStopped:u,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&t.preventDefault&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&t.stopPropagation&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&t.stopImmediatePropagation&&t.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(t,e){Q.event.special[t]={delegateType:e,bindType:e,handle:function(t){var n,i=this,r=t.relatedTarget,o=t.handleObj;return(!r||r!==i&&!Q.contains(i,r))&&(t.type=o.origType,n=o.handler.apply(this,arguments),t.type=e),n}}}),K.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(t,e){var n=function(t){Q.event.simulate(e,t.target,Q.event.fix(t),!0)};Q.event.special[e]={setup:function(){var i=this.ownerDocument||this,r=vt.access(i,e);r||i.addEventListener(t,n,!0),vt.access(i,e,(r||0)+1)},teardown:function(){var i=this.ownerDocument||this,r=vt.access(i,e)-1;r?vt.access(i,e,r):(i.removeEventListener(t,n,!0),vt.remove(i,e))}}}),Q.fn.extend({on:function(t,e,n,i,r){var o,a;if("object"==typeof t){"string"!=typeof e&&(n=n||e,e=void 0);for(a in t)this.on(a,e,n,t[a],r);return this}if(null==n&&null==i?(i=e,n=e=void 0):null==i&&("string"==typeof e?(i=n,n=void 0):(i=n,n=e,e=void 0)),i===!1)i=u;else if(!i)return this;return 1===r&&(o=i,i=function(t){return Q().off(t),o.apply(this,arguments)},i.guid=o.guid||(o.guid=Q.guid++)),this.each(function(){Q.event.add(this,t,i,n,e)})},one:function(t,e,n,i){return this.on(t,e,n,i,1)},off:function(t,e,n){var i,r;if(t&&t.preventDefault&&t.handleObj)return i=t.handleObj,Q(t.delegateTarget).off(i.namespace?i.origType+"."+i.namespace:i.origType,i.selector,i.handler),this;if("object"==typeof t){for(r in t)this.off(r,e,t[r]);return this}return(e===!1||"function"==typeof e)&&(n=e,e=void 0),n===!1&&(n=u),this.each(function(){Q.event.remove(this,t,n,e)})},trigger:function(t,e){return this.each(function(){Q.event.trigger(t,e,this)})},triggerHandler:function(t,e){var n=this[0];return n?Q.event.trigger(t,e,n,!0):void 0}});var Mt=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ot=/<([\w:]+)/,Pt=/<|&#?\w+;/,It=/<(?:script|style|link)/i,Dt=/checked\s*(?:[^=]|=\s*.checked.)/i,Nt=/^$|\/(?:java|ecma)script/i,Lt=/^true\/(.*)/,Ft=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,jt={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};jt.optgroup=jt.option,jt.tbody=jt.tfoot=jt.colgroup=jt.caption=jt.thead,jt.th=jt.td,Q.extend({clone:function(t,e,n){var i,r,o,a,s=t.cloneNode(!0),l=Q.contains(t.ownerDocument,t);if(!(K.noCloneChecked||1!==t.nodeType&&11!==t.nodeType||Q.isXMLDoc(t)))for(a=v(s),o=v(t),i=0,r=o.length;r>i;i++)b(o[i],a[i]);if(e)if(n)for(o=o||v(t),a=a||v(s),i=0,r=o.length;r>i;i++)g(o[i],a[i]);else g(t,s);return a=v(s,"script"),a.length>0&&m(a,!l&&v(t,"script")),s},buildFragment:function(t,e,n,i){for(var r,o,a,s,l,c,u=e.createDocumentFragment(),h=[],d=0,f=t.length;f>d;d++)if(r=t[d],r||0===r)if("object"===Q.type(r))Q.merge(h,r.nodeType?[r]:r);else if(Pt.test(r)){for(o=o||u.appendChild(e.createElement("div")),a=(Ot.exec(r)||["",""])[1].toLowerCase(),s=jt[a]||jt._default,o.innerHTML=s[1]+r.replace(Mt,"<$1></$2>")+s[2],c=s[0];c--;)o=o.lastChild;Q.merge(h,o.childNodes),o=u.firstChild,o.textContent=""}else h.push(e.createTextNode(r));for(u.textContent="",d=0;r=h[d++];)if((!i||-1===Q.inArray(r,i))&&(l=Q.contains(r.ownerDocument,r),o=v(u.appendChild(r),"script"),l&&m(o),n))for(c=0;r=o[c++];)Nt.test(r.type||"")&&n.push(r);return u},cleanData:function(t){for(var e,n,i,r,o=Q.event.special,a=0;void 0!==(n=t[a]);a++){if(Q.acceptData(n)&&(r=n[vt.expando],r&&(e=vt.cache[r]))){if(e.events)for(i in e.events)o[i]?Q.event.remove(n,i):Q.removeEvent(n,i,e.handle);vt.cache[r]&&delete vt.cache[r]}delete bt.cache[n[bt.expando]]}}}),Q.fn.extend({text:function(t){return gt(this,function(t){return void 0===t?Q.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=t)})},null,t,arguments.length)},append:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.appendChild(t)}})},prepend:function(){return this.domManip(arguments,function(t){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=d(this,t);e.insertBefore(t,e.firstChild)}})},before:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return this.domManip(arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},remove:function(t,e){for(var n,i=t?Q.filter(t,this):this,r=0;null!=(n=i[r]);r++)e||1!==n.nodeType||Q.cleanData(v(n)),n.parentNode&&(e&&Q.contains(n.ownerDocument,n)&&m(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var t,e=0;null!=(t=this[e]);e++)1===t.nodeType&&(Q.cleanData(v(t,!1)),t.textContent="");return this},clone:function(t,e){return t=null==t?!1:t,e=null==e?t:e,this.map(function(){return Q.clone(this,t,e)})},html:function(t){return gt(this,function(t){var e=this[0]||{},n=0,i=this.length;if(void 0===t&&1===e.nodeType)return e.innerHTML;if("string"==typeof t&&!It.test(t)&&!jt[(Ot.exec(t)||["",""])[1].toLowerCase()]){t=t.replace(Mt,"<$1></$2>");try{for(;i>n;n++)e=this[n]||{},1===e.nodeType&&(Q.cleanData(v(e,!1)),e.innerHTML=t);e=0}catch(r){}}e&&this.empty().append(t)},null,t,arguments.length)},replaceWith:function(){var t=arguments[0];return this.domManip(arguments,function(e){t=this.parentNode,Q.cleanData(v(this)),t&&t.replaceChild(e,this)}),t&&(t.length||t.nodeType)?this:this.remove()},detach:function(t){return this.remove(t,!0)},domManip:function(t,e){t=U.apply([],t);var n,i,r,o,a,s,l=0,c=this.length,u=this,h=c-1,d=t[0],m=Q.isFunction(d);if(m||c>1&&"string"==typeof d&&!K.checkClone&&Dt.test(d))return this.each(function(n){var i=u.eq(n);m&&(t[0]=d.call(this,n,i.html())),i.domManip(t,e)});if(c&&(n=Q.buildFragment(t,this[0].ownerDocument,!1,this),i=n.firstChild,1===n.childNodes.length&&(n=i),i)){for(r=Q.map(v(n,"script"),f),o=r.length;c>l;l++)a=n,l!==h&&(a=Q.clone(a,!0,!0),o&&Q.merge(r,v(a,"script"))),e.call(this[l],a,l);if(o)for(s=r[r.length-1].ownerDocument,Q.map(r,p),l=0;o>l;l++)a=r[l],Nt.test(a.type||"")&&!vt.access(a,"globalEval")&&Q.contains(s,a)&&(a.src?Q._evalUrl&&Q._evalUrl(a.src):Q.globalEval(a.textContent.replace(Ft,"")))}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(t,e){Q.fn[t]=function(t){for(var n,i=[],r=Q(t),o=r.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),Q(r[a])[e](n),Y.apply(i,n.get());return this.pushStack(i)}});var Rt,Ht={},Bt=/^margin/,Wt=new RegExp("^("+xt+")(?!px)[a-z%]+$","i"),zt=function(e){return e.ownerDocument.defaultView.opener?e.ownerDocument.defaultView.getComputedStyle(e,null):t.getComputedStyle(e,null)};!function(){function e(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",r.appendChild(o);var e=t.getComputedStyle(a,null);n="1%"!==e.top,i="4px"===e.width,r.removeChild(o)}var n,i,r=Z.documentElement,o=Z.createElement("div"),a=Z.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",K.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),t.getComputedStyle&&Q.extend(K,{pixelPosition:function(){return e(),n},boxSizingReliable:function(){return null==i&&e(),i},reliableMarginRight:function(){var e,n=a.appendChild(Z.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",r.appendChild(o),e=!parseFloat(t.getComputedStyle(n,null).marginRight),r.removeChild(o),a.removeChild(n),e}}))}(),Q.swap=function(t,e,n,i){var r,o,a={};for(o in e)a[o]=t.style[o],t.style[o]=e[o];r=n.apply(t,i||[]);for(o in e)t.style[o]=a[o];return r};var Ut=/^(none|table(?!-c[ea]).+)/,Yt=new RegExp("^("+xt+")(.*)$","i"),qt=new RegExp("^([+-])=("+xt+")","i"),Vt={position:"absolute",visibility:"hidden",display:"block"},Xt={letterSpacing:"0",fontWeight:"400"},Gt=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(t,e){if(e){var n=x(t,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(t,e,n,i){if(t&&3!==t.nodeType&&8!==t.nodeType&&t.style){var r,o,a,s=Q.camelCase(e),l=t.style;return e=Q.cssProps[s]||(Q.cssProps[s]=_(l,s)),a=Q.cssHooks[e]||Q.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(r=a.get(t,!1,i))?r:l[e]:(o=typeof n,"string"===o&&(r=qt.exec(n))&&(n=(r[1]+1)*r[2]+parseFloat(Q.css(t,e)),o="number"),void(null!=n&&n===n&&("number"!==o||Q.cssNumber[s]||(n+="px"),K.clearCloneStyle||""!==n||0!==e.indexOf("background")||(l[e]="inherit"),a&&"set"in a&&void 0===(n=a.set(t,n,i))||(l[e]=n))))}},css:function(t,e,n,i){var r,o,a,s=Q.camelCase(e);return e=Q.cssProps[s]||(Q.cssProps[s]=_(t.style,s)),a=Q.cssHooks[e]||Q.cssHooks[s],a&&"get"in a&&(r=a.get(t,!0,n)),void 0===r&&(r=x(t,e,i)),"normal"===r&&e in Xt&&(r=Xt[e]),""===n||n?(o=parseFloat(r),n===!0||Q.isNumeric(o)?o||0:r):r}}),Q.each(["height","width"],function(t,e){Q.cssHooks[e]={get:function(t,n,i){return n?Ut.test(Q.css(t,"display"))&&0===t.offsetWidth?Q.swap(t,Vt,function(){return E(t,e,i)}):E(t,e,i):void 0},set:function(t,n,i){var r=i&&zt(t);return $(t,n,i?S(t,e,i,"border-box"===Q.css(t,"boxSizing",!1,r),r):0)}}}),Q.cssHooks.marginRight=C(K.reliableMarginRight,function(t,e){return e?Q.swap(t,{display:"inline-block"},x,[t,"marginRight"]):void 0}),Q.each({margin:"",padding:"",border:"Width"},function(t,e){Q.cssHooks[t+e]={expand:function(n){for(var i=0,r={},o="string"==typeof n?n.split(" "):[n];4>i;i++)r[t+Ct[i]+e]=o[i]||o[i-2]||o[0];return r}},Bt.test(t)||(Q.cssHooks[t+e].set=$)}),Q.fn.extend({css:function(t,e){return gt(this,function(t,e,n){var i,r,o={},a=0;if(Q.isArray(e)){for(i=zt(t),r=e.length;r>a;a++)o[e[a]]=Q.css(t,e[a],!1,i);return o}return void 0!==n?Q.style(t,e,n):Q.css(t,e)},t,e,arguments.length>1)},show:function(){return T(this,!0)},hide:function(){return T(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){_t(this)?Q(this).show():Q(this).hide()})}}),Q.Tween=k,k.prototype={constructor:k,init:function(t,e,n,i,r,o){this.elem=t,this.prop=n,this.easing=r||"swing",this.options=e,this.start=this.now=this.cur(),this.end=i,this.unit=o||(Q.cssNumber[n]?"":"px")},cur:function(){var t=k.propHooks[this.prop];return t&&t.get?t.get(this):k.propHooks._default.get(this)},run:function(t){var e,n=k.propHooks[this.prop];return this.pos=e=this.options.duration?Q.easing[this.easing](t,this.options.duration*t,0,1,this.options.duration):t,this.now=(this.end-this.start)*e+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):k.propHooks._default.set(this),this}},k.prototype.init.prototype=k.prototype,k.propHooks={_default:{get:function(t){var e;return null==t.elem[t.prop]||t.elem.style&&null!=t.elem.style[t.prop]?(e=Q.css(t.elem,t.prop,""),e&&"auto"!==e?e:0):t.elem[t.prop]},set:function(t){Q.fx.step[t.prop]?Q.fx.step[t.prop](t):t.elem.style&&(null!=t.elem.style[Q.cssProps[t.prop]]||Q.cssHooks[t.prop])?Q.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}},k.propHooks.scrollTop=k.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},Q.easing={linear:function(t){return t},swing:function(t){return.5-Math.cos(t*Math.PI)/2}},Q.fx=k.prototype.init,Q.fx.step={};var Kt,Zt,Jt=/^(?:toggle|show|hide)$/,Qt=new RegExp("^(?:([+-])=|)("+xt+")([a-z%]*)$","i"),te=/queueHooks$/,ee=[P],ne={"*":[function(t,e){var n=this.createTween(t,e),i=n.cur(),r=Qt.exec(e),o=r&&r[3]||(Q.cssNumber[t]?"":"px"),a=(Q.cssNumber[t]||"px"!==o&&+i)&&Qt.exec(Q.css(n.elem,t)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],r=r||[],a=+i||1;do s=s||".5",a/=s,Q.style(n.elem,t,a+o);while(s!==(s=n.cur()/i)&&1!==s&&--l)}return r&&(a=n.start=+a||+i||0,n.unit=o,n.end=r[1]?a+(r[1]+1)*r[2]:+r[2]),n}]};Q.Animation=Q.extend(D,{tweener:function(t,e){Q.isFunction(t)?(e=t,t=["*"]):t=t.split(" ");for(var n,i=0,r=t.length;r>i;i++)n=t[i],ne[n]=ne[n]||[],ne[n].unshift(e)},prefilter:function(t,e){e?ee.unshift(t):ee.push(t)}}),Q.speed=function(t,e,n){var i=t&&"object"==typeof t?Q.extend({},t):{complete:n||!n&&e||Q.isFunction(t)&&t,duration:t,easing:n&&e||e&&!Q.isFunction(e)&&e};return i.duration=Q.fx.off?0:"number"==typeof i.duration?i.duration:i.duration in Q.fx.speeds?Q.fx.speeds[i.duration]:Q.fx.speeds._default,(null==i.queue||i.queue===!0)&&(i.queue="fx"),i.old=i.complete,i.complete=function(){Q.isFunction(i.old)&&i.old.call(this),i.queue&&Q.dequeue(this,i.queue)},i},Q.fn.extend({fadeTo:function(t,e,n,i){return this.filter(_t).css("opacity",0).show().end().animate({opacity:e},t,n,i)},animate:function(t,e,n,i){var r=Q.isEmptyObject(t),o=Q.speed(e,n,i),a=function(){var e=D(this,Q.extend({},t),o);(r||vt.get(this,"finish"))&&e.stop(!0)};return a.finish=a,r||o.queue===!1?this.each(a):this.queue(o.queue,a)},stop:function(t,e,n){var i=function(t){var e=t.stop;delete t.stop,e(n)};return"string"!=typeof t&&(n=e,e=t,t=void 0),e&&t!==!1&&this.queue(t||"fx",[]),this.each(function(){var e=!0,r=null!=t&&t+"queueHooks",o=Q.timers,a=vt.get(this);if(r)a[r]&&a[r].stop&&i(a[r]);else for(r in a)a[r]&&a[r].stop&&te.test(r)&&i(a[r]);for(r=o.length;r--;)o[r].elem!==this||null!=t&&o[r].queue!==t||(o[r].anim.stop(n),e=!1,o.splice(r,1));(e||!n)&&Q.dequeue(this,t)})},finish:function(t){return t!==!1&&(t=t||"fx"),this.each(function(){var e,n=vt.get(this),i=n[t+"queue"],r=n[t+"queueHooks"],o=Q.timers,a=i?i.length:0;for(n.finish=!0,Q.queue(this,t,[]),r&&r.stop&&r.stop.call(this,!0),e=o.length;e--;)o[e].elem===this&&o[e].queue===t&&(o[e].anim.stop(!0),
o.splice(e,1));for(e=0;a>e;e++)i[e]&&i[e].finish&&i[e].finish.call(this);delete n.finish})}}),Q.each(["toggle","show","hide"],function(t,e){var n=Q.fn[e];Q.fn[e]=function(t,i,r){return null==t||"boolean"==typeof t?n.apply(this,arguments):this.animate(M(e,!0),t,i,r)}}),Q.each({slideDown:M("show"),slideUp:M("hide"),slideToggle:M("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(t,e){Q.fn[t]=function(t,n,i){return this.animate(e,t,n,i)}}),Q.timers=[],Q.fx.tick=function(){var t,e=0,n=Q.timers;for(Kt=Q.now();e<n.length;e++)t=n[e],t()||n[e]!==t||n.splice(e--,1);n.length||Q.fx.stop(),Kt=void 0},Q.fx.timer=function(t){Q.timers.push(t),t()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){Zt||(Zt=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Zt),Zt=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(t,e){return t=Q.fx?Q.fx.speeds[t]||t:t,e=e||"fx",this.queue(e,function(e,n){var i=setTimeout(e,t);n.stop=function(){clearTimeout(i)}})},function(){var t=Z.createElement("input"),e=Z.createElement("select"),n=e.appendChild(Z.createElement("option"));t.type="checkbox",K.checkOn=""!==t.value,K.optSelected=n.selected,e.disabled=!0,K.optDisabled=!n.disabled,t=Z.createElement("input"),t.value="t",t.type="radio",K.radioValue="t"===t.value}();var ie,re,oe=Q.expr.attrHandle;Q.fn.extend({attr:function(t,e){return gt(this,Q.attr,t,e,arguments.length>1)},removeAttr:function(t){return this.each(function(){Q.removeAttr(this,t)})}}),Q.extend({attr:function(t,e,n){var i,r,o=t.nodeType;return t&&3!==o&&8!==o&&2!==o?typeof t.getAttribute===St?Q.prop(t,e,n):(1===o&&Q.isXMLDoc(t)||(e=e.toLowerCase(),i=Q.attrHooks[e]||(Q.expr.match.bool.test(e)?re:ie)),void 0===n?i&&"get"in i&&null!==(r=i.get(t,e))?r:(r=Q.find.attr(t,e),null==r?void 0:r):null!==n?i&&"set"in i&&void 0!==(r=i.set(t,n,e))?r:(t.setAttribute(e,n+""),n):void Q.removeAttr(t,e)):void 0},removeAttr:function(t,e){var n,i,r=0,o=e&&e.match(ft);if(o&&1===t.nodeType)for(;n=o[r++];)i=Q.propFix[n]||n,Q.expr.match.bool.test(n)&&(t[i]=!1),t.removeAttribute(n)},attrHooks:{type:{set:function(t,e){if(!K.radioValue&&"radio"===e&&Q.nodeName(t,"input")){var n=t.value;return t.setAttribute("type",e),n&&(t.value=n),e}}}}}),re={set:function(t,e,n){return e===!1?Q.removeAttr(t,n):t.setAttribute(n,n),n}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(t,e){var n=oe[e]||Q.find.attr;oe[e]=function(t,e,i){var r,o;return i||(o=oe[e],oe[e]=r,r=null!=n(t,e,i)?e.toLowerCase():null,oe[e]=o),r}});var ae=/^(?:input|select|textarea|button)$/i;Q.fn.extend({prop:function(t,e){return gt(this,Q.prop,t,e,arguments.length>1)},removeProp:function(t){return this.each(function(){delete this[Q.propFix[t]||t]})}}),Q.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(t,e,n){var i,r,o,a=t.nodeType;return t&&3!==a&&8!==a&&2!==a?(o=1!==a||!Q.isXMLDoc(t),o&&(e=Q.propFix[e]||e,r=Q.propHooks[e]),void 0!==n?r&&"set"in r&&void 0!==(i=r.set(t,n,e))?i:t[e]=n:r&&"get"in r&&null!==(i=r.get(t,e))?i:t[e]):void 0},propHooks:{tabIndex:{get:function(t){return t.hasAttribute("tabindex")||ae.test(t.nodeName)||t.href?t.tabIndex:-1}}}}),K.optSelected||(Q.propHooks.selected={get:function(t){var e=t.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var se=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(t){var e,n,i,r,o,a,s="string"==typeof t&&t,l=0,c=this.length;if(Q.isFunction(t))return this.each(function(e){Q(this).addClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(ft)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):" ")){for(o=0;r=e[o++];)i.indexOf(" "+r+" ")<0&&(i+=r+" ");a=Q.trim(i),n.className!==a&&(n.className=a)}return this},removeClass:function(t){var e,n,i,r,o,a,s=0===arguments.length||"string"==typeof t&&t,l=0,c=this.length;if(Q.isFunction(t))return this.each(function(e){Q(this).removeClass(t.call(this,e,this.className))});if(s)for(e=(t||"").match(ft)||[];c>l;l++)if(n=this[l],i=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(se," "):"")){for(o=0;r=e[o++];)for(;i.indexOf(" "+r+" ")>=0;)i=i.replace(" "+r+" "," ");a=t?Q.trim(i):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(t,e){var n=typeof t;return"boolean"==typeof e&&"string"===n?e?this.addClass(t):this.removeClass(t):this.each(Q.isFunction(t)?function(n){Q(this).toggleClass(t.call(this,n,this.className,e),e)}:function(){if("string"===n)for(var e,i=0,r=Q(this),o=t.match(ft)||[];e=o[i++];)r.hasClass(e)?r.removeClass(e):r.addClass(e);else(n===St||"boolean"===n)&&(this.className&&vt.set(this,"__className__",this.className),this.className=this.className||t===!1?"":vt.get(this,"__className__")||"")})},hasClass:function(t){for(var e=" "+t+" ",n=0,i=this.length;i>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(se," ").indexOf(e)>=0)return!0;return!1}});var le=/\r/g;Q.fn.extend({val:function(t){var e,n,i,r=this[0];return arguments.length?(i=Q.isFunction(t),this.each(function(n){var r;1===this.nodeType&&(r=i?t.call(this,n,Q(this).val()):t,null==r?r="":"number"==typeof r?r+="":Q.isArray(r)&&(r=Q.map(r,function(t){return null==t?"":t+""})),e=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()],e&&"set"in e&&void 0!==e.set(this,r,"value")||(this.value=r))})):r?(e=Q.valHooks[r.type]||Q.valHooks[r.nodeName.toLowerCase()],e&&"get"in e&&void 0!==(n=e.get(r,"value"))?n:(n=r.value,"string"==typeof n?n.replace(le,""):null==n?"":n)):void 0}}),Q.extend({valHooks:{option:{get:function(t){var e=Q.find.attr(t,"value");return null!=e?e:Q.trim(Q.text(t))}},select:{get:function(t){for(var e,n,i=t.options,r=t.selectedIndex,o="select-one"===t.type||0>r,a=o?null:[],s=o?r+1:i.length,l=0>r?s:o?r:0;s>l;l++)if(n=i[l],!(!n.selected&&l!==r||(K.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Q.nodeName(n.parentNode,"optgroup"))){if(e=Q(n).val(),o)return e;a.push(e)}return a},set:function(t,e){for(var n,i,r=t.options,o=Q.makeArray(e),a=r.length;a--;)i=r[a],(i.selected=Q.inArray(i.value,o)>=0)&&(n=!0);return n||(t.selectedIndex=-1),o}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(t,e){return Q.isArray(e)?t.checked=Q.inArray(Q(t).val(),e)>=0:void 0}},K.checkOn||(Q.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(t,e){Q.fn[e]=function(t,n){return arguments.length>0?this.on(e,null,t,n):this.trigger(e)}}),Q.fn.extend({hover:function(t,e){return this.mouseenter(t).mouseleave(e||t)},bind:function(t,e,n){return this.on(t,null,e,n)},unbind:function(t,e){return this.off(t,null,e)},delegate:function(t,e,n,i){return this.on(e,t,n,i)},undelegate:function(t,e,n){return 1===arguments.length?this.off(t,"**"):this.off(e,t||"**",n)}});var ce=Q.now(),ue=/\?/;Q.parseJSON=function(t){return JSON.parse(t+"")},Q.parseXML=function(t){var e,n;if(!t||"string"!=typeof t)return null;try{n=new DOMParser,e=n.parseFromString(t,"text/xml")}catch(i){e=void 0}return(!e||e.getElementsByTagName("parsererror").length)&&Q.error("Invalid XML: "+t),e};var he=/#.*$/,de=/([?&])_=[^&]*/,fe=/^(.*?):[ \t]*([^\r\n]*)$/gm,pe=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,me=/^(?:GET|HEAD)$/,ge=/^\/\//,ve=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,be={},ye={},we="*/".concat("*"),xe=t.location.href,Ce=ve.exec(xe.toLowerCase())||[];Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:xe,type:"GET",isLocal:pe.test(Ce[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":we,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(t,e){return e?F(F(t,Q.ajaxSettings),e):F(Q.ajaxSettings,t)},ajaxPrefilter:N(be),ajaxTransport:N(ye),ajax:function(t,e){function n(t,e,n,a){var l,u,v,b,w,C=e;2!==y&&(y=2,s&&clearTimeout(s),i=void 0,o=a||"",x.readyState=t>0?4:0,l=t>=200&&300>t||304===t,n&&(b=j(h,x,n)),b=R(h,b,x,l),l?(h.ifModified&&(w=x.getResponseHeader("Last-Modified"),w&&(Q.lastModified[r]=w),w=x.getResponseHeader("etag"),w&&(Q.etag[r]=w)),204===t||"HEAD"===h.type?C="nocontent":304===t?C="notmodified":(C=b.state,u=b.data,v=b.error,l=!v)):(v=C,(t||!C)&&(C="error",0>t&&(t=0))),x.status=t,x.statusText=(e||C)+"",l?p.resolveWith(d,[u,C,x]):p.rejectWith(d,[x,C,v]),x.statusCode(g),g=void 0,c&&f.trigger(l?"ajaxSuccess":"ajaxError",[x,h,l?u:v]),m.fireWith(d,[x,C]),c&&(f.trigger("ajaxComplete",[x,h]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof t&&(e=t,t=void 0),e=e||{};var i,r,o,a,s,l,c,u,h=Q.ajaxSetup({},e),d=h.context||h,f=h.context&&(d.nodeType||d.jquery)?Q(d):Q.event,p=Q.Deferred(),m=Q.Callbacks("once memory"),g=h.statusCode||{},v={},b={},y=0,w="canceled",x={readyState:0,getResponseHeader:function(t){var e;if(2===y){if(!a)for(a={};e=fe.exec(o);)a[e[1].toLowerCase()]=e[2];e=a[t.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return 2===y?o:null},setRequestHeader:function(t,e){var n=t.toLowerCase();return y||(t=b[n]=b[n]||t,v[t]=e),this},overrideMimeType:function(t){return y||(h.mimeType=t),this},statusCode:function(t){var e;if(t)if(2>y)for(e in t)g[e]=[g[e],t[e]];else x.always(t[x.status]);return this},abort:function(t){var e=t||w;return i&&i.abort(e),n(0,e),this}};if(p.promise(x).complete=m.add,x.success=x.done,x.error=x.fail,h.url=((t||h.url||xe)+"").replace(he,"").replace(ge,Ce[1]+"//"),h.type=e.method||e.type||h.method||h.type,h.dataTypes=Q.trim(h.dataType||"*").toLowerCase().match(ft)||[""],null==h.crossDomain&&(l=ve.exec(h.url.toLowerCase()),h.crossDomain=!(!l||l[1]===Ce[1]&&l[2]===Ce[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(Ce[3]||("http:"===Ce[1]?"80":"443")))),h.data&&h.processData&&"string"!=typeof h.data&&(h.data=Q.param(h.data,h.traditional)),L(be,h,e,x),2===y)return x;c=Q.event&&h.global,c&&0===Q.active++&&Q.event.trigger("ajaxStart"),h.type=h.type.toUpperCase(),h.hasContent=!me.test(h.type),r=h.url,h.hasContent||(h.data&&(r=h.url+=(ue.test(r)?"&":"?")+h.data,delete h.data),h.cache===!1&&(h.url=de.test(r)?r.replace(de,"$1_="+ce++):r+(ue.test(r)?"&":"?")+"_="+ce++)),h.ifModified&&(Q.lastModified[r]&&x.setRequestHeader("If-Modified-Since",Q.lastModified[r]),Q.etag[r]&&x.setRequestHeader("If-None-Match",Q.etag[r])),(h.data&&h.hasContent&&h.contentType!==!1||e.contentType)&&x.setRequestHeader("Content-Type",h.contentType),x.setRequestHeader("Accept",h.dataTypes[0]&&h.accepts[h.dataTypes[0]]?h.accepts[h.dataTypes[0]]+("*"!==h.dataTypes[0]?", "+we+"; q=0.01":""):h.accepts["*"]);for(u in h.headers)x.setRequestHeader(u,h.headers[u]);if(h.beforeSend&&(h.beforeSend.call(d,x,h)===!1||2===y))return x.abort();w="abort";for(u in{success:1,error:1,complete:1})x[u](h[u]);if(i=L(ye,h,e,x)){x.readyState=1,c&&f.trigger("ajaxSend",[x,h]),h.async&&h.timeout>0&&(s=setTimeout(function(){x.abort("timeout")},h.timeout));try{y=1,i.send(v,n)}catch(C){if(!(2>y))throw C;n(-1,C)}}else n(-1,"No Transport");return x},getJSON:function(t,e,n){return Q.get(t,e,n,"json")},getScript:function(t,e){return Q.get(t,void 0,e,"script")}}),Q.each(["get","post"],function(t,e){Q[e]=function(t,n,i,r){return Q.isFunction(n)&&(r=r||i,i=n,n=void 0),Q.ajax({url:t,type:e,dataType:r,data:n,success:i})}}),Q._evalUrl=function(t){return Q.ajax({url:t,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},Q.fn.extend({wrapAll:function(t){var e;return Q.isFunction(t)?this.each(function(e){Q(this).wrapAll(t.call(this,e))}):(this[0]&&(e=Q(t,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&e.insertBefore(this[0]),e.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this)},wrapInner:function(t){return this.each(Q.isFunction(t)?function(e){Q(this).wrapInner(t.call(this,e))}:function(){var e=Q(this),n=e.contents();n.length?n.wrapAll(t):e.append(t)})},wrap:function(t){var e=Q.isFunction(t);return this.each(function(n){Q(this).wrapAll(e?t.call(this,n):t)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(t){return t.offsetWidth<=0&&t.offsetHeight<=0},Q.expr.filters.visible=function(t){return!Q.expr.filters.hidden(t)};var _e=/%20/g,$e=/\[\]$/,Se=/\r?\n/g,Ee=/^(?:submit|button|image|reset|file)$/i,Te=/^(?:input|select|textarea|keygen)/i;Q.param=function(t,e){var n,i=[],r=function(t,e){e=Q.isFunction(e)?e():null==e?"":e,i[i.length]=encodeURIComponent(t)+"="+encodeURIComponent(e)};if(void 0===e&&(e=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(t)||t.jquery&&!Q.isPlainObject(t))Q.each(t,function(){r(this.name,this.value)});else for(n in t)H(n,t[n],e,r);return i.join("&").replace(_e,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=Q.prop(this,"elements");return t?Q.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!Q(this).is(":disabled")&&Te.test(this.nodeName)&&!Ee.test(t)&&(this.checked||!$t.test(t))}).map(function(t,e){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(t){return{name:e.name,value:t.replace(Se,"\r\n")}}):{name:e.name,value:n.replace(Se,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(t){}};var ke=0,Ae={},Me={0:200,1223:204},Oe=Q.ajaxSettings.xhr();t.attachEvent&&t.attachEvent("onunload",function(){for(var t in Ae)Ae[t]()}),K.cors=!!Oe&&"withCredentials"in Oe,K.ajax=Oe=!!Oe,Q.ajaxTransport(function(t){var e;return K.cors||Oe&&!t.crossDomain?{send:function(n,i){var r,o=t.xhr(),a=++ke;if(o.open(t.type,t.url,t.async,t.username,t.password),t.xhrFields)for(r in t.xhrFields)o[r]=t.xhrFields[r];t.mimeType&&o.overrideMimeType&&o.overrideMimeType(t.mimeType),t.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(r in n)o.setRequestHeader(r,n[r]);e=function(t){return function(){e&&(delete Ae[a],e=o.onload=o.onerror=null,"abort"===t?o.abort():"error"===t?i(o.status,o.statusText):i(Me[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=e(),o.onerror=e("error"),e=Ae[a]=e("abort");try{o.send(t.hasContent&&t.data||null)}catch(s){if(e)throw s}},abort:function(){e&&e()}}:void 0}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(t){return Q.globalEval(t),t}}}),Q.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),Q.ajaxTransport("script",function(t){if(t.crossDomain){var e,n;return{send:function(i,r){e=Q("<script>").prop({async:!0,charset:t.scriptCharset,src:t.url}).on("load error",n=function(t){e.remove(),n=null,t&&r("error"===t.type?404:200,t.type)}),Z.head.appendChild(e[0])},abort:function(){n&&n()}}}});var Pe=[],Ie=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=Pe.pop()||Q.expando+"_"+ce++;return this[t]=!0,t}}),Q.ajaxPrefilter("json jsonp",function(e,n,i){var r,o,a,s=e.jsonp!==!1&&(Ie.test(e.url)?"url":"string"==typeof e.data&&!(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ie.test(e.data)&&"data");return s||"jsonp"===e.dataTypes[0]?(r=e.jsonpCallback=Q.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,s?e[s]=e[s].replace(Ie,"$1"+r):e.jsonp!==!1&&(e.url+=(ue.test(e.url)?"&":"?")+e.jsonp+"="+r),e.converters["script json"]=function(){return a||Q.error(r+" was not called"),a[0]},e.dataTypes[0]="json",o=t[r],t[r]=function(){a=arguments},i.always(function(){t[r]=o,e[r]&&(e.jsonpCallback=n.jsonpCallback,Pe.push(r)),a&&Q.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),Q.parseHTML=function(t,e,n){if(!t||"string"!=typeof t)return null;"boolean"==typeof e&&(n=e,e=!1),e=e||Z;var i=at.exec(t),r=!n&&[];return i?[e.createElement(i[1])]:(i=Q.buildFragment([t],e,r),r&&r.length&&Q(r).remove(),Q.merge([],i.childNodes))};var De=Q.fn.load;Q.fn.load=function(t,e,n){if("string"!=typeof t&&De)return De.apply(this,arguments);var i,r,o,a=this,s=t.indexOf(" ");return s>=0&&(i=Q.trim(t.slice(s)),t=t.slice(0,s)),Q.isFunction(e)?(n=e,e=void 0):e&&"object"==typeof e&&(r="POST"),a.length>0&&Q.ajax({url:t,type:r,dataType:"html",data:e}).done(function(t){o=arguments,a.html(i?Q("<div>").append(Q.parseHTML(t)).find(i):t)}).complete(n&&function(t,e){a.each(n,o||[t.responseText,e,t])}),this},Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(t,e){Q.fn[e]=function(t){return this.on(e,t)}}),Q.expr.filters.animated=function(t){return Q.grep(Q.timers,function(e){return t===e.elem}).length};var Ne=t.document.documentElement;Q.offset={setOffset:function(t,e,n){var i,r,o,a,s,l,c,u=Q.css(t,"position"),h=Q(t),d={};"static"===u&&(t.style.position="relative"),s=h.offset(),o=Q.css(t,"top"),l=Q.css(t,"left"),c=("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1,c?(i=h.position(),a=i.top,r=i.left):(a=parseFloat(o)||0,r=parseFloat(l)||0),Q.isFunction(e)&&(e=e.call(t,n,s)),null!=e.top&&(d.top=e.top-s.top+a),null!=e.left&&(d.left=e.left-s.left+r),"using"in e?e.using.call(t,d):h.css(d)}},Q.fn.extend({offset:function(t){if(arguments.length)return void 0===t?this:this.each(function(e){Q.offset.setOffset(this,t,e)});var e,n,i=this[0],r={top:0,left:0},o=i&&i.ownerDocument;return o?(e=o.documentElement,Q.contains(e,i)?(typeof i.getBoundingClientRect!==St&&(r=i.getBoundingClientRect()),n=B(o),{top:r.top+n.pageYOffset-e.clientTop,left:r.left+n.pageXOffset-e.clientLeft}):r):void 0},position:function(){if(this[0]){var t,e,n=this[0],i={top:0,left:0};return"fixed"===Q.css(n,"position")?e=n.getBoundingClientRect():(t=this.offsetParent(),e=this.offset(),Q.nodeName(t[0],"html")||(i=t.offset()),i.top+=Q.css(t[0],"borderTopWidth",!0),i.left+=Q.css(t[0],"borderLeftWidth",!0)),{top:e.top-i.top-Q.css(n,"marginTop",!0),left:e.left-i.left-Q.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent||Ne;t&&!Q.nodeName(t,"html")&&"static"===Q.css(t,"position");)t=t.offsetParent;return t||Ne})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,n){var i="pageYOffset"===n;Q.fn[e]=function(r){return gt(this,function(e,r,o){var a=B(e);return void 0===o?a?a[n]:e[r]:void(a?a.scrollTo(i?t.pageXOffset:o,i?o:t.pageYOffset):e[r]=o)},e,r,arguments.length,null)}}),Q.each(["top","left"],function(t,e){Q.cssHooks[e]=C(K.pixelPosition,function(t,n){return n?(n=x(t,e),Wt.test(n)?Q(t).position()[e]+"px":n):void 0})}),Q.each({Height:"height",Width:"width"},function(t,e){Q.each({padding:"inner"+t,content:e,"":"outer"+t},function(n,i){Q.fn[i]=function(i,r){var o=arguments.length&&(n||"boolean"!=typeof i),a=n||(i===!0||r===!0?"margin":"border");return gt(this,function(e,n,i){var r;return Q.isWindow(e)?e.document.documentElement["client"+t]:9===e.nodeType?(r=e.documentElement,Math.max(e.body["scroll"+t],r["scroll"+t],e.body["offset"+t],r["offset"+t],r["client"+t])):void 0===i?Q.css(e,n,a):Q.style(e,n,i,a)},e,o?i:void 0,o,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Le=t.jQuery,Fe=t.$;return Q.noConflict=function(e){return t.$===Q&&(t.$=Fe),e&&t.jQuery===Q&&(t.jQuery=Le),Q},typeof e===St&&(t.jQuery=t.$=Q),Q}),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Tn.apply(null,arguments)}function e(t){Tn=t}function n(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(t){return"[object Array]"===Object.prototype.toString.call(t)}function r(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function o(t,e){var n,i=[];for(n=0;n<t.length;++n)i.push(e(t[n],n));return i}function a(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function s(t,e){for(var n in e)a(e,n)&&(t[n]=e[n]);return a(e,"toString")&&(t.toString=e.toString),a(e,"valueOf")&&(t.valueOf=e.valueOf),t}function l(t,e,n,i){return $t(t,e,n,i,!0).utc()}function c(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&void 0===t._pf.bigHour)),t._isValid}function u(t){var e=l(0/0);return null!=t?s(e._pf,t):e._pf.userInvalidated=!0,e}function h(t,e){var n,i,r;if("undefined"!=typeof e._isAMomentObject&&(t._isAMomentObject=e._isAMomentObject),"undefined"!=typeof e._i&&(t._i=e._i),"undefined"!=typeof e._f&&(t._f=e._f),"undefined"!=typeof e._l&&(t._l=e._l),"undefined"!=typeof e._strict&&(t._strict=e._strict),"undefined"!=typeof e._tzm&&(t._tzm=e._tzm),"undefined"!=typeof e._isUTC&&(t._isUTC=e._isUTC),"undefined"!=typeof e._offset&&(t._offset=e._offset),"undefined"!=typeof e._pf&&(t._pf=e._pf),"undefined"!=typeof e._locale&&(t._locale=e._locale),An.length>0)for(n in An)i=An[n],r=e[i],"undefined"!=typeof r&&(t[i]=r);return t}function d(e){h(this,e),this._d=new Date(+e._d),Mn===!1&&(Mn=!0,t.updateOffset(this),Mn=!1)}function f(t){return t instanceof d||null!=t&&a(t,"_isAMomentObject")}function p(t){var e=+t,n=0;return 0!==e&&isFinite(e)&&(n=e>=0?Math.floor(e):Math.ceil(e)),n}function m(t,e,n){var i,r=Math.min(t.length,e.length),o=Math.abs(t.length-e.length),a=0;for(i=0;r>i;i++)(n&&t[i]!==e[i]||!n&&p(t[i])!==p(e[i]))&&a++;return a+o}function g(){}function v(t){return t?t.toLowerCase().replace("_","-"):t}function b(t){for(var e,n,i,r,o=0;o<t.length;){for(r=v(t[o]).split("-"),e=r.length,n=v(t[o+1]),n=n?n.split("-"):null;e>0;){if(i=y(r.slice(0,e).join("-")))return i;if(n&&n.length>=e&&m(r,n,!0)>=e-1)break;e--}o++}return null}function y(t){var e=null;if(!On[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=kn._abbr,require("./locale/"+t),w(e)}catch(n){}return On[t]}function w(t,e){var n;return t&&(n="undefined"==typeof e?C(t):x(t,e),n&&(kn=n)),kn._abbr}function x(t,e){return null!==e?(e.abbr=t,On[t]||(On[t]=new g),On[t].set(e),w(t),On[t]):(delete On[t],null)}function C(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return kn;if(!i(t)){if(e=y(t))return e;t=[t]}return b(t)}function _(t,e){var n=t.toLowerCase();Pn[n]=Pn[n+"s"]=Pn[e]=t}function $(t){return"string"==typeof t?Pn[t]||Pn[t.toLowerCase()]:void 0}function S(t){var e,n,i={};for(n in t)a(t,n)&&(e=$(n),e&&(i[e]=t[n]));return i}function E(e,n){return function(i){return null!=i?(k(this,e,i),t.updateOffset(this,n),this):T(this,e)}}function T(t,e){return t._d["get"+(t._isUTC?"UTC":"")+e]()}function k(t,e,n){return t._d["set"+(t._isUTC?"UTC":"")+e](n)}function A(t,e){var n;if("object"==typeof t)for(n in t)this.set(n,t[n]);else if(t=$(t),"function"==typeof this[t])return this[t](e);return this}function M(t,e,n){for(var i=""+Math.abs(t),r=t>=0;i.length<e;)i="0"+i;return(r?n?"+":"":"-")+i}function O(t,e,n,i){var r=i;"string"==typeof i&&(r=function(){return this[i]()}),t&&(Ln[t]=r),e&&(Ln[e[0]]=function(){return M(r.apply(this,arguments),e[1],e[2])}),n&&(Ln[n]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function P(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function I(t){var e,n,i=t.match(In);for(e=0,n=i.length;n>e;e++)i[e]=Ln[i[e]]?Ln[i[e]]:P(i[e]);return function(r){var o="";for(e=0;n>e;e++)o+=i[e]instanceof Function?i[e].call(r,t):i[e];return o}}function D(t,e){return t.isValid()?(e=N(e,t.localeData()),Nn[e]||(Nn[e]=I(e)),Nn[e](t)):t.localeData().invalidDate()}function N(t,e){function n(t){return e.longDateFormat(t)||t}var i=5;for(Dn.lastIndex=0;i>=0&&Dn.test(t);)t=t.replace(Dn,n),Dn.lastIndex=0,i-=1;return t}function L(t,e,n){Zn[t]="function"==typeof e?e:function(t){return t&&n?n:e}}function F(t,e){return a(Zn,t)?Zn[t](e._strict,e._locale):new RegExp(j(t))}function j(t){return t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,n,i,r){return e||n||i||r}).replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function R(t,e){var n,i=e;for("string"==typeof t&&(t=[t]),"number"==typeof e&&(i=function(t,n){n[e]=p(t)}),n=0;n<t.length;n++)Jn[t[n]]=i}function H(t,e){R(t,function(t,n,i,r){i._w=i._w||{},e(t,i._w,i,r)})}function B(t,e,n){null!=e&&a(Jn,t)&&Jn[t](e,n._a,n,t)}function W(t,e){return new Date(Date.UTC(t,e+1,0)).getUTCDate()}function z(t){return this._months[t.month()]}function U(t){return this._monthsShort[t.month()]}function Y(t,e,n){var i,r,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),i=0;12>i;i++){if(r=l([2e3,i]),n&&!this._longMonthsParse[i]&&(this._longMonthsParse[i]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[i]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),n||this._monthsParse[i]||(o="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[i]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===e&&this._longMonthsParse[i].test(t))return i;if(n&&"MMM"===e&&this._shortMonthsParse[i].test(t))return i;if(!n&&this._monthsParse[i].test(t))return i}}function q(t,e){var n;return"string"==typeof e&&(e=t.localeData().monthsParse(e),"number"!=typeof e)?t:(n=Math.min(t.date(),W(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,n),t)}function V(e){return null!=e?(q(this,e),t.updateOffset(this,!0),this):T(this,"Month")}function X(){return W(this.year(),this.month())}function G(t){var e,n=t._a;return n&&-2===t._pf.overflow&&(e=n[ti]<0||n[ti]>11?ti:n[ei]<1||n[ei]>W(n[Qn],n[ti])?ei:n[ni]<0||n[ni]>24||24===n[ni]&&(0!==n[ii]||0!==n[ri]||0!==n[oi])?ni:n[ii]<0||n[ii]>59?ii:n[ri]<0||n[ri]>59?ri:n[oi]<0||n[oi]>999?oi:-1,t._pf._overflowDayOfYear&&(Qn>e||e>ei)&&(e=ei),t._pf.overflow=e),t}function K(e){t.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function Z(t,e){var n=!0;return s(function(){return n&&(K(t),n=!1),e.apply(this,arguments)},e)}function J(t,e){li[t]||(K(e),li[t]=!0)}function Q(t){var e,n,i=t._i,r=ci.exec(i);if(r){for(t._pf.iso=!0,e=0,n=ui.length;n>e;e++)if(ui[e][1].exec(i)){t._f=ui[e][0]+(r[6]||" ");break}for(e=0,n=hi.length;n>e;e++)if(hi[e][1].exec(i)){t._f+=hi[e][0];break}i.match(Xn)&&(t._f+="Z"),bt(t)}else t._isValid=!1}function tt(e){var n=di.exec(e._i);return null!==n?void(e._d=new Date(+n[1])):(Q(e),void(e._isValid===!1&&(delete e._isValid,t.createFromInputFallback(e))))}function et(t,e,n,i,r,o,a){var s=new Date(t,e,n,i,r,o,a);return 1970>t&&s.setFullYear(t),s}function nt(t){var e=new Date(Date.UTC.apply(null,arguments));return 1970>t&&e.setUTCFullYear(t),e}function it(t){return rt(t)?366:365}function rt(t){return t%4===0&&t%100!==0||t%400===0}function ot(){return rt(this.year())}function at(t,e,n){var i,r=n-e,o=n-t.day();return o>r&&(o-=7),r-7>o&&(o+=7),i=St(t).add(o,"d"),{week:Math.ceil(i.dayOfYear()/7),year:i.year()}}function st(t){return at(t,this._week.dow,this._week.doy).week}function lt(){return this._week.dow}function ct(){return this._week.doy}function ut(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function ht(t){var e=at(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function dt(t,e,n,i,r){var o,a,s=nt(t,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:r,o=r-s+(s>i?7:0)-(r>s?7:0),a=7*(e-1)+(n-r)+o+1,{year:a>0?t:t-1,dayOfYear:a>0?a:it(t-1)+a}}function ft(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function pt(t,e,n){return null!=t?t:null!=e?e:n}function mt(t){var e=new Date;return t._useUTC?[e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()]:[e.getFullYear(),e.getMonth(),e.getDate()]}function gt(t){var e,n,i,r,o=[];if(!t._d){for(i=mt(t),t._w&&null==t._a[ei]&&null==t._a[ti]&&vt(t),t._dayOfYear&&(r=pt(t._a[Qn],i[Qn]),t._dayOfYear>it(r)&&(t._pf._overflowDayOfYear=!0),n=nt(r,0,t._dayOfYear),t._a[ti]=n.getUTCMonth(),t._a[ei]=n.getUTCDate()),e=0;3>e&&null==t._a[e];++e)t._a[e]=o[e]=i[e];for(;7>e;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[ni]&&0===t._a[ii]&&0===t._a[ri]&&0===t._a[oi]&&(t._nextDay=!0,t._a[ni]=0),t._d=(t._useUTC?nt:et).apply(null,o),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[ni]=24)}}function vt(t){var e,n,i,r,o,a,s;e=t._w,null!=e.GG||null!=e.W||null!=e.E?(o=1,a=4,n=pt(e.GG,t._a[Qn],at(St(),1,4).year),i=pt(e.W,1),r=pt(e.E,1)):(o=t._locale._week.dow,a=t._locale._week.doy,n=pt(e.gg,t._a[Qn],at(St(),o,a).year),i=pt(e.w,1),null!=e.d?(r=e.d,o>r&&++i):r=null!=e.e?e.e+o:o),s=dt(n,i,r,a,o),t._a[Qn]=s.year,t._dayOfYear=s.dayOfYear}function bt(e){if(e._f===t.ISO_8601)return void Q(e);e._a=[],e._pf.empty=!0;var n,i,r,o,a,s=""+e._i,l=s.length,c=0;for(r=N(e._f,e._locale).match(In)||[],n=0;n<r.length;n++)o=r[n],i=(s.match(F(o,e))||[])[0],i&&(a=s.substr(0,s.indexOf(i)),a.length>0&&e._pf.unusedInput.push(a),s=s.slice(s.indexOf(i)+i.length),c+=i.length),Ln[o]?(i?e._pf.empty=!1:e._pf.unusedTokens.push(o),B(o,i,e)):e._strict&&!i&&e._pf.unusedTokens.push(o);e._pf.charsLeftOver=l-c,s.length>0&&e._pf.unusedInput.push(s),e._pf.bigHour===!0&&e._a[ni]<=12&&(e._pf.bigHour=void 0),e._a[ni]=yt(e._locale,e._a[ni],e._meridiem),gt(e),G(e)}function yt(t,e,n){var i;return null==n?e:null!=t.meridiemHour?t.meridiemHour(e,n):null!=t.isPM?(i=t.isPM(n),i&&12>e&&(e+=12),i||12!==e||(e=0),e):e}function wt(t){var e,i,r,o,a;if(0===t._f.length)return t._pf.invalidFormat=!0,void(t._d=new Date(0/0));for(o=0;o<t._f.length;o++)a=0,e=h({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._pf=n(),e._f=t._f[o],bt(e),c(e)&&(a+=e._pf.charsLeftOver,a+=10*e._pf.unusedTokens.length,e._pf.score=a,(null==r||r>a)&&(r=a,i=e));s(t,i||e)}function xt(t){if(!t._d){var e=S(t._i);t._a=[e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],gt(t)}}function Ct(t){var e,n=t._i,r=t._f;return t._locale=t._locale||C(t._l),null===n||void 0===r&&""===n?u({nullInput:!0}):("string"==typeof n&&(t._i=n=t._locale.preparse(n)),f(n)?new d(G(n)):(i(r)?wt(t):r?bt(t):_t(t),e=new d(G(t)),e._nextDay&&(e.add(1,"d"),e._nextDay=void 0),e))}function _t(e){var n=e._i;void 0===n?e._d=new Date:r(n)?e._d=new Date(+n):"string"==typeof n?tt(e):i(n)?(e._a=o(n.slice(0),function(t){return parseInt(t,10)}),gt(e)):"object"==typeof n?xt(e):"number"==typeof n?e._d=new Date(n):t.createFromInputFallback(e)}function $t(t,e,i,r,o){var a={};return"boolean"==typeof i&&(r=i,i=void 0),a._isAMomentObject=!0,a._useUTC=a._isUTC=o,a._l=i,a._i=t,a._f=e,a._strict=r,a._pf=n(),Ct(a)}function St(t,e,n,i){return $t(t,e,n,i,!1)}function Et(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return St();for(n=e[0],r=1;r<e.length;++r)e[r][t](n)&&(n=e[r]);return n}function Tt(){var t=[].slice.call(arguments,0);return Et("isBefore",t)}function kt(){var t=[].slice.call(arguments,0);return Et("isAfter",t)}function At(t){var e=S(t),n=e.year||0,i=e.quarter||0,r=e.month||0,o=e.week||0,a=e.day||0,s=e.hour||0,l=e.minute||0,c=e.second||0,u=e.millisecond||0;this._milliseconds=+u+1e3*c+6e4*l+36e5*s,this._days=+a+7*o,this._months=+r+3*i+12*n,
this._data={},this._locale=C(),this._bubble()}function Mt(t){return t instanceof At}function Ot(t,e){O(t,0,0,function(){var t=this.utcOffset(),n="+";return 0>t&&(t=-t,n="-"),n+M(~~(t/60),2)+e+M(~~t%60,2)})}function Pt(t){var e=(t||"").match(Xn)||[],n=e[e.length-1]||[],i=(n+"").match(vi)||["-",0,0],r=+(60*i[1])+p(i[2]);return"+"===i[0]?r:-r}function It(e,n){var i,o;return n._isUTC?(i=n.clone(),o=(f(e)||r(e)?+e:+St(e))-+i,i._d.setTime(+i._d+o),t.updateOffset(i,!1),i):St(e).local()}function Dt(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Nt(e,n){var i,r=this._offset||0;return null!=e?("string"==typeof e&&(e=Pt(e)),Math.abs(e)<16&&(e=60*e),!this._isUTC&&n&&(i=Dt(this)),this._offset=e,this._isUTC=!0,null!=i&&this.add(i,"m"),r!==e&&(!n||this._changeInProgress?Zt(this,qt(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:Dt(this)}function Lt(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ft(t){return this.utcOffset(0,t)}function jt(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Dt(this),"m")),this}function Rt(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(Pt(this._i)),this}function Ht(t){return t=t?St(t).utcOffset():0,(this.utcOffset()-t)%60===0}function Bt(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function Wt(){if(this._a){var t=this._isUTC?l(this._a):St(this._a);return this.isValid()&&m(this._a,t.toArray())>0}return!1}function zt(){return!this._isUTC}function Ut(){return this._isUTC}function Yt(){return this._isUTC&&0===this._offset}function qt(t,e){var n,i,r,o=t,s=null;return Mt(t)?o={ms:t._milliseconds,d:t._days,M:t._months}:"number"==typeof t?(o={},e?o[e]=t:o.milliseconds=t):(s=bi.exec(t))?(n="-"===s[1]?-1:1,o={y:0,d:p(s[ei])*n,h:p(s[ni])*n,m:p(s[ii])*n,s:p(s[ri])*n,ms:p(s[oi])*n}):(s=yi.exec(t))?(n="-"===s[1]?-1:1,o={y:Vt(s[2],n),M:Vt(s[3],n),d:Vt(s[4],n),h:Vt(s[5],n),m:Vt(s[6],n),s:Vt(s[7],n),w:Vt(s[8],n)}):null==o?o={}:"object"==typeof o&&("from"in o||"to"in o)&&(r=Gt(St(o.from),St(o.to)),o={},o.ms=r.milliseconds,o.M=r.months),i=new At(o),Mt(t)&&a(t,"_locale")&&(i._locale=t._locale),i}function Vt(t,e){var n=t&&parseFloat(t.replace(",","."));return(isNaN(n)?0:n)*e}function Xt(t,e){var n={milliseconds:0,months:0};return n.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(n.months,"M").isAfter(e)&&--n.months,n.milliseconds=+e-+t.clone().add(n.months,"M"),n}function Gt(t,e){var n;return e=It(e,t),t.isBefore(e)?n=Xt(t,e):(n=Xt(e,t),n.milliseconds=-n.milliseconds,n.months=-n.months),n}function Kt(t,e){return function(n,i){var r,o;return null===i||isNaN(+i)||(J(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period)."),o=n,n=i,i=o),n="string"==typeof n?+n:n,r=qt(n,i),Zt(this,r,t),this}}function Zt(e,n,i,r){var o=n._milliseconds,a=n._days,s=n._months;r=null==r?!0:r,o&&e._d.setTime(+e._d+o*i),a&&k(e,"Date",T(e,"Date")+a*i),s&&q(e,T(e,"Month")+s*i),r&&t.updateOffset(e,a||s)}function Jt(t){var e=t||St(),n=It(e,this).startOf("day"),i=this.diff(n,"days",!0),r=-6>i?"sameElse":-1>i?"lastWeek":0>i?"lastDay":1>i?"sameDay":2>i?"nextDay":7>i?"nextWeek":"sameElse";return this.format(this.localeData().calendar(r,this,St(e)))}function Qt(){return new d(this)}function te(t,e){var n;return e=$("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:St(t),+this>+t):(n=f(t)?+t:+St(t),n<+this.clone().startOf(e))}function ee(t,e){var n;return e=$("undefined"!=typeof e?e:"millisecond"),"millisecond"===e?(t=f(t)?t:St(t),+t>+this):(n=f(t)?+t:+St(t),+this.clone().endOf(e)<n)}function ne(t,e,n){return this.isAfter(t,n)&&this.isBefore(e,n)}function ie(t,e){var n;return e=$(e||"millisecond"),"millisecond"===e?(t=f(t)?t:St(t),+this===+t):(n=+St(t),+this.clone().startOf(e)<=n&&n<=+this.clone().endOf(e))}function re(t){return 0>t?Math.ceil(t):Math.floor(t)}function oe(t,e,n){var i,r,o=It(t,this),a=6e4*(o.utcOffset()-this.utcOffset());return e=$(e),"year"===e||"month"===e||"quarter"===e?(r=ae(this,o),"quarter"===e?r/=3:"year"===e&&(r/=12)):(i=this-o,r="second"===e?i/1e3:"minute"===e?i/6e4:"hour"===e?i/36e5:"day"===e?(i-a)/864e5:"week"===e?(i-a)/6048e5:i),n?r:re(r)}function ae(t,e){var n,i,r=12*(e.year()-t.year())+(e.month()-t.month()),o=t.clone().add(r,"months");return 0>e-o?(n=t.clone().add(r-1,"months"),i=(e-o)/(o-n)):(n=t.clone().add(r+1,"months"),i=(e-o)/(n-o)),-(r+i)}function se(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function le(){var t=this.clone().utc();return 0<t.year()&&t.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():D(t,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):D(t,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")}function ce(e){var n=D(this,e||t.defaultFormat);return this.localeData().postformat(n)}function ue(t,e){return qt({to:this,from:t}).locale(this.locale()).humanize(!e)}function he(t){return this.from(St(),t)}function de(t){var e;return void 0===t?this._locale._abbr:(e=C(t),null!=e&&(this._locale=e),this)}function fe(){return this._locale}function pe(t){switch(t=$(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function me(t){return t=$(t),void 0===t||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")}function ge(){return+this._d-6e4*(this._offset||0)}function ve(){return Math.floor(+this/1e3)}function be(){return this._offset?new Date(+this):this._d}function ye(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function we(){return c(this)}function xe(){return s({},this._pf)}function Ce(){return this._pf.overflow}function _e(t,e){O(0,[t,t.length],0,e)}function $e(t,e,n){return at(St([t,11,31+e-n]),e,n).week}function Se(t){var e=at(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==t?e:this.add(t-e,"y")}function Ee(t){var e=at(this,1,4).year;return null==t?e:this.add(t-e,"y")}function Te(){return $e(this.year(),1,4)}function ke(){var t=this.localeData()._week;return $e(this.year(),t.dow,t.doy)}function Ae(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Me(t,e){if("string"==typeof t)if(isNaN(t)){if(t=e.weekdaysParse(t),"number"!=typeof t)return null}else t=parseInt(t,10);return t}function Oe(t){return this._weekdays[t.day()]}function Pe(t){return this._weekdaysShort[t.day()]}function Ie(t){return this._weekdaysMin[t.day()]}function De(t){var e,n,i;for(this._weekdaysParse||(this._weekdaysParse=[]),e=0;7>e;e++)if(this._weekdaysParse[e]||(n=St([2e3,1]).day(e),i="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[e]=new RegExp(i.replace(".",""),"i")),this._weekdaysParse[e].test(t))return e}function Ne(t){var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=Me(t,this.localeData()),this.add(t-e,"d")):e}function Le(t){var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Fe(t){return null==t?this.day()||7:this.day(this.day()%7?t:t-7)}function je(t,e){O(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Re(t,e){return e._meridiemParse}function He(t){return"p"===(t+"").toLowerCase().charAt(0)}function Be(t,e,n){return t>11?n?"pm":"PM":n?"am":"AM"}function We(t){O(0,[t,3],0,"millisecond")}function ze(){return this._isUTC?"UTC":""}function Ue(){return this._isUTC?"Coordinated Universal Time":""}function Ye(t){return St(1e3*t)}function qe(){return St.apply(null,arguments).parseZone()}function Ve(t,e,n){var i=this._calendar[t];return"function"==typeof i?i.call(e,n):i}function Xe(t){var e=this._longDateFormat[t];return!e&&this._longDateFormat[t.toUpperCase()]&&(e=this._longDateFormat[t.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t]=e),e}function Ge(){return this._invalidDate}function Ke(t){return this._ordinal.replace("%d",t)}function Ze(t){return t}function Je(t,e,n,i){var r=this._relativeTime[n];return"function"==typeof r?r(t,e,n,i):r.replace(/%d/i,t)}function Qe(t,e){var n=this._relativeTime[t>0?"future":"past"];return"function"==typeof n?n(e):n.replace(/%s/i,e)}function tn(t){var e,n;for(n in t)e=t[n],"function"==typeof e?this[n]=e:this["_"+n]=e;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)}function en(t,e,n,i){var r=C(),o=l().set(i,e);return r[n](o,t)}function nn(t,e,n,i,r){if("number"==typeof t&&(e=t,t=void 0),t=t||"",null!=e)return en(t,e,n,r);var o,a=[];for(o=0;i>o;o++)a[o]=en(t,o,n,r);return a}function rn(t,e){return nn(t,e,"months",12,"month")}function on(t,e){return nn(t,e,"monthsShort",12,"month")}function an(t,e){return nn(t,e,"weekdays",7,"day")}function sn(t,e){return nn(t,e,"weekdaysShort",7,"day")}function ln(t,e){return nn(t,e,"weekdaysMin",7,"day")}function cn(){var t=this._data;return this._milliseconds=Bi(this._milliseconds),this._days=Bi(this._days),this._months=Bi(this._months),t.milliseconds=Bi(t.milliseconds),t.seconds=Bi(t.seconds),t.minutes=Bi(t.minutes),t.hours=Bi(t.hours),t.months=Bi(t.months),t.years=Bi(t.years),this}function un(t,e,n,i){var r=qt(e,n);return t._milliseconds+=i*r._milliseconds,t._days+=i*r._days,t._months+=i*r._months,t._bubble()}function hn(t,e){return un(this,t,e,1)}function dn(t,e){return un(this,t,e,-1)}function fn(){var t,e,n,i=this._milliseconds,r=this._days,o=this._months,a=this._data,s=0;return a.milliseconds=i%1e3,t=re(i/1e3),a.seconds=t%60,e=re(t/60),a.minutes=e%60,n=re(e/60),a.hours=n%24,r+=re(n/24),s=re(pn(r)),r-=re(mn(s)),o+=re(r/30),r%=30,s+=re(o/12),o%=12,a.days=r,a.months=o,a.years=s,this}function pn(t){return 400*t/146097}function mn(t){return 146097*t/400}function gn(t){var e,n,i=this._milliseconds;if(t=$(t),"month"===t||"year"===t)return e=this._days+i/864e5,n=this._months+12*pn(e),"month"===t?n:n/12;switch(e=this._days+Math.round(mn(this._months/12)),t){case"week":return e/7+i/6048e5;case"day":return e+i/864e5;case"hour":return 24*e+i/36e5;case"minute":return 24*e*60+i/6e4;case"second":return 24*e*60*60+i/1e3;case"millisecond":return Math.floor(24*e*60*60*1e3)+i;default:throw new Error("Unknown unit "+t)}}function vn(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*p(this._months/12)}function bn(t){return function(){return this.as(t)}}function yn(t){return t=$(t),this[t+"s"]()}function wn(t){return function(){return this._data[t]}}function xn(){return re(this.days()/7)}function Cn(t,e,n,i,r){return r.relativeTime(e||1,!!n,t,i)}function _n(t,e,n){var i=qt(t).abs(),r=ir(i.as("s")),o=ir(i.as("m")),a=ir(i.as("h")),s=ir(i.as("d")),l=ir(i.as("M")),c=ir(i.as("y")),u=r<rr.s&&["s",r]||1===o&&["m"]||o<rr.m&&["mm",o]||1===a&&["h"]||a<rr.h&&["hh",a]||1===s&&["d"]||s<rr.d&&["dd",s]||1===l&&["M"]||l<rr.M&&["MM",l]||1===c&&["y"]||["yy",c];return u[2]=e,u[3]=+t>0,u[4]=n,Cn.apply(null,u)}function $n(t,e){return void 0===rr[t]?!1:void 0===e?rr[t]:(rr[t]=e,!0)}function Sn(t){var e=this.localeData(),n=_n(this,!t,e);return t&&(n=e.pastFuture(+this,n)),e.postformat(n)}function En(){var t=or(this.years()),e=or(this.months()),n=or(this.days()),i=or(this.hours()),r=or(this.minutes()),o=or(this.seconds()+this.milliseconds()/1e3),a=this.asSeconds();return a?(0>a?"-":"")+"P"+(t?t+"Y":"")+(e?e+"M":"")+(n?n+"D":"")+(i||r||o?"T":"")+(i?i+"H":"")+(r?r+"M":"")+(o?o+"S":""):"P0D"}var Tn,kn,An=t.momentProperties=[],Mn=!1,On={},Pn={},In=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Dn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Nn={},Ln={},Fn=/\d/,jn=/\d\d/,Rn=/\d{3}/,Hn=/\d{4}/,Bn=/[+-]?\d{6}/,Wn=/\d\d?/,zn=/\d{1,3}/,Un=/\d{1,4}/,Yn=/[+-]?\d{1,6}/,qn=/\d+/,Vn=/[+-]?\d+/,Xn=/Z|[+-]\d\d:?\d\d/gi,Gn=/[+-]?\d+(\.\d{1,3})?/,Kn=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Zn={},Jn={},Qn=0,ti=1,ei=2,ni=3,ii=4,ri=5,oi=6;O("M",["MM",2],"Mo",function(){return this.month()+1}),O("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),O("MMMM",0,0,function(t){return this.localeData().months(this,t)}),_("month","M"),L("M",Wn),L("MM",Wn,jn),L("MMM",Kn),L("MMMM",Kn),R(["M","MM"],function(t,e){e[ti]=p(t)-1}),R(["MMM","MMMM"],function(t,e,n,i){var r=n._locale.monthsParse(t,i,n._strict);null!=r?e[ti]=r:n._pf.invalidMonth=t});var ai="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),si="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),li={};t.suppressDeprecationWarnings=!1;var ci=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,ui=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],hi=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],di=/^\/?Date\((\-?\d+)/i;t.createFromInputFallback=Z("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),O(0,["YY",2],0,function(){return this.year()%100}),O(0,["YYYY",4],0,"year"),O(0,["YYYYY",5],0,"year"),O(0,["YYYYYY",6,!0],0,"year"),_("year","y"),L("Y",Vn),L("YY",Wn,jn),L("YYYY",Un,Hn),L("YYYYY",Yn,Bn),L("YYYYYY",Yn,Bn),R(["YYYY","YYYYY","YYYYYY"],Qn),R("YY",function(e,n){n[Qn]=t.parseTwoDigitYear(e)}),t.parseTwoDigitYear=function(t){return p(t)+(p(t)>68?1900:2e3)};var fi=E("FullYear",!1);O("w",["ww",2],"wo","week"),O("W",["WW",2],"Wo","isoWeek"),_("week","w"),_("isoWeek","W"),L("w",Wn),L("ww",Wn,jn),L("W",Wn),L("WW",Wn,jn),H(["w","ww","W","WW"],function(t,e,n,i){e[i.substr(0,1)]=p(t)});var pi={dow:0,doy:6};O("DDD",["DDDD",3],"DDDo","dayOfYear"),_("dayOfYear","DDD"),L("DDD",zn),L("DDDD",Rn),R(["DDD","DDDD"],function(t,e,n){n._dayOfYear=p(t)}),t.ISO_8601=function(){};var mi=Z("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(){var t=St.apply(null,arguments);return this>t?this:t}),gi=Z("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(){var t=St.apply(null,arguments);return t>this?this:t});Ot("Z",":"),Ot("ZZ",""),L("Z",Xn),L("ZZ",Xn),R(["Z","ZZ"],function(t,e,n){n._useUTC=!0,n._tzm=Pt(t)});var vi=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var bi=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,yi=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;qt.fn=At.prototype;var wi=Kt(1,"add"),xi=Kt(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ";var Ci=Z("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return void 0===t?this.localeData():this.locale(t)});O(0,["gg",2],0,function(){return this.weekYear()%100}),O(0,["GG",2],0,function(){return this.isoWeekYear()%100}),_e("gggg","weekYear"),_e("ggggg","weekYear"),_e("GGGG","isoWeekYear"),_e("GGGGG","isoWeekYear"),_("weekYear","gg"),_("isoWeekYear","GG"),L("G",Vn),L("g",Vn),L("GG",Wn,jn),L("gg",Wn,jn),L("GGGG",Un,Hn),L("gggg",Un,Hn),L("GGGGG",Yn,Bn),L("ggggg",Yn,Bn),H(["gggg","ggggg","GGGG","GGGGG"],function(t,e,n,i){e[i.substr(0,2)]=p(t)}),H(["gg","GG"],function(e,n,i,r){n[r]=t.parseTwoDigitYear(e)}),O("Q",0,0,"quarter"),_("quarter","Q"),L("Q",Fn),R("Q",function(t,e){e[ti]=3*(p(t)-1)}),O("D",["DD",2],"Do","date"),_("date","D"),L("D",Wn),L("DD",Wn,jn),L("Do",function(t,e){return t?e._ordinalParse:e._ordinalParseLenient}),R(["D","DD"],ei),R("Do",function(t,e){e[ei]=p(t.match(Wn)[0],10)});var _i=E("Date",!0);O("d",0,"do","day"),O("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),O("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),O("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),O("e",0,0,"weekday"),O("E",0,0,"isoWeekday"),_("day","d"),_("weekday","e"),_("isoWeekday","E"),L("d",Wn),L("e",Wn),L("E",Wn),L("dd",Kn),L("ddd",Kn),L("dddd",Kn),H(["dd","ddd","dddd"],function(t,e,n){var i=n._locale.weekdaysParse(t);null!=i?e.d=i:n._pf.invalidWeekday=t}),H(["d","e","E"],function(t,e,n,i){e[i]=p(t)});var $i="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),Si="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Ei="Su_Mo_Tu_We_Th_Fr_Sa".split("_");O("H",["HH",2],0,"hour"),O("h",["hh",2],0,function(){return this.hours()%12||12}),je("a",!0),je("A",!1),_("hour","h"),L("a",Re),L("A",Re),L("H",Wn),L("h",Wn),L("HH",Wn,jn),L("hh",Wn,jn),R(["H","HH"],ni),R(["a","A"],function(t,e,n){n._isPm=n._locale.isPM(t),n._meridiem=t}),R(["h","hh"],function(t,e,n){e[ni]=p(t),n._pf.bigHour=!0});var Ti=/[ap]\.?m?\.?/i,ki=E("Hours",!0);O("m",["mm",2],0,"minute"),_("minute","m"),L("m",Wn),L("mm",Wn,jn),R(["m","mm"],ii);var Ai=E("Minutes",!1);O("s",["ss",2],0,"second"),_("second","s"),L("s",Wn),L("ss",Wn,jn),R(["s","ss"],ri);var Mi=E("Seconds",!1);O("S",0,0,function(){return~~(this.millisecond()/100)}),O(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),We("SSS"),We("SSSS"),_("millisecond","ms"),L("S",zn,Fn),L("SS",zn,jn),L("SSS",zn,Rn),L("SSSS",qn),R(["S","SS","SSS","SSSS"],function(t,e){e[oi]=p(1e3*("0."+t))});var Oi=E("Milliseconds",!1);O("z",0,0,"zoneAbbr"),O("zz",0,0,"zoneName");var Pi=d.prototype;Pi.add=wi,Pi.calendar=Jt,Pi.clone=Qt,Pi.diff=oe,Pi.endOf=me,Pi.format=ce,Pi.from=ue,Pi.fromNow=he,Pi.get=A,Pi.invalidAt=Ce,Pi.isAfter=te,Pi.isBefore=ee,Pi.isBetween=ne,Pi.isSame=ie,Pi.isValid=we,Pi.lang=Ci,Pi.locale=de,Pi.localeData=fe,Pi.max=gi,Pi.min=mi,Pi.parsingFlags=xe,Pi.set=A,Pi.startOf=pe,Pi.subtract=xi,Pi.toArray=ye,Pi.toDate=be,Pi.toISOString=le,Pi.toJSON=le,Pi.toString=se,Pi.unix=ve,Pi.valueOf=ge,Pi.year=fi,Pi.isLeapYear=ot,Pi.weekYear=Se,Pi.isoWeekYear=Ee,Pi.quarter=Pi.quarters=Ae,Pi.month=V,Pi.daysInMonth=X,Pi.week=Pi.weeks=ut,Pi.isoWeek=Pi.isoWeeks=ht,Pi.weeksInYear=ke,Pi.isoWeeksInYear=Te,Pi.date=_i,Pi.day=Pi.days=Ne,Pi.weekday=Le,Pi.isoWeekday=Fe,Pi.dayOfYear=ft,Pi.hour=Pi.hours=ki,Pi.minute=Pi.minutes=Ai,Pi.second=Pi.seconds=Mi,Pi.millisecond=Pi.milliseconds=Oi,Pi.utcOffset=Nt,Pi.utc=Ft,Pi.local=jt,Pi.parseZone=Rt,Pi.hasAlignedHourOffset=Ht,Pi.isDST=Bt,Pi.isDSTShifted=Wt,Pi.isLocal=zt,Pi.isUtcOffset=Ut,Pi.isUtc=Yt,Pi.isUTC=Yt,Pi.zoneAbbr=ze,Pi.zoneName=Ue,Pi.dates=Z("dates accessor is deprecated. Use date instead.",_i),Pi.months=Z("months accessor is deprecated. Use month instead",V),Pi.years=Z("years accessor is deprecated. Use year instead",fi),Pi.zone=Z("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",Lt);var Ii=Pi,Di={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},Ni={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},Li="Invalid date",Fi="%d",ji=/\d{1,2}/,Ri={future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Hi=g.prototype;Hi._calendar=Di,Hi.calendar=Ve,Hi._longDateFormat=Ni,Hi.longDateFormat=Xe,Hi._invalidDate=Li,Hi.invalidDate=Ge,Hi._ordinal=Fi,Hi.ordinal=Ke,Hi._ordinalParse=ji,Hi.preparse=Ze,Hi.postformat=Ze,Hi._relativeTime=Ri,Hi.relativeTime=Je,Hi.pastFuture=Qe,Hi.set=tn,Hi.months=z,Hi._months=ai,Hi.monthsShort=U,Hi._monthsShort=si,Hi.monthsParse=Y,Hi.week=st,Hi._week=pi,Hi.firstDayOfYear=ct,Hi.firstDayOfWeek=lt,Hi.weekdays=Oe,Hi._weekdays=$i,Hi.weekdaysMin=Ie,Hi._weekdaysMin=Ei,Hi.weekdaysShort=Pe,Hi._weekdaysShort=Si,Hi.weekdaysParse=De,Hi.isPM=He,Hi._meridiemParse=Ti,Hi.meridiem=Be,w("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10,n=1===p(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th";return t+n}}),t.lang=Z("moment.lang is deprecated. Use moment.locale instead.",w),t.langData=Z("moment.langData is deprecated. Use moment.localeData instead.",C);var Bi=Math.abs,Wi=bn("ms"),zi=bn("s"),Ui=bn("m"),Yi=bn("h"),qi=bn("d"),Vi=bn("w"),Xi=bn("M"),Gi=bn("y"),Ki=wn("milliseconds"),Zi=wn("seconds"),Ji=wn("minutes"),Qi=wn("hours"),tr=wn("days"),er=wn("months"),nr=wn("years"),ir=Math.round,rr={s:45,m:45,h:22,d:26,M:11},or=Math.abs,ar=At.prototype;ar.abs=cn,ar.add=hn,ar.subtract=dn,ar.as=gn,ar.asMilliseconds=Wi,ar.asSeconds=zi,ar.asMinutes=Ui,ar.asHours=Yi,ar.asDays=qi,ar.asWeeks=Vi,ar.asMonths=Xi,ar.asYears=Gi,ar.valueOf=vn,ar._bubble=fn,ar.get=yn,ar.milliseconds=Ki,ar.seconds=Zi,ar.minutes=Ji,ar.hours=Qi,ar.days=tr,ar.weeks=xn,ar.months=er,ar.years=nr,ar.humanize=Sn,ar.toISOString=En,ar.toString=En,ar.toJSON=En,ar.locale=de,ar.localeData=fe,ar.toIsoString=Z("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),ar.lang=Ci,O("X",0,0,"unix"),O("x",0,0,"valueOf"),L("x",Vn),L("X",Gn),R("X",function(t,e,n){n._d=new Date(1e3*parseFloat(t,10))}),R("x",function(t,e,n){n._d=new Date(p(t))}),t.version="2.10.2",e(St),t.fn=Ii,t.min=Tt,t.max=kt,t.utc=l,t.unix=Ye,t.months=rn,t.isDate=r,t.locale=w,t.invalid=u,t.duration=qt,t.isMoment=f,t.weekdays=an,t.parseZone=qe,t.localeData=C,t.isDuration=Mt,t.monthsShort=on,t.weekdaysMin=ln,t.defineLocale=x,t.weekdaysShort=sn,t.normalizeUnits=$,t.relativeTimeThreshold=$n;var sr=t;return sr}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery");+function(t){"use strict";var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1)throw new Error("Bootstrap's JavaScript requires jQuery version 1.9.1 or higher")}(jQuery),+function(t){"use strict";function e(e){e&&3===e.which||(t(r).remove(),t(o).each(function(){var i=t(this),r=n(i),o={relatedTarget:this};r.hasClass("open")&&(r.trigger(e=t.Event("hide.bs.dropdown",o)),e.isDefaultPrevented()||(i.attr("aria-expanded","false"),r.removeClass("open").trigger("hidden.bs.dropdown",o)))}))}function n(e){var n=e.attr("data-target");n||(n=e.attr("href"),n=n&&/#[A-Za-z]/.test(n)&&n.replace(/.*(?=#[^\s]*$)/,""));var i=n&&t(n);return i&&i.length?i:e.parent()}function i(e){return this.each(function(){var n=t(this),i=n.data("bs.dropdown");i||n.data("bs.dropdown",i=new a(this)),"string"==typeof e&&i[e].call(n)})}var r=".dropdown-backdrop",o='[data-toggle="dropdown"]',a=function(e){t(e).on("click.bs.dropdown",this.toggle)};a.VERSION="3.3.4",a.prototype.toggle=function(i){var r=t(this);if(!r.is(".disabled, :disabled")){var o=n(r),a=o.hasClass("open");if(e(),!a){"ontouchstart"in document.documentElement&&!o.closest(".navbar-nav").length&&t('<div class="dropdown-backdrop"/>').insertAfter(t(this)).on("click",e);var s={relatedTarget:this};if(o.trigger(i=t.Event("show.bs.dropdown",s)),i.isDefaultPrevented())return;r.trigger("focus").attr("aria-expanded","true"),o.toggleClass("open").trigger("shown.bs.dropdown",s)}return!1}},a.prototype.keydown=function(e){if(/(38|40|27|32)/.test(e.which)&&!/input|textarea/i.test(e.target.tagName)){var i=t(this);if(e.preventDefault(),e.stopPropagation(),!i.is(".disabled, :disabled")){var r=n(i),a=r.hasClass("open");if(!a&&27!=e.which||a&&27==e.which)return 27==e.which&&r.find(o).trigger("focus"),i.trigger("click");var s=" li:not(.disabled):visible a",l=r.find('[role="menu"]'+s+', [role="listbox"]'+s);if(l.length){var c=l.index(e.target);38==e.which&&c>0&&c--,40==e.which&&c<l.length-1&&c++,~c||(c=0),l.eq(c).trigger("focus")}}}};var s=t.fn.dropdown;t.fn.dropdown=i,t.fn.dropdown.Constructor=a,t.fn.dropdown.noConflict=function(){return t.fn.dropdown=s,this},t(document).on("click.bs.dropdown.data-api",e).on("click.bs.dropdown.data-api",".dropdown form",function(t){t.stopPropagation()}).on("click.bs.dropdown.data-api",o,a.prototype.toggle).on("keydown.bs.dropdown.data-api",o,a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="menu"]',a.prototype.keydown).on("keydown.bs.dropdown.data-api",'[role="listbox"]',a.prototype.keydown)}(jQuery),+function(t){"use strict";function e(e){return this.each(function(){var i=t(this),r=i.data("bs.tooltip"),o="object"==typeof e&&e;(r||!/destroy|hide/.test(e))&&(r||i.data("bs.tooltip",r=new n(this,o)),"string"==typeof e&&r[e]())})}var n=function(t,e){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.init("tooltip",t,e)};n.VERSION="3.3.4",n.TRANSITION_DURATION=150,n.DEFAULTS={animation:!0,placement:"top",selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,container:!1,viewport:{selector:"body",padding:0}},n.prototype.init=function(e,n,i){if(this.enabled=!0,this.type=e,this.$element=t(n),this.options=this.getOptions(i),this.$viewport=this.options.viewport&&t(this.options.viewport.selector||this.options.viewport),this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error("`selector` option must be specified when initializing "+this.type+" on the window.document object!");for(var r=this.options.trigger.split(" "),o=r.length;o--;){var a=r[o];if("click"==a)this.$element.on("click."+this.type,this.options.selector,t.proxy(this.toggle,this));else if("manual"!=a){var s="hover"==a?"mouseenter":"focusin",l="hover"==a?"mouseleave":"focusout";this.$element.on(s+"."+this.type,this.options.selector,t.proxy(this.enter,this)),this.$element.on(l+"."+this.type,this.options.selector,t.proxy(this.leave,this))}}this.options.selector?this._options=t.extend({},this.options,{trigger:"manual",selector:""}):this.fixTitle()},n.prototype.getDefaults=function(){return n.DEFAULTS},n.prototype.getOptions=function(e){return e=t.extend({},this.getDefaults(),this.$element.data(),e),e.delay&&"number"==typeof e.delay&&(e.delay={show:e.delay,hide:e.delay}),e},n.prototype.getDelegateOptions=function(){var e={},n=this.getDefaults();return this._options&&t.each(this._options,function(t,i){n[t]!=i&&(e[t]=i)}),e},n.prototype.enter=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n&&n.$tip&&n.$tip.is(":visible")?void(n.hoverState="in"):(n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="in",n.options.delay&&n.options.delay.show?void(n.timeout=setTimeout(function(){"in"==n.hoverState&&n.show()},n.options.delay.show)):n.show())},n.prototype.leave=function(e){var n=e instanceof this.constructor?e:t(e.currentTarget).data("bs."+this.type);return n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n)),clearTimeout(n.timeout),n.hoverState="out",n.options.delay&&n.options.delay.hide?void(n.timeout=setTimeout(function(){"out"==n.hoverState&&n.hide()},n.options.delay.hide)):n.hide()},n.prototype.show=function(){var e=t.Event("show.bs."+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(e);var i=t.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(e.isDefaultPrevented()||!i)return;var r=this,o=this.tip(),a=this.getUID(this.type);this.setContent(),o.attr("id",a),this.$element.attr("aria-describedby",a),this.options.animation&&o.addClass("fade");var s="function"==typeof this.options.placement?this.options.placement.call(this,o[0],this.$element[0]):this.options.placement,l=/\s?auto?\s?/i,c=l.test(s);c&&(s=s.replace(l,"")||"top"),o.detach().css({top:0,left:0,display:"block"}).addClass(s).data("bs."+this.type,this),this.options.container?o.appendTo(this.options.container):o.insertAfter(this.$element);var u=this.getPosition(),h=o[0].offsetWidth,d=o[0].offsetHeight;if(c){var f=s,p=this.options.container?t(this.options.container):this.$element.parent(),m=this.getPosition(p);s="bottom"==s&&u.bottom+d>m.bottom?"top":"top"==s&&u.top-d<m.top?"bottom":"right"==s&&u.right+h>m.width?"left":"left"==s&&u.left-h<m.left?"right":s,o.removeClass(f).addClass(s)}var g=this.getCalculatedOffset(s,u,h,d);this.applyPlacement(g,s);var v=function(){var t=r.hoverState;r.$element.trigger("shown.bs."+r.type),r.hoverState=null,"out"==t&&r.leave(r)};t.support.transition&&this.$tip.hasClass("fade")?o.one("bsTransitionEnd",v).emulateTransitionEnd(n.TRANSITION_DURATION):v()}},n.prototype.applyPlacement=function(e,n){var i=this.tip(),r=i[0].offsetWidth,o=i[0].offsetHeight,a=parseInt(i.css("margin-top"),10),s=parseInt(i.css("margin-left"),10);isNaN(a)&&(a=0),isNaN(s)&&(s=0),e.top=e.top+a,e.left=e.left+s,t.offset.setOffset(i[0],t.extend({using:function(t){i.css({top:Math.round(t.top),left:Math.round(t.left)})}},e),0),i.addClass("in");var l=i[0].offsetWidth,c=i[0].offsetHeight;"top"==n&&c!=o&&(e.top=e.top+o-c);var u=this.getViewportAdjustedDelta(n,e,l,c);u.left?e.left+=u.left:e.top+=u.top;var h=/top|bottom/.test(n),d=h?2*u.left-r+l:2*u.top-o+c,f=h?"offsetWidth":"offsetHeight";i.offset(e),this.replaceArrow(d,i[0][f],h)},n.prototype.replaceArrow=function(t,e,n){this.arrow().css(n?"left":"top",50*(1-t/e)+"%").css(n?"top":"left","")},n.prototype.setContent=function(){var t=this.tip(),e=this.getTitle();t.find(".tooltip-inner")[this.options.html?"html":"text"](e),t.removeClass("fade in top bottom left right")},n.prototype.hide=function(e){function i(){"in"!=r.hoverState&&o.detach(),r.$element.removeAttr("aria-describedby").trigger("hidden.bs."+r.type),e&&e()}var r=this,o=t(this.$tip),a=t.Event("hide.bs."+this.type);return this.$element.trigger(a),a.isDefaultPrevented()?void 0:(o.removeClass("in"),t.support.transition&&o.hasClass("fade")?o.one("bsTransitionEnd",i).emulateTransitionEnd(n.TRANSITION_DURATION):i(),this.hoverState=null,this)},n.prototype.fixTitle=function(){var t=this.$element;(t.attr("title")||"string"!=typeof t.attr("data-original-title"))&&t.attr("data-original-title",t.attr("title")||"").attr("title","")},n.prototype.hasContent=function(){return this.getTitle()},n.prototype.getPosition=function(e){e=e||this.$element;var n=e[0],i="BODY"==n.tagName,r=n.getBoundingClientRect();null==r.width&&(r=t.extend({},r,{width:r.right-r.left,height:r.bottom-r.top}));var o=i?{top:0,left:0}:e.offset(),a={scroll:i?document.documentElement.scrollTop||document.body.scrollTop:e.scrollTop()},s=i?{width:t(window).width(),height:t(window).height()}:null;return t.extend({},r,a,s,o)},n.prototype.getCalculatedOffset=function(t,e,n,i){return"bottom"==t?{top:e.top+e.height,left:e.left+e.width/2-n/2}:"top"==t?{top:e.top-i,left:e.left+e.width/2-n/2}:"left"==t?{top:e.top+e.height/2-i/2,left:e.left-n}:{top:e.top+e.height/2-i/2,left:e.left+e.width}},n.prototype.getViewportAdjustedDelta=function(t,e,n,i){var r={top:0,left:0};if(!this.$viewport)return r;var o=this.options.viewport&&this.options.viewport.padding||0,a=this.getPosition(this.$viewport);if(/right|left/.test(t)){var s=e.top-o-a.scroll,l=e.top+o-a.scroll+i;s<a.top?r.top=a.top-s:l>a.top+a.height&&(r.top=a.top+a.height-l)}else{var c=e.left-o,u=e.left+o+n;c<a.left?r.left=a.left-c:u>a.width&&(r.left=a.left+a.width-u)}return r},n.prototype.getTitle=function(){var t,e=this.$element,n=this.options;return t=e.attr("data-original-title")||("function"==typeof n.title?n.title.call(e[0]):n.title)},n.prototype.getUID=function(t){do t+=~~(1e6*Math.random());while(document.getElementById(t));

return t},n.prototype.tip=function(){return this.$tip=this.$tip||t(this.options.template)},n.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(".tooltip-arrow")},n.prototype.enable=function(){this.enabled=!0},n.prototype.disable=function(){this.enabled=!1},n.prototype.toggleEnabled=function(){this.enabled=!this.enabled},n.prototype.toggle=function(e){var n=this;e&&(n=t(e.currentTarget).data("bs."+this.type),n||(n=new this.constructor(e.currentTarget,this.getDelegateOptions()),t(e.currentTarget).data("bs."+this.type,n))),n.tip().hasClass("in")?n.leave(n):n.enter(n)},n.prototype.destroy=function(){var t=this;clearTimeout(this.timeout),this.hide(function(){t.$element.off("."+t.type).removeData("bs."+t.type)})};var i=t.fn.tooltip;t.fn.tooltip=e,t.fn.tooltip.Constructor=n,t.fn.tooltip.noConflict=function(){return t.fn.tooltip=i,this}}(jQuery),+function(t){"use strict";function e(){var t=document.createElement("bootstrap"),e={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"};for(var n in e)if(void 0!==t.style[n])return{end:e[n]};return!1}t.fn.emulateTransitionEnd=function(e){var n=!1,i=this;t(this).one("bsTransitionEnd",function(){n=!0});var r=function(){n||t(i).trigger(t.support.transition.end)};return setTimeout(r,e),this},t(function(){t.support.transition=e(),t.support.transition&&(t.event.special.bsTransitionEnd={bindType:t.support.transition.end,delegateType:t.support.transition.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function(t){function e(e,i){var r,o,a,s=e.nodeName.toLowerCase();return"area"===s?(r=e.parentNode,o=r.name,e.href&&o&&"map"===r.nodeName.toLowerCase()?(a=t("img[usemap='#"+o+"']")[0],!!a&&n(a)):!1):(/^(input|select|textarea|button|object)$/.test(s)?!e.disabled:"a"===s?e.href||i:i)&&n(e)}function n(e){return t.expr.filters.visible(e)&&!t(e).parents().addBack().filter(function(){return"hidden"===t.css(this,"visibility")}).length}t.ui=t.ui||{},t.extend(t.ui,{version:"1.11.4",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({scrollParent:function(e){var n=this.css("position"),i="absolute"===n,r=e?/(auto|scroll|hidden)/:/(auto|scroll)/,o=this.parents().filter(function(){var e=t(this);return i&&"static"===e.css("position")?!1:r.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==n&&o.length?o:t(this[0].ownerDocument||document)},uniqueId:function(){var t=0;return function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++t)})}}(),removeUniqueId:function(){return this.each(function(){/^ui-id-\d+$/.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(n){return!!t.data(n,e)}}):function(e,n,i){return!!t.data(e,i[3])},focusable:function(n){return e(n,!isNaN(t.attr(n,"tabindex")))},tabbable:function(n){var i=t.attr(n,"tabindex"),r=isNaN(i);return(r||i>=0)&&e(n,!r)}}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(e,n){function i(e,n,i,o){return t.each(r,function(){n-=parseFloat(t.css(e,"padding"+this))||0,i&&(n-=parseFloat(t.css(e,"border"+this+"Width"))||0),o&&(n-=parseFloat(t.css(e,"margin"+this))||0)}),n}var r="Width"===n?["Left","Right"]:["Top","Bottom"],o=n.toLowerCase(),a={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+n]=function(e){return void 0===e?a["inner"+n].call(this):this.each(function(){t(this).css(o,i(this,e)+"px")})},t.fn["outer"+n]=function(e,r){return"number"!=typeof e?a["outer"+n].call(this,e):this.each(function(){t(this).css(o,i(this,e,!0,r)+"px")})}}),t.fn.addBack||(t.fn.addBack=function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(n){return arguments.length?e.call(this,t.camelCase(n)):e.call(this)}}(t.fn.removeData)),t.ui.ie=!!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()),t.fn.extend({focus:function(e){return function(n,i){return"number"==typeof n?this.each(function(){var e=this;setTimeout(function(){t(e).focus(),i&&i.call(e)},n)}):e.apply(this,arguments)}}(t.fn.focus),disableSelection:function(){var t="onselectstart"in document.createElement("div")?"selectstart":"mousedown";return function(){return this.bind(t+".ui-disableSelection",function(t){t.preventDefault()})}}(),enableSelection:function(){return this.unbind(".ui-disableSelection")},zIndex:function(e){if(void 0!==e)return this.css("zIndex",e);if(this.length)for(var n,i,r=t(this[0]);r.length&&r[0]!==document;){if(n=r.css("position"),("absolute"===n||"relative"===n||"fixed"===n)&&(i=parseInt(r.css("zIndex"),10),!isNaN(i)&&0!==i))return i;r=r.parent()}return 0}}),t.ui.plugin={add:function(e,n,i){var r,o=t.ui[e].prototype;for(r in i)o.plugins[r]=o.plugins[r]||[],o.plugins[r].push([n,i[r]])},call:function(t,e,n,i){var r,o=t.plugins[e];if(o&&(i||t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType))for(r=0;r<o.length;r++)t.options[o[r][0]]&&o[r][1].apply(t.element,n)}};var i=0,r=Array.prototype.slice;t.cleanData=function(e){return function(n){var i,r,o;for(o=0;null!=(r=n[o]);o++)try{i=t._data(r,"events"),i&&i.remove&&t(r).triggerHandler("remove")}catch(a){}e(n)}}(t.cleanData),t.widget=function(e,n,i){var r,o,a,s,l={},c=e.split(".")[0];return e=e.split(".")[1],r=c+"-"+e,i||(i=n,n=t.Widget),t.expr[":"][r.toLowerCase()]=function(e){return!!t.data(e,r)},t[c]=t[c]||{},o=t[c][e],a=t[c][e]=function(t,e){return this._createWidget?void(arguments.length&&this._createWidget(t,e)):new a(t,e)},t.extend(a,o,{version:i.version,_proto:t.extend({},i),_childConstructors:[]}),s=new n,s.options=t.widget.extend({},s.options),t.each(i,function(e,i){return t.isFunction(i)?void(l[e]=function(){var t=function(){return n.prototype[e].apply(this,arguments)},r=function(t){return n.prototype[e].apply(this,t)};return function(){var e,n=this._super,o=this._superApply;return this._super=t,this._superApply=r,e=i.apply(this,arguments),this._super=n,this._superApply=o,e}}()):void(l[e]=i)}),a.prototype=t.widget.extend(s,{widgetEventPrefix:o?s.widgetEventPrefix||e:e},l,{constructor:a,namespace:c,widgetName:e,widgetFullName:r}),o?(t.each(o._childConstructors,function(e,n){var i=n.prototype;t.widget(i.namespace+"."+i.widgetName,a,n._proto)}),delete o._childConstructors):n._childConstructors.push(a),t.widget.bridge(e,a),a},t.widget.extend=function(e){for(var n,i,o=r.call(arguments,1),a=0,s=o.length;s>a;a++)for(n in o[a])i=o[a][n],o[a].hasOwnProperty(n)&&void 0!==i&&(e[n]=t.isPlainObject(i)?t.isPlainObject(e[n])?t.widget.extend({},e[n],i):t.widget.extend({},i):i);return e},t.widget.bridge=function(e,n){var i=n.prototype.widgetFullName||e;t.fn[e]=function(o){var a="string"==typeof o,s=r.call(arguments,1),l=this;return a?this.each(function(){var n,r=t.data(this,i);return"instance"===o?(l=r,!1):r?t.isFunction(r[o])&&"_"!==o.charAt(0)?(n=r[o].apply(r,s),n!==r&&void 0!==n?(l=n&&n.jquery?l.pushStack(n.get()):n,!1):void 0):t.error("no such method '"+o+"' for "+e+" widget instance"):t.error("cannot call methods on "+e+" prior to initialization; attempted to call method '"+o+"'")}):(s.length&&(o=t.widget.extend.apply(null,[o].concat(s))),this.each(function(){var e=t.data(this,i);e?(e.option(o||{}),e._init&&e._init()):t.data(this,i,new n(o,this))})),l}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,n){n=t(n||this.defaultElement||this)[0],this.element=t(n),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.bindings=t(),this.hoverable=t(),this.focusable=t(),n!==this&&(t.data(n,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===n&&this.destroy()}}),this.document=t(n.style?n.ownerDocument:n.document||n),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(e,n){var i,r,o,a=e;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof e)if(a={},i=e.split("."),e=i.shift(),i.length){for(r=a[e]=t.widget.extend({},this.options[e]),o=0;o<i.length-1;o++)r[i[o]]=r[i[o]]||{},r=r[i[o]];if(e=i.pop(),1===arguments.length)return void 0===r[e]?null:r[e];r[e]=n}else{if(1===arguments.length)return void 0===this.options[e]?null:this.options[e];a[e]=n}return this._setOptions(a),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled",!!e),e&&(this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus"))),this},enable:function(){return this._setOptions({disabled:!1})},disable:function(){return this._setOptions({disabled:!0})},_on:function(e,n,i){var r,o=this;"boolean"!=typeof e&&(i=n,n=e,e=!1),i?(n=r=t(n),this.bindings=this.bindings.add(n)):(i=n,n=this.element,r=this.widget()),t.each(i,function(i,a){function s(){return e||o.options.disabled!==!0&&!t(this).hasClass("ui-state-disabled")?("string"==typeof a?o[a]:a).apply(o,arguments):void 0}"string"!=typeof a&&(s.guid=a.guid=a.guid||s.guid||t.guid++);var l=i.match(/^([\w:-]*)\s*(.*)$/),c=l[1]+o.eventNamespace,u=l[2];u?r.delegate(u,c,s):n.bind(c,s)})},_off:function(e,n){n=(n||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,e.unbind(n).undelegate(n),this.bindings=t(this.bindings.not(e).get()),this.focusable=t(this.focusable.not(e).get()),this.hoverable=t(this.hoverable.not(e).get())},_delay:function(t,e){function n(){return("string"==typeof t?i[t]:t).apply(i,arguments)}var i=this;return setTimeout(n,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,n,i){var r,o,a=this.options[e];if(i=i||{},n=t.Event(n),n.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),n.target=this.element[0],o=n.originalEvent)for(r in o)r in n||(n[r]=o[r]);return this.element.trigger(n,i),!(t.isFunction(a)&&a.apply(this.element[0],[n].concat(i))===!1||n.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,n){t.Widget.prototype["_"+e]=function(i,r,o){"string"==typeof r&&(r={effect:r});var a,s=r?r===!0||"number"==typeof r?n:r.effect||n:e;r=r||{},"number"==typeof r&&(r={duration:r}),a=!t.isEmptyObject(r),r.complete=o,r.delay&&i.delay(r.delay),a&&t.effects&&t.effects.effect[s]?i[e](r):s!==e&&i[s]?i[s](r.duration,r.easing,o):i.queue(function(n){t(this)[e](),o&&o.call(i[0]),n()})}});var o=(t.widget,!1);t(document).mouseup(function(){o=!1});t.widget("ui.mouse",{version:"1.11.4",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(n){return!0===t.data(n.target,e.widgetName+".preventClickEvent")?(t.removeData(n.target,e.widgetName+".preventClickEvent"),n.stopImmediatePropagation(),!1):void 0}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(e){if(!o){this._mouseMoved=!1,this._mouseStarted&&this._mouseUp(e),this._mouseDownEvent=e;var n=this,i=1===e.which,r="string"==typeof this.options.cancel&&e.target.nodeName?t(e.target).closest(this.options.cancel).length:!1;return i&&!r&&this._mouseCapture(e)?(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){n.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(e)!==!1,!this._mouseStarted)?(e.preventDefault(),!0):(!0===t.data(e.target,this.widgetName+".preventClickEvent")&&t.removeData(e.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return n._mouseMove(t)},this._mouseUpDelegate=function(t){return n._mouseUp(t)},this.document.bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),e.preventDefault(),o=!0,!0)):!0}},_mouseMove:function(e){if(this._mouseMoved){if(t.ui.ie&&(!document.documentMode||document.documentMode<9)&&!e.button)return this._mouseUp(e);if(!e.which)return this._mouseUp(e)}return(e.which||e.button)&&(this._mouseMoved=!0),this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,e)!==!1,this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted)},_mouseUp:function(e){return this.document.unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),o=!1,!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}});t.widget("ui.draggable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1,drag:null,start:null,stop:null},_create:function(){"original"===this.options.helper&&this._setPositionRelative(),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._setHandleClassName(),this._mouseInit()},_setOption:function(t,e){this._super(t,e),"handle"===t&&(this._removeHandleClassName(),this._setHandleClassName())},_destroy:function(){return(this.helper||this.element).is(".ui-draggable-dragging")?void(this.destroyOnClear=!0):(this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._removeHandleClassName(),void this._mouseDestroy())},_mouseCapture:function(e){var n=this.options;return this._blurActiveElement(e),this.helper||n.disabled||t(e.target).closest(".ui-resizable-handle").length>0?!1:(this.handle=this._getHandle(e),this.handle?(this._blockFrames(n.iframeFix===!0?"iframe":n.iframeFix),!0):!1)},_blockFrames:function(e){this.iframeBlocks=this.document.find(e).map(function(){var e=t(this);return t("<div>").css("position","absolute").appendTo(e.parent()).outerWidth(e.outerWidth()).outerHeight(e.outerHeight()).offset(e.offset())[0]})},_unblockFrames:function(){this.iframeBlocks&&(this.iframeBlocks.remove(),delete this.iframeBlocks)},_blurActiveElement:function(e){var n=this.document[0];if(this.handleElement.is(e.target))try{n.activeElement&&"body"!==n.activeElement.nodeName.toLowerCase()&&t(n.activeElement).blur()}catch(i){}},_mouseStart:function(e){var n=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(!0),this.offsetParent=this.helper.offsetParent(),this.hasFixedAncestor=this.helper.parents().filter(function(){return"fixed"===t(this).css("position")}).length>0,this.positionAbs=this.element.offset(),this._refreshOffsets(e),this.originalPosition=this.position=this._generatePosition(e,!1),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this._setContainment(),this._trigger("start",e)===!1?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._normalizeRightBottom(),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_refreshOffsets:function(t){this.offset={top:this.positionAbs.top-this.margins.top,left:this.positionAbs.left-this.margins.left,scroll:!1,parent:this._getParentOffset(),relative:this._getRelativeOffset()},this.offset.click={left:t.pageX-this.offset.left,top:t.pageY-this.offset.top}},_mouseDrag:function(e,n){if(this.hasFixedAncestor&&(this.offset.parent=this._getParentOffset()),this.position=this._generatePosition(e,!0),this.positionAbs=this._convertPositionTo("absolute"),!n){var i=this._uiHash();if(this._trigger("drag",e,i)===!1)return this._mouseUp({}),!1;this.position=i.position}return this.helper[0].style.left=this.position.left+"px",this.helper[0].style.top=this.position.top+"px",t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var n=this,i=!1;return t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1),"invalid"===this.options.revert&&!i||"valid"===this.options.revert&&i||this.options.revert===!0||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)?t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){n._trigger("stop",e)!==!1&&n._clear()}):this._trigger("stop",e)!==!1&&this._clear(),!1},_mouseUp:function(e){return this._unblockFrames(),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),this.handleElement.is(e.target)&&this.element.focus(),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){return this.options.handle?!!t(e.target).closest(this.element.find(this.options.handle)).length:!0},_setHandleClassName:function(){this.handleElement=this.options.handle?this.element.find(this.options.handle):this.element,this.handleElement.addClass("ui-draggable-handle")},_removeHandleClassName:function(){this.handleElement.removeClass("ui-draggable-handle")},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper),r=i?t(n.helper.apply(this.element[0],[e])):"clone"===n.helper?this.element.clone().removeAttr("id"):this.element;return r.parents("body").length||r.appendTo("parent"===n.appendTo?this.element[0].parentNode:n.appendTo),i&&r[0]===this.element[0]&&this._setPositionRelative(),r[0]===this.element[0]||/(fixed|absolute)/.test(r.css("position"))||r.css("position","absolute"),r},_setPositionRelative:function(){/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative")},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_isRootNode:function(t){return/(html|body)/i.test(t.tagName)||t===this.document[0]},_getParentOffset:function(){var e=this.offsetParent.offset(),n=this.document[0];return"absolute"===this.cssPosition&&this.scrollParent[0]!==n&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),this._isRootNode(this.offsetParent[0])&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"!==this.cssPosition)return{top:0,left:0};var t=this.element.position(),e=this._isRootNode(this.scrollParent[0]);return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+(e?0:this.scrollParent.scrollTop()),left:t.left-(parseInt(this.helper.css("left"),10)||0)+(e?0:this.scrollParent.scrollLeft())}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options,o=this.document[0];return this.relativeContainer=null,r.containment?"window"===r.containment?void(this.containment=[t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,t(window).scrollLeft()+t(window).width()-this.helperProportions.width-this.margins.left,t(window).scrollTop()+(t(window).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):"document"===r.containment?void(this.containment=[0,0,t(o).width()-this.helperProportions.width-this.margins.left,(t(o).height()||o.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]):r.containment.constructor===Array?void(this.containment=r.containment):("parent"===r.containment&&(r.containment=this.helper[0].parentNode),n=t(r.containment),i=n[0],void(i&&(e=/(scroll|auto)/.test(n.css("overflow")),this.containment=[(parseInt(n.css("borderLeftWidth"),10)||0)+(parseInt(n.css("paddingLeft"),10)||0),(parseInt(n.css("borderTopWidth"),10)||0)+(parseInt(n.css("paddingTop"),10)||0),(e?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(n.css("borderRightWidth"),10)||0)-(parseInt(n.css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(e?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(n.css("borderBottomWidth"),10)||0)-(parseInt(n.css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relativeContainer=n))):void(this.containment=null)},_convertPositionTo:function(t,e){e||(e=this.position);var n="absolute"===t?1:-1,i=this._isRootNode(this.scrollParent[0]);return{top:e.top+this.offset.relative.top*n+this.offset.parent.top*n-("fixed"===this.cssPosition?-this.offset.scroll.top:i?0:this.offset.scroll.top)*n,left:e.left+this.offset.relative.left*n+this.offset.parent.left*n-("fixed"===this.cssPosition?-this.offset.scroll.left:i?0:this.offset.scroll.left)*n}},_generatePosition:function(t,e){var n,i,r,o,a=this.options,s=this._isRootNode(this.scrollParent[0]),l=t.pageX,c=t.pageY;return s&&this.offset.scroll||(this.offset.scroll={top:this.scrollParent.scrollTop(),left:this.scrollParent.scrollLeft()}),e&&(this.containment&&(this.relativeContainer?(i=this.relativeContainer.offset(),n=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]):n=this.containment,t.pageX-this.offset.click.left<n[0]&&(l=n[0]+this.offset.click.left),t.pageY-this.offset.click.top<n[1]&&(c=n[1]+this.offset.click.top),t.pageX-this.offset.click.left>n[2]&&(l=n[2]+this.offset.click.left),t.pageY-this.offset.click.top>n[3]&&(c=n[3]+this.offset.click.top)),a.grid&&(r=a.grid[1]?this.originalPageY+Math.round((c-this.originalPageY)/a.grid[1])*a.grid[1]:this.originalPageY,c=n?r-this.offset.click.top>=n[1]||r-this.offset.click.top>n[3]?r:r-this.offset.click.top>=n[1]?r-a.grid[1]:r+a.grid[1]:r,o=a.grid[0]?this.originalPageX+Math.round((l-this.originalPageX)/a.grid[0])*a.grid[0]:this.originalPageX,l=n?o-this.offset.click.left>=n[0]||o-this.offset.click.left>n[2]?o:o-this.offset.click.left>=n[0]?o-a.grid[0]:o+a.grid[0]:o),"y"===a.axis&&(l=this.originalPageX),"x"===a.axis&&(c=this.originalPageY)),{top:c-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.offset.scroll.top:s?0:this.offset.scroll.top),left:l-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.offset.scroll.left:s?0:this.offset.scroll.left)}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]===this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1,this.destroyOnClear&&this.destroy()},_normalizeRightBottom:function(){"y"!==this.options.axis&&"auto"!==this.helper.css("right")&&(this.helper.width(this.helper.width()),this.helper.css("right","auto")),"x"!==this.options.axis&&"auto"!==this.helper.css("bottom")&&(this.helper.height(this.helper.height()),this.helper.css("bottom","auto"))},_trigger:function(e,n,i){return i=i||this._uiHash(),t.ui.plugin.call(this,e,[n,i,this],!0),/^(drag|start|stop)/.test(e)&&(this.positionAbs=this._convertPositionTo("absolute"),i.offset=this.positionAbs),t.Widget.prototype._trigger.call(this,e,n,i)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,n,i){var r=t.extend({},n,{item:i.element});i.sortables=[],t(i.options.connectToSortable).each(function(){var n=t(this).sortable("instance");n&&!n.options.disabled&&(i.sortables.push(n),n.refreshPositions(),n._trigger("activate",e,r))})},stop:function(e,n,i){var r=t.extend({},n,{item:i.element});i.cancelHelperRemoval=!1,t.each(i.sortables,function(){var t=this;t.isOver?(t.isOver=0,i.cancelHelperRemoval=!0,t.cancelHelperRemoval=!1,t._storedCSS={position:t.placeholder.css("position"),top:t.placeholder.css("top"),left:t.placeholder.css("left")},t._mouseStop(e),t.options.helper=t.options._helper):(t.cancelHelperRemoval=!0,t._trigger("deactivate",e,r))})},drag:function(e,n,i){t.each(i.sortables,function(){var r=!1,o=this;o.positionAbs=i.positionAbs,o.helperProportions=i.helperProportions,o.offset.click=i.offset.click,o._intersectsWith(o.containerCache)&&(r=!0,t.each(i.sortables,function(){return this.positionAbs=i.positionAbs,this.helperProportions=i.helperProportions,this.offset.click=i.offset.click,this!==o&&this._intersectsWith(this.containerCache)&&t.contains(o.element[0],this.element[0])&&(r=!1),r})),r?(o.isOver||(o.isOver=1,i._parent=n.helper.parent(),o.currentItem=n.helper.appendTo(o.element).data("ui-sortable-item",!0),o.options._helper=o.options.helper,o.options.helper=function(){return n.helper[0]},e.target=o.currentItem[0],o._mouseCapture(e,!0),o._mouseStart(e,!0,!0),o.offset.click.top=i.offset.click.top,o.offset.click.left=i.offset.click.left,o.offset.parent.left-=i.offset.parent.left-o.offset.parent.left,o.offset.parent.top-=i.offset.parent.top-o.offset.parent.top,i._trigger("toSortable",e),i.dropped=o.element,t.each(i.sortables,function(){this.refreshPositions()}),i.currentItem=i.element,o.fromOutside=i),o.currentItem&&(o._mouseDrag(e),n.position=o.position)):o.isOver&&(o.isOver=0,o.cancelHelperRemoval=!0,o.options._revert=o.options.revert,o.options.revert=!1,o._trigger("out",e,o._uiHash(o)),o._mouseStop(e,!0),o.options.revert=o.options._revert,o.options.helper=o.options._helper,o.placeholder&&o.placeholder.remove(),n.helper.appendTo(i._parent),i._refreshOffsets(e),n.position=i._generatePosition(e,!0),i._trigger("fromSortable",e),i.dropped=!1,t.each(i.sortables,function(){this.refreshPositions()}))})}}),t.ui.plugin.add("draggable","cursor",{start:function(e,n,i){var r=t("body"),o=i.options;r.css("cursor")&&(o._cursor=r.css("cursor")),r.css("cursor",o.cursor)},stop:function(e,n,i){var r=i.options;r._cursor&&t("body").css("cursor",r._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("opacity")&&(o._opacity=r.css("opacity")),r.css("opacity",o.opacity)},stop:function(e,n,i){var r=i.options;r._opacity&&t(n.helper).css("opacity",r._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(t,e,n){n.scrollParentNotHidden||(n.scrollParentNotHidden=n.helper.scrollParent(!1)),n.scrollParentNotHidden[0]!==n.document[0]&&"HTML"!==n.scrollParentNotHidden[0].tagName&&(n.overflowOffset=n.scrollParentNotHidden.offset())},drag:function(e,n,i){var r=i.options,o=!1,a=i.scrollParentNotHidden[0],s=i.document[0];a!==s&&"HTML"!==a.tagName?(r.axis&&"x"===r.axis||(i.overflowOffset.top+a.offsetHeight-e.pageY<r.scrollSensitivity?a.scrollTop=o=a.scrollTop+r.scrollSpeed:e.pageY-i.overflowOffset.top<r.scrollSensitivity&&(a.scrollTop=o=a.scrollTop-r.scrollSpeed)),r.axis&&"y"===r.axis||(i.overflowOffset.left+a.offsetWidth-e.pageX<r.scrollSensitivity?a.scrollLeft=o=a.scrollLeft+r.scrollSpeed:e.pageX-i.overflowOffset.left<r.scrollSensitivity&&(a.scrollLeft=o=a.scrollLeft-r.scrollSpeed))):(r.axis&&"x"===r.axis||(e.pageY-t(s).scrollTop()<r.scrollSensitivity?o=t(s).scrollTop(t(s).scrollTop()-r.scrollSpeed):t(window).height()-(e.pageY-t(s).scrollTop())<r.scrollSensitivity&&(o=t(s).scrollTop(t(s).scrollTop()+r.scrollSpeed))),r.axis&&"y"===r.axis||(e.pageX-t(s).scrollLeft()<r.scrollSensitivity?o=t(s).scrollLeft(t(s).scrollLeft()-r.scrollSpeed):t(window).width()-(e.pageX-t(s).scrollLeft())<r.scrollSensitivity&&(o=t(s).scrollLeft(t(s).scrollLeft()+r.scrollSpeed)))),o!==!1&&t.ui.ddmanager&&!r.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(e,n,i){var r=i.options;i.snapElements=[],t(r.snap.constructor!==String?r.snap.items||":data(ui-draggable)":r.snap).each(function(){var e=t(this),n=e.offset();this!==i.element[0]&&i.snapElements.push({item:this,width:e.outerWidth(),height:e.outerHeight(),top:n.top,left:n.left})})},drag:function(e,n,i){var r,o,a,s,l,c,u,h,d,f,p=i.options,m=p.snapTolerance,g=n.offset.left,v=g+i.helperProportions.width,b=n.offset.top,y=b+i.helperProportions.height;for(d=i.snapElements.length-1;d>=0;d--)l=i.snapElements[d].left-i.margins.left,c=l+i.snapElements[d].width,u=i.snapElements[d].top-i.margins.top,h=u+i.snapElements[d].height,l-m>v||g>c+m||u-m>y||b>h+m||!t.contains(i.snapElements[d].item.ownerDocument,i.snapElements[d].item)?(i.snapElements[d].snapping&&i.options.snap.release&&i.options.snap.release.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=!1):("inner"!==p.snapMode&&(r=Math.abs(u-y)<=m,o=Math.abs(h-b)<=m,a=Math.abs(l-v)<=m,s=Math.abs(c-g)<=m,r&&(n.position.top=i._convertPositionTo("relative",{top:u-i.helperProportions.height,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:h,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l-i.helperProportions.width
}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c}).left)),f=r||o||a||s,"outer"!==p.snapMode&&(r=Math.abs(u-b)<=m,o=Math.abs(h-y)<=m,a=Math.abs(l-g)<=m,s=Math.abs(c-v)<=m,r&&(n.position.top=i._convertPositionTo("relative",{top:u,left:0}).top),o&&(n.position.top=i._convertPositionTo("relative",{top:h-i.helperProportions.height,left:0}).top),a&&(n.position.left=i._convertPositionTo("relative",{top:0,left:l}).left),s&&(n.position.left=i._convertPositionTo("relative",{top:0,left:c-i.helperProportions.width}).left)),!i.snapElements[d].snapping&&(r||o||a||s||f)&&i.options.snap.snap&&i.options.snap.snap.call(i.element,e,t.extend(i._uiHash(),{snapItem:i.snapElements[d].item})),i.snapElements[d].snapping=r||o||a||s||f)}}),t.ui.plugin.add("draggable","stack",{start:function(e,n,i){var r,o=i.options,a=t.makeArray(t(o.stack)).sort(function(e,n){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(n).css("zIndex"),10)||0)});a.length&&(r=parseInt(t(a[0]).css("zIndex"),10)||0,t(a).each(function(e){t(this).css("zIndex",r+e)}),this.css("zIndex",r+a.length))}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,n,i){var r=t(n.helper),o=i.options;r.css("zIndex")&&(o._zIndex=r.css("zIndex")),r.css("zIndex",o.zIndex)},stop:function(e,n,i){var r=i.options;r._zIndex&&t(n.helper).css("zIndex",r._zIndex)}});t.ui.draggable;t.widget("ui.droppable",{version:"1.11.4",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect",activate:null,deactivate:null,drop:null,out:null,over:null},_create:function(){var e,n=this.options,i=n.accept;this.isover=!1,this.isout=!0,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions=function(){return arguments.length?void(e=arguments[0]):e?e:e={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight}},this._addToManager(n.scope),n.addClasses&&this.element.addClass("ui-droppable")},_addToManager:function(e){t.ui.ddmanager.droppables[e]=t.ui.ddmanager.droppables[e]||[],t.ui.ddmanager.droppables[e].push(this)},_splice:function(t){for(var e=0;e<t.length;e++)t[e]===this&&t.splice(e,1)},_destroy:function(){var e=t.ui.ddmanager.droppables[this.options.scope];this._splice(e),this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,n){if("accept"===e)this.accept=t.isFunction(n)?n:function(t){return t.is(n)};else if("scope"===e){var i=t.ui.ddmanager.droppables[this.options.scope];this._splice(i),this._addToManager(n)}this._super(e,n)},_activate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),n&&this._trigger("activate",e,this.ui(n))},_deactivate:function(e){var n=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),n&&this._trigger("deactivate",e,this.ui(n))},_over:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(n)))},_out:function(e){var n=t.ui.ddmanager.current;n&&(n.currentItem||n.element)[0]!==this.element[0]&&this.accept.call(this.element[0],n.currentItem||n.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(n)))},_drop:function(e,n){var i=n||t.ui.ddmanager.current,r=!1;return i&&(i.currentItem||i.element)[0]!==this.element[0]?(this.element.find(":data(ui-droppable)").not(".ui-draggable-dragging").each(function(){var n=t(this).droppable("instance");return n.options.greedy&&!n.options.disabled&&n.options.scope===i.options.scope&&n.accept.call(n.element[0],i.currentItem||i.element)&&t.ui.intersect(i,t.extend(n,{offset:n.element.offset()}),n.options.tolerance,e)?(r=!0,!1):void 0}),r?!1:this.accept.call(this.element[0],i.currentItem||i.element)?(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(i)),this.element):!1):!1},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(){function t(t,e,n){return t>=e&&e+n>t}return function(e,n,i,r){if(!n.offset)return!1;var o=(e.positionAbs||e.position.absolute).left+e.margins.left,a=(e.positionAbs||e.position.absolute).top+e.margins.top,s=o+e.helperProportions.width,l=a+e.helperProportions.height,c=n.offset.left,u=n.offset.top,h=c+n.proportions().width,d=u+n.proportions().height;switch(i){case"fit":return o>=c&&h>=s&&a>=u&&d>=l;case"intersect":return c<o+e.helperProportions.width/2&&s-e.helperProportions.width/2<h&&u<a+e.helperProportions.height/2&&l-e.helperProportions.height/2<d;case"pointer":return t(r.pageY,u,n.proportions().height)&&t(r.pageX,c,n.proportions().width);case"touch":return(a>=u&&d>=a||l>=u&&d>=l||u>a&&l>d)&&(o>=c&&h>=o||s>=c&&h>=s||c>o&&s>h);default:return!1}}}(),t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,n){var i,r,o=t.ui.ddmanager.droppables[e.options.scope]||[],a=n?n.type:null,s=(e.currentItem||e.element).find(":data(ui-droppable)").addBack();t:for(i=0;i<o.length;i++)if(!(o[i].options.disabled||e&&!o[i].accept.call(o[i].element[0],e.currentItem||e.element))){for(r=0;r<s.length;r++)if(s[r]===o[i].element[0]){o[i].proportions().height=0;continue t}o[i].visible="none"!==o[i].element.css("display"),o[i].visible&&("mousedown"===a&&o[i]._activate.call(o[i],n),o[i].offset=o[i].element.offset(),o[i].proportions({width:o[i].element[0].offsetWidth,height:o[i].element[0].offsetHeight}))}},drop:function(e,n){var i=!1;return t.each((t.ui.ddmanager.droppables[e.options.scope]||[]).slice(),function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance,n)&&(i=this._drop.call(this,n)||i),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=!0,this.isover=!1,this._deactivate.call(this,n)))}),i},dragStart:function(e,n){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)})},drag:function(e,n){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,n),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var i,r,o,a=t.ui.intersect(e,this,this.options.tolerance,n),s=!a&&this.isover?"isout":a&&!this.isover?"isover":null;s&&(this.options.greedy&&(r=this.options.scope,o=this.element.parents(":data(ui-droppable)").filter(function(){return t(this).droppable("instance").options.scope===r}),o.length&&(i=t(o[0]).droppable("instance"),i.greedyChild="isover"===s)),i&&"isover"===s&&(i.isover=!1,i.isout=!0,i._out.call(i,n)),this[s]=!0,this["isout"===s?"isover":"isout"]=!1,this["isover"===s?"_over":"_out"].call(this,n),i&&"isout"===s&&(i.isout=!1,i.isover=!0,i._over.call(i,n)))}})},dragStop:function(e,n){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,n)}};t.ui.droppable,t.widget("ui.sortable",t.ui.mouse,{version:"1.11.4",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3,activate:null,beforeStop:null,change:null,deactivate:null,out:null,over:null,receive:null,remove:null,sort:null,start:null,stop:null,update:null},_isOverAxis:function(t,e,n){return t>=e&&e+n>t},_isFloating:function(t){return/left|right/.test(t.css("float"))||/inline|table-cell/.test(t.css("display"))},_create:function(){this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.offset=this.element.offset(),this._mouseInit(),this._setHandleClassName(),this.ready=!0},_setOption:function(t,e){this._super(t,e),"handle"===t&&this._setHandleClassName()},_setHandleClassName:function(){this.element.find(".ui-sortable-handle").removeClass("ui-sortable-handle"),t.each(this.items,function(){(this.instance.options.handle?this.item.find(this.instance.options.handle):this.item).addClass("ui-sortable-handle")})},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled").find(".ui-sortable-handle").removeClass("ui-sortable-handle"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_mouseCapture:function(e,n){var i=null,r=!1,o=this;return this.reverting?!1:this.options.disabled||"static"===this.options.type?!1:(this._refreshItems(e),t(e.target).parents().each(function(){return t.data(this,o.widgetName+"-item")===o?(i=t(this),!1):void 0}),t.data(e.target,o.widgetName+"-item")===o&&(i=t(e.target)),i&&(!this.options.handle||n||(t(this.options.handle,i).find("*").addBack().each(function(){this===e.target&&(r=!0)}),r))?(this.currentItem=i,this._removeCurrentsFromItems(),!0):!1)},_mouseStart:function(e,n,i){var r,o,a=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,a.cursorAt&&this._adjustOffsetFromHelper(a.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!==this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),a.containment&&this._setContainment(),a.cursor&&"auto"!==a.cursor&&(o=this.document.find("body"),this.storedCursor=o.css("cursor"),o.css("cursor",a.cursor),this.storedStylesheet=t("<style>*{ cursor: "+a.cursor+" !important; }</style>").appendTo(o)),a.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",a.opacity)),a.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",a.zIndex)),this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!i)for(r=this.containers.length-1;r>=0;r--)this.containers[r]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){var n,i,r,o,a=this.options,s=!1;for(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll&&(this.scrollParent[0]!==this.document[0]&&"HTML"!==this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<a.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+a.scrollSpeed:e.pageY-this.overflowOffset.top<a.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-a.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<a.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+a.scrollSpeed:e.pageX-this.overflowOffset.left<a.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-a.scrollSpeed)):(e.pageY-this.document.scrollTop()<a.scrollSensitivity?s=this.document.scrollTop(this.document.scrollTop()-a.scrollSpeed):this.window.height()-(e.pageY-this.document.scrollTop())<a.scrollSensitivity&&(s=this.document.scrollTop(this.document.scrollTop()+a.scrollSpeed)),e.pageX-this.document.scrollLeft()<a.scrollSensitivity?s=this.document.scrollLeft(this.document.scrollLeft()-a.scrollSpeed):this.window.width()-(e.pageX-this.document.scrollLeft())<a.scrollSensitivity&&(s=this.document.scrollLeft(this.document.scrollLeft()+a.scrollSpeed))),s!==!1&&t.ui.ddmanager&&!a.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)),this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"===this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"===this.options.axis||(this.helper[0].style.top=this.position.top+"px"),n=this.items.length-1;n>=0;n--)if(i=this.items[n],r=i.item[0],o=this._intersectsWithPointer(i),o&&i.instance===this.currentContainer&&r!==this.currentItem[0]&&this.placeholder[1===o?"next":"prev"]()[0]!==r&&!t.contains(this.placeholder[0],r)&&("semi-dynamic"===this.options.type?!t.contains(this.element[0],r):!0)){if(this.direction=1===o?"down":"up","pointer"!==this.options.tolerance&&!this._intersectsWithSides(i))break;this._rearrange(e,i),this._trigger("change",e,this._uiHash());break}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,n){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var i=this,r=this.placeholder.offset(),o=this.options.axis,a={};o&&"x"!==o||(a.left=r.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollLeft)),o&&"y"!==o||(a.top=r.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]===this.document[0].body?0:this.offsetParent[0].scrollTop)),this.reverting=!0,t(this.helper).animate(a,parseInt(this.options.revert,10)||500,function(){i._clear(e)})}else this._clear(e,n);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"===this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!==this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},t(n).each(function(){var n=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[\-=_](.+)/);n&&i.push((e.key||n[1]+"[]")+"="+(e.key&&e.expression?n[1]:n[2]))}),!i.length&&e.key&&i.push(e.key+"="),i.join("&")},toArray:function(e){var n=this._getItemsAsjQuery(e&&e.connected),i=[];return e=e||{},n.each(function(){i.push(t(e.item||this).attr(e.attribute||"id")||"")}),i},_intersectsWith:function(t){var e=this.positionAbs.left,n=e+this.helperProportions.width,i=this.positionAbs.top,r=i+this.helperProportions.height,o=t.left,a=o+t.width,s=t.top,l=s+t.height,c=this.offset.click.top,u=this.offset.click.left,h="x"===this.options.axis||i+c>s&&l>i+c,d="y"===this.options.axis||e+u>o&&a>e+u,f=h&&d;return"pointer"===this.options.tolerance||this.options.forcePointerForContainers||"pointer"!==this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?f:o<e+this.helperProportions.width/2&&n-this.helperProportions.width/2<a&&s<i+this.helperProportions.height/2&&r-this.helperProportions.height/2<l},_intersectsWithPointer:function(t){var e="x"===this.options.axis||this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top,t.height),n="y"===this.options.axis||this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left,t.width),i=e&&n,r=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return i?this.floating?o&&"right"===o||"down"===r?2:1:r&&("down"===r?2:1):!1},_intersectsWithSides:function(t){var e=this._isOverAxis(this.positionAbs.top+this.offset.click.top,t.top+t.height/2,t.height),n=this._isOverAxis(this.positionAbs.left+this.offset.click.left,t.left+t.width/2,t.width),i=this._getDragVerticalDirection(),r=this._getDragHorizontalDirection();return this.floating&&r?"right"===r&&n||"left"===r&&!n:i&&("down"===i&&e||"up"===i&&!e)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!==t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!==t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this._setHandleClassName(),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor===String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){function n(){s.push(this)}var i,r,o,a,s=[],l=[],c=this._connectWith();if(c&&e)for(i=c.length-1;i>=0;i--)for(o=t(c[i],this.document[0]),r=o.length-1;r>=0;r--)a=t.data(o[r],this.widgetFullName),a&&a!==this&&!a.options.disabled&&l.push([t.isFunction(a.options.items)?a.options.items.call(a.element):t(a.options.items,a.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),a]);for(l.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]),i=l.length-1;i>=0;i--)l[i][0].each(n);return t(s)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var n=0;n<e.length;n++)if(e[n]===t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var n,i,r,o,a,s,l,c,u=this.items,h=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],d=this._connectWith();if(d&&this.ready)for(n=d.length-1;n>=0;n--)for(r=t(d[n],this.document[0]),i=r.length-1;i>=0;i--)o=t.data(r[i],this.widgetFullName),o&&o!==this&&!o.options.disabled&&(h.push([t.isFunction(o.options.items)?o.options.items.call(o.element[0],e,{item:this.currentItem}):t(o.options.items,o.element),o]),this.containers.push(o));for(n=h.length-1;n>=0;n--)for(a=h[n][1],s=h[n][0],i=0,c=s.length;c>i;i++)l=t(s[i]),l.data(this.widgetName+"-item",a),u.push({item:l,instance:a,width:0,height:0,left:0,top:0})},refreshPositions:function(e){this.floating=this.items.length?"x"===this.options.axis||this._isFloating(this.items[0].item):!1,this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());var n,i,r,o;for(n=this.items.length-1;n>=0;n--)i=this.items[n],i.instance!==this.currentContainer&&this.currentContainer&&i.item[0]!==this.currentItem[0]||(r=this.options.toleranceElement?t(this.options.toleranceElement,i.item):i.item,e||(i.width=r.outerWidth(),i.height=r.outerHeight()),o=r.offset(),i.left=o.left,i.top=o.top);if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(n=this.containers.length-1;n>=0;n--)o=this.containers[n].element.offset(),this.containers[n].containerCache.left=o.left,this.containers[n].containerCache.top=o.top,this.containers[n].containerCache.width=this.containers[n].element.outerWidth(),this.containers[n].containerCache.height=this.containers[n].element.outerHeight();return this},_createPlaceholder:function(e){e=e||this;var n,i=e.options;i.placeholder&&i.placeholder.constructor!==String||(n=i.placeholder,i.placeholder={element:function(){var i=e.currentItem[0].nodeName.toLowerCase(),r=t("<"+i+">",e.document[0]).addClass(n||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper");return"tbody"===i?e._createTrPlaceholder(e.currentItem.find("tr").eq(0),t("<tr>",e.document[0]).appendTo(r)):"tr"===i?e._createTrPlaceholder(e.currentItem,r):"img"===i&&r.attr("src",e.currentItem.attr("src")),n||r.css("visibility","hidden"),r},update:function(t,r){(!n||i.forcePlaceholderSize)&&(r.height()||r.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),r.width()||r.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}),e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_createTrPlaceholder:function(e,n){var i=this;e.children().each(function(){t("<td>&#160;</td>",i.document[0]).attr("colspan",t(this).attr("colspan")||1).appendTo(n)})},_contactContainers:function(e){var n,i,r,o,a,s,l,c,u,h,d=null,f=null;for(n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(d&&t.contains(this.containers[n].element[0],d.element[0]))continue;d=this.containers[n],f=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(d)if(1===this.containers.length)this.containers[f].containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1);else{for(r=1e4,o=null,u=d.floating||this._isFloating(this.currentItem),a=u?"left":"top",s=u?"width":"height",h=u?"clientX":"clientY",i=this.items.length-1;i>=0;i--)t.contains(this.containers[f].element[0],this.items[i].item[0])&&this.items[i].item[0]!==this.currentItem[0]&&(l=this.items[i].item.offset()[a],c=!1,e[h]-l>this.items[i][s]/2&&(c=!0),Math.abs(e[h]-l)<r&&(r=Math.abs(e[h]-l),o=this.items[i],this.direction=c?"up":"down"));if(!o&&!this.options.dropOnEmpty)return;if(this.currentContainer===this.containers[f])return void(this.currentContainer.containerCache.over||(this.containers[f]._trigger("over",e,this._uiHash()),this.currentContainer.containerCache.over=1));o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[f].element,!0),this._trigger("change",e,this._uiHash()),this.containers[f]._trigger("change",e,this._uiHash(this)),this.currentContainer=this.containers[f],this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[f]._trigger("over",e,this._uiHash(this)),this.containers[f].containerCache.over=1}},_createHelper:function(e){var n=this.options,i=t.isFunction(n.helper)?t(n.helper.apply(this.element[0],[e,this.currentItem])):"clone"===n.helper?this.currentItem.clone():this.currentItem;return i.parents("body").length||t("parent"!==n.appendTo?n.appendTo:this.currentItem[0].parentNode)[0].appendChild(i[0]),i[0]===this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(!i[0].style.width||n.forceHelperSize)&&i.width(this.currentItem.width()),(!i[0].style.height||n.forceHelperSize)&&i.height(this.currentItem.height()),i},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"===this.cssPosition&&this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]===this.document[0].body||this.offsetParent[0].tagName&&"html"===this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"===this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e,n,i,r=this.options;"parent"===r.containment&&(r.containment=this.helper[0].parentNode),("document"===r.containment||"window"===r.containment)&&(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,"document"===r.containment?this.document.width():this.window.width()-this.helperProportions.width-this.margins.left,("document"===r.containment?this.document.width():this.window.height()||this.document[0].body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(r.containment)||(e=t(r.containment)[0],n=t(r.containment).offset(),i="hidden"!==t(e).css("overflow"),this.containment=[n.left+(parseInt(t(e).css("borderLeftWidth"),10)||0)+(parseInt(t(e).css("paddingLeft"),10)||0)-this.margins.left,n.top+(parseInt(t(e).css("borderTopWidth"),10)||0)+(parseInt(t(e).css("paddingTop"),10)||0)-this.margins.top,n.left+(i?Math.max(e.scrollWidth,e.offsetWidth):e.offsetWidth)-(parseInt(t(e).css("borderLeftWidth"),10)||0)-(parseInt(t(e).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,n.top+(i?Math.max(e.scrollHeight,e.offsetHeight):e.offsetHeight)-(parseInt(t(e).css("borderTopWidth"),10)||0)-(parseInt(t(e).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top])},_convertPositionTo:function(e,n){n||(n=this.position);var i="absolute"===e?1:-1,r="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,o=/(html|body)/i.test(r[0].tagName);return{top:n.top+this.offset.relative.top*i+this.offset.parent.top*i-("fixed"===this.cssPosition?-this.scrollParent.scrollTop():o?0:r.scrollTop())*i,left:n.left+this.offset.relative.left*i+this.offset.parent.left*i-("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():o?0:r.scrollLeft())*i}},_generatePosition:function(e){var n,i,r=this.options,o=e.pageX,a=e.pageY,s="absolute"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,l=/(html|body)/i.test(s[0].tagName);return"relative"!==this.cssPosition||this.scrollParent[0]!==this.document[0]&&this.scrollParent[0]!==this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset()),this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(o=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(a=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(o=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(a=this.containment[3]+this.offset.click.top)),r.grid&&(n=this.originalPageY+Math.round((a-this.originalPageY)/r.grid[1])*r.grid[1],a=this.containment?n-this.offset.click.top>=this.containment[1]&&n-this.offset.click.top<=this.containment[3]?n:n-this.offset.click.top>=this.containment[1]?n-r.grid[1]:n+r.grid[1]:n,i=this.originalPageX+Math.round((o-this.originalPageX)/r.grid[0])*r.grid[0],o=this.containment?i-this.offset.click.left>=this.containment[0]&&i-this.offset.click.left<=this.containment[2]?i:i-this.offset.click.left>=this.containment[0]?i-r.grid[0]:i+r.grid[0]:i)),{top:a-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"===this.cssPosition?-this.scrollParent.scrollTop():l?0:s.scrollTop()),left:o-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"===this.cssPosition?-this.scrollParent.scrollLeft():l?0:s.scrollLeft())}},_rearrange:function(t,e,n,i){n?n[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"===this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var r=this.counter;this._delay(function(){r===this.counter&&this.refreshPositions(!i)})},_clear:function(t,e){function n(t,e,n){return function(i){n._trigger(t,i,e._uiHash(e))}}this.reverting=!1;var i,r=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]===this.currentItem[0]){for(i in this._storedCSS)("auto"===this._storedCSS[i]||"static"===this._storedCSS[i])&&(this._storedCSS[i]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();for(this.fromOutside&&!e&&r.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev===this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent===this.currentItem.parent()[0]||e||r.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(e||(r.push(function(t){this._trigger("remove",t,this._uiHash())}),r.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),r.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer)))),i=this.containers.length-1;i>=0;i--)e||r.push(n("deactivate",this,this.containers[i])),this.containers[i].containerCache.over&&(r.push(n("out",this,this.containers[i])),this.containers[i].containerCache.over=0);if(this.storedCursor&&(this.document.find("body").css("cursor",this.storedCursor),this.storedStylesheet.remove()),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"===this._storedZIndex?"":this._storedZIndex),this.dragging=!1,e||this._trigger("beforeStop",t,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.cancelHelperRemoval||(this.helper[0]!==this.currentItem[0]&&this.helper.remove(),this.helper=null),!e){for(i=0;i<r.length;i++)r[i].call(this,t);this._trigger("stop",t,this._uiHash())}return this.fromOutside=!1,!this.cancelHelperRemoval},_trigger:function(){t.Widget.prototype._trigger.apply(this,arguments)===!1&&this.cancel()},_uiHash:function(e){var n=e||this;return{helper:n.helper,placeholder:n.placeholder||t([]),position:n.position,originalPosition:n.originalPosition,offset:n.positionAbs,item:n.currentItem,sender:e?e.element:null}}})}),!function(t,e,n,i){"use strict";function r(t,e,n){return setTimeout(u(t,n),e)}function o(t,e,n){return Array.isArray(t)?(a(t,n[e],n),!0):!1}function a(t,e,n){var r;if(t)if(t.forEach)t.forEach(e,n);
else if(t.length!==i)for(r=0;r<t.length;)e.call(n,t[r],r,t),r++;else for(r in t)t.hasOwnProperty(r)&&e.call(n,t[r],r,t)}function s(t,e,n){for(var r=Object.keys(e),o=0;o<r.length;)(!n||n&&t[r[o]]===i)&&(t[r[o]]=e[r[o]]),o++;return t}function l(t,e){return s(t,e,!0)}function c(t,e,n){var i,r=e.prototype;i=t.prototype=Object.create(r),i.constructor=t,i._super=r,n&&s(i,n)}function u(t,e){return function(){return t.apply(e,arguments)}}function h(t,e){return typeof t==ut?t.apply(e?e[0]||i:i,e):t}function d(t,e){return t===i?e:t}function f(t,e,n){a(v(e),function(e){t.addEventListener(e,n,!1)})}function p(t,e,n){a(v(e),function(e){t.removeEventListener(e,n,!1)})}function m(t,e){for(;t;){if(t==e)return!0;t=t.parentNode}return!1}function g(t,e){return t.indexOf(e)>-1}function v(t){return t.trim().split(/\s+/g)}function b(t,e,n){if(t.indexOf&&!n)return t.indexOf(e);for(var i=0;i<t.length;){if(n&&t[i][n]==e||!n&&t[i]===e)return i;i++}return-1}function y(t){return Array.prototype.slice.call(t,0)}function w(t,e,n){for(var i=[],r=[],o=0;o<t.length;){var a=e?t[o][e]:t[o];b(r,a)<0&&i.push(t[o]),r[o]=a,o++}return n&&(i=e?i.sort(function(t,n){return t[e]>n[e]}):i.sort()),i}function x(t,e){for(var n,r,o=e[0].toUpperCase()+e.slice(1),a=0;a<lt.length;){if(n=lt[a],r=n?n+o:e,r in t)return r;a++}return i}function C(){return pt++}function _(t){var e=t.ownerDocument;return e.defaultView||e.parentWindow}function $(t,e){var n=this;this.manager=t,this.callback=e,this.element=t.element,this.target=t.options.inputTarget,this.domHandler=function(e){h(t.options.enable,[t])&&n.handler(e)},this.init()}function S(t){var e,n=t.options.inputClass;return new(e=n?n:vt?R:bt?W:gt?U:j)(t,E)}function E(t,e,n){var i=n.pointers.length,r=n.changedPointers.length,o=e&$t&&i-r===0,a=e&(Et|Tt)&&i-r===0;n.isFirst=!!o,n.isFinal=!!a,o&&(t.session={}),n.eventType=e,T(t,n),t.emit("hammer.input",n),t.recognize(n),t.session.prevInput=n}function T(t,e){var n=t.session,i=e.pointers,r=i.length;n.firstInput||(n.firstInput=M(e)),r>1&&!n.firstMultiple?n.firstMultiple=M(e):1===r&&(n.firstMultiple=!1);var o=n.firstInput,a=n.firstMultiple,s=a?a.center:o.center,l=e.center=O(i);e.timeStamp=ft(),e.deltaTime=e.timeStamp-o.timeStamp,e.angle=N(s,l),e.distance=D(s,l),k(n,e),e.offsetDirection=I(e.deltaX,e.deltaY),e.scale=a?F(a.pointers,i):1,e.rotation=a?L(a.pointers,i):0,A(n,e);var c=t.element;m(e.srcEvent.target,c)&&(c=e.srcEvent.target),e.target=c}function k(t,e){var n=e.center,i=t.offsetDelta||{},r=t.prevDelta||{},o=t.prevInput||{};(e.eventType===$t||o.eventType===Et)&&(r=t.prevDelta={x:o.deltaX||0,y:o.deltaY||0},i=t.offsetDelta={x:n.x,y:n.y}),e.deltaX=r.x+(n.x-i.x),e.deltaY=r.y+(n.y-i.y)}function A(t,e){var n,r,o,a,s=t.lastInterval||e,l=e.timeStamp-s.timeStamp;if(e.eventType!=Tt&&(l>_t||s.velocity===i)){var c=s.deltaX-e.deltaX,u=s.deltaY-e.deltaY,h=P(l,c,u);r=h.x,o=h.y,n=dt(h.x)>dt(h.y)?h.x:h.y,a=I(c,u),t.lastInterval=e}else n=s.velocity,r=s.velocityX,o=s.velocityY,a=s.direction;e.velocity=n,e.velocityX=r,e.velocityY=o,e.direction=a}function M(t){for(var e=[],n=0;n<t.pointers.length;)e[n]={clientX:ht(t.pointers[n].clientX),clientY:ht(t.pointers[n].clientY)},n++;return{timeStamp:ft(),pointers:e,center:O(e),deltaX:t.deltaX,deltaY:t.deltaY}}function O(t){var e=t.length;if(1===e)return{x:ht(t[0].clientX),y:ht(t[0].clientY)};for(var n=0,i=0,r=0;e>r;)n+=t[r].clientX,i+=t[r].clientY,r++;return{x:ht(n/e),y:ht(i/e)}}function P(t,e,n){return{x:e/t||0,y:n/t||0}}function I(t,e){return t===e?kt:dt(t)>=dt(e)?t>0?At:Mt:e>0?Ot:Pt}function D(t,e,n){n||(n=Lt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return Math.sqrt(i*i+r*r)}function N(t,e,n){n||(n=Lt);var i=e[n[0]]-t[n[0]],r=e[n[1]]-t[n[1]];return 180*Math.atan2(r,i)/Math.PI}function L(t,e){return N(e[1],e[0],Ft)-N(t[1],t[0],Ft)}function F(t,e){return D(e[0],e[1],Ft)/D(t[0],t[1],Ft)}function j(){this.evEl=Rt,this.evWin=Ht,this.allow=!0,this.pressed=!1,$.apply(this,arguments)}function R(){this.evEl=zt,this.evWin=Ut,$.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}function H(){this.evTarget=qt,this.evWin=Vt,this.started=!1,$.apply(this,arguments)}function B(t,e){var n=y(t.touches),i=y(t.changedTouches);return e&(Et|Tt)&&(n=w(n.concat(i),"identifier",!0)),[n,i]}function W(){this.evTarget=Gt,this.targetIds={},$.apply(this,arguments)}function z(t,e){var n=y(t.touches),i=this.targetIds;if(e&($t|St)&&1===n.length)return i[n[0].identifier]=!0,[n,n];var r,o,a=y(t.changedTouches),s=[],l=this.target;if(o=n.filter(function(t){return m(t.target,l)}),e===$t)for(r=0;r<o.length;)i[o[r].identifier]=!0,r++;for(r=0;r<a.length;)i[a[r].identifier]&&s.push(a[r]),e&(Et|Tt)&&delete i[a[r].identifier],r++;return s.length?[w(o.concat(s),"identifier",!0),s]:void 0}function U(){$.apply(this,arguments);var t=u(this.handler,this);this.touch=new W(this.manager,t),this.mouse=new j(this.manager,t)}function Y(t,e){this.manager=t,this.set(e)}function q(t){if(g(t,ee))return ee;var e=g(t,ne),n=g(t,ie);return e&&n?ne+" "+ie:e||n?e?ne:ie:g(t,te)?te:Qt}function V(t){this.id=C(),this.manager=null,this.options=l(t||{},this.defaults),this.options.enable=d(this.options.enable,!0),this.state=re,this.simultaneous={},this.requireFail=[]}function X(t){return t&ce?"cancel":t&se?"end":t&ae?"move":t&oe?"start":""}function G(t){return t==Pt?"down":t==Ot?"up":t==At?"left":t==Mt?"right":""}function K(t,e){var n=e.manager;return n?n.get(t):t}function Z(){V.apply(this,arguments)}function J(){Z.apply(this,arguments),this.pX=null,this.pY=null}function Q(){Z.apply(this,arguments)}function tt(){V.apply(this,arguments),this._timer=null,this._input=null}function et(){Z.apply(this,arguments)}function nt(){Z.apply(this,arguments)}function it(){V.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}function rt(t,e){return e=e||{},e.recognizers=d(e.recognizers,rt.defaults.preset),new ot(t,e)}function ot(t,e){e=e||{},this.options=l(e,rt.defaults),this.options.inputTarget=this.options.inputTarget||t,this.handlers={},this.session={},this.recognizers=[],this.element=t,this.input=S(this),this.touchAction=new Y(this,this.options.touchAction),at(this,!0),a(e.recognizers,function(t){var e=this.add(new t[0](t[1]));t[2]&&e.recognizeWith(t[2]),t[3]&&e.requireFailure(t[3])},this)}function at(t,e){var n=t.element;a(t.options.cssProps,function(t,i){n.style[x(n.style,i)]=e?t:""})}function st(t,n){var i=e.createEvent("Event");i.initEvent(t,!0,!0),i.gesture=n,n.target.dispatchEvent(i)}var lt=["","webkit","moz","MS","ms","o"],ct=e.createElement("div"),ut="function",ht=Math.round,dt=Math.abs,ft=Date.now,pt=1,mt=/mobile|tablet|ip(ad|hone|od)|android/i,gt="ontouchstart"in t,vt=x(t,"PointerEvent")!==i,bt=gt&&mt.test(navigator.userAgent),yt="touch",wt="pen",xt="mouse",Ct="kinect",_t=25,$t=1,St=2,Et=4,Tt=8,kt=1,At=2,Mt=4,Ot=8,Pt=16,It=At|Mt,Dt=Ot|Pt,Nt=It|Dt,Lt=["x","y"],Ft=["clientX","clientY"];$.prototype={handler:function(){},init:function(){this.evEl&&f(this.element,this.evEl,this.domHandler),this.evTarget&&f(this.target,this.evTarget,this.domHandler),this.evWin&&f(_(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&p(this.element,this.evEl,this.domHandler),this.evTarget&&p(this.target,this.evTarget,this.domHandler),this.evWin&&p(_(this.element),this.evWin,this.domHandler)}};var jt={mousedown:$t,mousemove:St,mouseup:Et},Rt="mousedown",Ht="mousemove mouseup";c(j,$,{handler:function(t){var e=jt[t.type];e&$t&&0===t.button&&(this.pressed=!0),e&St&&1!==t.which&&(e=Et),this.pressed&&this.allow&&(e&Et&&(this.pressed=!1),this.callback(this.manager,e,{pointers:[t],changedPointers:[t],pointerType:xt,srcEvent:t}))}});var Bt={pointerdown:$t,pointermove:St,pointerup:Et,pointercancel:Tt,pointerout:Tt},Wt={2:yt,3:wt,4:xt,5:Ct},zt="pointerdown",Ut="pointermove pointerup pointercancel";t.MSPointerEvent&&(zt="MSPointerDown",Ut="MSPointerMove MSPointerUp MSPointerCancel"),c(R,$,{handler:function(t){var e=this.store,n=!1,i=t.type.toLowerCase().replace("ms",""),r=Bt[i],o=Wt[t.pointerType]||t.pointerType,a=o==yt,s=b(e,t.pointerId,"pointerId");r&$t&&(0===t.button||a)?0>s&&(e.push(t),s=e.length-1):r&(Et|Tt)&&(n=!0),0>s||(e[s]=t,this.callback(this.manager,r,{pointers:e,changedPointers:[t],pointerType:o,srcEvent:t}),n&&e.splice(s,1))}});var Yt={touchstart:$t,touchmove:St,touchend:Et,touchcancel:Tt},qt="touchstart",Vt="touchstart touchmove touchend touchcancel";c(H,$,{handler:function(t){var e=Yt[t.type];if(e===$t&&(this.started=!0),this.started){var n=B.call(this,t,e);e&(Et|Tt)&&n[0].length-n[1].length===0&&(this.started=!1),this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:yt,srcEvent:t})}}});var Xt={touchstart:$t,touchmove:St,touchend:Et,touchcancel:Tt},Gt="touchstart touchmove touchend touchcancel";c(W,$,{handler:function(t){var e=Xt[t.type],n=z.call(this,t,e);n&&this.callback(this.manager,e,{pointers:n[0],changedPointers:n[1],pointerType:yt,srcEvent:t})}}),c(U,$,{handler:function(t,e,n){var i=n.pointerType==yt,r=n.pointerType==xt;if(i)this.mouse.allow=!1;else if(r&&!this.mouse.allow)return;e&(Et|Tt)&&(this.mouse.allow=!0),this.callback(t,e,n)},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});var Kt=x(ct.style,"touchAction"),Zt=Kt!==i,Jt="compute",Qt="auto",te="manipulation",ee="none",ne="pan-x",ie="pan-y";Y.prototype={set:function(t){t==Jt&&(t=this.compute()),Zt&&(this.manager.element.style[Kt]=t),this.actions=t.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var t=[];return a(this.manager.recognizers,function(e){h(e.options.enable,[e])&&(t=t.concat(e.getTouchAction()))}),q(t.join(" "))},preventDefaults:function(t){if(!Zt){var e=t.srcEvent,n=t.offsetDirection;if(this.manager.session.prevented)return void e.preventDefault();var i=this.actions,r=g(i,ee),o=g(i,ie),a=g(i,ne);return r||o&&n&It||a&&n&Dt?this.preventSrc(e):void 0}},preventSrc:function(t){this.manager.session.prevented=!0,t.preventDefault()}};var re=1,oe=2,ae=4,se=8,le=se,ce=16,ue=32;V.prototype={defaults:{},set:function(t){return s(this.options,t),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(t){if(o(t,"recognizeWith",this))return this;var e=this.simultaneous;return t=K(t,this),e[t.id]||(e[t.id]=t,t.recognizeWith(this)),this},dropRecognizeWith:function(t){return o(t,"dropRecognizeWith",this)?this:(t=K(t,this),delete this.simultaneous[t.id],this)},requireFailure:function(t){if(o(t,"requireFailure",this))return this;var e=this.requireFail;return t=K(t,this),-1===b(e,t)&&(e.push(t),t.requireFailure(this)),this},dropRequireFailure:function(t){if(o(t,"dropRequireFailure",this))return this;t=K(t,this);var e=b(this.requireFail,t);return e>-1&&this.requireFail.splice(e,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(t){return!!this.simultaneous[t.id]},emit:function(t){function e(e){n.manager.emit(n.options.event+(e?X(i):""),t)}var n=this,i=this.state;se>i&&e(!0),e(),i>=se&&e(!0)},tryEmit:function(t){return this.canEmit()?this.emit(t):void(this.state=ue)},canEmit:function(){for(var t=0;t<this.requireFail.length;){if(!(this.requireFail[t].state&(ue|re)))return!1;t++}return!0},recognize:function(t){var e=s({},t);return h(this.options.enable,[this,e])?(this.state&(le|ce|ue)&&(this.state=re),this.state=this.process(e),void(this.state&(oe|ae|se|ce)&&this.tryEmit(e))):(this.reset(),void(this.state=ue))},process:function(){},getTouchAction:function(){},reset:function(){}},c(Z,V,{defaults:{pointers:1},attrTest:function(t){var e=this.options.pointers;return 0===e||t.pointers.length===e},process:function(t){var e=this.state,n=t.eventType,i=e&(oe|ae),r=this.attrTest(t);return i&&(n&Tt||!r)?e|ce:i||r?n&Et?e|se:e&oe?e|ae:oe:ue}}),c(J,Z,{defaults:{event:"pan",threshold:10,pointers:1,direction:Nt},getTouchAction:function(){var t=this.options.direction,e=[];return t&It&&e.push(ie),t&Dt&&e.push(ne),e},directionTest:function(t){var e=this.options,n=!0,i=t.distance,r=t.direction,o=t.deltaX,a=t.deltaY;return r&e.direction||(e.direction&It?(r=0===o?kt:0>o?At:Mt,n=o!=this.pX,i=Math.abs(t.deltaX)):(r=0===a?kt:0>a?Ot:Pt,n=a!=this.pY,i=Math.abs(t.deltaY))),t.direction=r,n&&i>e.threshold&&r&e.direction},attrTest:function(t){return Z.prototype.attrTest.call(this,t)&&(this.state&oe||!(this.state&oe)&&this.directionTest(t))},emit:function(t){this.pX=t.deltaX,this.pY=t.deltaY;var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this._super.emit.call(this,t)}}),c(Q,Z,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.scale-1)>this.options.threshold||this.state&oe)},emit:function(t){if(this._super.emit.call(this,t),1!==t.scale){var e=t.scale<1?"in":"out";this.manager.emit(this.options.event+e,t)}}}),c(tt,V,{defaults:{event:"press",pointers:1,time:500,threshold:5},getTouchAction:function(){return[Qt]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime>e.time;if(this._input=t,!i||!n||t.eventType&(Et|Tt)&&!o)this.reset();else if(t.eventType&$t)this.reset(),this._timer=r(function(){this.state=le,this.tryEmit()},e.time,this);else if(t.eventType&Et)return le;return ue},reset:function(){clearTimeout(this._timer)},emit:function(t){this.state===le&&(t&&t.eventType&Et?this.manager.emit(this.options.event+"up",t):(this._input.timeStamp=ft(),this.manager.emit(this.options.event,this._input)))}}),c(et,Z,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[ee]},attrTest:function(t){return this._super.attrTest.call(this,t)&&(Math.abs(t.rotation)>this.options.threshold||this.state&oe)}}),c(nt,Z,{defaults:{event:"swipe",threshold:10,velocity:.65,direction:It|Dt,pointers:1},getTouchAction:function(){return J.prototype.getTouchAction.call(this)},attrTest:function(t){var e,n=this.options.direction;return n&(It|Dt)?e=t.velocity:n&It?e=t.velocityX:n&Dt&&(e=t.velocityY),this._super.attrTest.call(this,t)&&n&t.direction&&t.distance>this.options.threshold&&dt(e)>this.options.velocity&&t.eventType&Et},emit:function(t){var e=G(t.direction);e&&this.manager.emit(this.options.event+e,t),this.manager.emit(this.options.event,t)}}),c(it,V,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:2,posThreshold:10},getTouchAction:function(){return[te]},process:function(t){var e=this.options,n=t.pointers.length===e.pointers,i=t.distance<e.threshold,o=t.deltaTime<e.time;if(this.reset(),t.eventType&$t&&0===this.count)return this.failTimeout();if(i&&o&&n){if(t.eventType!=Et)return this.failTimeout();var a=this.pTime?t.timeStamp-this.pTime<e.interval:!0,s=!this.pCenter||D(this.pCenter,t.center)<e.posThreshold;this.pTime=t.timeStamp,this.pCenter=t.center,s&&a?this.count+=1:this.count=1,this._input=t;var l=this.count%e.taps;if(0===l)return this.hasRequireFailures()?(this._timer=r(function(){this.state=le,this.tryEmit()},e.interval,this),oe):le}return ue},failTimeout:function(){return this._timer=r(function(){this.state=ue},this.options.interval,this),ue},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==le&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}}),rt.VERSION="2.0.4",rt.defaults={domEvents:!1,touchAction:Jt,enable:!0,inputTarget:null,inputClass:null,preset:[[et,{enable:!1}],[Q,{enable:!1},["rotate"]],[nt,{direction:It}],[J,{direction:It},["swipe"]],[it],[it,{event:"doubletap",taps:2},["tap"]],[tt]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var he=1,de=2;ot.prototype={set:function(t){return s(this.options,t),t.touchAction&&this.touchAction.update(),t.inputTarget&&(this.input.destroy(),this.input.target=t.inputTarget,this.input.init()),this},stop:function(t){this.session.stopped=t?de:he},recognize:function(t){var e=this.session;if(!e.stopped){this.touchAction.preventDefaults(t);var n,i=this.recognizers,r=e.curRecognizer;(!r||r&&r.state&le)&&(r=e.curRecognizer=null);for(var o=0;o<i.length;)n=i[o],e.stopped===de||r&&n!=r&&!n.canRecognizeWith(r)?n.reset():n.recognize(t),!r&&n.state&(oe|ae|se)&&(r=e.curRecognizer=n),o++}},get:function(t){if(t instanceof V)return t;for(var e=this.recognizers,n=0;n<e.length;n++)if(e[n].options.event==t)return e[n];return null},add:function(t){if(o(t,"add",this))return this;var e=this.get(t.options.event);return e&&this.remove(e),this.recognizers.push(t),t.manager=this,this.touchAction.update(),t},remove:function(t){if(o(t,"remove",this))return this;var e=this.recognizers;return t=this.get(t),e.splice(b(e,t),1),this.touchAction.update(),this},on:function(t,e){var n=this.handlers;return a(v(t),function(t){n[t]=n[t]||[],n[t].push(e)}),this},off:function(t,e){var n=this.handlers;return a(v(t),function(t){e?n[t].splice(b(n[t],e),1):delete n[t]}),this},emit:function(t,e){this.options.domEvents&&st(t,e);var n=this.handlers[t]&&this.handlers[t].slice();if(n&&n.length){e.type=t,e.preventDefault=function(){e.srcEvent.preventDefault()};for(var i=0;i<n.length;)n[i](e),i++}},destroy:function(){this.element&&at(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}},s(rt,{INPUT_START:$t,INPUT_MOVE:St,INPUT_END:Et,INPUT_CANCEL:Tt,STATE_POSSIBLE:re,STATE_BEGAN:oe,STATE_CHANGED:ae,STATE_ENDED:se,STATE_RECOGNIZED:le,STATE_CANCELLED:ce,STATE_FAILED:ue,DIRECTION_NONE:kt,DIRECTION_LEFT:At,DIRECTION_RIGHT:Mt,DIRECTION_UP:Ot,DIRECTION_DOWN:Pt,DIRECTION_HORIZONTAL:It,DIRECTION_VERTICAL:Dt,DIRECTION_ALL:Nt,Manager:ot,Input:$,TouchAction:Y,TouchInput:W,MouseInput:j,PointerEventInput:R,TouchMouseInput:U,SingleTouchInput:H,Recognizer:V,AttrRecognizer:Z,Tap:it,Pan:J,Swipe:nt,Pinch:Q,Rotate:et,Press:tt,on:f,off:p,each:a,merge:l,extend:s,inherit:c,bindFn:u,prefixed:x}),typeof define==ut&&define.amd?define(function(){return rt}):"undefined"!=typeof module&&module.exports?module.exports=rt:t[n]=rt}(window,document,"Hammer"),!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.PhotoSwipe=e()}(this,function(){"use strict";var t=function(t,e,n,i){var r={features:null,bind:function(t,e,n,i){var r=(i?"remove":"add")+"EventListener";e=e.split(" ");for(var o=0;o<e.length;o++)e[o]&&t[r](e[o],n,!1)},isArray:function(t){return t instanceof Array},createEl:function(t,e){var n=document.createElement(e||"div");return t&&(n.className=t),n},getScrollY:function(){var t=window.pageYOffset;return void 0!==t?t:document.documentElement.scrollTop},unbind:function(t,e,n){r.bind(t,e,n,!0)},removeClass:function(t,e){var n=new RegExp("(\\s|^)"+e+"(\\s|$)");t.className=t.className.replace(n," ").replace(/^\s\s*/,"").replace(/\s\s*$/,"")},addClass:function(t,e){r.hasClass(t,e)||(t.className+=(t.className?" ":"")+e)},hasClass:function(t,e){return t.className&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(t.className)},getChildByClass:function(t,e){for(var n=t.firstChild;n;){if(r.hasClass(n,e))return n;n=n.nextSibling}},arraySearch:function(t,e,n){for(var i=t.length;i--;)if(t[i][n]===e)return i;return-1},extend:function(t,e,n){for(var i in e)if(e.hasOwnProperty(i)){if(n&&t.hasOwnProperty(i))continue;t[i]=e[i]}},easing:{sine:{out:function(t){return Math.sin(t*(Math.PI/2))},inOut:function(t){return-(Math.cos(Math.PI*t)-1)/2}},cubic:{out:function(t){return--t*t*t+1}}},detectFeatures:function(){if(r.features)return r.features;var t=r.createEl(),e=t.style,n="",i={};if(i.oldIE=document.all&&!document.addEventListener,i.touch="ontouchstart"in window,window.requestAnimationFrame&&(i.raf=window.requestAnimationFrame,i.caf=window.cancelAnimationFrame),i.pointerEvent=navigator.pointerEnabled||navigator.msPointerEnabled,!i.pointerEvent){var o=navigator.userAgent;if(/iP(hone|od)/.test(navigator.platform)){var a=navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/);a&&a.length>0&&(a=parseInt(a[1],10),a>=1&&8>a&&(i.isOldIOSPhone=!0))}var s=o.match(/Android\s([0-9\.]*)/),l=s?s[1]:0;l=parseFloat(l),l>=1&&(4.4>l&&(i.isOldAndroid=!0),i.androidVersion=l),i.isMobileOpera=/opera mini|opera mobi/i.test(o)}for(var c,u,h=["transform","perspective","animationName"],d=["","webkit","Moz","ms","O"],f=0;4>f;f++){n=d[f];for(var p=0;3>p;p++)c=h[p],u=n+(n?c.charAt(0).toUpperCase()+c.slice(1):c),!i[c]&&u in e&&(i[c]=u);n&&!i.raf&&(n=n.toLowerCase(),i.raf=window[n+"RequestAnimationFrame"],i.raf&&(i.caf=window[n+"CancelAnimationFrame"]||window[n+"CancelRequestAnimationFrame"]))}if(!i.raf){var m=0;i.raf=function(t){var e=(new Date).getTime(),n=Math.max(0,16-(e-m)),i=window.setTimeout(function(){t(e+n)},n);return m=e+n,i},i.caf=function(t){clearTimeout(t)}}return i.svg=!!document.createElementNS&&!!document.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect,r.features=i,i}};r.detectFeatures(),r.features.oldIE&&(r.bind=function(t,e,n,i){e=e.split(" ");for(var r,o=(i?"detach":"attach")+"Event",a=function(){n.handleEvent.call(n)},s=0;s<e.length;s++)if(r=e[s])if("object"==typeof n&&n.handleEvent){if(i){if(!n["oldIE"+r])return!1}else n["oldIE"+r]=a;t[o]("on"+r,n["oldIE"+r])}else t[o]("on"+r,n)});var o=this,a=25,s=3,l={allowPanToNext:!0,spacing:.12,bgOpacity:1,mouseUsed:!1,loop:!0,pinchToClose:!0,closeOnScroll:!0,closeOnVerticalDrag:!0,verticalDragRange:.6,hideAnimationDuration:333,showAnimationDuration:333,showHideOpacity:!1,focus:!0,escKey:!0,arrowKeys:!0,mainScrollEndFriction:.35,panEndFriction:.35,isClickableElement:function(t){return"A"===t.tagName},getDoubleTapZoom:function(t,e){return t?1:e.initialZoomLevel<.7?1:1.5},maxSpreadZoom:2,modal:!0,scaleMode:"fit",alwaysFadeIn:!1};r.extend(l,i);var c,u,h,d,f,p,m,g,v,b,y,w,x,C,_,$,S,E,T,k,A,M,O,P,I,D,N,L,F,j,R,H,B,W,z,U,Y,q,V,X,G,K,Z,J,Q,tt,et,nt,it,rt,ot,at,st,lt,ct,ut,ht=function(){return{x:0,y:0}},dt=ht(),ft=ht(),pt=ht(),mt={},gt=0,vt={},bt=ht(),yt=0,wt=!0,xt=[],Ct={},_t=function(t,e){r.extend(o,e.publicMethods),xt.push(t)},$t=function(t){var e=Je();return t>e-1?t-e:0>t?e+t:t},St={},Et=function(t,e){return St[t]||(St[t]=[]),St[t].push(e)},Tt=function(t){var e=St[t];if(e){var n=Array.prototype.slice.call(arguments);n.shift();for(var i=0;i<e.length;i++)e[i].apply(o,n)}},kt=function(){return(new Date).getTime()},At=function(t){lt=t,o.bg.style.opacity=t*l.bgOpacity},Mt=function(t,e,n,i){t[M]=w+e+"px, "+n+"px"+x+" scale("+i+")"},Ot=function(){it&&Mt(it,pt.x,pt.y,b)},Pt=function(t){t.container&&Mt(t.container.style,t.initialPosition.x,t.initialPosition.y,t.initialZoomLevel)},It=function(t,e){e[M]=w+t+"px, 0px"+x},Dt=function(t,e){if(!l.loop&&e){var n=d+(bt.x*gt-t)/bt.x,i=Math.round(t-ve.x);(0>n&&i>0||n>=Je()-1&&0>i)&&(t=ve.x+i*l.mainScrollEndFriction)}ve.x=t,It(t,f)},Nt=function(t,e){var n=be[t]-vt[t];return ft[t]+dt[t]+n-n*(e/y)},Lt=function(t,e){t.x=e.x,t.y=e.y,e.id&&(t.id=e.id)},Ft=function(t){t.x=Math.round(t.x),t.y=Math.round(t.y)},jt=null,Rt=function(){jt&&(r.unbind(document,"mousemove",Rt),r.addClass(t,"pswp--has_mouse"),l.mouseUsed=!0,Tt("mouseUsed")),jt=setTimeout(function(){jt=null},100)},Ht=function(){r.bind(document,"keydown",o),R.transform&&r.bind(o.scrollWrap,"click",o),l.mouseUsed||r.bind(document,"mousemove",Rt),r.bind(window,"resize scroll",o),Tt("bindEvents")},Bt=function(){r.unbind(window,"resize",o),r.unbind(window,"scroll",v.scroll),r.unbind(document,"keydown",o),r.unbind(document,"mousemove",Rt),R.transform&&r.unbind(o.scrollWrap,"click",o),q&&r.unbind(window,m,o),Tt("unbindEvents")},Wt=function(t,e){var n=sn(o.currItem,mt,t);return e&&(nt=n),n},zt=function(t){return t||(t=o.currItem),t.initialZoomLevel},Ut=function(t){return t||(t=o.currItem),t.w>0?l.maxSpreadZoom:1},Yt=function(t,e,n,i){return i===o.currItem.initialZoomLevel?(n[t]=o.currItem.initialPosition[t],!0):(n[t]=Nt(t,i),n[t]>e.min[t]?(n[t]=e.min[t],!0):n[t]<e.max[t]?(n[t]=e.max[t],!0):!1)},qt=function(){if(M){var e=R.perspective&&!P;return w="translate"+(e?"3d(":"("),void(x=R.perspective?", 0px)":")")}M="left",r.addClass(t,"pswp--ie"),It=function(t,e){e.left=t+"px"},Pt=function(t){var e=t.fitRatio>1?1:t.fitRatio,n=t.container.style,i=e*t.w,r=e*t.h;n.width=i+"px",n.height=r+"px",n.left=t.initialPosition.x+"px",n.top=t.initialPosition.y+"px"},Ot=function(){if(it){var t=it,e=o.currItem,n=e.fitRatio>1?1:e.fitRatio,i=n*e.w,r=n*e.h;t.width=i+"px",t.height=r+"px",t.left=pt.x+"px",t.top=pt.y+"px"}}},Vt=function(t){var e="";l.escKey&&27===t.keyCode?e="close":l.arrowKeys&&(37===t.keyCode?e="prev":39===t.keyCode&&(e="next")),e&&(t.ctrlKey||t.altKey||t.shiftKey||t.metaKey||(t.preventDefault?t.preventDefault():t.returnValue=!1,o[e]()))},Xt=function(t){t&&(G||X||rt||U)&&(t.preventDefault(),t.stopPropagation())},Gt=function(){o.setScrollOffset(0,r.getScrollY())},Kt={},Zt=0,Jt=function(t){Kt[t]&&(Kt[t].raf&&D(Kt[t].raf),Zt--,delete Kt[t])},Qt=function(t){Kt[t]&&Jt(t),Kt[t]||(Zt++,Kt[t]={})},te=function(){for(var t in Kt)Kt.hasOwnProperty(t)&&Jt(t)},ee=function(t,e,n,i,r,o,a){var s,l=kt();Qt(t);var c=function(){if(Kt[t]){if(s=kt()-l,s>=i)return Jt(t),o(n),void(a&&a());o((n-e)*r(s/i)+e),Kt[t].raf=I(c)}};c()},ne={shout:Tt,listen:Et,viewportSize:mt,options:l,isMainScrollAnimating:function(){return rt},getZoomLevel:function(){return b},getCurrentIndex:function(){return d},isDragging:function(){return q},isZooming:function(){return Q},setScrollOffset:function(t,e){vt.x=t,j=vt.y=e,Tt("updateScrollOffset",vt)},applyZoomPan:function(t,e,n){pt.x=e,pt.y=n,b=t,Ot()},init:function(){if(!c&&!u){var n;o.framework=r,o.template=t,o.bg=r.getChildByClass(t,"pswp__bg"),N=t.className,c=!0,R=r.detectFeatures(),I=R.raf,D=R.caf,M=R.transform,F=R.oldIE,o.scrollWrap=r.getChildByClass(t,"pswp__scroll-wrap"),o.container=r.getChildByClass(o.scrollWrap,"pswp__container"),f=o.container.style,o.itemHolders=$=[{el:o.container.children[0],wrap:0,index:-1},{el:o.container.children[1],wrap:0,index:-1},{el:o.container.children[2],wrap:0,index:-1}],$[0].el.style.display=$[2].el.style.display="none",qt(),v={resize:o.updateSize,scroll:Gt,keydown:Vt,click:Xt};var i=R.isOldIOSPhone||R.isOldAndroid||R.isMobileOpera;for(R.animationName&&R.transform&&!i||(l.showAnimationDuration=l.hideAnimationDuration=0),n=0;n<xt.length;n++)o["init"+xt[n]]();if(e){var a=o.ui=new e(o,r);a.init()}Tt("firstUpdate"),d=d||l.index||0,(isNaN(d)||0>d||d>=Je())&&(d=0),o.currItem=Ze(d),(R.isOldIOSPhone||R.isOldAndroid)&&(wt=!1),t.setAttribute("aria-hidden","false"),l.modal&&(wt?t.style.position="fixed":(t.style.position="absolute",t.style.top=r.getScrollY()+"px")),void 0===j&&(Tt("initialLayout"),j=L=r.getScrollY());var h="pswp--open ";for(l.mainClass&&(h+=l.mainClass+" "),l.showHideOpacity&&(h+="pswp--animate_opacity "),h+=P?"pswp--touch":"pswp--notouch",h+=R.animationName?" pswp--css_animation":"",h+=R.svg?" pswp--svg":"",r.addClass(t,h),o.updateSize(),p=-1,yt=null,n=0;s>n;n++)It((n+p)*bt.x,$[n].el.style);F||r.bind(o.scrollWrap,g,o),Et("initialZoomInEnd",function(){o.setContent($[0],d-1),o.setContent($[2],d+1),$[0].el.style.display=$[2].el.style.display="block",l.focus&&t.focus(),Ht()}),o.setContent($[1],d),o.updateCurrItem(),Tt("afterInit"),wt||(C=setInterval(function(){Zt||q||Q||b!==o.currItem.initialZoomLevel||o.updateSize()},1e3)),r.addClass(t,"pswp--visible")}},close:function(){c&&(c=!1,u=!0,Tt("close"),Bt(),tn(o.currItem,null,!0,o.destroy))},destroy:function(){Tt("destroy"),Ve&&clearTimeout(Ve),t.setAttribute("aria-hidden","true"),t.className=N,C&&clearInterval(C),r.unbind(o.scrollWrap,g,o),r.unbind(window,"scroll",o),_e(),te(),St=null},panTo:function(t,e,n){n||(t>nt.min.x?t=nt.min.x:t<nt.max.x&&(t=nt.max.x),e>nt.min.y?e=nt.min.y:e<nt.max.y&&(e=nt.max.y)),pt.x=t,pt.y=e,Ot()},handleEvent:function(t){t=t||window.event,v[t.type]&&v[t.type](t)},goTo:function(t){t=$t(t);var e=t-d;yt=e,d=t,o.currItem=Ze(d),gt-=e,Dt(bt.x*gt),te(),rt=!1,o.updateCurrItem()},next:function(){o.goTo(d+1)},prev:function(){o.goTo(d-1)},updateCurrZoomItem:function(t){if(t&&Tt("beforeChange",0),$[1].el.children.length){var e=$[1].el.children[0];it=r.hasClass(e,"pswp__zoom-wrap")?e.style:null}else it=null;nt=o.currItem.bounds,y=b=o.currItem.initialZoomLevel,pt.x=nt.center.x,pt.y=nt.center.y,t&&Tt("afterChange")},invalidateCurrItems:function(){_=!0;for(var t=0;s>t;t++)$[t].item&&($[t].item.needsUpdate=!0)},updateCurrItem:function(t){if(0!==yt){var e,n=Math.abs(yt);if(!(t&&2>n)){o.currItem=Ze(d),Tt("beforeChange",yt),n>=s&&(p+=yt+(yt>0?-s:s),n=s);for(var i=0;n>i;i++)yt>0?(e=$.shift(),$[s-1]=e,p++,It((p+2)*bt.x,e.el.style),o.setContent(e,d-n+i+1+1)):(e=$.pop(),$.unshift(e),p--,It(p*bt.x,e.el.style),o.setContent(e,d+n-i-1-1));if(it&&1===Math.abs(yt)){var r=Ze(S);r.initialZoomLevel!==b&&(sn(r,mt),Pt(r))}yt=0,o.updateCurrZoomItem(),S=d,Tt("afterChange")}}},updateSize:function(e){if(!wt&&l.modal){var n=r.getScrollY();if(j!==n&&(t.style.top=n+"px",j=n),!e&&Ct.x===window.innerWidth&&Ct.y===window.innerHeight)return;Ct.x=window.innerWidth,Ct.y=window.innerHeight,t.style.height=Ct.y+"px"}if(mt.x=o.scrollWrap.clientWidth,mt.y=o.scrollWrap.clientHeight,Gt(),bt.x=mt.x+Math.round(mt.x*l.spacing),bt.y=mt.y,Dt(bt.x*gt),Tt("beforeResize"),void 0!==p){for(var i,a,c,u=0;s>u;u++)i=$[u],It((u+p)*bt.x,i.el.style),c=d+u-1,l.loop&&Je()>2&&(c=$t(c)),a=Ze(c),a&&(_||a.needsUpdate||!a.bounds)?(o.cleanSlide(a),o.setContent(i,c),1===u&&(o.currItem=a,o.updateCurrZoomItem(!0)),a.needsUpdate=!1):-1===i.index&&c>=0&&o.setContent(i,c),a&&a.container&&(sn(a,mt),Pt(a));_=!1}y=b=o.currItem.initialZoomLevel,nt=o.currItem.bounds,nt&&(pt.x=nt.center.x,pt.y=nt.center.y,Ot()),Tt("resize")},zoomTo:function(t,e,n,i,o){e&&(y=b,be.x=Math.abs(e.x)-pt.x,be.y=Math.abs(e.y)-pt.y,Lt(ft,pt));var a=Wt(t,!1),s={};Yt("x",a,s,t),Yt("y",a,s,t);var l=b,c={x:pt.x,y:pt.y};Ft(s);var u=function(e){1===e?(b=t,pt.x=s.x,pt.y=s.y):(b=(t-l)*e+l,pt.x=(s.x-c.x)*e+c.x,pt.y=(s.y-c.y)*e+c.y),o&&o(e),Ot()};n?ee("customZoomTo",0,1,n,i||r.easing.sine.inOut,u):u(1)}},ie=30,re=10,oe={},ae={},se={},le={},ce={},ue=[],he={},de=[],fe={},pe=0,me=ht(),ge=0,ve=ht(),be=ht(),ye=ht(),we=function(t,e){return t.x===e.x&&t.y===e.y},xe=function(t,e){return Math.abs(t.x-e.x)<a&&Math.abs(t.y-e.y)<a},Ce=function(t,e){return fe.x=Math.abs(t.x-e.x),fe.y=Math.abs(t.y-e.y),Math.sqrt(fe.x*fe.x+fe.y*fe.y)},_e=function(){K&&(D(K),K=null)},$e=function(){q&&(K=I($e),He())},Se=function(){return!("fit"===l.scaleMode&&b===o.currItem.initialZoomLevel)},Ee=function(t,e){return t?t.className&&t.className.indexOf("pswp__scroll-wrap")>-1?!1:e(t)?t:Ee(t.parentNode,e):!1},Te={},ke=function(t,e){return Te.prevent=!Ee(t.target,l.isClickableElement),Tt("preventDragEvent",t,e,Te),Te.prevent},Ae=function(t,e){return e.x=t.pageX,e.y=t.pageY,e.id=t.identifier,e},Me=function(t,e,n){n.x=.5*(t.x+e.x),n.y=.5*(t.y+e.y)},Oe=function(t,e,n){if(t-B>50){var i=de.length>2?de.shift():{};i.x=e,i.y=n,de.push(i),B=t}},Pe=function(){var t=pt.y-o.currItem.initialPosition.y;return 1-Math.abs(t/(mt.y/2))},Ie={},De={},Ne=[],Le=function(t){for(;Ne.length>0;)Ne.pop();return O?(ut=0,ue.forEach(function(t){0===ut?Ne[0]=t:1===ut&&(Ne[1]=t),ut++})):t.type.indexOf("touch")>-1?t.touches&&t.touches.length>0&&(Ne[0]=Ae(t.touches[0],Ie),t.touches.length>1&&(Ne[1]=Ae(t.touches[1],De))):(Ie.x=t.pageX,Ie.y=t.pageY,Ie.id="",Ne[0]=Ie),Ne},Fe=function(t,e){var n,i,r,a,s=0,c=pt[t]+e[t],u=e[t]>0,h=ve.x+e.x,d=ve.x-he.x;return n=c>nt.min[t]||c<nt.max[t]?l.panEndFriction:1,c=pt[t]+e[t]*n,!l.allowPanToNext&&b!==o.currItem.initialZoomLevel||(it?"h"!==ot||"x"!==t||X||(u?(c>nt.min[t]&&(n=l.panEndFriction,s=nt.min[t]-c,i=nt.min[t]-ft[t]),(0>=i||0>d)&&Je()>1?(a=h,0>d&&h>he.x&&(a=he.x)):nt.min.x!==nt.max.x&&(r=c)):(c<nt.max[t]&&(n=l.panEndFriction,s=c-nt.max[t],i=ft[t]-nt.max[t]),(0>=i||d>0)&&Je()>1?(a=h,d>0&&h<he.x&&(a=he.x)):nt.min.x!==nt.max.x&&(r=c))):a=h,"x"!==t)?void(rt||Z||b>o.currItem.fitRatio&&(pt[t]+=e[t]*n)):(void 0!==a&&(Dt(a,!0),Z=a===he.x?!1:!0),nt.min.x!==nt.max.x&&(void 0!==r?pt.x=r:Z||(pt.x+=e.x*n)),void 0!==a)},je=function(t){if(!("mousedown"===t.type&&t.button>0)){if(Ke)return void t.preventDefault();if(!Y||"mousedown"!==t.type){if(ke(t,!0)&&t.preventDefault(),Tt("pointerDown"),O){var e=r.arraySearch(ue,t.pointerId,"id");

0>e&&(e=ue.length),ue[e]={x:t.pageX,y:t.pageY,id:t.pointerId}}var n=Le(t),i=n.length;J=null,te(),q&&1!==i||(q=at=!0,r.bind(window,m,o),z=ct=st=U=Z=G=V=X=!1,ot=null,Tt("firstTouchStart",n),Lt(ft,pt),dt.x=dt.y=0,Lt(le,n[0]),Lt(ce,le),he.x=bt.x*gt,de=[{x:le.x,y:le.y}],B=H=kt(),Wt(b,!0),_e(),$e()),!Q&&i>1&&!rt&&!Z&&(y=b,X=!1,Q=V=!0,dt.y=dt.x=0,Lt(ft,pt),Lt(oe,n[0]),Lt(ae,n[1]),Me(oe,ae,ye),be.x=Math.abs(ye.x)-pt.x,be.y=Math.abs(ye.y)-pt.y,tt=et=Ce(oe,ae))}}},Re=function(t){if(t.preventDefault(),O){var e=r.arraySearch(ue,t.pointerId,"id");if(e>-1){var n=ue[e];n.x=t.pageX,n.y=t.pageY}}if(q){var i=Le(t);if(ot||G||Q)J=i;else{var o=Math.abs(i[0].x-le.x)-Math.abs(i[0].y-le.y);Math.abs(o)>=re&&(ot=o>0?"h":"v",J=i)}}},He=function(){if(J){var t=J.length;if(0!==t)if(Lt(oe,J[0]),se.x=oe.x-le.x,se.y=oe.y-le.y,Q&&t>1){if(le.x=oe.x,le.y=oe.y,!se.x&&!se.y&&we(J[1],ae))return;Lt(ae,J[1]),X||(X=!0,Tt("zoomGestureStarted"));var e=Ce(oe,ae),n=Ye(e);n>o.currItem.initialZoomLevel+o.currItem.initialZoomLevel/15&&(ct=!0);var i=1,r=zt(),a=Ut();if(r>n)if(l.pinchToClose&&!ct&&y<=o.currItem.initialZoomLevel){var s=r-n,c=1-s/(r/1.2);At(c),Tt("onPinchClose",c),st=!0}else i=(r-n)/r,i>1&&(i=1),n=r-i*(r/3);else n>a&&(i=(n-a)/(6*r),i>1&&(i=1),n=a+i*r);0>i&&(i=0),tt=e,Me(oe,ae,me),dt.x+=me.x-ye.x,dt.y+=me.y-ye.y,Lt(ye,me),pt.x=Nt("x",n),pt.y=Nt("y",n),z=n>b,b=n,Ot()}else{if(!ot)return;if(at&&(at=!1,Math.abs(se.x)>=re&&(se.x-=J[0].x-ce.x),Math.abs(se.y)>=re&&(se.y-=J[0].y-ce.y)),le.x=oe.x,le.y=oe.y,0===se.x&&0===se.y)return;if("v"===ot&&l.closeOnVerticalDrag&&!Se()){dt.y+=se.y,pt.y+=se.y;var u=Pe();return U=!0,Tt("onVerticalDrag",u),At(u),void Ot()}Oe(kt(),oe.x,oe.y),G=!0,nt=o.currItem.bounds;var h=Fe("x",se);h||(Fe("y",se),Ft(pt),Ot())}}},Be=function(t){if(R.isOldAndroid){if(Y&&"mouseup"===t.type)return;t.type.indexOf("touch")>-1&&(clearTimeout(Y),Y=setTimeout(function(){Y=0},600))}Tt("pointerUp"),ke(t,!1)&&t.preventDefault();var e;if(O){var n=r.arraySearch(ue,t.pointerId,"id");if(n>-1)if(e=ue.splice(n,1)[0],navigator.pointerEnabled)e.type=t.pointerType||"mouse";else{var i={4:"mouse",2:"touch",3:"pen"};e.type=i[t.pointerType],e.type||(e.type=t.pointerType||"mouse")}}var a,s=Le(t),c=s.length;if("mouseup"===t.type&&(c=0),2===c)return J=null,!0;1===c&&Lt(ce,s[0]),0!==c||ot||rt||(e||("mouseup"===t.type?e={x:t.pageX,y:t.pageY,type:"mouse"}:t.changedTouches&&t.changedTouches[0]&&(e={x:t.changedTouches[0].pageX,y:t.changedTouches[0].pageY,type:"touch"})),Tt("touchRelease",t,e));var u=-1;if(0===c&&(q=!1,r.unbind(window,m,o),_e(),Q?u=0:-1!==ge&&(u=kt()-ge)),ge=1===c?kt():-1,a=-1!==u&&150>u?"zoom":"swipe",Q&&2>c&&(Q=!1,1===c&&(a="zoomPointerUp"),Tt("zoomGestureEnded")),J=null,G||X||rt||U)if(te(),W||(W=We()),W.calculateSwipeSpeed("x"),U){var h=Pe();if(h<l.verticalDragRange)o.close();else{var d=pt.y,f=lt;ee("verticalDrag",0,1,300,r.easing.cubic.out,function(t){pt.y=(o.currItem.initialPosition.y-d)*t+d,At((1-f)*t+f),Ot()}),Tt("onVerticalDrag",1)}}else{if((Z||rt)&&0===c){var p=Ue(a,W);if(p)return;a="zoomPointerUp"}if(!rt)return"swipe"!==a?void qe():void(!Z&&b>o.currItem.fitRatio&&ze(W))}},We=function(){var t,e,n={lastFlickOffset:{},lastFlickDist:{},lastFlickSpeed:{},slowDownRatio:{},slowDownRatioReverse:{},speedDecelerationRatio:{},speedDecelerationRatioAbs:{},distanceOffset:{},backAnimDestination:{},backAnimStarted:{},calculateSwipeSpeed:function(i){de.length>1?(t=kt()-B+50,e=de[de.length-2][i]):(t=kt()-H,e=ce[i]),n.lastFlickOffset[i]=le[i]-e,n.lastFlickDist[i]=Math.abs(n.lastFlickOffset[i]),n.lastFlickSpeed[i]=n.lastFlickDist[i]>20?n.lastFlickOffset[i]/t:0,Math.abs(n.lastFlickSpeed[i])<.1&&(n.lastFlickSpeed[i]=0),n.slowDownRatio[i]=.95,n.slowDownRatioReverse[i]=1-n.slowDownRatio[i],n.speedDecelerationRatio[i]=1},calculateOverBoundsAnimOffset:function(t,e){n.backAnimStarted[t]||(pt[t]>nt.min[t]?n.backAnimDestination[t]=nt.min[t]:pt[t]<nt.max[t]&&(n.backAnimDestination[t]=nt.max[t]),void 0!==n.backAnimDestination[t]&&(n.slowDownRatio[t]=.7,n.slowDownRatioReverse[t]=1-n.slowDownRatio[t],n.speedDecelerationRatioAbs[t]<.05&&(n.lastFlickSpeed[t]=0,n.backAnimStarted[t]=!0,ee("bounceZoomPan"+t,pt[t],n.backAnimDestination[t],e||300,r.easing.sine.out,function(e){pt[t]=e,Ot()}))))},calculateAnimOffset:function(t){n.backAnimStarted[t]||(n.speedDecelerationRatio[t]=n.speedDecelerationRatio[t]*(n.slowDownRatio[t]+n.slowDownRatioReverse[t]-n.slowDownRatioReverse[t]*n.timeDiff/10),n.speedDecelerationRatioAbs[t]=Math.abs(n.lastFlickSpeed[t]*n.speedDecelerationRatio[t]),n.distanceOffset[t]=n.lastFlickSpeed[t]*n.speedDecelerationRatio[t]*n.timeDiff,pt[t]+=n.distanceOffset[t])},panAnimLoop:function(){return Kt.zoomPan&&(Kt.zoomPan.raf=I(n.panAnimLoop),n.now=kt(),n.timeDiff=n.now-n.lastNow,n.lastNow=n.now,n.calculateAnimOffset("x"),n.calculateAnimOffset("y"),Ot(),n.calculateOverBoundsAnimOffset("x"),n.calculateOverBoundsAnimOffset("y"),n.speedDecelerationRatioAbs.x<.05&&n.speedDecelerationRatioAbs.y<.05)?(pt.x=Math.round(pt.x),pt.y=Math.round(pt.y),Ot(),void Jt("zoomPan")):void 0}};return n},ze=function(t){return t.calculateSwipeSpeed("y"),nt=o.currItem.bounds,t.backAnimDestination={},t.backAnimStarted={},Math.abs(t.lastFlickSpeed.x)<=.05&&Math.abs(t.lastFlickSpeed.y)<=.05?(t.speedDecelerationRatioAbs.x=t.speedDecelerationRatioAbs.y=0,t.calculateOverBoundsAnimOffset("x"),t.calculateOverBoundsAnimOffset("y"),!0):(Qt("zoomPan"),t.lastNow=kt(),void t.panAnimLoop())},Ue=function(t,e){var n;rt||(pe=d);var i;if("swipe"===t){var a=le.x-ce.x,s=e.lastFlickDist.x<10;a>ie&&(s||e.lastFlickOffset.x>20)?i=-1:-ie>a&&(s||e.lastFlickOffset.x<-20)&&(i=1)}var c;i&&(d+=i,0>d?(d=l.loop?Je()-1:0,c=!0):d>=Je()&&(d=l.loop?0:Je()-1,c=!0),(!c||l.loop)&&(yt+=i,gt-=i,n=!0));var u,h=bt.x*gt,f=Math.abs(h-ve.x);return n||h>ve.x==e.lastFlickSpeed.x>0?(u=Math.abs(e.lastFlickSpeed.x)>0?f/Math.abs(e.lastFlickSpeed.x):333,u=Math.min(u,400),u=Math.max(u,250)):u=333,pe===d&&(n=!1),rt=!0,Tt("mainScrollAnimStart"),ee("mainScroll",ve.x,h,u,r.easing.cubic.out,Dt,function(){te(),rt=!1,pe=-1,(n||pe!==d)&&o.updateCurrItem(),Tt("mainScrollAnimComplete")}),n&&o.updateCurrItem(!0),n},Ye=function(t){return 1/et*t*y},qe=function(){var t=b,e=zt(),n=Ut();e>b?t=e:b>n&&(t=n);var i,a=1,s=lt;return st&&!z&&!ct&&e>b?(o.close(),!0):(st&&(i=function(t){At((a-s)*t+s)}),o.zoomTo(t,0,300,r.easing.cubic.out,i),!0)};_t("Gestures",{publicMethods:{initGestures:function(){var t=function(t,e,n,i,r){E=t+e,T=t+n,k=t+i,A=r?t+r:""};O=R.pointerEvent,O&&R.touch&&(R.touch=!1),O?navigator.pointerEnabled?t("pointer","down","move","up","cancel"):t("MSPointer","Down","Move","Up","Cancel"):R.touch?(t("touch","start","move","end","cancel"),P=!0):t("mouse","down","move","up"),m=T+" "+k+" "+A,g=E,O&&!P&&(P=navigator.maxTouchPoints>1||navigator.msMaxTouchPoints>1),o.likelyTouchDevice=P,v[E]=je,v[T]=Re,v[k]=Be,A&&(v[A]=v[k]),R.touch&&(g+=" mousedown",m+=" mousemove mouseup",v.mousedown=v[E],v.mousemove=v[T],v.mouseup=v[k]),P||(l.allowPanToNext=!1)}}});var Ve,Xe,Ge,Ke,Ze,Je,Qe,tn=function(e,n,i,a){Ve&&clearTimeout(Ve),Ke=!0,Ge=!0;var s;e.initialLayout?(s=e.initialLayout,e.initialLayout=null):s=l.getThumbBoundsFn&&l.getThumbBoundsFn(d);var c=i?l.hideAnimationDuration:l.showAnimationDuration,u=function(){Jt("initialZoom"),i?(o.template.removeAttribute("style"),o.bg.removeAttribute("style")):(At(1),n&&(n.style.display="block"),r.addClass(t,"pswp--animated-in"),Tt("initialZoom"+(i?"OutEnd":"InEnd"))),a&&a(),Ke=!1};if(!c||!s||void 0===s.x){var f=function(){Tt("initialZoom"+(i?"Out":"In")),b=e.initialZoomLevel,Lt(pt,e.initialPosition),Ot(),t.style.opacity=i?0:1,At(1),u()};return void f()}var p=function(){var n=h,a=!o.currItem.src||o.currItem.loadError||l.showHideOpacity;e.miniImg&&(e.miniImg.style.webkitBackfaceVisibility="hidden"),i||(b=s.w/e.w,pt.x=s.x,pt.y=s.y-L,o[a?"template":"bg"].style.opacity=.001,Ot()),Qt("initialZoom"),i&&!n&&r.removeClass(t,"pswp--animated-in"),a&&(i?r[(n?"remove":"add")+"Class"](t,"pswp--animate_opacity"):setTimeout(function(){r.addClass(t,"pswp--animate_opacity")},30)),Ve=setTimeout(function(){if(Tt("initialZoom"+(i?"Out":"In")),i){var o=s.w/e.w,l={x:pt.x,y:pt.y},h=b,d=lt,f=function(e){1===e?(b=o,pt.x=s.x,pt.y=s.y-j):(b=(o-h)*e+h,pt.x=(s.x-l.x)*e+l.x,pt.y=(s.y-j-l.y)*e+l.y),Ot(),a?t.style.opacity=1-e:At(d-e*d)};n?ee("initialZoom",0,1,c,r.easing.cubic.out,f,u):(f(1),Ve=setTimeout(u,c+20))}else b=e.initialZoomLevel,Lt(pt,e.initialPosition),Ot(),At(1),a?t.style.opacity=1:At(1),Ve=setTimeout(u,c+20)},i?25:90)};p()},en={},nn=[],rn={index:0,errorMsg:'<div class="pswp__error-msg"><a href="%url%" target="_blank">The image</a> could not be loaded.</div>',forceProgressiveLoading:!1,preload:[1,1],getNumItemsFn:function(){return Xe.length}},on=function(){return{center:{x:0,y:0},max:{x:0,y:0},min:{x:0,y:0}}},an=function(t,e,n){var i=t.bounds;i.center.x=Math.round((en.x-e)/2),i.center.y=Math.round((en.y-n)/2)+t.vGap.top,i.max.x=e>en.x?Math.round(en.x-e):i.center.x,i.max.y=n>en.y?Math.round(en.y-n)+t.vGap.top:i.center.y,i.min.x=e>en.x?0:i.center.x,i.min.y=n>en.y?t.vGap.top:i.center.y},sn=function(t,e,n){if(t.src&&!t.loadError){var i=!n;if(i&&(t.vGap||(t.vGap={top:0,bottom:0}),Tt("parseVerticalMargin",t)),en.x=e.x,en.y=e.y-t.vGap.top-t.vGap.bottom,i){var r=en.x/t.w,o=en.y/t.h;t.fitRatio=o>r?r:o;var a=l.scaleMode;"orig"===a?n=1:"fit"===a&&(n=t.fitRatio),n>1&&(n=1),t.initialZoomLevel=n,t.bounds||(t.bounds=on())}if(!n)return;return an(t,t.w*n,t.h*n),i&&n===t.initialZoomLevel&&(t.initialPosition=t.bounds.center),t.bounds}return t.w=t.h=0,t.initialZoomLevel=t.fitRatio=1,t.bounds=on(),t.initialPosition=t.bounds.center,t.bounds},ln=function(t,e,n,i,r,a){if(!e.loadError){var s,c=o.isDragging()&&!o.isZooming(),u=t===d||o.isMainScrollAnimating()||c;!r&&(P||l.alwaysFadeIn)&&u&&(s=!0),i&&(s&&(i.style.opacity=0),e.imageAppended=!0,hn(i,e.w,e.h),n.appendChild(i),s&&setTimeout(function(){i.style.opacity=1,a&&setTimeout(function(){e&&e.loaded&&e.placeholder&&(e.placeholder.style.display="none",e.placeholder=null)},500)},50))}},cn=function(t){t.loading=!0,t.loaded=!1;var e=t.img=r.createEl("pswp__img","img"),n=function(){t.loading=!1,t.loaded=!0,t.loadComplete?t.loadComplete(t):t.img=null,e.onload=e.onerror=null,e=null};return e.onload=n,e.onerror=function(){t.loadError=!0,n()},e.src=t.src,e},un=function(t,e){return t.src&&t.loadError&&t.container?(e&&(t.container.innerHTML=""),t.container.innerHTML=l.errorMsg.replace("%url%",t.src),!0):void 0},hn=function(t,e,n){t.style.width=e+"px",t.style.height=n+"px"},dn=function(){if(nn.length){for(var t,e=0;e<nn.length;e++)t=nn[e],t.holder.index===t.index&&ln(t.index,t.item,t.baseDiv,t.img);nn=[]}};_t("Controller",{publicMethods:{lazyLoadItem:function(t){t=$t(t);var e=Ze(t);!e||e.loaded||e.loading||(Tt("gettingData",t,e),e.src&&cn(e))},initController:function(){r.extend(l,rn,!0),o.items=Xe=n,Ze=o.getItemAt,Je=l.getNumItemsFn,Qe=l.loop,Je()<3&&(l.loop=!1),Et("beforeChange",function(t){var e,n=l.preload,i=null===t?!0:t>0,r=Math.min(n[0],Je()),a=Math.min(n[1],Je());for(e=1;(i?a:r)>=e;e++)o.lazyLoadItem(d+e);for(e=1;(i?r:a)>=e;e++)o.lazyLoadItem(d-e)}),Et("initialLayout",function(){o.currItem.initialLayout=l.getThumbBoundsFn&&l.getThumbBoundsFn(d)}),Et("mainScrollAnimComplete",dn),Et("initialZoomInEnd",dn),Et("destroy",function(){for(var t,e=0;e<Xe.length;e++)t=Xe[e],t.container&&(t.container=null),t.placeholder&&(t.placeholder=null),t.img&&(t.img=null),t.preloader&&(t.preloader=null),t.loadError&&(t.loaded=t.loadError=!1);nn=null})},getItemAt:function(t){return t>=0&&void 0!==Xe[t]?Xe[t]:!1},allowProgressiveImg:function(){return l.forceProgressiveLoading||!P||l.mouseUsed||screen.width>1200},setContent:function(t,e){l.loop&&(e=$t(e));var n=o.getItemAt(t.index);n&&(n.container=null);var i,a=o.getItemAt(e);if(!a)return void(t.el.innerHTML="");Tt("gettingData",e,a),t.index=e,t.item=a;var s=a.container=r.createEl("pswp__zoom-wrap");if(!a.src&&a.html&&(a.html.tagName?s.appendChild(a.html):s.innerHTML=a.html),un(a),!a.src||a.loadError||a.loaded)a.src&&!a.loadError&&(i=r.createEl("pswp__img","img"),i.style.webkitBackfaceVisibility="hidden",i.style.opacity=1,i.src=a.src,hn(i,a.w,a.h),ln(e,a,s,i,!0));else{if(a.loadComplete=function(n){if(c){if(n.img&&(n.img.style.webkitBackfaceVisibility="hidden"),t&&t.index===e){if(un(n,!0))return n.loadComplete=n.img=null,sn(n,mt),Pt(n),void(t.index===d&&o.updateCurrZoomItem());n.imageAppended?!Ke&&n.placeholder&&(n.placeholder.style.display="none",n.placeholder=null):R.transform&&(rt||Ke)?nn.push({item:n,baseDiv:s,img:n.img,index:e,holder:t}):ln(e,n,s,n.img,rt||Ke)}n.loadComplete=null,n.img=null,Tt("imageLoadComplete",e,n)}},r.features.transform){var u="pswp__img pswp__img--placeholder";u+=a.msrc?"":" pswp__img--placeholder--blank";var h=r.createEl(u,a.msrc?"img":"");a.msrc&&(h.src=a.msrc),hn(h,a.w,a.h),s.appendChild(h),a.placeholder=h}a.loading||cn(a),o.allowProgressiveImg()&&(!Ge&&R.transform?nn.push({item:a,baseDiv:s,img:a.img,index:e,holder:t}):ln(e,a,s,a.img,!0,!0))}sn(a,mt),Ge||e!==d?Pt(a):(it=s.style,tn(a,i||a.img)),t.el.innerHTML="",t.el.appendChild(s)},cleanSlide:function(t){t.img&&(t.img.onload=t.img.onerror=null),t.loaded=t.loading=t.img=t.imageAppended=!1}}});var fn,pn={},mn=function(t,e,n){var i=document.createEvent("CustomEvent"),r={origEvent:t,target:t.target,releasePoint:e,pointerType:n||"touch"};i.initCustomEvent("pswpTap",!0,!0,r),t.target.dispatchEvent(i)};_t("Tap",{publicMethods:{initTap:function(){Et("firstTouchStart",o.onTapStart),Et("touchRelease",o.onTapRelease),Et("destroy",function(){pn={},fn=null})},onTapStart:function(t){t.length>1&&(clearTimeout(fn),fn=null)},onTapRelease:function(t,e){if(e&&!G&&!V&&!Zt){var n=e;if(fn&&(clearTimeout(fn),fn=null,xe(n,pn)))return void Tt("doubleTap",n);if("mouse"===e.type)return void mn(t,e,"mouse");var i=t.target.tagName.toUpperCase();if("BUTTON"===i||r.hasClass(t.target,"pswp__single-tap"))return void mn(t,e);Lt(pn,n),fn=setTimeout(function(){mn(t,e),fn=null},300)}}}});var gn;_t("DesktopZoom",{publicMethods:{initDesktopZoom:function(){F||(P?Et("mouseUsed",function(){o.setupDesktopZoom()}):o.setupDesktopZoom(!0))},setupDesktopZoom:function(e){gn={};var n="wheel mousewheel DOMMouseScroll";Et("bindEvents",function(){r.bind(t,n,o.handleMouseWheel)}),Et("unbindEvents",function(){gn&&r.unbind(t,n,o.handleMouseWheel)}),o.mouseZoomedIn=!1;var i,a=function(){o.mouseZoomedIn&&(r.removeClass(t,"pswp--zoomed-in"),o.mouseZoomedIn=!1),1>b?r.addClass(t,"pswp--zoom-allowed"):r.removeClass(t,"pswp--zoom-allowed"),s()},s=function(){i&&(r.removeClass(t,"pswp--dragging"),i=!1)};Et("resize",a),Et("afterChange",a),Et("pointerDown",function(){o.mouseZoomedIn&&(i=!0,r.addClass(t,"pswp--dragging"))}),Et("pointerUp",s),e||a()},handleMouseWheel:function(t){if(b<=o.currItem.fitRatio)return l.modal&&(l.closeOnScroll?M&&Math.abs(t.deltaY)>2&&(h=!0,o.close()):t.preventDefault()),!0;if(t.stopPropagation(),gn.x=0,"deltaX"in t)1===t.deltaMode?(gn.x=18*t.deltaX,gn.y=18*t.deltaY):(gn.x=t.deltaX,gn.y=t.deltaY);else if("wheelDelta"in t)t.wheelDeltaX&&(gn.x=-.16*t.wheelDeltaX),gn.y=t.wheelDeltaY?-.16*t.wheelDeltaY:-.16*t.wheelDelta;else{if(!("detail"in t))return;gn.y=t.detail}Wt(b,!0);var e=pt.x-gn.x,n=pt.y-gn.y;(l.modal||e<=nt.min.x&&e>=nt.max.x&&n<=nt.min.y&&n>=nt.max.y)&&t.preventDefault(),o.panTo(e,n)},toggleDesktopZoom:function(e){e=e||{x:mt.x/2+vt.x,y:mt.y/2+vt.y};var n=l.getDoubleTapZoom(!0,o.currItem),i=b===n;o.mouseZoomedIn=!i,o.zoomTo(i?o.currItem.initialZoomLevel:n,e,333),r[(i?"remove":"add")+"Class"](t,"pswp--zoomed-in")}}});var vn,bn,yn,wn,xn,Cn,_n,$n,Sn,En,Tn,kn,An={history:!0,galleryUID:1},Mn=function(){return Tn.hash.substring(1)},On=function(){vn&&clearTimeout(vn),yn&&clearTimeout(yn)},Pn=function(){var t=Mn(),e={};if(t.length<5)return e;for(var n=t.split("&"),i=0;i<n.length;i++)if(n[i]){var r=n[i].split("=");r.length<2||(e[r[0]]=r[1])}return e.pid=parseInt(e.pid,10)-1,e.pid<0&&(e.pid=0),e},In=function(){if(yn&&clearTimeout(yn),Zt||q)return void(yn=setTimeout(In,500));wn?clearTimeout(bn):wn=!0;var t=_n+"&gid="+l.galleryUID+"&pid="+(d+1);$n||-1===Tn.hash.indexOf(t)&&(En=!0);var e=Tn.href.split("#")[0]+"#"+t;kn?"#"+t!==window.location.hash&&history[$n?"replaceState":"pushState"]("",document.title,e):$n?Tn.replace(e):Tn.hash=t,$n=!0,bn=setTimeout(function(){wn=!1},60)};_t("History",{publicMethods:{initHistory:function(){if(r.extend(l,An,!0),l.history){Tn=window.location,En=!1,Sn=!1,$n=!1,_n=Mn(),kn="pushState"in history,_n.indexOf("gid=")>-1&&(_n=_n.split("&gid=")[0],_n=_n.split("?gid=")[0]),Et("afterChange",o.updateURL),Et("unbindEvents",function(){r.unbind(window,"hashchange",o.onHashChange)});var t=function(){Cn=!0,Sn||(En?history.back():_n?Tn.hash=_n:kn?history.pushState("",document.title,Tn.pathname+Tn.search):Tn.hash=""),On()};Et("unbindEvents",function(){h&&t()}),Et("destroy",function(){Cn||t()}),Et("firstUpdate",function(){d=Pn().pid});var e=_n.indexOf("pid=");e>-1&&(_n=_n.substring(0,e),"&"===_n.slice(-1)&&(_n=_n.slice(0,-1))),setTimeout(function(){c&&r.bind(window,"hashchange",o.onHashChange)},40)}},onHashChange:function(){return Mn()===_n?(Sn=!0,void o.close()):void(wn||(xn=!0,o.goTo(Pn().pid),xn=!1))},updateURL:function(){On(),xn||($n?vn=setTimeout(In,800):In())}}}),r.extend(o,ne)};return t}),!function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e():t.PhotoSwipeUI_Default=e()}(this,function(){"use strict";var t=function(t,e){var n,i,r,o,a,s,l,c,u,h,d,f,p,m,g,v,b,y,w,x=this,C=!1,_=!0,$=!0,S={barsSize:{top:44,bottom:"auto"},closeElClasses:["item","caption","zoom-wrap","ui","top-bar"],timeToIdle:4e3,timeToIdleOutside:1e3,loadingIndicatorDelay:1e3,addCaptionHTMLFn:function(t,e){return t.title?(e.children[0].innerHTML=t.title,!0):(e.children[0].innerHTML="",!1)},closeEl:!0,captionEl:!0,fullscreenEl:!0,zoomEl:!0,shareEl:!0,counterEl:!0,arrowEl:!0,preloaderEl:!0,tapToClose:!1,tapToToggleControls:!0,clickToCloseNonZoomable:!0,shareButtons:[{id:"facebook",label:"Share on Facebook",url:"https://www.facebook.com/sharer/sharer.php?u={{url}}"},{id:"twitter",label:"Tweet",url:"https://twitter.com/intent/tweet?text={{text}}&url={{url}}"},{id:"pinterest",label:"Pin it",url:"http://www.pinterest.com/pin/create/button/?url={{url}}&media={{image_url}}&description={{text}}"},{id:"download",label:"Download image",url:"{{raw_image_url}}",download:!0}],getImageURLForShare:function(){return t.currItem.src||""},getPageURLForShare:function(){return window.location.href},getTextForShare:function(){return t.currItem.title||""},indexIndicatorSep:" / "},E=function(t){if(v)return!0;t=t||window.event,g.timeToIdle&&g.mouseUsed&&!u&&L();for(var n,i,r=t.target||t.srcElement,o=r.className,a=0;a<U.length;a++)n=U[a],n.onTap&&o.indexOf("pswp__"+n.name)>-1&&(n.onTap(),i=!0);if(i){t.stopPropagation&&t.stopPropagation(),v=!0;var s=e.features.isOldAndroid?600:30;b=setTimeout(function(){v=!1},s)}},T=function(){return!t.likelyTouchDevice||g.mouseUsed||screen.width>1200},k=function(t,n,i){e[(i?"add":"remove")+"Class"](t,"pswp__"+n)},A=function(){var t=1===g.getNumItemsFn();t!==m&&(k(i,"ui--one-slide",t),m=t)},M=function(){k(l,"share-modal--hidden",$)},O=function(){return $=!$,$?(e.removeClass(l,"pswp__share-modal--fade-in"),setTimeout(function(){$&&M()},300)):(M(),setTimeout(function(){$||e.addClass(l,"pswp__share-modal--fade-in")},30)),$||I(),!1},P=function(e){e=e||window.event;var n=e.target||e.srcElement;return t.shout("shareLinkClick",e,n),n.href?n.hasAttribute("download")?!0:(window.open(n.href,"pswp_share","scrollbars=yes,resizable=yes,toolbar=no,location=yes,width=550,height=420,top=100,left="+(window.screen?Math.round(screen.width/2-275):100)),$||O(),!1):!1},I=function(){for(var t,e,n,i,r,o="",a=0;a<g.shareButtons.length;a++)t=g.shareButtons[a],n=g.getImageURLForShare(t),i=g.getPageURLForShare(t),r=g.getTextForShare(t),e=t.url.replace("{{url}}",encodeURIComponent(i)).replace("{{image_url}}",encodeURIComponent(n)).replace("{{raw_image_url}}",n).replace("{{text}}",encodeURIComponent(r)),o+='<a href="'+e+'" target="_blank" class="pswp__share--'+t.id+'"'+(t.download?"download":"")+">"+t.label+"</a>",g.parseShareButtonOut&&(o=g.parseShareButtonOut(t,o));l.children[0].innerHTML=o,l.children[0].onclick=P},D=function(t){for(var n=0;n<g.closeElClasses.length;n++)if(e.hasClass(t,"pswp__"+g.closeElClasses[n]))return!0},N=0,L=function(){clearTimeout(w),N=0,u&&x.setIdle(!1)},F=function(t){t=t?t:window.event;var e=t.relatedTarget||t.toElement;e&&"HTML"!==e.nodeName||(clearTimeout(w),w=setTimeout(function(){x.setIdle(!0)},g.timeToIdleOutside))},j=function(){g.fullscreenEl&&(n||(n=x.getFullscreenAPI()),n?(e.bind(document,n.eventK,x.updateFullscreen),x.updateFullscreen(),e.addClass(t.template,"pswp--supports-fs")):e.removeClass(t.template,"pswp--supports-fs"))},R=function(){g.preloaderEl&&(H(!0),h("beforeChange",function(){clearTimeout(p),p=setTimeout(function(){t.currItem&&t.currItem.loading?(!t.allowProgressiveImg()||t.currItem.img&&!t.currItem.img.naturalWidth)&&H(!1):H(!0)},g.loadingIndicatorDelay)}),h("imageLoadComplete",function(e,n){t.currItem===n&&H(!0)}))},H=function(t){f!==t&&(k(d,"preloader--active",!t),f=t)},B=function(t){var n=t.vGap;if(T()){var a=g.barsSize;if(g.captionEl&&"auto"===a.bottom)if(o||(o=e.createEl("pswp__caption pswp__caption--fake"),o.appendChild(e.createEl("pswp__caption__center")),i.insertBefore(o,r),e.addClass(i,"pswp__ui--fit")),g.addCaptionHTMLFn(t,o,!0)){var s=o.clientHeight;n.bottom=parseInt(s,10)||44}else n.bottom=a.top;else n.bottom="auto"===a.bottom?0:a.bottom;n.top=a.top}else n.top=n.bottom=0},W=function(){g.timeToIdle&&h("mouseUsed",function(){e.bind(document,"mousemove",L),e.bind(document,"mouseout",F),y=setInterval(function(){N++,2===N&&x.setIdle(!0)},g.timeToIdle/2)})},z=function(){h("onVerticalDrag",function(t){_&&.95>t?x.hideControls():!_&&t>=.95&&x.showControls()});var t;h("onPinchClose",function(e){_&&.9>e?(x.hideControls(),t=!0):t&&!_&&e>.9&&x.showControls()}),h("zoomGestureEnded",function(){t=!1,t&&!_&&x.showControls()})},U=[{name:"caption",option:"captionEl",onInit:function(t){r=t}},{name:"share-modal",option:"shareEl",onInit:function(t){l=t},onTap:function(){O()}},{name:"button--share",option:"shareEl",onInit:function(t){s=t},onTap:function(){O()}},{name:"button--zoom",option:"zoomEl",onTap:t.toggleDesktopZoom},{name:"counter",option:"counterEl",onInit:function(t){a=t}},{name:"button--close",option:"closeEl",onTap:t.close},{name:"button--arrow--left",option:"arrowEl",onTap:t.prev},{name:"button--arrow--right",option:"arrowEl",onTap:t.next},{name:"button--fs",option:"fullscreenEl",onTap:function(){n.isFullscreen()?n.exit():n.enter()}},{name:"preloader",option:"preloaderEl",onInit:function(t){d=t}}],Y=function(){var t,n,r,o=function(i){if(i)for(var o=i.length,a=0;o>a;a++){t=i[a],n=t.className;for(var s=0;s<U.length;s++)r=U[s],n.indexOf("pswp__"+r.name)>-1&&(g[r.option]?(e.removeClass(t,"pswp__element--disabled"),r.onInit&&r.onInit(t)):e.addClass(t,"pswp__element--disabled"))}};o(i.children);var a=e.getChildByClass(i,"pswp__top-bar");a&&o(a.children)};x.init=function(){e.extend(t.options,S,!0),g=t.options,i=e.getChildByClass(t.scrollWrap,"pswp__ui"),h=t.listen,z(),h("beforeChange",x.update),h("doubleTap",function(e){var n=t.currItem.initialZoomLevel;t.getZoomLevel()!==n?t.zoomTo(n,e,333):t.zoomTo(g.getDoubleTapZoom(!1,t.currItem),e,333)}),h("preventDragEvent",function(t,e,n){var i=t.target||t.srcElement;i&&i.className&&t.type.indexOf("mouse")>-1&&(i.className.indexOf("__caption")>0||/(SMALL|STRONG|EM)/i.test(i.tagName))&&(n.prevent=!1)}),h("bindEvents",function(){e.bind(i,"pswpTap click",E),e.bind(t.scrollWrap,"pswpTap",x.onGlobalTap),t.likelyTouchDevice||e.bind(t.scrollWrap,"mouseover",x.onMouseOver)}),h("unbindEvents",function(){$||O(),y&&clearInterval(y),e.unbind(document,"mouseout",F),e.unbind(document,"mousemove",L),e.unbind(i,"pswpTap click",E),e.unbind(t.scrollWrap,"pswpTap",x.onGlobalTap),e.unbind(t.scrollWrap,"mouseover",x.onMouseOver),n&&(e.unbind(document,n.eventK,x.updateFullscreen),n.isFullscreen()&&(g.hideAnimationDuration=0,n.exit()),n=null)}),h("destroy",function(){g.captionEl&&(o&&i.removeChild(o),e.removeClass(r,"pswp__caption--empty")),l&&(l.children[0].onclick=null),e.removeClass(i,"pswp__ui--over-close"),e.addClass(i,"pswp__ui--hidden"),x.setIdle(!1)}),g.showAnimationDuration||e.removeClass(i,"pswp__ui--hidden"),h("initialZoomIn",function(){g.showAnimationDuration&&e.removeClass(i,"pswp__ui--hidden")}),h("initialZoomOut",function(){e.addClass(i,"pswp__ui--hidden")}),h("parseVerticalMargin",B),Y(),g.shareEl&&s&&l&&($=!0),A(),W(),j(),R()},x.setIdle=function(t){u=t,k(i,"ui--idle",t)},x.update=function(){_&&t.currItem?(x.updateIndexIndicator(),g.captionEl&&(g.addCaptionHTMLFn(t.currItem,r),k(r,"caption--empty",!t.currItem.title)),C=!0):C=!1,$||O(),A()},x.updateFullscreen=function(i){i&&setTimeout(function(){t.setScrollOffset(0,e.getScrollY())},50),e[(n.isFullscreen()?"add":"remove")+"Class"](t.template,"pswp--fs")},x.updateIndexIndicator=function(){g.counterEl&&(a.innerHTML=t.getCurrentIndex()+1+g.indexIndicatorSep+g.getNumItemsFn())},x.onGlobalTap=function(n){n=n||window.event;var i=n.target||n.srcElement;if(!v)if(n.detail&&"mouse"===n.detail.pointerType){if(D(i))return void t.close();e.hasClass(i,"pswp__img")&&(1===t.getZoomLevel()&&t.getZoomLevel()<=t.currItem.fitRatio?g.clickToCloseNonZoomable&&t.close():t.toggleDesktopZoom(n.detail.releasePoint))}else if(g.tapToToggleControls&&(_?x.hideControls():x.showControls()),g.tapToClose&&(e.hasClass(i,"pswp__img")||D(i)))return void t.close()},x.onMouseOver=function(t){t=t||window.event;var e=t.target||t.srcElement;k(i,"ui--over-close",D(e))},x.hideControls=function(){e.addClass(i,"pswp__ui--hidden"),_=!1},x.showControls=function(){_=!0,C||x.update(),e.removeClass(i,"pswp__ui--hidden")},x.supportsFullscreen=function(){var t=document;return!!(t.exitFullscreen||t.mozCancelFullScreen||t.webkitExitFullscreen||t.msExitFullscreen)},x.getFullscreenAPI=function(){var e,n=document.documentElement,i="fullscreenchange";return n.requestFullscreen?e={enterK:"requestFullscreen",exitK:"exitFullscreen",elementK:"fullscreenElement",eventK:i}:n.mozRequestFullScreen?e={enterK:"mozRequestFullScreen",exitK:"mozCancelFullScreen",elementK:"mozFullScreenElement",eventK:"moz"+i}:n.webkitRequestFullscreen?e={enterK:"webkitRequestFullscreen",exitK:"webkitExitFullscreen",elementK:"webkitFullscreenElement",eventK:"webkit"+i}:n.msRequestFullscreen&&(e={enterK:"msRequestFullscreen",exitK:"msExitFullscreen",elementK:"msFullscreenElement",eventK:"MSFullscreenChange"}),e&&(e.enter=function(){return c=g.closeOnScroll,g.closeOnScroll=!1,"webkitRequestFullscreen"!==this.enterK?t.template[this.enterK]():void t.template[this.enterK](Element.ALLOW_KEYBOARD_INPUT)},e.exit=function(){return g.closeOnScroll=c,document[this.exitK]()},e.isFullscreen=function(){return document[this.elementK]}),e}};return t}),function(t,e,n){"use strict";function i(t){return function(){var e,n=arguments[0];for(e="["+(t?t+":":"")+n+"] http://errors.angularjs.org/1.3.9/"+(t?t+"/":"")+n,n=1;n<arguments.length;n++){e=e+(1==n?"?":"&")+"p"+(n-1)+"=";var i,r=encodeURIComponent;i=arguments[n],i="function"==typeof i?i.toString().replace(/ \{[\s\S]*$/,""):"undefined"==typeof i?"undefined":"string"!=typeof i?JSON.stringify(i):i,e+=r(i)}return Error(e)}}function r(t){if(null==t||_(t))return!1;var e=t.length;return t.nodeType===Bn&&e?!0:b(t)||Dn(t)||0===e||"number"==typeof e&&e>0&&e-1 in t}function o(t,e,n){var i,a;if(t)if(x(t))for(i in t)"prototype"==i||"length"==i||"name"==i||t.hasOwnProperty&&!t.hasOwnProperty(i)||e.call(n,t[i],i,t);else if(Dn(t)||r(t)){var s="object"!=typeof t;for(i=0,a=t.length;a>i;i++)(s||i in t)&&e.call(n,t[i],i,t)}else if(t.forEach&&t.forEach!==o)t.forEach(e,n,t);else for(i in t)t.hasOwnProperty(i)&&e.call(n,t[i],i,t);return t}function a(t,e,n){for(var i=Object.keys(t).sort(),r=0;r<i.length;r++)e.call(n,t[i[r]],i[r]);return i}function s(t){return function(e,n){t(n,e)}}function l(){return++Pn}function c(t,e){e?t.$$hashKey=e:delete t.$$hashKey}function u(t){for(var e=t.$$hashKey,n=1,i=arguments.length;i>n;n++){var r=arguments[n];if(r)for(var o=Object.keys(r),a=0,s=o.length;s>a;a++){var l=o[a];t[l]=r[l]}}return c(t,e),t}function h(t){return parseInt(t,10)}function d(){}function f(t){return t}function p(t){return function(){return t}}function m(t){return"undefined"==typeof t}function g(t){return"undefined"!=typeof t}function v(t){return null!==t&&"object"==typeof t}function b(t){return"string"==typeof t}function y(t){return"number"==typeof t}function w(t){return"[object Date]"===An.call(t)}function x(t){return"function"==typeof t}function C(t){return"[object RegExp]"===An.call(t)}function _(t){return t&&t.window===t}function $(t){return t&&t.$evalAsync&&t.$watch}function S(t){return"boolean"==typeof t}function E(t){return!(!t||!(t.nodeName||t.prop&&t.attr&&t.find))}function T(t){var e={};t=t.split(",");var n;for(n=0;n<t.length;n++)e[t[n]]=!0;return e}function k(t){return _n(t.nodeName||t[0]&&t[0].nodeName)}function A(t,e){var n=t.indexOf(e);return n>=0&&t.splice(n,1),e}function M(t,e,n,i){if(_(t)||$(t))throw Mn("cpws");if(e){if(t===e)throw Mn("cpi");if(n=n||[],i=i||[],v(t)){var r=n.indexOf(t);if(-1!==r)return i[r];n.push(t),i.push(e)}if(Dn(t))for(var a=e.length=0;a<t.length;a++)r=M(t[a],null,n,i),v(t[a])&&(n.push(t[a]),i.push(r)),e.push(r);else{var s=e.$$hashKey;Dn(e)?e.length=0:o(e,function(t,n){delete e[n]});for(a in t)t.hasOwnProperty(a)&&(r=M(t[a],null,n,i),v(t[a])&&(n.push(t[a]),i.push(r)),e[a]=r);c(e,s)}}else(e=t)&&(Dn(t)?e=M(t,[],n,i):w(t)?e=new Date(t.getTime()):C(t)?(e=new RegExp(t.source,t.toString().match(/[^\/]*$/)[0]),e.lastIndex=t.lastIndex):v(t)&&(r=Object.create(Object.getPrototypeOf(t)),e=M(t,r,n,i)));return e}function O(t,e){if(Dn(t)){e=e||[];for(var n=0,i=t.length;i>n;n++)e[n]=t[n]}else if(v(t))for(n in e=e||{},t)("$"!==n.charAt(0)||"$"!==n.charAt(1))&&(e[n]=t[n]);return e||t}function P(t,e){if(t===e)return!0;if(null===t||null===e)return!1;if(t!==t&&e!==e)return!0;var i,r=typeof t;if(r==typeof e&&"object"==r){if(!Dn(t)){if(w(t))return w(e)?P(t.getTime(),e.getTime()):!1;if(C(t)&&C(e))return t.toString()==e.toString();if($(t)||$(e)||_(t)||_(e)||Dn(e))return!1;r={};for(i in t)if("$"!==i.charAt(0)&&!x(t[i])){if(!P(t[i],e[i]))return!1;r[i]=!0}for(i in e)if(!r.hasOwnProperty(i)&&"$"!==i.charAt(0)&&e[i]!==n&&!x(e[i]))return!1;return!0}if(!Dn(e))return!1;if((r=t.length)==e.length){for(i=0;r>i;i++)if(!P(t[i],e[i]))return!1;return!0}}return!1}function I(t,e,n){return t.concat(En.call(e,n))}function D(t,e){var n=2<arguments.length?En.call(arguments,2):[];return!x(e)||e instanceof RegExp?e:n.length?function(){return arguments.length?e.apply(t,I(n,arguments,0)):e.apply(t,n)}:function(){return arguments.length?e.apply(t,arguments):e.call(t)}}function N(t,i){var r=i;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=n:_(i)?r="$WINDOW":i&&e===i?r="$DOCUMENT":$(i)&&(r="$SCOPE"),r}function L(t,e){return"undefined"==typeof t?n:(y(e)||(e=e?2:null),JSON.stringify(t,N,e))}function F(t){return b(t)?JSON.parse(t):t}function j(t){t=yn(t).clone();try{t.empty()}catch(e){}var n=yn("<div>").append(t).html();try{return t[0].nodeType===Wn?_n(n):n.match(/^(<[^>]+>)/)[1].replace(/^<([\w\-]+)/,function(t,e){return"<"+_n(e)})}catch(i){return _n(n)}}function R(t){try{return decodeURIComponent(t)}catch(e){}}function H(t){var e,n,i={};return o((t||"").split("&"),function(t){t&&(e=t.replace(/\+/g,"%20").split("="),n=R(e[0]),g(n)&&(t=g(e[1])?R(e[1]):!0,$n.call(i,n)?Dn(i[n])?i[n].push(t):i[n]=[i[n],t]:i[n]=t))}),i}function B(t){var e=[];return o(t,function(t,n){Dn(t)?o(t,function(t){e.push(z(n,!0)+(!0===t?"":"="+z(t,!0)))}):e.push(z(n,!0)+(!0===t?"":"="+z(t,!0)))}),e.length?e.join("&"):""}function W(t){return z(t,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function z(t,e){return encodeURIComponent(t).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,e?"%20":"+")}function U(t,e){var n,i,r=jn.length;for(t=yn(t),
i=0;r>i;++i)if(n=jn[i]+e,b(n=t.attr(n)))return n;return null}function Y(t,e){var n,i,r={};o(jn,function(e){e+="app",!n&&t.hasAttribute&&t.hasAttribute(e)&&(n=t,i=t.getAttribute(e))}),o(jn,function(e){e+="app";var r;!n&&(r=t.querySelector("["+e.replace(":","\\:")+"]"))&&(n=r,i=r.getAttribute(e))}),n&&(r.strictDi=null!==U(n,"strict-di"),e(n,i?[i]:[],r))}function q(n,i,r){v(r)||(r={}),r=u({strictDi:!1},r);var a=function(){if(n=yn(n),n.injector()){var t=n[0]===e?"document":j(n);throw Mn("btstrpd",t.replace(/</,"&lt;").replace(/>/,"&gt;"))}return i=i||[],i.unshift(["$provide",function(t){t.value("$rootElement",n)}]),r.debugInfoEnabled&&i.push(["$compileProvider",function(t){t.debugInfoEnabled(!0)}]),i.unshift("ng"),t=Pt(i,r.strictDi),t.invoke(["$rootScope","$rootElement","$compile","$injector",function(t,e,n,i){t.$apply(function(){e.data("$injector",i),n(e)(t)})}]),t},s=/^NG_ENABLE_DEBUG_INFO!/,l=/^NG_DEFER_BOOTSTRAP!/;return t&&s.test(t.name)&&(r.debugInfoEnabled=!0,t.name=t.name.replace(s,"")),t&&!l.test(t.name)?a():(t.name=t.name.replace(l,""),void(On.resumeBootstrap=function(t){o(t,function(t){i.push(t)}),a()}))}function V(){t.name="NG_ENABLE_DEBUG_INFO!"+t.name,t.location.reload()}function X(t){if(t=On.element(t).injector(),!t)throw Mn("test");return t.get("$$testability")}function G(t,e){return e=e||"_",t.replace(Rn,function(t,n){return(n?e:"")+t.toLowerCase()})}function K(){var e;Hn||((wn=t.jQuery)&&wn.fn.on?(yn=wn,u(wn.fn,{scope:ei.scope,isolateScope:ei.isolateScope,controller:ei.controller,injector:ei.injector,inheritedData:ei.inheritedData}),e=wn.cleanData,wn.cleanData=function(t){var n;if(In)In=!1;else for(var i,r=0;null!=(i=t[r]);r++)(n=wn._data(i,"events"))&&n.$destroy&&wn(i).triggerHandler("$destroy");e(t)}):yn=lt,On.element=yn,Hn=!0)}function Z(t,e,n){if(!t)throw Mn("areq",e||"?",n||"required");return t}function J(t,e,n){return n&&Dn(t)&&(t=t[t.length-1]),Z(x(t),e,"not a function, got "+(t&&"object"==typeof t?t.constructor.name||"Object":typeof t)),t}function Q(t,e){if("hasOwnProperty"===t)throw Mn("badname",e)}function tt(t,e,n){if(!e)return t;e=e.split(".");for(var i,r=t,o=e.length,a=0;o>a;a++)i=e[a],t&&(t=(r=t)[i]);return!n&&x(t)?D(r,t):t}function et(t){var e=t[0];t=t[t.length-1];var n=[e];do{if(e=e.nextSibling,!e)break;n.push(e)}while(e!==t);return yn(n)}function nt(){return Object.create(null)}function it(t){function e(t,e,n){return t[e]||(t[e]=n())}var n=i("$injector"),r=i("ng");return t=e(t,"angular",Object),t.$$minErr=t.$$minErr||i,e(t,"module",function(){var t={};return function(i,o,a){if("hasOwnProperty"===i)throw r("badname","module");return o&&t.hasOwnProperty(i)&&(t[i]=null),e(t,i,function(){function t(t,n,i,r){return r||(r=e),function(){return r[i||"push"]([t,n,arguments]),c}}if(!o)throw n("nomod",i);var e=[],r=[],s=[],l=t("$injector","invoke","push",r),c={_invokeQueue:e,_configBlocks:r,_runBlocks:s,requires:o,name:i,provider:t("$provide","provider"),factory:t("$provide","factory"),service:t("$provide","service"),value:t("$provide","value"),constant:t("$provide","constant","unshift"),animation:t("$animateProvider","register"),filter:t("$filterProvider","register"),controller:t("$controllerProvider","register"),directive:t("$compileProvider","directive"),config:l,run:function(t){return s.push(t),this}};return a&&l(a),c})}})}function rt(e){u(e,{bootstrap:q,copy:M,extend:u,equals:P,element:yn,forEach:o,injector:Pt,noop:d,bind:D,toJson:L,fromJson:F,identity:f,isUndefined:m,isDefined:g,isString:b,isFunction:x,isObject:v,isNumber:y,isElement:E,isArray:Dn,version:zn,isDate:w,lowercase:_n,uppercase:Sn,callbacks:{counter:0},getTestability:X,$$minErr:i,$$csp:Fn,reloadWithDebugInfo:V}),xn=it(t);try{xn("ngLocale")}catch(n){xn("ngLocale",[]).provider("$locale",ne)}xn("ng",["ngLocale"],["$provide",function(t){t.provider({$$sanitizeUri:Pe}),t.provider("$compile",Rt).directive({a:qi,input:lr,textarea:lr,form:Ki,script:Vr,select:Kr,style:Jr,option:Zr,ngBind:hr,ngBindHtml:fr,ngBindTemplate:dr,ngClass:mr,ngClassEven:vr,ngClassOdd:gr,ngCloak:br,ngController:yr,ngForm:Zi,ngHide:Br,ngIf:Cr,ngInclude:_r,ngInit:Sr,ngNonBindable:Fr,ngPluralize:jr,ngRepeat:Rr,ngShow:Hr,ngStyle:Wr,ngSwitch:zr,ngSwitchWhen:Ur,ngSwitchDefault:Yr,ngOptions:Gr,ngTransclude:qr,ngModel:Dr,ngList:Er,ngChange:pr,pattern:to,ngPattern:to,required:Qr,ngRequired:Qr,minlength:no,ngMinlength:no,maxlength:eo,ngMaxlength:eo,ngValue:ur,ngModelOptions:Lr}).directive({ngInclude:$r}).directive(Vi).directive(wr),t.provider({$anchorScroll:It,$animate:hi,$browser:Lt,$cacheFactory:Ft,$controller:zt,$document:Ut,$exceptionHandler:Yt,$filter:Ue,$interpolate:te,$interval:ee,$http:Kt,$httpBackend:Jt,$location:me,$log:ge,$parse:Ee,$rootScope:Oe,$q:Te,$$q:ke,$sce:Le,$sceDelegate:Ne,$sniffer:Fe,$templateCache:jt,$templateRequest:je,$$testability:Re,$timeout:He,$window:ze,$$rAF:Me,$$asyncCallback:Dt,$$jqLite:Tt})}])}function ot(t){return t.replace(qn,function(t,e,n,i){return i?n.toUpperCase():n}).replace(Vn,"Moz$1")}function at(t){return t=t.nodeType,t===Bn||!t||9===t}function st(t,e){var n,i,r=e.createDocumentFragment(),a=[];if(Zn.test(t)){for(n=n||r.appendChild(e.createElement("div")),i=(Jn.exec(t)||["",""])[1].toLowerCase(),i=ti[i]||ti._default,n.innerHTML=i[1]+t.replace(Qn,"<$1></$2>")+i[2],i=i[0];i--;)n=n.lastChild;a=I(a,n.childNodes),n=r.firstChild,n.textContent=""}else a.push(e.createTextNode(t));return r.textContent="",r.innerHTML="",o(a,function(t){r.appendChild(t)}),r}function lt(t){if(t instanceof lt)return t;var n;if(b(t)&&(t=Nn(t),n=!0),!(this instanceof lt)){if(n&&"<"!=t.charAt(0))throw Gn("nosel");return new lt(t)}if(n){n=e;var i;t=(i=Kn.exec(t))?[n.createElement(i[1])]:(i=st(t,n))?i.childNodes:[]}bt(this,t)}function ct(t){return t.cloneNode(!0)}function ut(t,e){if(e||dt(t),t.querySelectorAll)for(var n=t.querySelectorAll("*"),i=0,r=n.length;r>i;i++)dt(n[i])}function ht(t,e,n,i){if(g(i))throw Gn("offargs");var r=(i=ft(t))&&i.events,a=i&&i.handle;if(a)if(e)o(e.split(" "),function(e){if(g(n)){var i=r[e];if(A(i||[],n),i&&0<i.length)return}t.removeEventListener(e,a,!1),delete r[e]});else for(e in r)"$destroy"!==e&&t.removeEventListener(e,a,!1),delete r[e]}function dt(t,e){var i=t.ng339,r=i&&Un[i];r&&(e?delete r.data[e]:(r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),ht(t)),delete Un[i],t.ng339=n))}function ft(t,e){var i=t.ng339,i=i&&Un[i];return e&&!i&&(t.ng339=i=++Yn,i=Un[i]={events:{},data:{},handle:n}),i}function pt(t,e,n){if(at(t)){var i=g(n),r=!i&&e&&!v(e),o=!e;if(t=(t=ft(t,!r))&&t.data,i)t[e]=n;else{if(o)return t;if(r)return t&&t[e];u(t,e)}}}function mt(t,e){return t.getAttribute?-1<(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+e+" "):!1}function gt(t,e){e&&t.setAttribute&&o(e.split(" "),function(e){t.setAttribute("class",Nn((" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+Nn(e)+" "," ")))})}function vt(t,e){if(e&&t.setAttribute){var n=(" "+(t.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(e.split(" "),function(t){t=Nn(t),-1===n.indexOf(" "+t+" ")&&(n+=t+" ")}),t.setAttribute("class",Nn(n))}}function bt(t,e){if(e)if(e.nodeType)t[t.length++]=e;else{var n=e.length;if("number"==typeof n&&e.window!==e){if(n)for(var i=0;n>i;i++)t[t.length++]=e[i]}else t[t.length++]=e}}function yt(t,e){return wt(t,"$"+(e||"ngController")+"Controller")}function wt(t,e,i){for(9==t.nodeType&&(t=t.documentElement),e=Dn(e)?e:[e];t;){for(var r=0,o=e.length;o>r;r++)if((i=yn.data(t,e[r]))!==n)return i;t=t.parentNode||11===t.nodeType&&t.host}}function xt(t){for(ut(t,!0);t.firstChild;)t.removeChild(t.firstChild)}function Ct(t,e){e||ut(t);var n=t.parentNode;n&&n.removeChild(t)}function _t(e,n){n=n||t,"complete"===n.document.readyState?n.setTimeout(e):yn(n).on("load",e)}function $t(t,e){var n=ni[e.toLowerCase()];return n&&ii[k(t)]&&n}function St(t,e){var n=t.nodeName;return("INPUT"===n||"TEXTAREA"===n)&&ri[e]}function Et(t,e){var n=function(n,i){n.isDefaultPrevented=function(){return n.defaultPrevented};var r=e[i||n.type],o=r?r.length:0;if(o){if(m(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped},o>1&&(r=O(r));for(var s=0;o>s;s++)n.isImmediatePropagationStopped()||r[s].call(t,n)}};return n.elem=t,n}function Tt(){this.$get=function(){return u(lt,{hasClass:function(t,e){return t.attr&&(t=t[0]),mt(t,e)},addClass:function(t,e){return t.attr&&(t=t[0]),vt(t,e)},removeClass:function(t,e){return t.attr&&(t=t[0]),gt(t,e)}})}}function kt(t,e){var n=t&&t.$$hashKey;return n?("function"==typeof n&&(n=t.$$hashKey()),n):(n=typeof t,n="function"==n||"object"==n&&null!==t?t.$$hashKey=n+":"+(e||l)():n+":"+t)}function At(t,e){if(e){var n=0;this.nextUid=function(){return++n}}o(t,this.put,this)}function Mt(t){return(t=t.toString().replace(li,"").match(oi))?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function Ot(t,e,n){var i;if("function"==typeof t){if(!(i=t.$inject)){if(i=[],t.length){if(e)throw b(n)&&n||(n=t.name||Mt(t)),ci("strictdi",n);e=t.toString().replace(li,""),e=e.match(oi),o(e[1].split(ai),function(t){t.replace(si,function(t,e,n){i.push(n)})})}t.$inject=i}}else Dn(t)?(e=t.length-1,J(t[e],"fn"),i=t.slice(0,e)):J(t,"fn",!0);return i}function Pt(t,e){function i(t){return function(e,n){return v(e)?void o(e,s(t)):t(e,n)}}function r(t,e){if(Q(t,"service"),(x(e)||Dn(e))&&(e=w.instantiate(e)),!e.$get)throw ci("pget",t);return y[t+"Provider"]=e}function a(t,e){return function(){var n=_.invoke(e,this);if(m(n))throw ci("undef",t);return n}}function l(t,e,n){return r(t,{$get:!1!==n?a(t,e):e})}function c(t){var e,n=[];return o(t,function(t){function i(t){var e,n;for(e=0,n=t.length;n>e;e++){var i=t[e],r=w.get(i[0]);r[i[1]].apply(r,i[2])}}if(!g.get(t)){g.put(t,!0);try{b(t)?(e=xn(t),n=n.concat(c(e.requires)).concat(e._runBlocks),i(e._invokeQueue),i(e._configBlocks)):x(t)?n.push(w.invoke(t)):Dn(t)?n.push(w.invoke(t)):J(t,"module")}catch(r){throw Dn(t)&&(t=t[t.length-1]),r.message&&r.stack&&-1==r.stack.indexOf(r.message)&&(r=r.message+"\n"+r.stack),ci("modulerr",t,r.stack||r.message||r)}}}),n}function u(t,n){function i(e,i){if(t.hasOwnProperty(e)){if(t[e]===h)throw ci("cdep",e+" <- "+f.join(" <- "));return t[e]}try{return f.unshift(e),t[e]=h,t[e]=n(e,i)}catch(r){throw t[e]===h&&delete t[e],r}finally{f.shift()}}function r(t,n,r,o){"string"==typeof r&&(o=r,r=null);var a,s,l,c=[],u=Ot(t,e,o);for(s=0,a=u.length;a>s;s++){if(l=u[s],"string"!=typeof l)throw ci("itkn",l);c.push(r&&r.hasOwnProperty(l)?r[l]:i(l,o))}return Dn(t)&&(t=t[a]),t.apply(n,c)}return{invoke:r,instantiate:function(t,e,n){var i=Object.create((Dn(t)?t[t.length-1]:t).prototype);return t=r(t,i,e,n),v(t)||x(t)?t:i},get:i,annotate:Ot,has:function(e){return y.hasOwnProperty(e+"Provider")||t.hasOwnProperty(e)}}}e=!0===e;var h={},f=[],g=new At([],!0),y={$provide:{provider:i(r),factory:i(l),service:i(function(t,e){return l(t,["$injector",function(t){return t.instantiate(e)}])}),value:i(function(t,e){return l(t,p(e),!1)}),constant:i(function(t,e){Q(t,"constant"),y[t]=e,C[t]=e}),decorator:function(t,e){var n=w.get(t+"Provider"),i=n.$get;n.$get=function(){var t=_.invoke(i,n);return _.invoke(e,null,{$delegate:t})}}}},w=y.$injector=u(y,function(t,e){throw On.isString(e)&&f.push(e),ci("unpr",f.join(" <- "))}),C={},_=C.$injector=u(C,function(t,e){var i=w.get(t+"Provider",e);return _.invoke(i.$get,i,n,t)});return o(c(t),function(t){_.invoke(t||d)}),_}function It(){var t=!0;this.disableAutoScrolling=function(){t=!1},this.$get=["$window","$location","$rootScope",function(e,n,i){function r(t){var e=null;return Array.prototype.some.call(t,function(t){return"a"===k(t)?(e=t,!0):void 0}),e}function o(t){if(t){t.scrollIntoView();var n;n=a.yOffset,x(n)?n=n():E(n)?(n=n[0],n="fixed"!==e.getComputedStyle(n).position?0:n.getBoundingClientRect().bottom):y(n)||(n=0),n&&(t=t.getBoundingClientRect().top,e.scrollBy(0,t-n))}else e.scrollTo(0,0)}function a(){var t,e=n.hash();e?(t=s.getElementById(e))?o(t):(t=r(s.getElementsByName(e)))?o(t):"top"===e&&o(null):o(null)}var s=e.document;return t&&i.$watch(function(){return n.hash()},function(t,e){t===e&&""===t||_t(function(){i.$evalAsync(a)})}),a}]}function Dt(){this.$get=["$$rAF","$timeout",function(t,e){return t.supported?function(e){return t(e)}:function(t){return e(t,0,!1)}}]}function Nt(t,e,i,r){function a(t){try{t.apply(null,En.call(arguments,1))}finally{if(C--,0===C)for(;_.length;)try{_.pop()()}catch(e){i.error(e)}}}function s(t,e){!function n(){o(S,function(t){t()}),$=e(n,t)}()}function l(){c(),u()}function c(){E=t.history.state,E=m(E)?null:E,P(E,D)&&(E=D),D=E}function u(){(k!==f.url()||T!==E)&&(k=f.url(),T=E,o(O,function(t){t(f.url(),E)}))}function h(t){try{return decodeURIComponent(t)}catch(e){return t}}var f=this,p=e[0],g=t.location,v=t.history,y=t.setTimeout,w=t.clearTimeout,x={};f.isMock=!1;var C=0,_=[];f.$$completeOutstandingRequest=a,f.$$incOutstandingRequestCount=function(){C++},f.notifyWhenNoOutstandingRequests=function(t){o(S,function(t){t()}),0===C?t():_.push(t)};var $,S=[];f.addPollFn=function(t){return m($)&&s(100,y),S.push(t),t};var E,T,k=g.href,A=e.find("base"),M=null;c(),T=E,f.url=function(e,n,i){if(m(i)&&(i=null),g!==t.location&&(g=t.location),v!==t.history&&(v=t.history),e){var o=T===i;if(k===e&&(!r.history||o))return f;var a=k&&se(k)===se(e);return k=e,T=i,!r.history||a&&o?(a||(M=e),n?g.replace(e):a?(n=g,i=e.indexOf("#"),e=-1===i?"":e.substr(i+1),n.hash=e):g.href=e):(v[n?"replaceState":"pushState"](i,"",e),c(),T=E),f}return M||g.href.replace(/%27/g,"'")},f.state=function(){return E};var O=[],I=!1,D=null;f.onUrlChange=function(e){return I||(r.history&&yn(t).on("popstate",l),yn(t).on("hashchange",l),I=!0),O.push(e),e},f.$$checkUrlChange=u,f.baseHref=function(){var t=A.attr("href");return t?t.replace(/^(https?\:)?\/\/[^\/]*/,""):""};var N={},L="",F=f.baseHref();f.cookies=function(t,e){var r,o,a,s;if(!t){if(p.cookie!==L)for(L=p.cookie,r=L.split("; "),N={},a=0;a<r.length;a++)o=r[a],s=o.indexOf("="),s>0&&(t=h(o.substring(0,s)),N[t]===n&&(N[t]=h(o.substring(s+1))));return N}e===n?p.cookie=encodeURIComponent(t)+"=;path="+F+";expires=Thu, 01 Jan 1970 00:00:00 GMT":b(e)&&(r=(p.cookie=encodeURIComponent(t)+"="+encodeURIComponent(e)+";path="+F).length+1,r>4096&&i.warn("Cookie '"+t+"' possibly not set or overflowed because it was too large ("+r+" > 4096 bytes)!"))},f.defer=function(t,e){var n;return C++,n=y(function(){delete x[n],a(t)},e||0),x[n]=!0,n},f.defer.cancel=function(t){return x[t]?(delete x[t],w(t),a(d),!0):!1}}function Lt(){this.$get=["$window","$log","$sniffer","$document",function(t,e,n,i){return new Nt(t,i,e,n)}]}function Ft(){this.$get=function(){function t(t,n){function r(t){t!=d&&(f?f==t&&(f=t.n):f=t,o(t.n,t.p),o(t,d),d=t,d.n=null)}function o(t,e){t!=e&&(t&&(t.p=e),e&&(e.n=t))}if(t in e)throw i("$cacheFactory")("iid",t);var a=0,s=u({},n,{id:t}),l={},c=n&&n.capacity||Number.MAX_VALUE,h={},d=null,f=null;return e[t]={put:function(t,e){if(c<Number.MAX_VALUE){var n=h[t]||(h[t]={key:t});r(n)}return m(e)?void 0:(t in l||a++,l[t]=e,a>c&&this.remove(f.key),e)},get:function(t){if(c<Number.MAX_VALUE){var e=h[t];if(!e)return;r(e)}return l[t]},remove:function(t){if(c<Number.MAX_VALUE){var e=h[t];if(!e)return;e==d&&(d=e.p),e==f&&(f=e.n),o(e.n,e.p),delete h[t]}delete l[t],a--},removeAll:function(){l={},a=0,h={},d=f=null},destroy:function(){h=s=l=null,delete e[t]},info:function(){return u({},s,{size:a})}}}var e={};return t.info=function(){var t={};return o(e,function(e,n){t[n]=e.info()}),t},t.get=function(t){return e[t]},t}}function jt(){this.$get=["$cacheFactory",function(t){return t("templates")}]}function Rt(t,i){function r(t,e){var n=/^\s*([@&]|=(\*?))(\??)\s*(\w*)\s*$/,i={};return o(t,function(t,r){var o=t.match(n);if(!o)throw di("iscp",e,r,t);i[r]={mode:o[1][0],collection:"*"===o[2],optional:"?"===o[3],attrName:o[4]||r}}),i}var a={},l=/^\s*directive\:\s*([\w\-]+)\s+(.*)$/,c=/(([\w\-]+)(?:\:([^;]+))?;?)/,h=T("ngSrc,ngSrcset,src,srcset"),m=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,y=/^(on[a-z]+|formaction)$/;this.directive=function C(e,n){return Q(e,"directive"),b(e)?(Z(n,"directiveFactory"),a.hasOwnProperty(e)||(a[e]=[],t.factory(e+"Directive",["$injector","$exceptionHandler",function(t,n){var i=[];return o(a[e],function(o,a){try{var s=t.invoke(o);x(s)?s={compile:p(s)}:!s.compile&&s.link&&(s.compile=p(s.link)),s.priority=s.priority||0,s.index=a,s.name=s.name||e,s.require=s.require||s.controller&&s.name,s.restrict=s.restrict||"EA",v(s.scope)&&(s.$$isolateBindings=r(s.scope,s.name)),i.push(s)}catch(l){n(l)}}),i}])),a[e].push(n)):o(e,s(C)),this},this.aHrefSanitizationWhitelist=function(t){return g(t)?(i.aHrefSanitizationWhitelist(t),this):i.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(t){return g(t)?(i.imgSrcSanitizationWhitelist(t),this):i.imgSrcSanitizationWhitelist()};var w=!0;this.debugInfoEnabled=function(t){return g(t)?(w=t,this):w},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$document","$sce","$animate","$$sanitizeUri",function(t,i,r,s,p,g,C,_,S,E,T){function M(t,e){try{t.addClass(e)}catch(n){}}function O(t,e,n,i,r){t instanceof yn||(t=yn(t)),o(t,function(e,n){e.nodeType==Wn&&e.nodeValue.match(/\S+/)&&(t[n]=yn(e).wrap("<span></span>").parent()[0])});var a=I(t,e,t,n,i,r);O.$$addScopeClass(t);var s=null;return function(e,n,i){Z(e,"scope"),i=i||{};var r=i.parentBoundTranscludeFn,o=i.transcludeControllers;if(i=i.futureParentElement,r&&r.$$boundTransclude&&(r=r.$$boundTransclude),s||(s=(i=i&&i[0])&&"foreignobject"!==k(i)&&i.toString().match(/SVG/)?"svg":"html"),i="html"!==s?yn(X(s,yn("<div>").append(t).html())):n?ei.clone.call(t):t,o)for(var l in o)i.data("$"+l+"Controller",o[l].instance);return O.$$addScopeInfo(i,e),n&&n(i,e),a&&a(e,i,i,r),i}}function I(t,e,i,r,o,a){function s(t,i,r,o){var a,s,l,c,u,h,p;if(d)for(p=Array(i.length),c=0;c<f.length;c+=3)a=f[c],p[a]=i[a];else p=i;for(c=0,u=f.length;u>c;)s=p[f[c++]],i=f[c++],a=f[c++],i?(i.scope?(l=t.$new(),O.$$addScopeInfo(yn(s),l)):l=t,h=i.transcludeOnThisElement?D(t,i.transclude,o,i.elementTranscludeOnThisElement):!i.templateOnThisElement&&o?o:!o&&e?D(t,e):null,i(a,l,s,r,h)):a&&a(t,s.childNodes,n,o)}for(var l,c,u,h,d,f=[],p=0;p<t.length;p++)l=new it,c=N(t[p],[],l,0===p?r:n,o),(a=c.length?R(c,t[p],l,e,i,null,[],[],a):null)&&a.scope&&O.$$addScopeClass(l.$$element),l=a&&a.terminal||!(u=t[p].childNodes)||!u.length?null:I(u,a?(a.transcludeOnThisElement||!a.templateOnThisElement)&&a.transclude:e),(a||l)&&(f.push(p,a,l),h=!0,d=d||a),a=null;return h?s:null}function D(t,e,n,i){return function(i,r,o,a,s){return i||(i=t.$new(!1,s),i.$$transcluded=!0),e(i,r,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}}function N(t,e,n,i,r){var o,a=n.$attr;switch(t.nodeType){case Bn:B(e,Ht(k(t)),"E",i,r);for(var s,u,h,d=t.attributes,f=0,p=d&&d.length;p>f;f++){var m=!1,g=!1;s=d[f],o=s.name,u=Nn(s.value),s=Ht(o),(h=st.test(s))&&(o=o.replace(fi,"").substr(8).replace(/_(.)/g,function(t,e){return e.toUpperCase()}));var v=s.replace(/(Start|End)$/,"");W(v)&&s===v+"Start"&&(m=o,g=o.substr(0,o.length-5)+"end",o=o.substr(0,o.length-6)),s=Ht(o.toLowerCase()),a[s]=o,(h||!n.hasOwnProperty(s))&&(n[s]=u,$t(t,s)&&(n[s]=!0)),J(t,e,u,s,h),B(e,s,"A",i,r,m,g)}if(t=t.className,b(t)&&""!==t)for(;o=c.exec(t);)s=Ht(o[2]),B(e,s,"C",i,r)&&(n[s]=Nn(o[3])),t=t.substr(o.index+o[0].length);break;case Wn:V(e,t.nodeValue);break;case 8:try{(o=l.exec(t.nodeValue))&&(s=Ht(o[1]),B(e,s,"M",i,r)&&(n[s]=Nn(o[2])))}catch(y){}}return e.sort(Y),e}function L(t,e,n){var i=[],r=0;if(e&&t.hasAttribute&&t.hasAttribute(e)){do{if(!t)throw di("uterdir",e,n);t.nodeType==Bn&&(t.hasAttribute(e)&&r++,t.hasAttribute(n)&&r--),i.push(t),t=t.nextSibling}while(r>0)}else i.push(t);return yn(i)}function F(t,e,n){return function(i,r,o,a,s){return r=L(r[0],e,n),t(i,r,o,a,s)}}function R(t,a,s,l,c,u,h,d,f){function y(t,e,n,i){t&&(n&&(t=F(t,n,i)),t.require=E.require,t.directiveName=T,(D===E||E.$$isolateScope)&&(t=tt(t,{isolateScope:!0})),h.push(t)),e&&(n&&(e=F(e,n,i)),e.require=E.require,e.directiveName=T,(D===E||E.$$isolateScope)&&(e=tt(e,{isolateScope:!0})),d.push(e))}function w(t,e,n,i){var r,a,s="data",l=!1,c=n;if(b(e)){if(a=e.match(m),e=e.substring(a[0].length),a[3]&&(a[1]?a[3]=null:a[1]=a[3]),"^"===a[1]?s="inheritedData":"^^"===a[1]&&(s="inheritedData",c=n.parent()),"?"===a[2]&&(l=!0),r=null,i&&"data"===s&&(r=i[e])&&(r=r.instance),r=r||c[s]("$"+e+"Controller"),!r&&!l)throw di("ctreq",e,t);return r||null}return Dn(e)&&(r=[],o(e,function(e){r.push(w(t,e,n,i))})),r}function C(t,e,r,l,c){function u(t,e,i){var r;return $(t)||(i=e,e=t,t=n),V&&(r=y),i||(i=V?C.parent():C),c(t,e,r,i,T)}var f,m,v,b,y,x,C,_;if(a===r?(_=s,C=s.$$element):(C=yn(r),_=new it(C,s)),D&&(b=e.$new(!0)),c&&(x=u,x.$$boundTransclude=c),I&&(S={},y={},o(I,function(t){var n={$scope:t===D||t.$$isolateScope?b:e,$element:C,$attrs:_,$transclude:x};v=t.controller,"@"==v&&(v=_[t.name]),n=g(v,n,!0,t.controllerAs),y[t.name]=n,V||C.data("$"+t.name+"Controller",n.instance),S[t.name]=n})),D){O.$$addScopeInfo(C,b,!0,!(R&&(R===D||R===D.$$originalDirective))),O.$$addScopeClass(C,!0),l=S&&S[D.name];var E=b;l&&l.identifier&&!0===D.bindToController&&(E=l.instance),o(b.$$isolateBindings=D.$$isolateBindings,function(t,n){var r,o,a,s,l=t.attrName,c=t.optional;switch(t.mode){case"@":_.$observe(l,function(t){E[n]=t}),_.$$observers[l].$$scope=e,_[l]&&(E[n]=i(_[l])(e));break;case"=":if(c&&!_[l])break;o=p(_[l]),s=o.literal?P:function(t,e){return t===e||t!==t&&e!==e},a=o.assign||function(){throw r=E[n]=o(e),di("nonassign",_[l],D.name)},r=E[n]=o(e),c=function(t){return s(t,E[n])||(s(t,r)?a(e,t=E[n]):E[n]=t),r=t},c.$stateful=!0,c=t.collection?e.$watchCollection(_[l],c):e.$watch(p(_[l],c),null,o.literal),b.$on("$destroy",c);break;case"&":o=p(_[l]),E[n]=function(t){return o(e,t)}}})}for(S&&(o(S,function(t){t()}),S=null),l=0,f=h.length;f>l;l++)m=h[l],et(m,m.isolateScope?b:e,C,_,m.require&&w(m.directiveName,m.require,C,y),x);var T=e;for(D&&(D.template||null===D.templateUrl)&&(T=b),t&&t(T,r.childNodes,n,c),l=d.length-1;l>=0;l--)m=d[l],et(m,m.isolateScope?b:e,C,_,m.require&&w(m.directiveName,m.require,C,y),x)}f=f||{};for(var _,S,E,T,k,A,M=-Number.MAX_VALUE,I=f.controllerDirectives,D=f.newIsolateScopeDirective,R=f.templateDirective,B=f.nonTlbTranscludeDirective,W=!1,Y=!1,V=f.hasElementTranscludeDirective,G=s.$$element=yn(a),K=l,Z=0,J=t.length;J>Z;Z++){E=t[Z];var nt=E.$$start,rt=E.$$end;if(nt&&(G=L(a,nt,rt)),k=n,M>E.priority)break;if((k=E.scope)&&(E.templateUrl||(v(k)?(q("new/isolated scope",D||_,E,G),D=E):q("new/isolated scope",D,E,G)),_=_||E),T=E.name,!E.templateUrl&&E.controller&&(k=E.controller,I=I||{},q("'"+T+"' controller",I[T],E,G),I[T]=E),(k=E.transclude)&&(W=!0,E.$$tlb||(q("transclusion",B,E,G),B=E),"element"==k?(V=!0,M=E.priority,k=G,G=s.$$element=yn(e.createComment(" "+T+": "+s[T]+" ")),a=G[0],Q(c,En.call(k,0),a),K=O(k,l,M,u&&u.name,{nonTlbTranscludeDirective:B})):(k=yn(ct(a)).contents(),G.empty(),K=O(k,l))),E.template)if(Y=!0,q("template",R,E,G),R=E,k=x(E.template)?E.template(G,s):E.template,k=at(k),E.replace){if(u=E,k=Zn.test(k)?Wt(X(E.templateNamespace,Nn(k))):[],a=k[0],1!=k.length||a.nodeType!==Bn)throw di("tplrt",T,"");Q(c,G,a),J={$attr:{}},k=N(a,[],J);var ot=t.splice(Z+1,t.length-(Z+1));D&&H(k),t=t.concat(k).concat(ot),z(s,J),J=t.length}else G.html(k);if(E.templateUrl)Y=!0,q("template",R,E,G),R=E,E.replace&&(u=E),C=U(t.splice(Z,t.length-Z),G,s,c,W&&K,h,d,{controllerDirectives:I,newIsolateScopeDirective:D,templateDirective:R,nonTlbTranscludeDirective:B}),J=t.length;else if(E.compile)try{A=E.compile(G,s,K),x(A)?y(null,A,nt,rt):A&&y(A.pre,A.post,nt,rt)}catch(st){r(st,j(G))}E.terminal&&(C.terminal=!0,M=Math.max(M,E.priority))}return C.scope=_&&!0===_.scope,C.transcludeOnThisElement=W,C.elementTranscludeOnThisElement=V,C.templateOnThisElement=Y,C.transclude=K,f.hasElementTranscludeDirective=V,C}function H(t){for(var e=0,n=t.length;n>e;e++){var i,r=e;i=u(Object.create(t[e]),{$$isolateScope:!0}),t[r]=i}}function B(e,i,o,s,l,c,h){if(i===l)return null;if(l=null,a.hasOwnProperty(i)){var d;i=t.get(i+"Directive");for(var f=0,p=i.length;p>f;f++)try{if(d=i[f],(s===n||s>d.priority)&&-1!=d.restrict.indexOf(o)){if(c){var m={$$start:c,$$end:h};d=u(Object.create(d),m)}e.push(d),l=d}}catch(g){r(g)}}return l}function W(e){if(a.hasOwnProperty(e))for(var n=t.get(e+"Directive"),i=0,r=n.length;r>i;i++)if(e=n[i],e.multiElement)return!0;return!1}function z(t,e){var n=e.$attr,i=t.$attr,r=t.$$element;o(t,function(i,r){"$"!=r.charAt(0)&&(e[r]&&e[r]!==i&&(i+=("style"===r?";":" ")+e[r]),t.$set(r,i,!0,n[r]))}),o(e,function(e,o){"class"==o?(M(r,e),t["class"]=(t["class"]?t["class"]+" ":"")+e):"style"==o?(r.attr("style",r.attr("style")+";"+e),t.style=(t.style?t.style+";":"")+e):"$"==o.charAt(0)||t.hasOwnProperty(o)||(t[o]=e,i[o]=n[o])})}function U(t,e,n,i,r,a,l,c){var h,d,f=[],p=e[0],m=t.shift(),g=u({},m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),b=x(m.templateUrl)?m.templateUrl(e,n):m.templateUrl,y=m.templateNamespace;return e.empty(),s(S.getTrustedResourceUrl(b)).then(function(s){var u,w;if(s=at(s),m.replace){if(s=Zn.test(s)?Wt(X(y,Nn(s))):[],u=s[0],1!=s.length||u.nodeType!==Bn)throw di("tplrt",m.name,b);s={$attr:{}},Q(i,e,u);var x=N(u,[],s);v(m.scope)&&H(x),t=x.concat(t),z(n,s)}else u=p,e.html(s);for(t.unshift(g),h=R(t,u,n,r,e,m,a,l,c),o(i,function(t,n){t==u&&(i[n]=e[0])}),d=I(e[0].childNodes,r);f.length;){s=f.shift(),w=f.shift();var C=f.shift(),_=f.shift(),x=e[0];if(!s.$$destroyed){if(w!==p){var $=w.className;c.hasElementTranscludeDirective&&m.replace||(x=ct(u)),Q(C,yn(w),x),M(yn(x),$)}w=h.transcludeOnThisElement?D(s,h.transclude,_):_,h(d,s,x,i,w)}}f=null}),function(t,e,n,i,r){t=r,e.$$destroyed||(f?f.push(e,n,i,t):(h.transcludeOnThisElement&&(t=D(e,h.transclude,r)),h(d,e,n,i,t)))}}function Y(t,e){var n=e.priority-t.priority;return 0!==n?n:t.name!==e.name?t.name<e.name?-1:1:t.index-e.index}function q(t,e,n,i){if(e)throw di("multidir",e.name,n.name,t,j(i))}function V(t,e){var n=i(e,!0);n&&t.push({priority:0,compile:function(t){t=t.parent();var e=!!t.length;return e&&O.$$addBindingClass(t),function(t,i){var r=i.parent();e||O.$$addBindingClass(r),O.$$addBindingInfo(r,n.expressions),t.$watch(n,function(t){i[0].nodeValue=t})}}})}function X(t,n){switch(t=_n(t||"html")){case"svg":case"math":var i=e.createElement("div");return i.innerHTML="<"+t+">"+n+"</"+t+">",i.childNodes[0].childNodes;default:return n}}function K(t,e){if("srcdoc"==e)return S.HTML;var n=k(t);return"xlinkHref"==e||"form"==n&&"action"==e||"img"!=n&&("src"==e||"ngSrc"==e)?S.RESOURCE_URL:void 0}function J(t,e,n,r,o){var a=K(t,r);o=h[r]||o;var s=i(n,!0,a,o);if(s){if("multiple"===r&&"select"===k(t))throw di("selmulti",j(t));e.push({priority:100,compile:function(){return{pre:function(t,e,l){if(e=l.$$observers||(l.$$observers={}),y.test(r))throw di("nodomevents");var c=l[r];c!==n&&(s=c&&i(c,!0,a,o),n=c),s&&(l[r]=s(t),(e[r]||(e[r]=[])).$$inter=!0,(l.$$observers&&l.$$observers[r].$$scope||t).$watch(s,function(t,e){"class"===r&&t!=e?l.$updateClass(t,e):l.$set(r,t)}))}}}})}}function Q(t,n,i){var r,o,a=n[0],s=n.length,l=a.parentNode;if(t)for(r=0,o=t.length;o>r;r++)if(t[r]==a){t[r++]=i,o=r+s-1;for(var c=t.length;c>r;r++,o++)c>o?t[r]=t[o]:delete t[r];t.length-=s-1,t.context===a&&(t.context=i);break}for(l&&l.replaceChild(i,a),t=e.createDocumentFragment(),t.appendChild(a),yn(i).data(yn(a).data()),wn?(In=!0,wn.cleanData([a])):delete yn.cache[a[yn.expando]],a=1,s=n.length;s>a;a++)l=n[a],yn(l).remove(),t.appendChild(l),delete n[a];n[0]=i,n.length=1}function tt(t,e){return u(function(){return t.apply(null,arguments)},t,e)}function et(t,e,n,i,o,a){try{t(e,n,i,o,a)}catch(s){r(s,j(n))}}var it=function(t,e){if(e){var n,i,r,o=Object.keys(e);for(n=0,i=o.length;i>n;n++)r=o[n],this[r]=e[r]}else this.$attr={};this.$$element=t};it.prototype={$normalize:Ht,$addClass:function(t){t&&0<t.length&&E.addClass(this.$$element,t)},$removeClass:function(t){t&&0<t.length&&E.removeClass(this.$$element,t)},$updateClass:function(t,e){var n=Bt(t,e);n&&n.length&&E.addClass(this.$$element,n),(n=Bt(e,t))&&n.length&&E.removeClass(this.$$element,n)},$set:function(t,e,i,a){var s=this.$$element[0],l=$t(s,t),c=St(s,t),s=t;if(l?(this.$$element.prop(t,e),a=l):c&&(this[c]=e,s=c),this[t]=e,a?this.$attr[t]=a:(a=this.$attr[t])||(this.$attr[t]=a=G(t,"-")),l=k(this.$$element),"a"===l&&"href"===t||"img"===l&&"src"===t)this[t]=e=T(e,"src"===t);else if("img"===l&&"srcset"===t){for(var l="",c=Nn(e),u=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,u=/\s/.test(c)?u:/(,)/,c=c.split(u),u=Math.floor(c.length/2),h=0;u>h;h++)var d=2*h,l=l+T(Nn(c[d]),!0),l=l+(" "+Nn(c[d+1]));c=Nn(c[2*h]).split(/\s/),l+=T(Nn(c[0]),!0),2===c.length&&(l+=" "+Nn(c[1])),this[t]=e=l}!1!==i&&(null===e||e===n?this.$$element.removeAttr(a):this.$$element.attr(a,e)),(t=this.$$observers)&&o(t[s],function(t){try{t(e)}catch(n){r(n)}})},$observe:function(t,e){var n=this,i=n.$$observers||(n.$$observers=nt()),r=i[t]||(i[t]=[]);return r.push(e),C.$evalAsync(function(){!r.$$inter&&n.hasOwnProperty(t)&&e(n[t])}),function(){A(r,e)}}};var rt=i.startSymbol(),ot=i.endSymbol(),at="{{"==rt||"}}"==ot?f:function(t){return t.replace(/\{\{/g,rt).replace(/}}/g,ot)},st=/^ngAttr[A-Z]/;return O.$$addBindingInfo=w?function(t,e){var n=t.data("$binding")||[];Dn(e)?n=n.concat(e):n.push(e),t.data("$binding",n)}:d,O.$$addBindingClass=w?function(t){M(t,"ng-binding")}:d,O.$$addScopeInfo=w?function(t,e,n,i){t.data(n?i?"$isolateScopeNoTemplate":"$isolateScope":"$scope",e)}:d,O.$$addScopeClass=w?function(t,e){M(t,e?"ng-isolate-scope":"ng-scope")}:d,O}]}function Ht(t){return ot(t.replace(fi,""))}function Bt(t,e){var n="",i=t.split(/\s+/),r=e.split(/\s+/),o=0;t:for(;o<i.length;o++){for(var a=i[o],s=0;s<r.length;s++)if(a==r[s])continue t;n+=(0<n.length?" ":"")+a}return n}function Wt(t){t=yn(t);var e=t.length;if(1>=e)return t;for(;e--;)8===t[e].nodeType&&Tn.call(t,e,1);return t}function zt(){var t={},e=!1,r=/^(\S+)(\s+as\s+(\w+))?$/;this.register=function(e,n){Q(e,"controller"),v(e)?u(t,e):t[e]=n},this.allowGlobals=function(){e=!0},this.$get=["$injector","$window",function(o,a){function s(t,e,n,r){if(!t||!v(t.$scope))throw i("$controller")("noscp",r,e);t.$scope[e]=n}return function(i,l,c,h){var d,f,p;return c=!0===c,h&&b(h)&&(p=h),b(i)&&(h=i.match(r),f=h[1],p=p||h[3],i=t.hasOwnProperty(f)?t[f]:tt(l.$scope,f,!0)||(e?tt(a,f,!0):n),J(i,f,!0)),c?(c=(Dn(i)?i[i.length-1]:i).prototype,d=Object.create(c),p&&s(l,p,d,f||i.name),u(function(){return o.invoke(i,d,l,f),d},{instance:d,identifier:p})):(d=o.instantiate(i,l,f),p&&s(l,p,d,f||i.name),d)}}]}function Ut(){this.$get=["$window",function(t){return yn(t.document)}]}function Yt(){this.$get=["$log",function(t){return function(e,n){t.error.apply(t,arguments)}}]}function qt(t,e){if(b(t)){var n=t.replace(bi,"").trim();if(n){var i=e("Content-Type");(i=i&&0===i.indexOf(pi))||(i=(i=n.match(gi))&&vi[i[0]].test(n)),i&&(t=F(n))}}return t}function Vt(t){var e,n,i,r=nt();return t?(o(t.split("\n"),function(t){i=t.indexOf(":"),e=_n(Nn(t.substr(0,i))),n=Nn(t.substr(i+1)),e&&(r[e]=r[e]?r[e]+", "+n:n)}),r):r}function Xt(t){var e=v(t)?t:n;return function(n){return e||(e=Vt(t)),n?(n=e[_n(n)],void 0===n&&(n=null),n):e}}function Gt(t,e,n,i){return x(i)?i(t,e,n):(o(i,function(i){t=i(t,e,n)}),t)}function Kt(){var t=this.defaults={transformResponse:[qt],transformRequest:[function(t){return v(t)&&"[object File]"!==An.call(t)&&"[object Blob]"!==An.call(t)&&"[object FormData]"!==An.call(t)?L(t):t}],headers:{common:{Accept:"application/json, text/plain, */*"},post:O(mi),put:O(mi),patch:O(mi)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN"},e=!1;this.useApplyAsync=function(t){return g(t)?(e=!!t,this):e};var r=this.interceptors=[];this.$get=["$httpBackend","$browser","$cacheFactory","$rootScope","$q","$injector",function(s,l,c,h,d,f){function p(e){function r(t){var e=u({},t);return e.data=t.data?Gt(t.data,t.headers,t.status,s.transformResponse):t.data,
t=t.status,t>=200&&300>t?e:d.reject(e)}function a(t){var e,n={};return o(t,function(t,i){x(t)?(e=t(),null!=e&&(n[i]=e)):n[i]=t}),n}if(!On.isObject(e))throw i("$http")("badreq",e);var s=u({method:"get",transformRequest:t.transformRequest,transformResponse:t.transformResponse},e);s.headers=function(e){var n,i,r=t.headers,o=u({},e.headers),r=u({},r.common,r[_n(e.method)]);t:for(n in r){e=_n(n);for(i in o)if(_n(i)===e)continue t;o[n]=r[n]}return a(o)}(e),s.method=Sn(s.method);var l=[function(e){var i=e.headers,a=Gt(e.data,Xt(i),n,e.transformRequest);return m(a)&&o(i,function(t,e){"content-type"===_n(e)&&delete i[e]}),m(e.withCredentials)&&!m(t.withCredentials)&&(e.withCredentials=t.withCredentials),y(e,a).then(r,r)},n],c=d.when(s);for(o($,function(t){(t.request||t.requestError)&&l.unshift(t.request,t.requestError),(t.response||t.responseError)&&l.push(t.response,t.responseError)});l.length;){e=l.shift();var h=l.shift(),c=c.then(e,h)}return c.success=function(t){return c.then(function(e){t(e.data,e.status,e.headers,s)}),c},c.error=function(t){return c.then(null,function(e){t(e.data,e.status,e.headers,s)}),c},c}function y(i,r){function o(t,n,i,r){function o(){a(n,t,i,r)}f&&(t>=200&&300>t?f.put(S,[t,n,Vt(i),r]):f.remove(S)),e?h.$applyAsync(o):(o(),h.$$phase||h.$apply())}function a(t,e,n,r){e=Math.max(e,0),(e>=200&&300>e?y.resolve:y.reject)({data:t,status:e,headers:Xt(n),config:i,statusText:r})}function c(t){a(t.data,t.status,O(t.headers()),t.statusText)}function u(){var t=p.pendingRequests.indexOf(i);-1!==t&&p.pendingRequests.splice(t,1)}var f,b,y=d.defer(),w=y.promise,$=i.headers,S=C(i.url,i.params);return p.pendingRequests.push(i),w.then(u,u),!i.cache&&!t.cache||!1===i.cache||"GET"!==i.method&&"JSONP"!==i.method||(f=v(i.cache)?i.cache:v(t.cache)?t.cache:_),f&&(b=f.get(S),g(b)?b&&x(b.then)?b.then(c,c):Dn(b)?a(b[1],b[0],O(b[2]),b[3]):a(b,200,{},"OK"):f.put(S,w)),m(b)&&((b=We(i.url)?l.cookies()[i.xsrfCookieName||t.xsrfCookieName]:n)&&($[i.xsrfHeaderName||t.xsrfHeaderName]=b),s(i.method,S,r,o,$,i.timeout,i.withCredentials,i.responseType)),w}function C(t,e){if(!e)return t;var n=[];return a(e,function(t,e){null===t||m(t)||(Dn(t)||(t=[t]),o(t,function(t){v(t)&&(t=w(t)?t.toISOString():L(t)),n.push(z(e)+"="+z(t))}))}),0<n.length&&(t+=(-1==t.indexOf("?")?"?":"&")+n.join("&")),t}var _=c("$http"),$=[];return o(r,function(t){$.unshift(b(t)?f.get(t):f.invoke(t))}),p.pendingRequests=[],function(t){o(arguments,function(t){p[t]=function(e,n){return p(u(n||{},{method:t,url:e}))}})}("get","delete","head","jsonp"),function(t){o(arguments,function(t){p[t]=function(e,n,i){return p(u(i||{},{method:t,url:e,data:n}))}})}("post","put","patch"),p.defaults=t,p}]}function Zt(){return new t.XMLHttpRequest}function Jt(){this.$get=["$browser","$window","$document",function(t,e,n){return Qt(t,Zt,t.defer,e.angular.callbacks,n[0])}]}function Qt(t,e,i,r,a){function s(t,e,n){var i=a.createElement("script"),o=null;return i.type="text/javascript",i.src=t,i.async=!0,o=function(t){i.removeEventListener("load",o,!1),i.removeEventListener("error",o,!1),a.body.removeChild(i),i=null;var s=-1,l="unknown";t&&("load"!==t.type||r[e].called||(t={type:"error"}),l=t.type,s="error"===t.type?404:200),n&&n(s,l)},i.addEventListener("load",o,!1),i.addEventListener("error",o,!1),a.body.appendChild(i),o}return function(a,l,c,u,h,f,p,m){function v(){w&&w(),C&&C.abort()}function b(e,r,o,a,s){$!==n&&i.cancel($),w=C=null,e(r,o,a,s),t.$$completeOutstandingRequest(d)}if(t.$$incOutstandingRequestCount(),l=l||t.url(),"jsonp"==_n(a)){var y="_"+(r.counter++).toString(36);r[y]=function(t){r[y].data=t,r[y].called=!0};var w=s(l.replace("JSON_CALLBACK","angular.callbacks."+y),y,function(t,e){b(u,t,r[y].data,"",e),r[y]=d})}else{var C=e();if(C.open(a,l,!0),o(h,function(t,e){g(t)&&C.setRequestHeader(e,t)}),C.onload=function(){var t=C.statusText||"",e="response"in C?C.response:C.responseText,n=1223===C.status?204:C.status;0===n&&(n=e?200:"file"==Be(l).protocol?404:0),b(u,n,e,C.getAllResponseHeaders(),t)},a=function(){b(u,-1,null,null,"")},C.onerror=a,C.onabort=a,p&&(C.withCredentials=!0),m)try{C.responseType=m}catch(_){if("json"!==m)throw _}C.send(c||null)}if(f>0)var $=i(v,f);else f&&x(f.then)&&f.then(v)}}function te(){var t="{{",e="}}";this.startSymbol=function(e){return e?(t=e,this):t},this.endSymbol=function(t){return t?(e=t,this):e},this.$get=["$parse","$exceptionHandler","$sce",function(n,i,r){function o(t){return"\\\\\\"+t}function a(o,a,d,f){function p(n){return n.replace(c,t).replace(h,e)}function v(t){try{var e=t;t=d?r.getTrusted(d,e):r.valueOf(e);var n;if(f&&!g(t))n=t;else if(null==t)n="";else{switch(typeof t){case"string":break;case"number":t=""+t;break;default:t=L(t)}n=t}return n}catch(a){n=yi("interr",o,a.toString()),i(n)}}f=!!f;for(var b,y,w=0,C=[],_=[],$=o.length,S=[],E=[];$>w;){if(-1==(b=o.indexOf(t,w))||-1==(y=o.indexOf(e,b+s))){w!==$&&S.push(p(o.substring(w)));break}w!==b&&S.push(p(o.substring(w,b))),w=o.substring(b+s,y),C.push(w),_.push(n(w,v)),w=y+l,E.push(S.length),S.push("")}if(d&&1<S.length)throw yi("noconcat",o);if(!a||C.length){var T=function(t){for(var e=0,n=C.length;n>e;e++){if(f&&m(t[e]))return;S[E[e]]=t[e]}return S.join("")};return u(function(t){var e=0,n=C.length,r=Array(n);try{for(;n>e;e++)r[e]=_[e](t);return T(r)}catch(a){t=yi("interr",o,a.toString()),i(t)}},{exp:o,expressions:C,$$watchDelegate:function(t,e,n){var i;return t.$watchGroup(_,function(n,r){var o=T(n);x(e)&&e.call(this,o,n!==r?i:o,t),i=o},n)}})}}var s=t.length,l=e.length,c=new RegExp(t.replace(/./g,o),"g"),h=new RegExp(e.replace(/./g,o),"g");return a.startSymbol=function(){return t},a.endSymbol=function(){return e},a}]}function ee(){this.$get=["$rootScope","$window","$q","$$q",function(t,e,n,i){function r(r,a,s,l){var c=e.setInterval,u=e.clearInterval,h=0,d=g(l)&&!l,f=(d?i:n).defer(),p=f.promise;return s=g(s)?s:0,p.then(null,null,r),p.$$intervalId=c(function(){f.notify(h++),s>0&&h>=s&&(f.resolve(h),u(p.$$intervalId),delete o[p.$$intervalId]),d||t.$apply()},a),o[p.$$intervalId]=f,p}var o={};return r.cancel=function(t){return t&&t.$$intervalId in o?(o[t.$$intervalId].reject("canceled"),e.clearInterval(t.$$intervalId),delete o[t.$$intervalId],!0):!1},r}]}function ne(){this.$get=function(){return{id:"en-us",NUMBER_FORMATS:{DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{minInt:1,minFrac:0,maxFrac:3,posPre:"",posSuf:"",negPre:"-",negSuf:"",gSize:3,lgSize:3},{minInt:1,minFrac:2,maxFrac:2,posPre:"¤",posSuf:"",negPre:"(¤",negSuf:")",gSize:3,lgSize:3}],CURRENCY_SYM:"$"},DATETIME_FORMATS:{MONTH:"January February March April May June July August September October November December".split(" "),SHORTMONTH:"Jan Feb Mar Apr May Jun Jul Aug Sep Oct Nov Dec".split(" "),DAY:"Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),SHORTDAY:"Sun Mon Tue Wed Thu Fri Sat".split(" "),AMPMS:["AM","PM"],medium:"MMM d, y h:mm:ss a","short":"M/d/yy h:mm a",fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",mediumDate:"MMM d, y",shortDate:"M/d/yy",mediumTime:"h:mm:ss a",shortTime:"h:mm a"},pluralCat:function(t){return 1===t?"one":"other"}}}}function ie(t){t=t.split("/");for(var e=t.length;e--;)t[e]=W(t[e]);return t.join("/")}function re(t,e){var n=Be(t);e.$$protocol=n.protocol,e.$$host=n.hostname,e.$$port=h(n.port)||xi[n.protocol]||null}function oe(t,e){var n="/"!==t.charAt(0);n&&(t="/"+t);var i=Be(t);e.$$path=decodeURIComponent(n&&"/"===i.pathname.charAt(0)?i.pathname.substring(1):i.pathname),e.$$search=H(i.search),e.$$hash=decodeURIComponent(i.hash),e.$$path&&"/"!=e.$$path.charAt(0)&&(e.$$path="/"+e.$$path)}function ae(t,e){return 0===e.indexOf(t)?e.substr(t.length):void 0}function se(t){var e=t.indexOf("#");return-1==e?t:t.substr(0,e)}function le(t){return t.replace(/(#.+)|#$/,"$1")}function ce(t){return t.substr(0,se(t).lastIndexOf("/")+1)}function ue(t,e){this.$$html5=!0,e=e||"";var i=ce(t);re(t,this),this.$$parse=function(t){var e=ae(i,t);if(!b(e))throw Ci("ipthprfx",t,i);oe(e,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var t=B(this.$$search),e=this.$$hash?"#"+W(this.$$hash):"";this.$$url=ie(this.$$path)+(t?"?"+t:"")+e,this.$$absUrl=i+this.$$url.substr(1)},this.$$parseLinkUrl=function(r,o){if(o&&"#"===o[0])return this.hash(o.slice(1)),!0;var a,s;return(a=ae(t,r))!==n?(s=a,s=(a=ae(e,a))!==n?i+(ae("/",a)||a):t+s):(a=ae(i,r))!==n?s=i+a:i==r+"/"&&(s=i),s&&this.$$parse(s),!!s}}function he(t,e){var n=ce(t);re(t,this),this.$$parse=function(i){i=ae(t,i)||ae(n,i);var r;"#"===i.charAt(0)?(r=ae(e,i),m(r)&&(r=i)):r=this.$$html5?i:"",oe(r,this),i=this.$$path;var o=/^\/[A-Z]:(\/.*)/;0===r.indexOf(t)&&(r=r.replace(t,"")),o.exec(r)||(i=(r=o.exec(i))?r[1]:i),this.$$path=i,this.$$compose()},this.$$compose=function(){var n=B(this.$$search),i=this.$$hash?"#"+W(this.$$hash):"";this.$$url=ie(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=t+(this.$$url?e+this.$$url:"")},this.$$parseLinkUrl=function(e,n){return se(t)==se(e)?(this.$$parse(e),!0):!1}}function de(t,e){this.$$html5=!0,he.apply(this,arguments);var n=ce(t);this.$$parseLinkUrl=function(i,r){if(r&&"#"===r[0])return this.hash(r.slice(1)),!0;var o,a;return t==se(i)?o=i:(a=ae(n,i))?o=t+e+a:n===i+"/"&&(o=n),o&&this.$$parse(o),!!o},this.$$compose=function(){var n=B(this.$$search),i=this.$$hash?"#"+W(this.$$hash):"";this.$$url=ie(this.$$path)+(n?"?"+n:"")+i,this.$$absUrl=t+e+this.$$url}}function fe(t){return function(){return this[t]}}function pe(t,e){return function(n){return m(n)?this[t]:(this[t]=e(n),this.$$compose(),this)}}function me(){var t="",e={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(e){return g(e)?(t=e,this):t},this.html5Mode=function(t){return S(t)?(e.enabled=t,this):v(t)?(S(t.enabled)&&(e.enabled=t.enabled),S(t.requireBase)&&(e.requireBase=t.requireBase),S(t.rewriteLinks)&&(e.rewriteLinks=t.rewriteLinks),this):e},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,i,r,o,a){function s(t,e,n){var r=c.url(),o=c.$$state;try{i.url(t,e,n),c.$$state=i.state()}catch(a){throw c.url(r),c.$$state=o,a}}function l(t,e){n.$broadcast("$locationChangeSuccess",c.absUrl(),t,c.$$state,e)}var c,u;u=i.baseHref();var h,d=i.url();if(e.enabled){if(!u&&e.requireBase)throw Ci("nobase");h=d.substring(0,d.indexOf("/",d.indexOf("//")+2))+(u||"/"),u=r.history?ue:de}else h=se(d),u=he;c=new u(h,"#"+t),c.$$parseLinkUrl(d,d),c.$$state=i.state();var f=/^\s*(javascript|mailto):/i;o.on("click",function(t){if(e.rewriteLinks&&!t.ctrlKey&&!t.metaKey&&2!=t.which){for(var r=yn(t.target);"a"!==k(r[0]);)if(r[0]===o[0]||!(r=r.parent())[0])return;var s=r.prop("href"),l=r.attr("href")||r.attr("xlink:href");v(s)&&"[object SVGAnimatedString]"===s.toString()&&(s=Be(s.animVal).href),f.test(s)||!s||r.attr("target")||t.isDefaultPrevented()||!c.$$parseLinkUrl(s,l)||(t.preventDefault(),c.absUrl()!=i.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}),c.absUrl()!=d&&i.url(c.absUrl(),!0);var p=!0;return i.onUrlChange(function(t,e){n.$evalAsync(function(){var i,r=c.absUrl(),o=c.$$state;c.$$parse(t),c.$$state=e,i=n.$broadcast("$locationChangeStart",t,r,e,o).defaultPrevented,c.absUrl()===t&&(i?(c.$$parse(r),c.$$state=o,s(r,!1,o)):(p=!1,l(r,o)))}),n.$$phase||n.$digest()}),n.$watch(function(){var t=le(i.url()),e=le(c.absUrl()),o=i.state(),a=c.$$replace,u=t!==e||c.$$html5&&r.history&&o!==c.$$state;(p||u)&&(p=!1,n.$evalAsync(function(){var e=c.absUrl(),i=n.$broadcast("$locationChangeStart",e,t,c.$$state,o).defaultPrevented;c.absUrl()===e&&(i?(c.$$parse(t),c.$$state=o):(u&&s(e,a,o===c.$$state?null:c.$$state),l(t,o)))})),c.$$replace=!1}),c}]}function ge(){var t=!0,e=this;this.debugEnabled=function(e){return g(e)?(t=e,this):t},this.$get=["$window",function(n){function i(t){return t instanceof Error&&(t.stack?t=t.message&&-1===t.stack.indexOf(t.message)?"Error: "+t.message+"\n"+t.stack:t.stack:t.sourceURL&&(t=t.message+"\n"+t.sourceURL+":"+t.line)),t}function r(t){var e=n.console||{},r=e[t]||e.log||d;t=!1;try{t=!!r.apply}catch(a){}return t?function(){var t=[];return o(arguments,function(e){t.push(i(e))}),r.apply(e,t)}:function(t,e){r(t,null==e?"":e)}}return{log:r("log"),info:r("info"),warn:r("warn"),error:r("error"),debug:function(){var n=r("debug");return function(){t&&n.apply(e,arguments)}}()}}]}function ve(t,e){if("__defineGetter__"===t||"__defineSetter__"===t||"__lookupGetter__"===t||"__lookupSetter__"===t||"__proto__"===t)throw $i("isecfld",e);return t}function be(t,e){if(t){if(t.constructor===t)throw $i("isecfn",e);if(t.window===t)throw $i("isecwindow",e);if(t.children&&(t.nodeName||t.prop&&t.attr&&t.find))throw $i("isecdom",e);if(t===Object)throw $i("isecobj",e)}return t}function ye(t){return t.constant}function we(t,e,n,i,r){be(t,r),be(e,r),n=n.split(".");for(var o,a=0;1<n.length;a++){o=ve(n.shift(),r);var s=0===a&&e&&e[o]||t[o];s||(s={},t[o]=s),t=be(s,r)}return o=ve(n.shift(),r),be(t[o],r),t[o]=i}function xe(t){return"constructor"==t}function Ce(t,e,i,r,o,a,s){ve(t,a),ve(e,a),ve(i,a),ve(r,a),ve(o,a);var l=function(t){return be(t,a)},c=s||xe(t)?l:f,u=s||xe(e)?l:f,h=s||xe(i)?l:f,d=s||xe(r)?l:f,p=s||xe(o)?l:f;return function(a,s){var l=s&&s.hasOwnProperty(t)?s:a;return null==l?l:(l=c(l[t]),e?null==l?n:(l=u(l[e]),i?null==l?n:(l=h(l[i]),r?null==l?n:(l=d(l[r]),o?null==l?n:l=p(l[o]):l):l):l):l)}}function _e(t,e){return function(n,i){return t(n,i,be,e)}}function $e(t,e,i){var r=e.expensiveChecks,a=r?Di:Ii,s=a[t];if(s)return s;var l=t.split("."),c=l.length;if(e.csp)s=6>c?Ce(l[0],l[1],l[2],l[3],l[4],i,r):function(t,e){var o,a=0;do o=Ce(l[a++],l[a++],l[a++],l[a++],l[a++],i,r)(t,e),e=n,t=o;while(c>a);return o};else{var u="";r&&(u+="s = eso(s, fe);\nl = eso(l, fe);\n");var h=r;o(l,function(t,e){ve(t,i);var n=(e?"s":'((l&&l.hasOwnProperty("'+t+'"))?l:s)')+"."+t;(r||xe(t))&&(n="eso("+n+", fe)",h=!0),u+="if(s == null) return undefined;\ns="+n+";\n"}),u+="return s;",e=new Function("s","l","eso","fe",u),e.toString=p(u),h&&(e=_e(e,i)),s=e}return s.sharedGetter=!0,s.assign=function(e,n,i){return we(e,i,t,n,t)},a[t]=s}function Se(t){return x(t.valueOf)?t.valueOf():Ni.call(t)}function Ee(){var t=nt(),e=nt();this.$get=["$filter","$sniffer",function(n,i){function r(t){var e=t;return t.sharedGetter&&(e=function(e,n){return t(e,n)},e.literal=t.literal,e.constant=t.constant,e.assign=t.assign),e}function a(t,e){for(var n=0,i=t.length;i>n;n++){var r=t[n];r.constant||(r.inputs?a(r.inputs,e):-1===e.indexOf(r)&&e.push(r))}return e}function s(t,e){return null==t||null==e?t===e:"object"==typeof t&&(t=Se(t),"object"==typeof t)?!1:t===e||t!==t&&e!==e}function l(t,e,n,i){var r,o=i.$$inputs||(i.$$inputs=a(i.inputs,[]));if(1===o.length){var l=s,o=o[0];return t.$watch(function(t){var e=o(t);return s(e,l)||(r=i(t),l=e&&Se(e)),r},e,n)}for(var c=[],u=0,h=o.length;h>u;u++)c[u]=s;return t.$watch(function(t){for(var e=!1,n=0,a=o.length;a>n;n++){var l=o[n](t);(e||(e=!s(l,c[n])))&&(c[n]=l&&Se(l))}return e&&(r=i(t)),r},e,n)}function c(t,e,n,i){var r,o;return r=t.$watch(function(t){return i(t)},function(t,n,i){o=t,x(e)&&e.apply(this,arguments),g(t)&&i.$$postDigest(function(){g(o)&&r()})},n)}function u(t,e,n,i){function r(t){var e=!0;return o(t,function(t){g(t)||(e=!1)}),e}var a,s;return a=t.$watch(function(t){return i(t)},function(t,n,i){s=t,x(e)&&e.call(this,t,n,i),r(t)&&i.$$postDigest(function(){r(s)&&a()})},n)}function h(t,e,n,i){var r;return r=t.$watch(function(t){return i(t)},function(t,n,i){x(e)&&e.apply(this,arguments),r()},n)}function f(t,e){if(!e)return t;var n=t.$$watchDelegate,n=n!==u&&n!==c?function(n,i){var r=t(n,i);return e(r,n,i)}:function(n,i){var r=t(n,i),o=e(r,n,i);return g(r)?o:r};return t.$$watchDelegate&&t.$$watchDelegate!==l?n.$$watchDelegate=t.$$watchDelegate:e.$stateful||(n.$$watchDelegate=l,n.inputs=[t]),n}var p={csp:i.csp,expensiveChecks:!1},m={csp:i.csp,expensiveChecks:!0};return function(i,o,a){var s,g,v;switch(typeof i){case"string":v=i=i.trim();var b=a?e:t;return s=b[v],s||(":"===i.charAt(0)&&":"===i.charAt(1)&&(g=!0,i=i.substring(2)),a=a?m:p,s=new Oi(a),s=new Pi(s,n,a).parse(i),s.constant?s.$$watchDelegate=h:g?(s=r(s),s.$$watchDelegate=s.literal?u:c):s.inputs&&(s.$$watchDelegate=l),b[v]=s),f(s,o);case"function":return f(i,o);default:return f(d,o)}}}]}function Te(){this.$get=["$rootScope","$exceptionHandler",function(t,e){return Ae(function(e){t.$evalAsync(e)},e)}]}function ke(){this.$get=["$browser","$exceptionHandler",function(t,e){return Ae(function(e){t.defer(e)},e)}]}function Ae(t,e){function r(t,e,n){function i(e){return function(n){r||(r=!0,e.call(t,n))}}var r=!1;return[i(e),i(n)]}function a(){this.$$state={status:0}}function s(t,e){return function(n){e.call(t,n)}}function l(i){!i.processScheduled&&i.pending&&(i.processScheduled=!0,t(function(){var t,r,o;o=i.pending,i.processScheduled=!1,i.pending=n;for(var a=0,s=o.length;s>a;++a){r=o[a][0],t=o[a][i.status];try{x(t)?r.resolve(t(i.value)):1===i.status?r.resolve(i.value):r.reject(i.value)}catch(l){r.reject(l),e(l)}}}))}function c(){this.promise=new a,this.resolve=s(this,this.resolve),this.reject=s(this,this.reject),this.notify=s(this,this.notify)}var u=i("$q",TypeError);a.prototype={then:function(t,e,n){var i=new c;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([i,t,e,n]),0<this.$$state.status&&l(this.$$state),i.promise},"catch":function(t){return this.then(null,t)},"finally":function(t,e){return this.then(function(e){return d(e,!0,t)},function(e){return d(e,!1,t)},e)}},c.prototype={resolve:function(t){this.promise.$$state.status||(t===this.promise?this.$$reject(u("qcycle",t)):this.$$resolve(t))},$$resolve:function(t){var n,i;i=r(this,this.$$resolve,this.$$reject);try{(v(t)||x(t))&&(n=t&&t.then),x(n)?(this.promise.$$state.status=-1,n.call(t,i[0],i[1],this.notify)):(this.promise.$$state.value=t,this.promise.$$state.status=1,l(this.promise.$$state))}catch(o){i[1](o),e(o)}},reject:function(t){this.promise.$$state.status||this.$$reject(t)},$$reject:function(t){this.promise.$$state.value=t,this.promise.$$state.status=2,l(this.promise.$$state)},notify:function(n){var i=this.promise.$$state.pending;0>=this.promise.$$state.status&&i&&i.length&&t(function(){for(var t,r,o=0,a=i.length;a>o;o++){r=i[o][0],t=i[o][3];try{r.notify(x(t)?t(n):n)}catch(s){e(s)}}})}};var h=function(t,e){var n=new c;return e?n.resolve(t):n.reject(t),n.promise},d=function(t,e,n){var i=null;try{x(n)&&(i=n())}catch(r){return h(r,!1)}return i&&x(i.then)?i.then(function(){return h(t,e)},function(t){return h(t,!1)}):h(t,e)},f=function(t,e,n,i){var r=new c;return r.resolve(t),r.promise.then(e,n,i)},p=function m(t){if(!x(t))throw u("norslvr",t);if(!(this instanceof m))return new m(t);var e=new c;return t(function(t){e.resolve(t)},function(t){e.reject(t)}),e.promise};return p.defer=function(){return new c},p.reject=function(t){var e=new c;return e.reject(t),e.promise},p.when=f,p.all=function(t){var e=new c,n=0,i=Dn(t)?[]:{};return o(t,function(t,r){n++,f(t).then(function(t){i.hasOwnProperty(r)||(i[r]=t,--n||e.resolve(i))},function(t){i.hasOwnProperty(r)||e.reject(t)})}),0===n&&e.resolve(i),e.promise},p}function Me(){this.$get=["$window","$timeout",function(t,e){var n=t.requestAnimationFrame||t.webkitRequestAnimationFrame,i=t.cancelAnimationFrame||t.webkitCancelAnimationFrame||t.webkitCancelRequestAnimationFrame,r=!!n,o=r?function(t){var e=n(t);return function(){i(e)}}:function(t){var n=e(t,16.66,!1);return function(){e.cancel(n)}};return o.supported=r,o}]}function Oe(){var t=10,e=i("$rootScope"),n=null,a=null;this.digestTtl=function(e){return arguments.length&&(t=e),t},this.$get=["$injector","$exceptionHandler","$parse","$browser",function(i,s,l,c){function u(){this.$id=++Pn,this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$isolateBindings=null}function h(t){if(y.$$phase)throw e("inprog",y.$$phase);y.$$phase=t}function f(t,e,n){do t.$$listenerCount[n]-=e,0===t.$$listenerCount[n]&&delete t.$$listenerCount[n];while(t=t.$parent)}function p(){}function g(){for(;_.length;)try{_.shift()()}catch(t){s(t)}a=null}function b(){null===a&&(a=c.defer(function(){y.$apply(g)}))}u.prototype={constructor:u,$new:function(t,e){function n(){i.$$destroyed=!0}var i;return e=e||this,t?(i=new u,i.$root=this.$root):(this.$$ChildScope||(this.$$ChildScope=function(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$id=++Pn,this.$$ChildScope=null},this.$$ChildScope.prototype=this),i=new this.$$ChildScope),i.$parent=e,i.$$prevSibling=e.$$childTail,e.$$childHead?(e.$$childTail.$$nextSibling=i,e.$$childTail=i):e.$$childHead=e.$$childTail=i,(t||e!=this)&&i.$on("$destroy",n),i},$watch:function(t,e,i){var r=l(t);if(r.$$watchDelegate)return r.$$watchDelegate(this,e,i,r);var o=this.$$watchers,a={fn:e,last:p,get:r,exp:t,eq:!!i};return n=null,x(e)||(a.fn=d),o||(o=this.$$watchers=[]),o.unshift(a),function(){A(o,a),n=null}},$watchGroup:function(t,e){function n(){l=!1,c?(c=!1,e(r,r,s)):e(r,i,s)}var i=Array(t.length),r=Array(t.length),a=[],s=this,l=!1,c=!0;if(!t.length){var u=!0;return s.$evalAsync(function(){u&&e(r,r,s)}),function(){u=!1}}return 1===t.length?this.$watch(t[0],function(t,n,o){r[0]=t,i[0]=n,e(r,t===n?r:i,o)}):(o(t,function(t,e){var o=s.$watch(t,function(t,o){r[e]=t,i[e]=o,l||(l=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(t,e){function n(t){i=t;var e,n,a,s;if(!m(i)){if(v(i))if(r(i))for(o!==d&&(o=d,g=o.length=0,u++),t=i.length,g!==t&&(u++,o.length=g=t),e=0;t>e;e++)s=o[e],a=i[e],n=s!==s&&a!==a,n||s===a||(u++,o[e]=a);else{o!==f&&(o=f={},g=0,u++),t=0;for(e in i)i.hasOwnProperty(e)&&(t++,a=i[e],s=o[e],e in o?(n=s!==s&&a!==a,n||s===a||(u++,o[e]=a)):(g++,o[e]=a,u++));if(g>t)for(e in u++,o)i.hasOwnProperty(e)||(g--,delete o[e])}else o!==i&&(o=i,u++);return u}}n.$stateful=!0;var i,o,a,s=this,c=1<e.length,u=0,h=l(t,n),d=[],f={},p=!0,g=0;return this.$watch(h,function(){if(p?(p=!1,e(i,i,s)):e(i,a,s),c)if(v(i))if(r(i)){a=Array(i.length);for(var t=0;t<i.length;t++)a[t]=i[t]}else for(t in a={},i)$n.call(i,t)&&(a[t]=i[t]);else a=i})},$digest:function(){var i,r,o,l,u,d,f,m,v,b=t,_=[];h("$digest"),c.$$checkUrlChange(),this===y&&null!==a&&(c.defer.cancel(a),g()),n=null;do{for(d=!1,f=this;w.length;){try{v=w.shift(),v.scope.$eval(v.expression,v.locals)}catch($){s($)}n=null}t:do{if(l=f.$$watchers)for(u=l.length;u--;)try{if(i=l[u])if((r=i.get(f))===(o=i.last)||(i.eq?P(r,o):"number"==typeof r&&"number"==typeof o&&isNaN(r)&&isNaN(o))){if(i===n){d=!1;break t}}else d=!0,n=i,i.last=i.eq?M(r,null):r,i.fn(r,o===p?r:o,f),5>b&&(m=4-b,_[m]||(_[m]=[]),_[m].push({msg:x(i.exp)?"fn: "+(i.exp.name||i.exp.toString()):i.exp,newVal:r,oldVal:o}))}catch(S){s(S)}if(!(l=f.$$childHead||f!==this&&f.$$nextSibling))for(;f!==this&&!(l=f.$$nextSibling);)f=f.$parent}while(f=l);if((d||w.length)&&!b--)throw y.$$phase=null,e("infdig",t,_)}while(d||w.length);for(y.$$phase=null;C.length;)try{C.shift()()}catch(E){s(E)}},$destroy:function(){if(!this.$$destroyed){var t=this.$parent;if(this.$broadcast("$destroy"),this.$$destroyed=!0,this!==y){for(var e in this.$$listenerCount)f(this,this.$$listenerCount[e],e);t.$$childHead==this&&(t.$$childHead=this.$$nextSibling),t.$$childTail==this&&(t.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=d,this.$on=this.$watch=this.$watchGroup=function(){return d},this.$$listeners={},this.$parent=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=this.$root=this.$$watchers=null}}},$eval:function(t,e){return l(t)(this,e)},$evalAsync:function(t,e){y.$$phase||w.length||c.defer(function(){w.length&&y.$digest()}),w.push({scope:this,expression:t,locals:e})},$$postDigest:function(t){C.push(t)},$apply:function(t){try{return h("$apply"),this.$eval(t)}catch(e){s(e)}finally{y.$$phase=null;try{y.$digest()}catch(n){throw s(n),n}}},$applyAsync:function(t){function e(){n.$eval(t)}var n=this;t&&_.push(e),b()},$on:function(t,e){var n=this.$$listeners[t];n||(this.$$listeners[t]=n=[]),n.push(e);var i=this;do i.$$listenerCount[t]||(i.$$listenerCount[t]=0),i.$$listenerCount[t]++;while(i=i.$parent);var r=this;return function(){var i=n.indexOf(e);-1!==i&&(n[i]=null,f(r,1,t))}},$emit:function(t,e){var n,i,r,o=[],a=this,l=!1,c={name:t,targetScope:a,stopPropagation:function(){l=!0},preventDefault:function(){c.defaultPrevented=!0},defaultPrevented:!1},u=I([c],arguments,1);do{for(n=a.$$listeners[t]||o,c.currentScope=a,i=0,r=n.length;r>i;i++)if(n[i])try{n[i].apply(null,u)}catch(h){s(h)}else n.splice(i,1),i--,r--;if(l)return c.currentScope=null,c;a=a.$parent}while(a);return c.currentScope=null,c},$broadcast:function(t,e){var n=this,i=this,r={name:t,targetScope:this,preventDefault:function(){r.defaultPrevented=!0},defaultPrevented:!1};if(!this.$$listenerCount[t])return r;for(var o,a,l=I([r],arguments,1);n=i;){for(r.currentScope=n,i=n.$$listeners[t]||[],o=0,a=i.length;a>o;o++)if(i[o])try{i[o].apply(null,l)}catch(c){s(c)}else i.splice(o,1),o--,a--;if(!(i=n.$$listenerCount[t]&&n.$$childHead||n!==this&&n.$$nextSibling))for(;n!==this&&!(i=n.$$nextSibling);)n=n.$parent}return r.currentScope=null,r}};var y=new u,w=y.$$asyncQueue=[],C=y.$$postDigestQueue=[],_=y.$$applyAsyncQueue=[];return y}]}function Pe(){var t=/^\s*(https?|ftp|mailto|tel|file):/,e=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(e){return g(e)?(t=e,this):t},this.imgSrcSanitizationWhitelist=function(t){return g(t)?(e=t,this):e},this.$get=function(){return function(n,i){var r,o=i?e:t;return r=Be(n).href,""===r||r.match(o)?n:"unsafe:"+r}}}function Ie(t){if("self"===t)return t;if(b(t)){if(-1<t.indexOf("***"))throw Li("iwcard",t);return t=Ln(t).replace("\\*\\*",".*").replace("\\*","[^:/.?&;]*"),new RegExp("^"+t+"$")}if(C(t))return new RegExp("^"+t.source+"$");throw Li("imatcher")}function De(t){var e=[];return g(t)&&o(t,function(t){e.push(Ie(t))}),e}function Ne(){this.SCE_CONTEXTS=Fi;var t=["self"],e=[];this.resourceUrlWhitelist=function(e){return arguments.length&&(t=De(e)),t},this.resourceUrlBlacklist=function(t){return arguments.length&&(e=De(t)),e},this.$get=["$injector",function(i){function r(t,e){return"self"===t?We(e):!!t.exec(e.href)}function o(t){var e=function(t){this.$$unwrapTrustedValue=function(){return t}};return t&&(e.prototype=new t),e.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},e.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},e}var a=function(t){throw Li("unsafe")};i.has("$sanitize")&&(a=i.get("$sanitize"));var s=o(),l={};return l[Fi.HTML]=o(s),l[Fi.CSS]=o(s),l[Fi.URL]=o(s),l[Fi.JS]=o(s),l[Fi.RESOURCE_URL]=o(l[Fi.URL]),{trustAs:function(t,e){var i=l.hasOwnProperty(t)?l[t]:null;if(!i)throw Li("icontext",t,e);if(null===e||e===n||""===e)return e;if("string"!=typeof e)throw Li("itype",t);return new i(e)},getTrusted:function(i,o){if(null===o||o===n||""===o)return o;var s=l.hasOwnProperty(i)?l[i]:null;if(s&&o instanceof s)return o.$$unwrapTrustedValue();if(i===Fi.RESOURCE_URL){var c,u,s=Be(o.toString()),h=!1;for(c=0,u=t.length;u>c;c++)if(r(t[c],s)){h=!0;break}if(h)for(c=0,u=e.length;u>c;c++)if(r(e[c],s)){h=!1;break}if(h)return o;throw Li("insecurl",o.toString())}if(i===Fi.HTML)return a(o);throw Li("unsafe")},valueOf:function(t){return t instanceof s?t.$$unwrapTrustedValue():t}}}]}function Le(){var t=!0;this.enabled=function(e){return arguments.length&&(t=!!e),t},this.$get=["$parse","$sceDelegate",function(e,n){if(t&&8>bn)throw Li("iequirks");var i=O(Fi);i.isEnabled=function(){return t},i.trustAs=n.trustAs,i.getTrusted=n.getTrusted,i.valueOf=n.valueOf,t||(i.trustAs=i.getTrusted=function(t,e){return e},i.valueOf=f),i.parseAs=function(t,n){var r=e(n);return r.literal&&r.constant?r:e(n,function(e){return i.getTrusted(t,e)})};var r=i.parseAs,a=i.getTrusted,s=i.trustAs;return o(Fi,function(t,e){var n=_n(e);i[ot("parse_as_"+n)]=function(e){return r(t,e)},i[ot("get_trusted_"+n)]=function(e){return a(t,e)},i[ot("trust_as_"+n)]=function(e){return s(t,e)}}),i}]}function Fe(){this.$get=["$window","$document",function(t,e){var n,i={},r=h((/android (\d+)/.exec(_n((t.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((t.navigator||{}).userAgent),a=e[0]||{},s=/^(Moz|webkit|ms)(?=[A-Z])/,l=a.body&&a.body.style,c=!1,u=!1;if(l){for(var d in l)if(c=s.exec(d)){n=c[0],n=n.substr(0,1).toUpperCase()+n.substr(1);break}n||(n="WebkitOpacity"in l&&"webkit"),c=!!("transition"in l||n+"Transition"in l),u=!!("animation"in l||n+"Animation"in l),!r||c&&u||(c=b(a.body.style.webkitTransition),u=b(a.body.style.webkitAnimation))}return{history:!(!t.history||!t.history.pushState||4>r||o),hasEvent:function(t){if("input"===t&&11>=bn)return!1;if(m(i[t])){var e=a.createElement("div");i[t]="on"+t in e}return i[t]},csp:Fn(),vendorPrefix:n,transitions:c,animations:u,android:r}}]}function je(){this.$get=["$templateCache","$http","$q",function(t,e,n){function i(r,o){i.totalPendingRequests++;var a=e.defaults&&e.defaults.transformResponse;return Dn(a)?a=a.filter(function(t){return t!==qt}):a===qt&&(a=null),e.get(r,{cache:t,transformResponse:a}).then(function(t){return i.totalPendingRequests--,t.data},function(t){if(i.totalPendingRequests--,!o)throw di("tpload",r);return n.reject(t)})}return i.totalPendingRequests=0,i}]}function Re(){this.$get=["$rootScope","$browser","$location",function(t,e,n){return{findBindings:function(t,e,n){t=t.getElementsByClassName("ng-binding");var i=[];return o(t,function(t){var r=On.element(t).data("$binding");r&&o(r,function(r){n?new RegExp("(^|\\s)"+Ln(e)+"(\\s|\\||$)").test(r)&&i.push(t):-1!=r.indexOf(e)&&i.push(t)})}),i},findModels:function(t,e,n){for(var i=["ng-","data-ng-","ng\\:"],r=0;r<i.length;++r){var o=t.querySelectorAll("["+i[r]+"model"+(n?"=":"*=")+'"'+e+'"]');if(o.length)return o}},getLocation:function(){return n.url()},setLocation:function(e){e!==n.url()&&(n.url(e),t.$digest())},whenStable:function(t){e.notifyWhenNoOutstandingRequests(t)}}}]}function He(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(t,e,n,i,r){function o(o,s,l){var c=g(l)&&!l,u=(c?i:n).defer(),h=u.promise;return s=e.defer(function(){try{u.resolve(o())}catch(e){u.reject(e),r(e)}finally{delete a[h.$$timeoutId]}c||t.$apply()},s),h.$$timeoutId=s,a[s]=u,h}var a={};return o.cancel=function(t){return t&&t.$$timeoutId in a?(a[t.$$timeoutId].reject("canceled"),delete a[t.$$timeoutId],e.defer.cancel(t.$$timeoutId)):!1},o}]}function Be(t){return bn&&(ji.setAttribute("href",t),t=ji.href),ji.setAttribute("href",t),{href:ji.href,protocol:ji.protocol?ji.protocol.replace(/:$/,""):"",host:ji.host,search:ji.search?ji.search.replace(/^\?/,""):"",hash:ji.hash?ji.hash.replace(/^#/,""):"",hostname:ji.hostname,port:ji.port,pathname:"/"===ji.pathname.charAt(0)?ji.pathname:"/"+ji.pathname}}function We(t){return t=b(t)?Be(t):t,t.protocol===Ri.protocol&&t.host===Ri.host}function ze(){this.$get=p(t)}function Ue(t){function e(n,i){if(v(n)){var r={};return o(n,function(t,n){r[n]=e(n,t)}),r}return t.factory(n+"Filter",i)}this.register=e,this.$get=["$injector",function(t){return function(e){return t.get(e+"Filter")}}],e("currency",Xe),e("date",nn),e("filter",Ye),e("json",rn),e("limitTo",on),e("lowercase",Ui),e("number",Ge),e("orderBy",an),e("uppercase",Yi)}function Ye(){return function(t,e,n){if(!Dn(t))return t;var i;switch(typeof e){case"function":break;case"boolean":case"number":case"string":i=!0;case"object":e=qe(e,n,i);break;default:return t}return t.filter(e)}}function qe(t,e,n){var i=v(t)&&"$"in t;return!0===e?e=P:x(e)||(e=function(t,e){return v(t)||v(e)?!1:(t=_n(""+t),e=_n(""+e),-1!==t.indexOf(e))}),function(r){return i&&!v(r)?Ve(r,t.$,e,!1):Ve(r,t,e,n)}}function Ve(t,e,n,i,r){var o=typeof t,a=typeof e;if("string"===a&&"!"===e.charAt(0))return!Ve(t,e.substring(1),n,i);if(Dn(t))return t.some(function(t){return Ve(t,e,n,i)});switch(o){case"object":var s;

if(i){for(s in t)if("$"!==s.charAt(0)&&Ve(t[s],e,n,!0))return!0;return r?!1:Ve(t,e,n,!1)}if("object"===a){for(s in e)if(r=e[s],!x(r)&&(o="$"===s,!Ve(o?t:t[s],r,n,o,o)))return!1;return!0}return n(t,e);case"function":return!1;default:return n(t,e)}}function Xe(t){var e=t.NUMBER_FORMATS;return function(t,n,i){return m(n)&&(n=e.CURRENCY_SYM),m(i)&&(i=e.PATTERNS[1].maxFrac),null==t?t:Ke(t,e.PATTERNS[1],e.GROUP_SEP,e.DECIMAL_SEP,i).replace(/\u00A4/g,n)}}function Ge(t){var e=t.NUMBER_FORMATS;return function(t,n){return null==t?t:Ke(t,e.PATTERNS[0],e.GROUP_SEP,e.DECIMAL_SEP,n)}}function Ke(t,e,n,i,r){if(!isFinite(t)||v(t))return"";var o=0>t;t=Math.abs(t);var a=t+"",s="",l=[],c=!1;if(-1!==a.indexOf("e")){var u=a.match(/([\d\.]+)e(-?)(\d+)/);u&&"-"==u[2]&&u[3]>r+1?t=0:(s=a,c=!0)}if(c)r>0&&1>t&&(s=t.toFixed(r),t=parseFloat(s));else{a=(a.split(Hi)[1]||"").length,m(r)&&(r=Math.min(Math.max(e.minFrac,a),e.maxFrac)),t=+(Math.round(+(t.toString()+"e"+r)).toString()+"e"+-r);var a=(""+t).split(Hi),c=a[0],a=a[1]||"",h=0,d=e.lgSize,f=e.gSize;if(c.length>=d+f)for(h=c.length-d,u=0;h>u;u++)0===(h-u)%f&&0!==u&&(s+=n),s+=c.charAt(u);for(u=h;u<c.length;u++)0===(c.length-u)%d&&0!==u&&(s+=n),s+=c.charAt(u);for(;a.length<r;)a+="0";r&&"0"!==r&&(s+=i+a.substr(0,r))}return 0===t&&(o=!1),l.push(o?e.negPre:e.posPre,s,o?e.negSuf:e.posSuf),l.join("")}function Ze(t,e,n){var i="";for(0>t&&(i="-",t=-t),t=""+t;t.length<e;)t="0"+t;return n&&(t=t.substr(t.length-e)),i+t}function Je(t,e,n,i){return n=n||0,function(r){return r=r["get"+t](),(n>0||r>-n)&&(r+=n),0===r&&-12==n&&(r=12),Ze(r,e,i)}}function Qe(t,e){return function(n,i){var r=n["get"+t](),o=Sn(e?"SHORT"+t:t);return i[o][r]}}function tn(t){var e=new Date(t,0,1).getDay();return new Date(t,0,(4>=e?5:12)-e)}function en(t){return function(e){var n=tn(e.getFullYear());return e=+new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))-+n,e=1+Math.round(e/6048e5),Ze(e,t)}}function nn(t){function e(t){var e;if(e=t.match(n)){t=new Date(0);var i=0,r=0,o=e[8]?t.setUTCFullYear:t.setFullYear,a=e[8]?t.setUTCHours:t.setHours;e[9]&&(i=h(e[9]+e[10]),r=h(e[9]+e[11])),o.call(t,h(e[1]),h(e[2])-1,h(e[3])),i=h(e[4]||0)-i,r=h(e[5]||0)-r,o=h(e[6]||0),e=Math.round(1e3*parseFloat("0."+(e[7]||0))),a.call(t,i,r,o,e)}return t}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,i,r){var a,s,l="",c=[];if(i=i||"mediumDate",i=t.DATETIME_FORMATS[i]||i,b(n)&&(n=zi.test(n)?h(n):e(n)),y(n)&&(n=new Date(n)),!w(n))return n;for(;i;)(s=Wi.exec(i))?(c=I(c,s,1),i=c.pop()):(c.push(i),i=null);return r&&"UTC"===r&&(n=new Date(n.getTime()),n.setMinutes(n.getMinutes()+n.getTimezoneOffset())),o(c,function(e){a=Bi[e],l+=a?a(n,t.DATETIME_FORMATS):e.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function rn(){return function(t,e){return m(e)&&(e=2),L(t,e)}}function on(){return function(t,e){return y(t)&&(t=t.toString()),Dn(t)||b(t)?(e=1/0===Math.abs(Number(e))?Number(e):h(e))?e>0?t.slice(0,e):t.slice(e):b(t)?"":[]:t}}function an(t){return function(e,n,i){function o(t,e){return e?function(e,n){return t(n,e)}:t}function a(t){switch(typeof t){case"number":case"boolean":case"string":return!0;default:return!1}}function s(t){return null===t?"null":"function"==typeof t.valueOf&&(t=t.valueOf(),a(t))||"function"==typeof t.toString&&(t=t.toString(),a(t))?t:""}function l(t,e){var n=typeof t,i=typeof e;return n===i&&"object"===n&&(t=s(t),e=s(e)),n===i?("string"===n&&(t=t.toLowerCase(),e=e.toLowerCase()),t===e?0:e>t?-1:1):i>n?-1:1}return r(e)?(n=Dn(n)?n:[n],0===n.length&&(n=["+"]),n=n.map(function(e){var n=!1,i=e||f;if(b(e)){if(("+"==e.charAt(0)||"-"==e.charAt(0))&&(n="-"==e.charAt(0),e=e.substring(1)),""===e)return o(l,n);if(i=t(e),i.constant){var r=i();return o(function(t,e){return l(t[r],e[r])},n)}}return o(function(t,e){return l(i(t),i(e))},n)}),En.call(e).sort(o(function(t,e){for(var i=0;i<n.length;i++){var r=n[i](t,e);if(0!==r)return r}return 0},i))):e}}function sn(t){return x(t)&&(t={link:t}),t.restrict=t.restrict||"AC",p(t)}function ln(t,e,i,r,a){var s=this,l=[],c=s.$$parentForm=t.parent().controller("form")||Xi;s.$error={},s.$$success={},s.$pending=n,s.$name=a(e.name||e.ngForm||"")(i),s.$dirty=!1,s.$pristine=!0,s.$valid=!0,s.$invalid=!1,s.$submitted=!1,c.$addControl(s),s.$rollbackViewValue=function(){o(l,function(t){t.$rollbackViewValue()})},s.$commitViewValue=function(){o(l,function(t){t.$commitViewValue()})},s.$addControl=function(t){Q(t.$name,"input"),l.push(t),t.$name&&(s[t.$name]=t)},s.$$renameControl=function(t,e){var n=t.$name;s[n]===t&&delete s[n],s[e]=t,t.$name=e},s.$removeControl=function(t){t.$name&&s[t.$name]===t&&delete s[t.$name],o(s.$pending,function(e,n){s.$setValidity(n,null,t)}),o(s.$error,function(e,n){s.$setValidity(n,null,t)}),A(l,t)},gn({ctrl:this,$element:t,set:function(t,e,n){var i=t[e];i?-1===i.indexOf(n)&&i.push(n):t[e]=[n]},unset:function(t,e,n){var i=t[e];i&&(A(i,n),0===i.length&&delete t[e])},parentForm:c,$animate:r}),s.$setDirty=function(){r.removeClass(t,Ar),r.addClass(t,Mr),s.$dirty=!0,s.$pristine=!1,c.$setDirty()},s.$setPristine=function(){r.setClass(t,Ar,Mr+" ng-submitted"),s.$dirty=!1,s.$pristine=!0,s.$submitted=!1,o(l,function(t){t.$setPristine()})},s.$setUntouched=function(){o(l,function(t){t.$setUntouched()})},s.$setSubmitted=function(){r.addClass(t,"ng-submitted"),s.$submitted=!0,c.$setSubmitted()}}function cn(t){t.$formatters.push(function(e){return t.$isEmpty(e)?e:e.toString()})}function un(t,e,n,i,r,o){var a=_n(e[0].type);if(!r.android){var s=!1;e.on("compositionstart",function(t){s=!0}),e.on("compositionend",function(){s=!1,l()})}var l=function(t){if(c&&(o.defer.cancel(c),c=null),!s){var r=e.val();t=t&&t.type,"password"===a||n.ngTrim&&"false"===n.ngTrim||(r=Nn(r)),(i.$viewValue!==r||""===r&&i.$$hasNativeValidators)&&i.$setViewValue(r,t)}};if(r.hasEvent("input"))e.on("input",l);else{var c,u=function(t,e,n){c||(c=o.defer(function(){c=null,e&&e.value===n||l(t)}))};e.on("keydown",function(t){var e=t.keyCode;91===e||e>15&&19>e||e>=37&&40>=e||u(t,this,this.value)}),r.hasEvent("paste")&&e.on("paste cut",u)}e.on("change",l),i.$render=function(){e.val(i.$isEmpty(i.$viewValue)?"":i.$viewValue)}}function hn(t,e){return function(n,i){var r,a;if(w(n))return n;if(b(n)){if('"'==n.charAt(0)&&'"'==n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),Ji.test(n))return new Date(n);if(t.lastIndex=0,r=t.exec(n))return r.shift(),a=i?{yyyy:i.getFullYear(),MM:i.getMonth()+1,dd:i.getDate(),HH:i.getHours(),mm:i.getMinutes(),ss:i.getSeconds(),sss:i.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(r,function(t,n){n<e.length&&(a[e[n]]=+t)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return 0/0}}function dn(t,e,i,r){return function(o,a,s,l,c,u,h){function d(t){return t&&!(t.getTime&&t.getTime()!==t.getTime())}function f(t){return g(t)?w(t)?t:i(t):n}fn(o,a,s,l),un(o,a,s,l,c,u);var p,v=l&&l.$options&&l.$options.timezone;if(l.$$parserName=t,l.$parsers.push(function(t){return l.$isEmpty(t)?null:e.test(t)?(t=i(t,p),"UTC"===v&&t.setMinutes(t.getMinutes()-t.getTimezoneOffset()),t):n}),l.$formatters.push(function(t){if(t&&!w(t))throw Pr("datefmt",t);if(d(t)){if((p=t)&&"UTC"===v){var e=6e4*p.getTimezoneOffset();p=new Date(p.getTime()+e)}return h("date")(t,r,v)}return p=null,""}),g(s.min)||s.ngMin){var b;l.$validators.min=function(t){return!d(t)||m(b)||i(t)>=b},s.$observe("min",function(t){b=f(t),l.$validate()})}if(g(s.max)||s.ngMax){var y;l.$validators.max=function(t){return!d(t)||m(y)||i(t)<=y},s.$observe("max",function(t){y=f(t),l.$validate()})}}}function fn(t,e,i,r){(r.$$hasNativeValidators=v(e[0].validity))&&r.$parsers.push(function(t){var i=e.prop("validity")||{};return i.badInput&&!i.typeMismatch?n:t})}function pn(t,e,n,r,o){if(g(r)){if(t=t(r),!t.constant)throw i("ngModel")("constexpr",n,r);return t(e)}return o}function mn(t,e){return t="ngClass"+t,["$animate",function(n){function i(t,e){var n=[],i=0;t:for(;i<t.length;i++){for(var r=t[i],o=0;o<e.length;o++)if(r==e[o])continue t;n.push(r)}return n}function r(t){if(!Dn(t)){if(b(t))return t.split(" ");if(v(t)){var e=[];return o(t,function(t,n){t&&(e=e.concat(n.split(" ")))}),e}}return t}return{restrict:"AC",link:function(a,s,l){function c(t,e){var n=s.data("$classCounts")||{},i=[];return o(t,function(t){(e>0||n[t])&&(n[t]=(n[t]||0)+e,n[t]===+(e>0)&&i.push(t))}),s.data("$classCounts",n),i.join(" ")}function u(t){if(!0===e||a.$index%2===e){var o=r(t||[]);if(h){if(!P(t,h)){var u=r(h),d=i(o,u),o=i(u,o),d=c(d,1),o=c(o,-1);d&&d.length&&n.addClass(s,d),o&&o.length&&n.removeClass(s,o)}}else{var d=c(o,1);l.$addClass(d)}}h=O(t)}var h;a.$watch(l[t],u,!0),l.$observe("class",function(e){u(a.$eval(l[t]))}),"ngClass"!==t&&a.$watch("$index",function(n,i){var o=1&n;if(o!==(1&i)){var s=r(a.$eval(l[t]));o===e?(o=c(s,1),l.$addClass(o)):(o=c(s,-1),l.$removeClass(o))}})}}}]}function gn(t){function e(t,e){e&&!a[t]?(u.addClass(o,t),a[t]=!0):!e&&a[t]&&(u.removeClass(o,t),a[t]=!1)}function i(t,n){t=t?"-"+G(t,"-"):"",e(Tr+t,!0===n),e(kr+t,!1===n)}var r=t.ctrl,o=t.$element,a={},s=t.set,l=t.unset,c=t.parentForm,u=t.$animate;a[kr]=!(a[Tr]=o.hasClass(Tr)),r.$setValidity=function(t,o,a){o===n?(r.$pending||(r.$pending={}),s(r.$pending,t,a)):(r.$pending&&l(r.$pending,t,a),vn(r.$pending)&&(r.$pending=n)),S(o)?o?(l(r.$error,t,a),s(r.$$success,t,a)):(s(r.$error,t,a),l(r.$$success,t,a)):(l(r.$error,t,a),l(r.$$success,t,a)),r.$pending?(e(Or,!0),r.$valid=r.$invalid=n,i("",null)):(e(Or,!1),r.$valid=vn(r.$error),r.$invalid=!r.$valid,i("",r.$valid)),o=r.$pending&&r.$pending[t]?n:r.$error[t]?!1:r.$$success[t]?!0:null,i(t,o),c.$setValidity(t,o,r)}}function vn(t){if(t)for(var e in t)return!1;return!0}var bn,yn,wn,xn,Cn=/^\/(.+)\/([a-z]*)$/,_n=function(t){return b(t)?t.toLowerCase():t},$n=Object.prototype.hasOwnProperty,Sn=function(t){return b(t)?t.toUpperCase():t},En=[].slice,Tn=[].splice,kn=[].push,An=Object.prototype.toString,Mn=i("ng"),On=t.angular||(t.angular={}),Pn=0;bn=e.documentMode,d.$inject=[],f.$inject=[];var In,Dn=Array.isArray,Nn=function(t){return b(t)?t.trim():t},Ln=function(t){return t.replace(/([-()\[\]{}+?*.$\^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},Fn=function(){if(g(Fn.isActive_))return Fn.isActive_;var t=!(!e.querySelector("[ng-csp]")&&!e.querySelector("[data-ng-csp]"));if(!t)try{new Function("")}catch(n){t=!0}return Fn.isActive_=t},jn=["ng-","data-ng-","ng:","x-ng-"],Rn=/[A-Z]/g,Hn=!1,Bn=1,Wn=3,zn={full:"1.3.9",major:1,minor:3,dot:9,codeName:"multidimensional-awareness"};lt.expando="ng339";var Un=lt.cache={},Yn=1;lt._data=function(t){return this.cache[t[this.expando]]||{}};var qn=/([\:\-\_]+(.))/g,Vn=/^moz([A-Z])/,Xn={mouseleave:"mouseout",mouseenter:"mouseover"},Gn=i("jqLite"),Kn=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,Zn=/<|&#?\w+;/,Jn=/<([\w:]+)/,Qn=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,ti={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ti.optgroup=ti.option,ti.tbody=ti.tfoot=ti.colgroup=ti.caption=ti.thead,ti.th=ti.td;var ei=lt.prototype={ready:function(n){function i(){r||(r=!0,n())}var r=!1;"complete"===e.readyState?setTimeout(i):(this.on("DOMContentLoaded",i),lt(t).on("load",i))},toString:function(){var t=[];return o(this,function(e){t.push(""+e)}),"["+t.join(", ")+"]"},eq:function(t){return yn(t>=0?this[t]:this[this.length+t])},length:0,push:kn,sort:[].sort,splice:[].splice},ni={};o("multiple selected checked disabled readOnly required open".split(" "),function(t){ni[_n(t)]=t});var ii={};o("input select option textarea button form details".split(" "),function(t){ii[t]=!0});var ri={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern"};o({data:pt,removeData:dt},function(t,e){lt[e]=t}),o({data:pt,inheritedData:wt,scope:function(t){return yn.data(t,"$scope")||wt(t.parentNode||t,["$isolateScope","$scope"])},isolateScope:function(t){return yn.data(t,"$isolateScope")||yn.data(t,"$isolateScopeNoTemplate")},controller:yt,injector:function(t){return wt(t,"$injector")},removeAttr:function(t,e){t.removeAttribute(e)},hasClass:mt,css:function(t,e,n){return e=ot(e),g(n)?void(t.style[e]=n):t.style[e]},attr:function(t,e,i){var r=_n(e);if(ni[r]){if(!g(i))return t[e]||(t.attributes.getNamedItem(e)||d).specified?r:n;i?(t[e]=!0,t.setAttribute(e,r)):(t[e]=!1,t.removeAttribute(r))}else if(g(i))t.setAttribute(e,i);else if(t.getAttribute)return t=t.getAttribute(e,2),null===t?n:t},prop:function(t,e,n){return g(n)?void(t[e]=n):t[e]},text:function(){function t(t,e){if(m(e)){var n=t.nodeType;return n===Bn||n===Wn?t.textContent:""}t.textContent=e}return t.$dv="",t}(),val:function(t,e){if(m(e)){if(t.multiple&&"select"===k(t)){var n=[];return o(t.options,function(t){t.selected&&n.push(t.value||t.text)}),0===n.length?null:n}return t.value}t.value=e},html:function(t,e){return m(e)?t.innerHTML:(ut(t,!0),void(t.innerHTML=e))},empty:xt},function(t,e){lt.prototype[e]=function(e,i){var r,o,a=this.length;if(t!==xt&&(2==t.length&&t!==mt&&t!==yt?e:i)===n){if(v(e)){for(r=0;a>r;r++)if(t===pt)t(this[r],e);else for(o in e)t(this[r],o,e[o]);return this}for(r=t.$dv,a=r===n?Math.min(a,1):a,o=0;a>o;o++){var s=t(this[o],e,i);r=r?r+s:s}return r}for(r=0;a>r;r++)t(this[r],e,i);return this}}),o({removeData:dt,on:function io(t,e,n,i){if(g(i))throw Gn("onargs");if(at(t)){var r=ft(t,!0);i=r.events;var o=r.handle;o||(o=r.handle=Et(t,i));for(var r=0<=e.indexOf(" ")?e.split(" "):[e],a=r.length;a--;){e=r[a];var s=i[e];s||(i[e]=[],"mouseenter"===e||"mouseleave"===e?io(t,Xn[e],function(t){var n=t.relatedTarget;n&&(n===this||this.contains(n))||o(t,e)}):"$destroy"!==e&&t.addEventListener(e,o,!1),s=i[e]),s.push(n)}}},off:ht,one:function(t,e,n){t=yn(t),t.on(e,function i(){t.off(e,n),t.off(e,i)}),t.on(e,n)},replaceWith:function(t,e){var n,i=t.parentNode;ut(t),o(new lt(e),function(e){n?i.insertBefore(e,n.nextSibling):i.replaceChild(e,t),n=e})},children:function(t){var e=[];return o(t.childNodes,function(t){t.nodeType===Bn&&e.push(t)}),e},contents:function(t){return t.contentDocument||t.childNodes||[]},append:function(t,e){var n=t.nodeType;if(n===Bn||11===n){e=new lt(e);for(var n=0,i=e.length;i>n;n++)t.appendChild(e[n])}},prepend:function(t,e){if(t.nodeType===Bn){var n=t.firstChild;o(new lt(e),function(e){t.insertBefore(e,n)})}},wrap:function(t,e){e=yn(e).eq(0).clone()[0];var n=t.parentNode;n&&n.replaceChild(e,t),e.appendChild(t)},remove:Ct,detach:function(t){Ct(t,!0)},after:function(t,e){var n=t,i=t.parentNode;e=new lt(e);for(var r=0,o=e.length;o>r;r++){var a=e[r];i.insertBefore(a,n.nextSibling),n=a}},addClass:vt,removeClass:gt,toggleClass:function(t,e,n){e&&o(e.split(" "),function(e){var i=n;m(i)&&(i=!mt(t,e)),(i?vt:gt)(t,e)})},parent:function(t){return(t=t.parentNode)&&11!==t.nodeType?t:null},next:function(t){return t.nextElementSibling},find:function(t,e){return t.getElementsByTagName?t.getElementsByTagName(e):[]},clone:ct,triggerHandler:function(t,e,n){var i,r,a=e.type||e,s=ft(t);(s=(s=s&&s.events)&&s[a])&&(i={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:d,type:a,target:t},e.type&&(i=u(i,e)),e=O(s),r=n?[i].concat(n):[i],o(e,function(e){i.isImmediatePropagationStopped()||e.apply(t,r)}))}},function(t,e){lt.prototype[e]=function(e,n,i){for(var r,o=0,a=this.length;a>o;o++)m(r)?(r=t(this[o],e,n,i),g(r)&&(r=yn(r))):bt(r,t(this[o],e,n,i));return g(r)?r:this},lt.prototype.bind=lt.prototype.on,lt.prototype.unbind=lt.prototype.off}),At.prototype={put:function(t,e){this[kt(t,this.nextUid)]=e},get:function(t){return this[kt(t,this.nextUid)]},remove:function(t){var e=this[t=kt(t,this.nextUid)];return delete this[t],e}};var oi=/^function\s*[^\(]*\(\s*([^\)]*)\)/m,ai=/,/,si=/^\s*(_?)(\S+?)\1\s*$/,li=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,ci=i("$injector");Pt.$$annotate=Ot;var ui=i("$animate"),hi=["$provide",function(t){this.$$selectors={},this.register=function(e,n){var i=e+"-animation";if(e&&"."!=e.charAt(0))throw ui("notcsel",e);this.$$selectors[e.substr(1)]=i,t.factory(i,n)},this.classNameFilter=function(t){return 1===arguments.length&&(this.$$classNameFilter=t instanceof RegExp?t:null),this.$$classNameFilter},this.$get=["$$q","$$asyncCallback","$rootScope",function(t,e,n){function i(e){var i,r=t.defer();return r.promise.$$cancelFn=function(){i&&i()},n.$$postDigest(function(){i=e(function(){r.resolve()})}),r.promise}function r(t,e){var n=[],i=[],r=nt();return o((t.attr("class")||"").split(/\s+/),function(t){r[t]=!0}),o(e,function(t,e){var o=r[e];!1===t&&o?i.push(e):!0!==t||o||n.push(e)}),0<n.length+i.length&&[n.length?n:null,i.length?i:null]}function a(t,e,n){for(var i=0,r=e.length;r>i;++i)t[e[i]]=n}function s(){return c||(c=t.defer(),e(function(){c.resolve(),c=null})),c.promise}function l(t,e){if(On.isObject(e)){var n=u(e.from||{},e.to||{});t.css(n)}}var c;return{animate:function(t,e,n){return l(t,{from:e,to:n}),s()},enter:function(t,e,n,i){return l(t,i),n?n.after(t):e.prepend(t),s()},leave:function(t,e){return t.remove(),s()},move:function(t,e,n,i){return this.enter(t,e,n,i)},addClass:function(t,e,n){return this.setClass(t,e,[],n)},$$addClassImmediately:function(t,e,n){return t=yn(t),e=b(e)?e:Dn(e)?e.join(" "):"",o(t,function(t){vt(t,e)}),l(t,n),s()},removeClass:function(t,e,n){return this.setClass(t,[],e,n)},$$removeClassImmediately:function(t,e,n){return t=yn(t),e=b(e)?e:Dn(e)?e.join(" "):"",o(t,function(t){gt(t,e)}),l(t,n),s()},setClass:function(t,e,n,o){var s=this,l=!1;t=yn(t);var c=t.data("$$animateClasses");return c?o&&c.options&&(c.options=On.extend(c.options||{},o)):(c={classes:{},options:o},l=!0),o=c.classes,e=Dn(e)?e:e.split(" "),n=Dn(n)?n:n.split(" "),a(o,e,!0),a(o,n,!1),l&&(c.promise=i(function(e){var n=t.data("$$animateClasses");if(t.removeData("$$animateClasses"),n){var i=r(t,n.classes);i&&s.$$setClassImmediately(t,i[0],i[1],n.options)}e()}),t.data("$$animateClasses",c)),c.promise},$$setClassImmediately:function(t,e,n,i){return e&&this.$$addClassImmediately(t,e),n&&this.$$removeClassImmediately(t,n),l(t,i),s()},enabled:d,cancel:d}}]}],di=i("$compile");Rt.$inject=["$provide","$$sanitizeUriProvider"];var fi=/^((?:x|data)[\:\-_])/i,pi="application/json",mi={"Content-Type":pi+";charset=utf-8"},gi=/^\[|^\{(?!\{)/,vi={"[":/]$/,"{":/}$/},bi=/^\)\]\}',?\n/,yi=i("$interpolate"),wi=/^([^\?#]*)(\?([^#]*))?(#(.*))?$/,xi={http:80,https:443,ftp:21},Ci=i("$location"),_i={$$html5:!1,$$replace:!1,absUrl:fe("$$absUrl"),url:function(t){if(m(t))return this.$$url;var e=wi.exec(t);return(e[1]||""===t)&&this.path(decodeURIComponent(e[1])),(e[2]||e[1]||""===t)&&this.search(e[3]||""),this.hash(e[5]||""),this},protocol:fe("$$protocol"),host:fe("$$host"),port:fe("$$port"),path:pe("$$path",function(t){return t=null!==t?t.toString():"","/"==t.charAt(0)?t:"/"+t}),search:function(t,e){switch(arguments.length){case 0:return this.$$search;case 1:if(b(t)||y(t))t=t.toString(),this.$$search=H(t);else{if(!v(t))throw Ci("isrcharg");t=M(t,{}),o(t,function(e,n){null==e&&delete t[n]}),this.$$search=t}break;default:m(e)||null===e?delete this.$$search[t]:this.$$search[t]=e}return this.$$compose(),this},hash:pe("$$hash",function(t){return null!==t?t.toString():""}),replace:function(){return this.$$replace=!0,this}};o([de,he,ue],function(t){t.prototype=Object.create(_i),t.prototype.state=function(e){if(!arguments.length)return this.$$state;if(t!==ue||!this.$$html5)throw Ci("nostate");return this.$$state=m(e)?null:e,this}});var $i=i("$parse"),Si=Function.prototype.call,Ei=Function.prototype.apply,Ti=Function.prototype.bind,ki=nt();o({"null":function(){return null},"true":function(){return!0},"false":function(){return!1},undefined:function(){}},function(t,e){t.constant=t.literal=t.sharedGetter=!0,ki[e]=t}),ki["this"]=function(t){return t},ki["this"].sharedGetter=!0;var Ai=u(nt(),{"+":function(t,e,i,r){return i=i(t,e),r=r(t,e),g(i)?g(r)?i+r:i:g(r)?r:n},"-":function(t,e,n,i){return n=n(t,e),i=i(t,e),(g(n)?n:0)-(g(i)?i:0)},"*":function(t,e,n,i){return n(t,e)*i(t,e)},"/":function(t,e,n,i){return n(t,e)/i(t,e)},"%":function(t,e,n,i){return n(t,e)%i(t,e)},"===":function(t,e,n,i){return n(t,e)===i(t,e)},"!==":function(t,e,n,i){return n(t,e)!==i(t,e)},"==":function(t,e,n,i){return n(t,e)==i(t,e)},"!=":function(t,e,n,i){return n(t,e)!=i(t,e)},"<":function(t,e,n,i){return n(t,e)<i(t,e)},">":function(t,e,n,i){return n(t,e)>i(t,e)},"<=":function(t,e,n,i){return n(t,e)<=i(t,e)},">=":function(t,e,n,i){return n(t,e)>=i(t,e)},"&&":function(t,e,n,i){return n(t,e)&&i(t,e)},"||":function(t,e,n,i){return n(t,e)||i(t,e)},"!":function(t,e,n){return!n(t,e)},"=":!0,"|":!0}),Mi={n:"\n",f:"\f",r:"\r",t:"	",v:"","'":"'",'"':'"'},Oi=function(t){this.options=t};Oi.prototype={constructor:Oi,lex:function(t){for(this.text=t,this.index=0,this.tokens=[];this.index<this.text.length;)if(t=this.text.charAt(this.index),'"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdent(t))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var e=t+this.peek(),n=e+this.peek(2),i=Ai[e],r=Ai[n];Ai[t]||i||r?(t=r?n:i?e:t,this.tokens.push({index:this.index,text:t,operator:!0}),this.index+=t.length):this.throwError("Unexpected next character ",this.index,this.index+1)}return this.tokens},is:function(t,e){return-1!==e.indexOf(t)},peek:function(t){return t=t||1,this.index+t<this.text.length?this.text.charAt(this.index+t):!1},isNumber:function(t){return t>="0"&&"9">=t&&"string"==typeof t},isWhitespace:function(t){return" "===t||"\r"===t||"	"===t||"\n"===t||""===t||" "===t},isIdent:function(t){return t>="a"&&"z">=t||t>="A"&&"Z">=t||"_"===t||"$"===t},isExpOperator:function(t){return"-"===t||"+"===t||this.isNumber(t)},throwError:function(t,e,n){throw n=n||this.index,e=g(e)?"s "+e+"-"+this.index+" ["+this.text.substring(e,n)+"]":" "+n,$i("lexerr",t,e,this.text)},readNumber:function(){for(var t="",e=this.index;this.index<this.text.length;){var n=_n(this.text.charAt(this.index));if("."==n||this.isNumber(n))t+=n;else{var i=this.peek();if("e"==n&&this.isExpOperator(i))t+=n;else if(this.isExpOperator(n)&&i&&this.isNumber(i)&&"e"==t.charAt(t.length-1))t+=n;else{if(!this.isExpOperator(n)||i&&this.isNumber(i)||"e"!=t.charAt(t.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:e,text:t,constant:!0,value:Number(t)})},readIdent:function(){for(var t=this.index;this.index<this.text.length;){var e=this.text.charAt(this.index);if(!this.isIdent(e)&&!this.isNumber(e))break;this.index++}this.tokens.push({index:t,text:this.text.slice(t,this.index),identifier:!0})},readString:function(t){var e=this.index;this.index++;for(var n="",i=t,r=!1;this.index<this.text.length;){var o=this.text.charAt(this.index),i=i+o;if(r)"u"===o?(r=this.text.substring(this.index+1,this.index+5),r.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+r+"]"),this.index+=4,n+=String.fromCharCode(parseInt(r,16))):n+=Mi[o]||o,r=!1;else if("\\"===o)r=!0;else{if(o===t)return this.index++,void this.tokens.push({index:e,text:i,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",e)}};var Pi=function(t,e,n){this.lexer=t,this.$filter=e,this.options=n};Pi.ZERO=u(function(){return 0},{sharedGetter:!0,constant:!0}),Pi.prototype={constructor:Pi,parse:function(t){return this.text=t,this.tokens=this.lexer.lex(t),t=this.statements(),0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t.literal=!!t.literal,t.constant=!!t.constant,t},primary:function(){var t;this.expect("(")?(t=this.filterChain(),this.consume(")")):this.expect("[")?t=this.arrayDeclaration():this.expect("{")?t=this.object():this.peek().identifier&&this.peek().text in ki?t=ki[this.consume().text]:this.peek().identifier?t=this.identifier():this.peek().constant?t=this.constant():this.throwError("not a primary expression",this.peek());for(var e,n;e=this.expect("(","[",".");)"("===e.text?(t=this.functionCall(t,n),n=null):"["===e.text?(n=t,t=this.objectIndex(t)):"."===e.text?(n=t,t=this.fieldAccess(t)):this.throwError("IMPOSSIBLE");return t},throwError:function(t,e){throw $i("syntax",e.text,t,e.index+1,this.text,this.text.substring(e.index))},peekToken:function(){if(0===this.tokens.length)throw $i("ueoe",this.text);return this.tokens[0]},peek:function(t,e,n,i){return this.peekAhead(0,t,e,n,i)},peekAhead:function(t,e,n,i,r){if(this.tokens.length>t){t=this.tokens[t];var o=t.text;if(o===e||o===n||o===i||o===r||!(e||n||i||r))return t}return!1},expect:function(t,e,n,i){return(t=this.peek(t,e,n,i))?(this.tokens.shift(),t):!1},consume:function(t){if(0===this.tokens.length)throw $i("ueoe",this.text);var e=this.expect(t);return e||this.throwError("is unexpected, expecting ["+t+"]",this.peek()),e},unaryFn:function(t,e){var n=Ai[t];return u(function(t,i){return n(t,i,e)},{constant:e.constant,inputs:[e]})},binaryFn:function(t,e,n,i){var r=Ai[e];return u(function(e,i){return r(e,i,t,n)},{constant:t.constant&&n.constant,inputs:!i&&[t,n]})},identifier:function(){for(var t=this.consume().text;this.peek(".")&&this.peekAhead(1).identifier&&!this.peekAhead(2,"(");)t+=this.consume().text+this.consume().text;return $e(t,this.options,this.text)},constant:function(){var t=this.consume().value;return u(function(){return t},{constant:!0,literal:!0})},statements:function(){for(var t=[];;)if(0<this.tokens.length&&!this.peek("}",")",";","]")&&t.push(this.filterChain()),!this.expect(";"))return 1===t.length?t[0]:function(e,n){for(var i,r=0,o=t.length;o>r;r++)i=t[r](e,n);return i}},filterChain:function(){for(var t=this.expression();this.expect("|");)t=this.filter(t);return t},filter:function(t){var e,i,r=this.$filter(this.consume().text);if(this.peek(":"))for(e=[],i=[];this.expect(":");)e.push(this.expression());var o=[t].concat(e||[]);return u(function(o,a){var s=t(o,a);if(i){for(i[0]=s,s=e.length;s--;)i[s+1]=e[s](o,a);return r.apply(n,i)}return r(s)},{constant:!r.$stateful&&o.every(ye),inputs:!r.$stateful&&o})},expression:function(){return this.assignment()},assignment:function(){var t,e,n=this.ternary();return(e=this.expect("="))?(n.assign||this.throwError("implies assignment but ["+this.text.substring(0,e.index)+"] can not be assigned to",e),t=this.ternary(),u(function(e,i){return n.assign(e,t(e,i),i)},{inputs:[n,t]})):n},ternary:function(){var t,e=this.logicalOR();if(this.expect("?")&&(t=this.assignment(),this.consume(":"))){var n=this.assignment();return u(function(i,r){return e(i,r)?t(i,r):n(i,r)},{constant:e.constant&&t.constant&&n.constant})}return e},logicalOR:function(){for(var t,e=this.logicalAND();t=this.expect("||");)e=this.binaryFn(e,t.text,this.logicalAND(),!0);return e},logicalAND:function(){for(var t,e=this.equality();t=this.expect("&&");)e=this.binaryFn(e,t.text,this.equality(),!0);return e},equality:function(){for(var t,e=this.relational();t=this.expect("==","!=","===","!==");)e=this.binaryFn(e,t.text,this.relational());return e},relational:function(){for(var t,e=this.additive();t=this.expect("<",">","<=",">=");)e=this.binaryFn(e,t.text,this.additive());return e},additive:function(){for(var t,e=this.multiplicative();t=this.expect("+","-");)e=this.binaryFn(e,t.text,this.multiplicative());return e},multiplicative:function(){for(var t,e=this.unary();t=this.expect("*","/","%");)e=this.binaryFn(e,t.text,this.unary());return e},unary:function(){var t;return this.expect("+")?this.primary():(t=this.expect("-"))?this.binaryFn(Pi.ZERO,t.text,this.unary()):(t=this.expect("!"))?this.unaryFn(t.text,this.unary()):this.primary()},fieldAccess:function(t){var e=this.identifier();return u(function(i,r,o){return i=o||t(i,r),null==i?n:e(i)},{assign:function(n,i,r){var o=t(n,r);return o||t.assign(n,o={},r),e.assign(o,i)}})},objectIndex:function(t){var e=this.text,i=this.expression();return this.consume("]"),u(function(r,o){var a=t(r,o),s=i(r,o);return ve(s,e),a?be(a[s],e):n},{assign:function(n,r,o){var a=ve(i(n,o),e),s=be(t(n,o),e);return s||t.assign(n,s={},o),s[a]=r}})},functionCall:function(t,e){var i=[];if(")"!==this.peekToken().text)do i.push(this.expression());while(this.expect(","));this.consume(")");var r=this.text,o=i.length?[]:null;return function(a,s){var l=e?e(a,s):g(e)?n:a,c=t(a,s,l)||d;if(o)for(var u=i.length;u--;)o[u]=be(i[u](a,s),r);if(be(l,r),c){if(c.constructor===c)throw $i("isecfn",r);if(c===Si||c===Ei||c===Ti)throw $i("isecff",r)}return l=c.apply?c.apply(l,o):c(o[0],o[1],o[2],o[3],o[4]),be(l,r)}},arrayDeclaration:function(){var t=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;t.push(this.expression())}while(this.expect(","));return this.consume("]"),u(function(e,n){for(var i=[],r=0,o=t.length;o>r;r++)i.push(t[r](e,n));return i},{literal:!0,constant:t.every(ye),inputs:t})},object:function(){var t=[],e=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;var n=this.consume();n.constant?t.push(n.value):n.identifier?t.push(n.text):this.throwError("invalid key",n),this.consume(":"),e.push(this.expression())}while(this.expect(","));return this.consume("}"),u(function(n,i){for(var r={},o=0,a=e.length;a>o;o++)r[t[o]]=e[o](n,i);return r},{literal:!0,constant:e.every(ye),inputs:e})}};var Ii=nt(),Di=nt(),Ni=Object.prototype.valueOf,Li=i("$sce"),Fi={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},di=i("$compile"),ji=e.createElement("a"),Ri=Be(t.location.href);Ue.$inject=["$provide"],Xe.$inject=["$locale"],Ge.$inject=["$locale"];var Hi=".",Bi={yyyy:Je("FullYear",4),yy:Je("FullYear",2,0,!0),y:Je("FullYear",1),MMMM:Qe("Month"),MMM:Qe("Month",!0),MM:Je("Month",2,1),M:Je("Month",1,1),dd:Je("Date",2),d:Je("Date",1),HH:Je("Hours",2),H:Je("Hours",1),hh:Je("Hours",2,-12),h:Je("Hours",1,-12),mm:Je("Minutes",2),m:Je("Minutes",1),ss:Je("Seconds",2),s:Je("Seconds",1),sss:Je("Milliseconds",3),EEEE:Qe("Day"),EEE:Qe("Day",!0),a:function(t,e){return 12>t.getHours()?e.AMPMS[0]:e.AMPMS[1]},Z:function(t){return t=-1*t.getTimezoneOffset(),t=(t>=0?"+":"")+(Ze(Math[t>0?"floor":"ceil"](t/60),2)+Ze(Math.abs(t%60),2))},ww:en(2),w:en(1)},Wi=/((?:[^yMdHhmsaZEw']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|d+|H+|h+|m+|s+|a|Z|w+))(.*)/,zi=/^\-?\d+$/;nn.$inject=["$locale"];var Ui=p(_n),Yi=p(Sn);an.$inject=["$parse"];var qi=p({restrict:"E",compile:function(t,e){return e.href||e.xlinkHref||e.name?void 0:function(t,e){var n="[object SVGAnimatedString]"===An.call(e.prop("href"))?"xlink:href":"href";e.on("click",function(t){e.attr(n)||t.preventDefault()})}}}),Vi={};o(ni,function(t,e){if("multiple"!=t){var n=Ht("ng-"+e);Vi[n]=function(){return{restrict:"A",priority:100,link:function(t,i,r){t.$watch(r[n],function(t){r.$set(e,!!t)})}}}}}),o(ri,function(t,e){Vi[e]=function(){return{priority:100,link:function(t,n,i){return"ngPattern"===e&&"/"==i.ngPattern.charAt(0)&&(n=i.ngPattern.match(Cn))?void i.$set("ngPattern",new RegExp(n[1],n[2])):void t.$watch(i[e],function(t){i.$set(e,t)})}}}}),o(["src","srcset","href"],function(t){var e=Ht("ng-"+t);Vi[e]=function(){return{priority:99,link:function(n,i,r){var o=t,a=t;"href"===t&&"[object SVGAnimatedString]"===An.call(i.prop("href"))&&(a="xlinkHref",r.$attr[a]="xlink:href",o=null),r.$observe(e,function(e){e?(r.$set(a,e),bn&&o&&i.prop(o,r[a])):"href"===t&&r.$set(a,null)})}}}});var Xi={$addControl:d,$$renameControl:function(t,e){t.$name=e},$removeControl:d,$setValidity:d,$setDirty:d,$setPristine:d,$setSubmitted:d};ln.$inject=["$element","$attrs","$scope","$animate","$interpolate"];var Gi=function(t){return["$timeout",function(e){return{name:"form",restrict:t?"EAC":"E",controller:ln,compile:function(t){return t.addClass(Ar).addClass(Tr),{pre:function(t,i,r,o){if(!("action"in r)){var a=function(e){t.$apply(function(){o.$commitViewValue(),o.$setSubmitted();

}),e.preventDefault()};i[0].addEventListener("submit",a,!1),i.on("$destroy",function(){e(function(){i[0].removeEventListener("submit",a,!1)},0,!1)})}var s=o.$$parentForm,l=o.$name;l&&(we(t,null,l,o,l),r.$observe(r.name?"name":"ngForm",function(e){l!==e&&(we(t,null,l,n,l),l=e,we(t,null,l,o,l),s.$$renameControl(o,l))})),i.on("$destroy",function(){s.$removeControl(o),l&&we(t,null,l,n,l),u(o,Xi)})}}}}}]},Ki=Gi(),Zi=Gi(!0),Ji=/\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z)/,Qi=/^(ftp|http|https):\/\/(\w+:{0,1}\w*@)?(\S+)(:[0-9]+)?(\/|\/([\w#!:.?+=&%@!\-\/]))?$/,tr=/^[a-z0-9!#$%&'*+\/=?^_`{|}~.-]+@[a-z0-9]([a-z0-9-]*[a-z0-9])?(\.[a-z0-9]([a-z0-9-]*[a-z0-9])?)*$/i,er=/^\s*(\-|\+)?(\d+|(\d*(\.\d*)))\s*$/,nr=/^(\d{4})-(\d{2})-(\d{2})$/,ir=/^(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,rr=/^(\d{4})-W(\d\d)$/,or=/^(\d{4})-(\d\d)$/,ar=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,sr={text:function(t,e,n,i,r,o){un(t,e,n,i,r,o),cn(i)},date:dn("date",nr,hn(nr,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":dn("datetimelocal",ir,hn(ir,"yyyy MM dd HH mm ss sss".split(" ")),"yyyy-MM-ddTHH:mm:ss.sss"),time:dn("time",ar,hn(ar,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:dn("week",rr,function(t,e){if(w(t))return t;if(b(t)){rr.lastIndex=0;var n=rr.exec(t);if(n){var i=+n[1],r=+n[2],o=n=0,a=0,s=0,l=tn(i),r=7*(r-1);return e&&(n=e.getHours(),o=e.getMinutes(),a=e.getSeconds(),s=e.getMilliseconds()),new Date(i,0,l.getDate()+r,n,o,a,s)}}return 0/0},"yyyy-Www"),month:dn("month",or,hn(or,["yyyy","MM"]),"yyyy-MM"),number:function(t,e,i,r,o,a){if(fn(t,e,i,r),un(t,e,i,r,o,a),r.$$parserName="number",r.$parsers.push(function(t){return r.$isEmpty(t)?null:er.test(t)?parseFloat(t):n}),r.$formatters.push(function(t){if(!r.$isEmpty(t)){if(!y(t))throw Pr("numfmt",t);t=t.toString()}return t}),i.min||i.ngMin){var s;r.$validators.min=function(t){return r.$isEmpty(t)||m(s)||t>=s},i.$observe("min",function(t){g(t)&&!y(t)&&(t=parseFloat(t,10)),s=y(t)&&!isNaN(t)?t:n,r.$validate()})}if(i.max||i.ngMax){var l;r.$validators.max=function(t){return r.$isEmpty(t)||m(l)||l>=t},i.$observe("max",function(t){g(t)&&!y(t)&&(t=parseFloat(t,10)),l=y(t)&&!isNaN(t)?t:n,r.$validate()})}},url:function(t,e,n,i,r,o){un(t,e,n,i,r,o),cn(i),i.$$parserName="url",i.$validators.url=function(t,e){var n=t||e;return i.$isEmpty(n)||Qi.test(n)}},email:function(t,e,n,i,r,o){un(t,e,n,i,r,o),cn(i),i.$$parserName="email",i.$validators.email=function(t,e){var n=t||e;return i.$isEmpty(n)||tr.test(n)}},radio:function(t,e,n,i){m(n.name)&&e.attr("name",++Pn),e.on("click",function(t){e[0].checked&&i.$setViewValue(n.value,t&&t.type)}),i.$render=function(){e[0].checked=n.value==i.$viewValue},n.$observe("value",i.$render)},checkbox:function(t,e,n,i,r,o,a,s){var l=pn(s,t,"ngTrueValue",n.ngTrueValue,!0),c=pn(s,t,"ngFalseValue",n.ngFalseValue,!1);e.on("click",function(t){i.$setViewValue(e[0].checked,t&&t.type)}),i.$render=function(){e[0].checked=i.$viewValue},i.$isEmpty=function(t){return!1===t},i.$formatters.push(function(t){return P(t,l)}),i.$parsers.push(function(t){return t?l:c})},hidden:d,button:d,submit:d,reset:d,file:d},lr=["$browser","$sniffer","$filter","$parse",function(t,e,n,i){return{restrict:"E",require:["?ngModel"],link:{pre:function(r,o,a,s){s[0]&&(sr[_n(a.type)]||sr.text)(r,o,a,s[0],e,t,n,i)}}}}],cr=/^(true|false|\d+)$/,ur=function(){return{restrict:"A",priority:100,compile:function(t,e){return cr.test(e.ngValue)?function(t,e,n){n.$set("value",t.$eval(n.ngValue))}:function(t,e,n){t.$watch(n.ngValue,function(t){n.$set("value",t)})}}}},hr=["$compile",function(t){return{restrict:"AC",compile:function(e){return t.$$addBindingClass(e),function(e,i,r){t.$$addBindingInfo(i,r.ngBind),i=i[0],e.$watch(r.ngBind,function(t){i.textContent=t===n?"":t})}}}}],dr=["$interpolate","$compile",function(t,e){return{compile:function(i){return e.$$addBindingClass(i),function(i,r,o){i=t(r.attr(o.$attr.ngBindTemplate)),e.$$addBindingInfo(r,i.expressions),r=r[0],o.$observe("ngBindTemplate",function(t){r.textContent=t===n?"":t})}}}}],fr=["$sce","$parse","$compile",function(t,e,n){return{restrict:"A",compile:function(i,r){var o=e(r.ngBindHtml),a=e(r.ngBindHtml,function(t){return(t||"").toString()});return n.$$addBindingClass(i),function(e,i,r){n.$$addBindingInfo(i,r.ngBindHtml),e.$watch(a,function(){i.html(t.getTrustedHtml(o(e))||"")})}}}}],pr=p({restrict:"A",require:"ngModel",link:function(t,e,n,i){i.$viewChangeListeners.push(function(){t.$eval(n.ngChange)})}}),mr=mn("",!0),gr=mn("Odd",0),vr=mn("Even",1),br=sn({compile:function(t,e){e.$set("ngCloak",n),t.removeClass("ng-cloak")}}),yr=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],wr={},xr={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(t){var e=Ht("ng-"+t);wr[e]=["$parse","$rootScope",function(n,i){return{restrict:"A",compile:function(r,o){var a=n(o[e],null,!0);return function(e,n){n.on(t,function(n){var r=function(){a(e,{$event:n})};xr[t]&&i.$$phase?e.$evalAsync(r):e.$apply(r)})}}}}]});var Cr=["$animate",function(t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,i,r,o,a){var s,l,c;n.$watch(r.ngIf,function(n){n?l||a(function(n,o){l=o,n[n.length++]=e.createComment(" end ngIf: "+r.ngIf+" "),s={clone:n},t.enter(n,i.parent(),i)}):(c&&(c.remove(),c=null),l&&(l.$destroy(),l=null),s&&(c=et(s.clone),t.leave(c).then(function(){c=null}),s=null))})}}}],_r=["$templateRequest","$anchorScroll","$animate","$sce",function(t,e,n,i){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:On.noop,compile:function(r,o){var a=o.ngInclude||o.src,s=o.onload||"",l=o.autoscroll;return function(r,o,c,u,h){var d,f,p,m=0,v=function(){f&&(f.remove(),f=null),d&&(d.$destroy(),d=null),p&&(n.leave(p).then(function(){f=null}),f=p,p=null)};r.$watch(i.parseAsResourceUrl(a),function(i){var a=function(){!g(l)||l&&!r.$eval(l)||e()},c=++m;i?(t(i,!0).then(function(t){if(c===m){var e=r.$new();u.template=t,t=h(e,function(t){v(),n.enter(t,null,o).then(a)}),d=e,p=t,d.$emit("$includeContentLoaded",i),r.$eval(s)}},function(){c===m&&(v(),r.$emit("$includeContentError",i))}),r.$emit("$includeContentRequested",i)):(v(),u.template=null)})}}}}],$r=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,i,r,o){/SVG/.test(i[0].toString())?(i.empty(),t(st(o.template,e).childNodes)(n,function(t){i.append(t)},{futureParentElement:i})):(i.html(o.template),t(i.contents())(n))}}}],Sr=sn({priority:450,compile:function(){return{pre:function(t,e,n){t.$eval(n.ngInit)}}}}),Er=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(t,e,i,r){var a=e.attr(i.$attr.ngList)||", ",s="false"!==i.ngTrim,l=s?Nn(a):a;r.$parsers.push(function(t){if(!m(t)){var e=[];return t&&o(t.split(l),function(t){t&&e.push(s?Nn(t):t)}),e}}),r.$formatters.push(function(t){return Dn(t)?t.join(a):n}),r.$isEmpty=function(t){return!t||!t.length}}}},Tr="ng-valid",kr="ng-invalid",Ar="ng-pristine",Mr="ng-dirty",Or="ng-pending",Pr=new i("ngModel"),Ir=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$rootScope","$q","$interpolate",function(t,e,i,r,a,s,l,c,u,h){this.$modelValue=this.$viewValue=Number.NaN,this.$$rawModelValue=n,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=n,this.$name=h(i.name||"",!1)(t);var f=a(i.ngModel),p=f.assign,v=f,b=p,w=null,C=this;this.$$setOptions=function(t){if((C.$options=t)&&t.getterSetter){var e=a(i.ngModel+"()"),n=a(i.ngModel+"($$$p)");v=function(t){var n=f(t);return x(n)&&(n=e(t)),n},b=function(t,e){x(f(t))?n(t,{$$$p:C.$modelValue}):p(t,C.$modelValue)}}else if(!f.assign)throw Pr("nonassign",i.ngModel,j(r))},this.$render=d,this.$isEmpty=function(t){return m(t)||""===t||null===t||t!==t};var _=r.inheritedData("$formController")||Xi,$=0;gn({ctrl:this,$element:r,set:function(t,e){t[e]=!0},unset:function(t,e){delete t[e]},parentForm:_,$animate:s}),this.$setPristine=function(){C.$dirty=!1,C.$pristine=!0,s.removeClass(r,Mr),s.addClass(r,Ar)},this.$setDirty=function(){C.$dirty=!0,C.$pristine=!1,s.removeClass(r,Ar),s.addClass(r,Mr),_.$setDirty()},this.$setUntouched=function(){C.$touched=!1,C.$untouched=!0,s.setClass(r,"ng-untouched","ng-touched")},this.$setTouched=function(){C.$touched=!0,C.$untouched=!1,s.setClass(r,"ng-touched","ng-untouched")},this.$rollbackViewValue=function(){l.cancel(w),C.$viewValue=C.$$lastCommittedViewValue,C.$render()},this.$validate=function(){if(!y(C.$modelValue)||!isNaN(C.$modelValue)){var t=C.$$rawModelValue,e=C.$valid,i=C.$modelValue,r=C.$options&&C.$options.allowInvalid;C.$$runValidators(C.$error[C.$$parserName||"parse"]?!1:n,t,C.$$lastCommittedViewValue,function(o){r||e===o||(C.$modelValue=o?t:n,C.$modelValue!==i&&C.$$writeModelToScope())})}},this.$$runValidators=function(t,e,i,r){function a(){var t=!0;return o(C.$validators,function(n,r){var o=n(e,i);t=t&&o,l(r,o)}),t?!0:(o(C.$asyncValidators,function(t,e){l(e,null)}),!1)}function s(){var t=[],r=!0;o(C.$asyncValidators,function(o,a){var s=o(e,i);if(!s||!x(s.then))throw Pr("$asyncValidators",s);l(a,n),t.push(s.then(function(){l(a,!0)},function(t){r=!1,l(a,!1)}))}),t.length?u.all(t).then(function(){c(r)},d):c(!0)}function l(t,e){h===$&&C.$setValidity(t,e)}function c(t){h===$&&r(t)}$++;var h=$;(function(t){var e=C.$$parserName||"parse";if(t===n)l(e,null);else if(l(e,t),!t)return o(C.$validators,function(t,e){l(e,null)}),o(C.$asyncValidators,function(t,e){l(e,null)}),!1;return!0})(t)&&a()?s():c(!1)},this.$commitViewValue=function(){var t=C.$viewValue;l.cancel(w),(C.$$lastCommittedViewValue!==t||""===t&&C.$$hasNativeValidators)&&(C.$$lastCommittedViewValue=t,C.$pristine&&this.$setDirty(),this.$$parseAndValidate())},this.$$parseAndValidate=function(){var e=C.$$lastCommittedViewValue,i=m(e)?n:!0;if(i)for(var r=0;r<C.$parsers.length;r++)if(e=C.$parsers[r](e),m(e)){i=!1;break}y(C.$modelValue)&&isNaN(C.$modelValue)&&(C.$modelValue=v(t));var o=C.$modelValue,a=C.$options&&C.$options.allowInvalid;C.$$rawModelValue=e,a&&(C.$modelValue=e,C.$modelValue!==o&&C.$$writeModelToScope()),C.$$runValidators(i,e,C.$$lastCommittedViewValue,function(t){a||(C.$modelValue=t?e:n,C.$modelValue!==o&&C.$$writeModelToScope())})},this.$$writeModelToScope=function(){b(t,C.$modelValue),o(C.$viewChangeListeners,function(t){try{t()}catch(n){e(n)}})},this.$setViewValue=function(t,e){C.$viewValue=t,C.$options&&!C.$options.updateOnDefault||C.$$debounceViewValueCommit(e)},this.$$debounceViewValueCommit=function(e){var n=0,i=C.$options;i&&g(i.debounce)&&(i=i.debounce,y(i)?n=i:y(i[e])?n=i[e]:y(i["default"])&&(n=i["default"])),l.cancel(w),n?w=l(function(){C.$commitViewValue()},n):c.$$phase?C.$commitViewValue():t.$apply(function(){C.$commitViewValue()})},t.$watch(function(){var e=v(t);if(e!==C.$modelValue){C.$modelValue=C.$$rawModelValue=e;for(var i=C.$formatters,r=i.length,o=e;r--;)o=i[r](o);C.$viewValue!==o&&(C.$viewValue=C.$$lastCommittedViewValue=o,C.$render(),C.$$runValidators(n,e,o,d))}return e})}],Dr=["$rootScope",function(t){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ir,priority:1,compile:function(e){return e.addClass(Ar).addClass("ng-untouched").addClass(Tr),{pre:function(t,e,n,i){var r=i[0],o=i[1]||Xi;r.$$setOptions(i[2]&&i[2].$options),o.$addControl(r),n.$observe("name",function(t){r.$name!==t&&o.$$renameControl(r,t)}),t.$on("$destroy",function(){o.$removeControl(r)})},post:function(e,n,i,r){var o=r[0];o.$options&&o.$options.updateOn&&n.on(o.$options.updateOn,function(t){o.$$debounceViewValueCommit(t&&t.type)}),n.on("blur",function(n){o.$touched||(t.$$phase?e.$evalAsync(o.$setTouched):e.$apply(o.$setTouched))})}}}}}],Nr=/(\s+|^)default(\s+|$)/,Lr=function(){return{restrict:"A",controller:["$scope","$attrs",function(t,e){var i=this;this.$options=t.$eval(e.ngModelOptions),this.$options.updateOn!==n?(this.$options.updateOnDefault=!1,this.$options.updateOn=Nn(this.$options.updateOn.replace(Nr,function(){return i.$options.updateOnDefault=!0," "}))):this.$options.updateOnDefault=!0}]}},Fr=sn({terminal:!0,priority:1e3}),jr=["$locale","$interpolate",function(t,e){var n=/{}/g,i=/^when(Minus)?(.+)$/;return{restrict:"EA",link:function(r,a,s){function l(t){a.text(t||"")}var c,u=s.count,h=s.$attr.when&&a.attr(s.$attr.when),d=s.offset||0,f=r.$eval(h)||{},p={},h=e.startSymbol(),m=e.endSymbol(),g=h+u+"-"+d+m,v=On.noop;o(s,function(t,e){var n=i.exec(e);n&&(n=(n[1]?"-":"")+_n(n[2]),f[n]=a.attr(s.$attr[e]))}),o(f,function(t,i){p[i]=e(t.replace(n,g))}),r.$watch(u,function(e){e=parseFloat(e);var n=isNaN(e);n||e in f||(e=t.pluralCat(e-d)),e===c||n&&isNaN(c)||(v(),v=r.$watch(p[e],l),c=e)})}}}],Rr=["$parse","$animate",function(t,a){var s=i("ngRepeat"),l=function(t,e,n,i,r,o,a){t[n]=i,r&&(t[r]=o),t.$index=e,t.$first=0===e,t.$last=e===a-1,t.$middle=!(t.$first||t.$last),t.$odd=!(t.$even=0===(1&e))};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(i,c){var u=c.ngRepeat,h=e.createComment(" end ngRepeat: "+u+" "),d=u.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!d)throw s("iexp",u);var f=d[1],p=d[2],m=d[3],g=d[4],d=f.match(/^(?:(\s*[\$\w]+)|\(\s*([\$\w]+)\s*,\s*([\$\w]+)\s*\))$/);if(!d)throw s("iidexp",f);var v=d[3]||d[1],b=d[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent)$/.test(m)))throw s("badident",m);var y,w,x,C,_={$id:kt};return g?y=t(g):(x=function(t,e){return kt(e)},C=function(t){return t}),function(t,e,i,c,d){y&&(w=function(e,n,i){return b&&(_[b]=e),_[v]=n,_.$index=i,y(t,_)});var f=nt();t.$watchCollection(p,function(i){var c,p,g,y,_,$,S,E,T,k,A=e[0],M=nt();if(m&&(t[m]=i),r(i))E=i,p=w||x;else{p=w||C,E=[];for(k in i)i.hasOwnProperty(k)&&"$"!=k.charAt(0)&&E.push(k);E.sort()}for(y=E.length,k=Array(y),c=0;y>c;c++)if(_=i===E?c:E[c],$=i[_],S=p(_,$,c),f[S])T=f[S],delete f[S],M[S]=T,k[c]=T;else{if(M[S])throw o(k,function(t){t&&t.scope&&(f[t.id]=t)}),s("dupes",u,S,$);k[c]={id:S,scope:n,clone:n},M[S]=!0}for(g in f){if(T=f[g],S=et(T.clone),a.leave(S),S[0].parentNode)for(c=0,p=S.length;p>c;c++)S[c].$$NG_REMOVED=!0;T.scope.$destroy()}for(c=0;y>c;c++)if(_=i===E?c:E[c],$=i[_],T=k[c],T.scope){g=A;do g=g.nextSibling;while(g&&g.$$NG_REMOVED);T.clone[0]!=g&&a.move(et(T.clone),null,yn(A)),A=T.clone[T.clone.length-1],l(T.scope,c,v,$,b,_,y)}else d(function(t,e){T.scope=e;var n=h.cloneNode(!1);t[t.length++]=n,a.enter(t,null,yn(A)),A=n,T.clone=t,M[T.id]=T,l(T.scope,c,v,$,b,_,y)});f=M})}}}}],Hr=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngShow,function(e){t[e?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Br=["$animate",function(t){return{restrict:"A",multiElement:!0,link:function(e,n,i){e.$watch(i.ngHide,function(e){t[e?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Wr=sn(function(t,e,n){t.$watchCollection(n.ngStyle,function(t,n){n&&t!==n&&o(n,function(t,n){e.css(n,"")}),t&&e.css(t)})}),zr=["$animate",function(t){return{restrict:"EA",require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,i,r,a){var s=[],l=[],c=[],u=[],h=function(t,e){return function(){t.splice(e,1)}};n.$watch(r.ngSwitch||r.on,function(n){var i,r;for(i=0,r=c.length;r>i;++i)t.cancel(c[i]);for(i=c.length=0,r=u.length;r>i;++i){var d=et(l[i].clone);u[i].$destroy(),(c[i]=t.leave(d)).then(h(c,i))}l.length=0,u.length=0,(s=a.cases["!"+n]||a.cases["?"])&&o(s,function(n){n.transclude(function(i,r){u.push(r);var o=n.element;i[i.length++]=e.createComment(" end ngSwitchWhen: "),l.push({clone:i}),t.enter(i,o.parent(),o)})})})}}}],Ur=sn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["!"+n.ngSwitchWhen]=i.cases["!"+n.ngSwitchWhen]||[],i.cases["!"+n.ngSwitchWhen].push({transclude:r,element:e})}}),Yr=sn({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(t,e,n,i,r){i.cases["?"]=i.cases["?"]||[],i.cases["?"].push({transclude:r,element:e})}}),qr=sn({restrict:"EAC",link:function(t,e,n,r,o){if(!o)throw i("ngTransclude")("orphan",j(e));o(function(t){e.empty(),e.append(t)})}}),Vr=["$templateCache",function(t){return{restrict:"E",terminal:!0,compile:function(e,n){"text/ng-template"==n.type&&t.put(n.id,e[0].text)}}}],Xr=i("ngOptions"),Gr=p({restrict:"A",terminal:!0}),Kr=["$compile","$parse",function(t,i){var r=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,a={$setViewValue:d};return{restrict:"E",require:["select","?ngModel"],controller:["$element","$scope","$attrs",function(t,e,n){var i,r=this,o={},s=a;r.databound=n.ngModel,r.init=function(t,e,n){s=t,i=n},r.addOption=function(e,n){Q(e,'"option value"'),o[e]=!0,s.$viewValue==e&&(t.val(e),i.parent()&&i.remove()),n&&n[0].hasAttribute("selected")&&(n[0].selected=!0)},r.removeOption=function(t){this.hasOption(t)&&(delete o[t],s.$viewValue===t&&this.renderUnknownOption(t))},r.renderUnknownOption=function(e){e="? "+kt(e)+" ?",i.val(e),t.prepend(i),t.val(e),i.prop("selected",!0)},r.hasOption=function(t){return o.hasOwnProperty(t)},e.$on("$destroy",function(){r.renderUnknownOption=d})}],link:function(a,s,l,c){function u(t,e,n,i){n.$render=function(){var t=n.$viewValue;i.hasOption(t)?(_.parent()&&_.remove(),e.val(t),""===t&&p.prop("selected",!0)):m(t)&&p?e.val(""):i.renderUnknownOption(t)},e.on("change",function(){t.$apply(function(){_.parent()&&_.remove(),n.$setViewValue(e.val())})})}function h(t,e,n){var i;n.$render=function(){var t=new At(n.$viewValue);o(e.find("option"),function(e){e.selected=g(t.get(e.value))})},t.$watch(function(){P(i,n.$viewValue)||(i=O(n.$viewValue),n.$render())}),e.on("change",function(){t.$apply(function(){var t=[];o(e.find("option"),function(e){e.selected&&t.push(e.value)}),n.$setViewValue(t)})})}function d(e,a,s){function l(t,n,i){return I[_]=i,E&&(I[E]=n),t(e,I)}function c(t){var e;if(v)if(M&&Dn(t)){e=new At([]);for(var n=0;n<t.length;n++)e.put(l(M,null,t[n]),!0)}else e=new At(t);else M&&(t=l(M,null,t));return function(n,i){var r;return r=M?M:S?S:k,v?g(e.remove(l(r,n,i))):t===l(r,n,i)}}function u(){w||(e.$$postDigest(d),w=!0)}function h(t,e,n){t[e]=t[e]||0,t[e]+=n?1:-1}function d(){w=!1;var t,n,i,r,u,d={"":[]},p=[""];i=s.$viewValue,r=A(e)||[];var b,_,$,S,k=E?Object.keys(r).sort():r,D={};u=c(i);var N,L,F=!1;for(O={},S=0;$=k.length,$>S;S++)b=S,E&&(b=k[S],"$"===b.charAt(0))||(_=r[b],t=l(T,b,_)||"",(n=d[t])||(n=d[t]=[],p.push(t)),t=u(b,_),F=F||t,_=l(m,b,_),_=g(_)?_:"",L=M?M(e,I):E?k[S]:S,M&&(O[L]=b),n.push({id:L,label:_,selected:t}));for(v||(y||null===i?d[""].unshift({id:"",label:"",selected:!F}):F||d[""].unshift({id:"?",label:"",selected:!0})),b=0,k=p.length;k>b;b++){for(t=p[b],n=d[t],P.length<=b?(i={element:C.clone().attr("label",t),label:n.label},r=[i],P.push(r),a.append(i.element)):(r=P[b],i=r[0],i.label!=t&&i.element.attr("label",i.label=t)),F=null,S=0,$=n.length;$>S;S++)t=n[S],(u=r[S+1])?(F=u.element,u.label!==t.label&&(h(D,u.label,!1),h(D,t.label,!0),F.text(u.label=t.label),F.prop("label",u.label)),u.id!==t.id&&F.val(u.id=t.id),F[0].selected!==t.selected&&(F.prop("selected",u.selected=t.selected),bn&&F.prop("selected",u.selected))):(""===t.id&&y?N=y:(N=x.clone()).val(t.id).prop("selected",t.selected).attr("selected",t.selected).prop("label",t.label).text(t.label),r.push(u={element:N,label:t.label,id:t.id,selected:t.selected}),h(D,t.label,!0),F?F.after(N):i.element.append(N),F=N);for(S++;r.length>S;)t=r.pop(),h(D,t.label,!1),t.element.remove()}for(;P.length>b;){for(n=P.pop(),S=1;S<n.length;++S)h(D,n[S].label,!1);n[0].element.remove()}o(D,function(t,e){t>0?f.addOption(e):0>t&&f.removeOption(e)})}var p;if(!(p=b.match(r)))throw Xr("iexp",b,j(a));var m=i(p[2]||p[1]),_=p[4]||p[6],$=/ as /.test(p[0])&&p[1],S=$?i($):null,E=p[5],T=i(p[3]||""),k=i(p[2]?p[1]:_),A=i(p[7]),M=p[8]?i(p[8]):null,O={},P=[[{element:a,label:""}]],I={};y&&(t(y)(e),y.removeClass("ng-scope"),y.remove()),a.empty(),a.on("change",function(){e.$apply(function(){var t,i=A(e)||[];if(v)t=[],o(a.val(),function(e){e=M?O[e]:e,t.push("?"===e?n:""===e?null:l(S?S:k,e,i[e]))});else{var r=M?O[a.val()]:a.val();t="?"===r?n:""===r?null:l(S?S:k,r,i[r])}s.$setViewValue(t),d()})}),s.$render=d,e.$watchCollection(A,u),e.$watchCollection(function(){var t,n=A(e);if(n&&Dn(n)){t=Array(n.length);for(var i=0,r=n.length;r>i;i++)t[i]=l(m,i,n[i])}else if(n)for(i in t={},n)n.hasOwnProperty(i)&&(t[i]=l(m,i,n[i]));return t},u),v&&e.$watchCollection(function(){return s.$modelValue},u)}if(c[1]){var f=c[0];c=c[1];var p,v=l.multiple,b=l.ngOptions,y=!1,w=!1,x=yn(e.createElement("option")),C=yn(e.createElement("optgroup")),_=x.clone();l=0;for(var $=s.children(),S=$.length;S>l;l++)if(""===$[l].value){p=y=$.eq(l);break}f.init(c,y,_),v&&(c.$isEmpty=function(t){return!t||0===t.length}),b?d(a,s,c):v?h(a,s,c):u(a,s,c,f)}}}}],Zr=["$interpolate",function(t){var e={addOption:d,removeOption:d};return{restrict:"E",priority:100,compile:function(n,i){if(m(i.value)){var r=t(n.text(),!0);r||i.$set("value",n.text())}return function(t,n,i){var o=n.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.databound||(a=e),r?t.$watch(r,function(t,e){i.$set("value",t),e!==t&&a.removeOption(e),a.addOption(t,n)}):a.addOption(i.value,n),n.on("$destroy",function(){a.removeOption(i.value)})}}}}],Jr=p({restrict:"E",terminal:!1}),Qr=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){i&&(n.required=!0,i.$validators.required=function(t,e){return!n.required||!i.$isEmpty(e)},n.$observe("required",function(){i.$validate()}))}}},to=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,r,o){if(o){var a,s=r.ngPattern||r.pattern;r.$observe("pattern",function(t){if(b(t)&&0<t.length&&(t=new RegExp("^"+t+"$")),t&&!t.test)throw i("ngPattern")("noregexp",s,t,j(e));a=t||n,o.$validate()}),o.$validators.pattern=function(t){return o.$isEmpty(t)||m(a)||a.test(t)}}}}},eo=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=-1;n.$observe("maxlength",function(t){t=h(t),r=isNaN(t)?-1:t,i.$validate()}),i.$validators.maxlength=function(t,e){return 0>r||i.$isEmpty(t)||e.length<=r}}}}},no=function(){return{restrict:"A",require:"?ngModel",link:function(t,e,n,i){if(i){var r=0;n.$observe("minlength",function(t){r=h(t)||0,i.$validate()}),i.$validators.minlength=function(t,e){return i.$isEmpty(e)||e.length>=r}}}}};t.angular.bootstrap?console.log("WARNING: Tried to load angular more than once."):(K(),rt(On),yn(e).ready(function(){Y(e,q)}))}(window,document),!window.angular.$$csp()&&window.angular.element(document).find("head").prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}</style>'),function(t,e,n){"use strict";e.module("ngAnimate",["ng"]).directive("ngAnimateChildren",function(){var t="$$ngAnimateChildren";return function(n,i,r){var o=r.ngAnimateChildren;e.isString(o)&&0===o.length?i.data(t,!0):n.$watch(o,function(e){i.data(t,!!e)})}}).factory("$$animateReflow",["$$rAF","$document",function(t,e){var n=e[0].body;return function(e){return t(function(){n.offsetWidth+1;e()})}}]).config(["$provide","$animateProvider",function(i,r){function o(t){for(var e=0;e<t.length;e++){var n=t[e];if(n.nodeType==g)return n}}function a(t){return t&&e.element(t)}function s(t){return e.element(o(t))}function l(t,e){return o(t)==o(e)}var c,u=e.noop,h=e.forEach,d=r.$$selectors,f=e.isArray,p=e.isString,m=e.isObject,g=1,v="$$ngAnimateState",b="$$ngAnimateChildren",y="ng-animate",w={running:!0};i.decorator("$animate",["$delegate","$$q","$injector","$sniffer","$rootElement","$$asyncCallback","$rootScope","$document","$templateRequest","$$jqLite",function(t,n,i,g,x,C,_,$,S,E){function T(t,e){var n=t.data(v)||{};return e&&(n.running=!0,n.structural=!0,t.data(v,n)),n.disabled||n.running&&n.structural}function k(t){var e,i=n.defer();return i.promise.$$cancelFn=function(){e&&e()},_.$$postDigest(function(){e=t(function(){i.resolve()})}),i.promise}function A(t){return m(t)?(t.tempClasses&&p(t.tempClasses)&&(t.tempClasses=t.tempClasses.split(/\s+/)),t):void 0}function M(t,e,n){n=n||{};var i={};h(n,function(t,e){h(e.split(" "),function(e){i[e]=t})});var r=Object.create(null);h((t.attr("class")||"").split(/\s+/),function(t){r[t]=!0});var o=[],a=[];return h(e&&e.classes||[],function(t,e){var n=r[e],s=i[e]||{};t===!1?(n||"addClass"==s.event)&&a.push(e):t===!0&&(n&&"removeClass"!=s.event||o.push(e))}),o.length+a.length>0&&[o.join(" "),a.join(" ")]}function O(t){if(t){var e=[],n={},r=t.substr(1).split(".");(g.transitions||g.animations)&&e.push(i.get(d[""]));for(var o=0;o<r.length;o++){var a=r[o],s=d[a];s&&!n[a]&&(e.push(i.get(s)),n[a]=!0)}return e}}function P(t,n,i,r){function o(t,e){var n=t[e],i=t["before"+e.charAt(0).toUpperCase()+e.substr(1)];return n||i?("leave"==e&&(i=n,n=null),C.push({event:e,fn:n}),y.push({event:e,fn:i}),!0):void 0}function a(e,n,o){function a(t){if(n){if((n[t]||u)(),++d<s.length)return;n=null}o()}var s=[];h(e,function(t){t.fn&&s.push(t)});var d=0;h(s,function(e,o){var s=function(){a(o)};switch(e.event){case"setClass":n.push(e.fn(t,l,c,s,r));break;case"animate":n.push(e.fn(t,i,r.from,r.to,s));break;case"addClass":n.push(e.fn(t,l||i,s,r));break;case"removeClass":n.push(e.fn(t,c||i,s,r));break;default:n.push(e.fn(t,s,r))}}),n&&0===n.length&&o()}var s=t[0];if(s){r&&(r.to=r.to||{},r.from=r.from||{});var l,c;f(i)&&(l=i[0],c=i[1],l?c?i=l+" "+c:(i=l,n="addClass"):(i=c,n="removeClass"));var d="setClass"==n,p=d||"addClass"==n||"removeClass"==n||"animate"==n,m=t.attr("class"),g=m+" "+i;if(H(g)){var v=u,b=[],y=[],w=u,x=[],C=[],_=(" "+g).replace(/\s+/g,".");return h(O(_),function(t){var e=o(t,n);!e&&d&&(o(t,"addClass"),o(t,"removeClass"))}),{node:s,event:n,className:i,isClassBased:p,isSetClassOperation:d,applyStyles:function(){r&&t.css(e.extend(r.from||{},r.to||{}))},before:function(t){v=t,a(y,b,function(){v=u,t()})},after:function(t){w=t,a(C,x,function(){w=u,t()})},cancel:function(){b&&(h(b,function(t){(t||u)(!0)}),v(!0)),x&&(h(x,function(t){(t||u)(!0)}),w(!0))}}}}}function I(t,n,i,r,o,a,s,l){function d(e){var r="$animate:"+e;_&&_[r]&&_[r].length>0&&C(function(){i.triggerHandler(r,{event:t,className:n})})}function f(){d("before")}function p(){d("after")}function m(){d("close"),l()}function g(){g.hasBeenRun||(g.hasBeenRun=!0,a())}function b(){if(!b.hasBeenRun){x&&x.applyStyles(),b.hasBeenRun=!0,s&&s.tempClasses&&h(s.tempClasses,function(t){c.removeClass(i,t)});var e=i.data(v);e&&(x&&x.isClassBased?N(i,n):(C(function(){var e=i.data(v)||{};I==e.index&&N(i,n,t)}),i.data(v,e))),m()}}var w=u,x=P(i,t,n,s);if(!x)return g(),f(),p(),b(),w;t=x.event,n=x.className;var _=e.element._data(x.node);if(_=_&&_.events,r||(r=o?o.parent():i.parent()),L(i,r))return g(),f(),p(),b(),w;var $=i.data(v)||{},S=$.active||{},E=$.totalActive||0,T=$.last,k=!1;if(E>0){var A=[];if(x.isClassBased){if("setClass"==T.event)A.push(T),N(i,n);else if(S[n]){var M=S[n];M.event==t?k=!0:(A.push(M),N(i,n))}}else if("leave"==t&&S["ng-leave"])k=!0;else{for(var O in S)A.push(S[O]);$={},N(i,!0)}A.length>0&&h(A,function(t){t.cancel()})}if(!x.isClassBased||x.isSetClassOperation||"animate"==t||k||(k="addClass"==t==i.hasClass(n)),k)return g(),f(),p(),m(),w;S=$.active||{},E=$.totalActive||0,"leave"==t&&i.one("$destroy",function(t){var n=e.element(this),i=n.data(v);if(i){var r=i.active["ng-leave"];r&&(r.cancel(),N(n,"ng-leave"))}}),c.addClass(i,y),s&&s.tempClasses&&h(s.tempClasses,function(t){c.addClass(i,t)});var I=j++;return E++,S[n]=x,i.data(v,{last:x,active:S,index:I,totalActive:E}),f(),x.before(function(e){var r=i.data(v);e=e||!r||!r.active[n]||x.isClassBased&&r.active[n].event!=t,g(),e===!0?b():(p(),x.after(b))}),x.cancel}function D(t){var n=o(t);if(n){var i=e.isFunction(n.getElementsByClassName)?n.getElementsByClassName(y):n.querySelectorAll("."+y);h(i,function(t){t=e.element(t);var n=t.data(v);n&&n.active&&h(n.active,function(t){t.cancel()})})}}function N(t,e){if(l(t,x))w.disabled||(w.running=!1,w.structural=!1);else if(e){var n=t.data(v)||{},i=e===!0;!i&&n.active&&n.active[e]&&(n.totalActive--,delete n.active[e]),(i||!n.totalActive)&&(c.removeClass(t,y),t.removeData(v))}}function L(t,n){if(w.disabled)return!0;if(l(t,x))return w.running;var i,r,o;do{if(0===n.length)break;var a=l(n,x),s=a?w:n.data(v)||{};if(s.disabled)return!0;if(a&&(o=!0),i!==!1){var c=n.data(b);e.isDefined(c)&&(i=c)}r=r||s.running||s.last&&!s.last.isClassBased}while(n=n.parent());return!o||!i&&r}c=E,x.data(v,w);var F=_.$watch(function(){return S.totalPendingRequests},function(t,e){0===t&&(F(),_.$$postDigest(function(){_.$$postDigest(function(){w.running=!1})}))}),j=0,R=r.classNameFilter(),H=R?function(t){return R.test(t)}:function(){return!0};return{animate:function(t,e,n,i,r){return i=i||"ng-inline-animate",r=A(r)||{},r.from=n?e:null,r.to=n?n:e,k(function(e){return I("animate",i,s(t),null,null,u,r,e)})},enter:function(n,i,r,o){return o=A(o),n=e.element(n),i=a(i),r=a(r),T(n,!0),t.enter(n,i,r),k(function(t){return I("enter","ng-enter",s(n),i,r,u,o,t)})},leave:function(n,i){return i=A(i),n=e.element(n),D(n),T(n,!0),k(function(e){return I("leave","ng-leave",s(n),null,null,function(){t.leave(n)},i,e)})},move:function(n,i,r,o){return o=A(o),n=e.element(n),i=a(i),r=a(r),D(n),T(n,!0),t.move(n,i,r),k(function(t){return I("move","ng-move",s(n),i,r,u,o,t)})},addClass:function(t,e,n){return this.setClass(t,e,[],n)},removeClass:function(t,e,n){return this.setClass(t,[],e,n)},setClass:function(n,i,r,a){a=A(a);var l="$$animateClasses";if(n=e.element(n),n=s(n),T(n))return t.$$setClassImmediately(n,i,r,a);var c,u=n.data(l),d=!!u;return u||(u={},u.classes={}),c=u.classes,i=f(i)?i:i.split(" "),h(i,function(t){t&&t.length&&(c[t]=!0)}),r=f(r)?r:r.split(" "),h(r,function(t){t&&t.length&&(c[t]=!1)}),d?(a&&u.options&&(u.options=e.extend(u.options||{},a)),u.promise):(n.data(l,u={classes:c,options:a}),u.promise=k(function(e){var i=n.parent(),r=o(n),a=r.parentNode;if(!a||a.$$NG_REMOVED||r.$$NG_REMOVED)return void e();var s=n.data(l);n.removeData(l);var c=n.data(v)||{},u=M(n,s,c.active);return u?I("setClass",u,n,i,null,function(){u[0]&&t.$$addClassImmediately(n,u[0]),u[1]&&t.$$removeClassImmediately(n,u[1])},s.options,e):e()}))},cancel:function(t){t.$$cancelFn()},enabled:function(t,e){switch(arguments.length){case 2:if(t)N(e);else{var n=e.data(v)||{};n.disabled=!0,e.data(v,n)}break;case 1:w.disabled=!t;break;default:t=!w.disabled}return!!t}}}]),r.register("",["$window","$sniffer","$timeout","$$animateReflow",function(i,r,a,s){function l(){N||(N=s(function(){X=[],N=null,q={}}))}function d(t,e){N&&N(),X.push(e),N=s(function(){h(X,function(t){t()}),X=[],N=null,q={}})}function m(t,n){var i=o(t);t=e.element(i),Z.push(t);var r=Date.now()+n;K>=r||(a.cancel(G),K=r,G=a(function(){v(Z),Z=[]},n,!1))}function v(t){h(t,function(t){var e=t.data(W);e&&h(e.closeAnimationFns,function(t){t()})})}function b(t,e){var n=e?q[e]:null;if(!n){var r=0,o=0,a=0,s=0;h(t,function(t){if(t.nodeType==g){var e=i.getComputedStyle(t)||{},n=e[M+L];r=Math.max(y(n),r);var l=e[M+j];o=Math.max(y(l),o);{e[P+j]}s=Math.max(y(e[P+j]),s);var c=y(e[P+L]);c>0&&(c*=parseInt(e[P+R],10)||1),a=Math.max(c,a)}}),n={total:0,transitionDelay:o,transitionDuration:r,animationDelay:s,animationDuration:a},e&&(q[e]=n)}return n}function y(t){var e=0,n=p(t)?t.split(/\s*,\s*/):[];return h(n,function(t){e=Math.max(parseFloat(t)||0,e)}),e}function w(t){var e=t.parent(),n=e.data(B);return n||(e.data(B,++V),n=V),
n+"-"+o(t).getAttribute("class")}function x(t,e,n,i){var r=["ng-enter","ng-leave","ng-move"].indexOf(n)>=0,a=w(e),s=a+" "+n,l=q[s]?++q[s].total:0,u={};if(l>0){var h=n+"-stagger",d=a+" "+h,f=!q[d];f&&c.addClass(e,h),u=b(e,d),f&&c.removeClass(e,h)}c.addClass(e,n);var p=e.data(W)||{},m=b(e,s),g=m.transitionDuration,v=m.animationDuration;if(r&&0===g&&0===v)return c.removeClass(e,n),!1;var y=i||r&&g>0,x=v>0&&u.animationDelay>0&&0===u.animationDuration,C=p.closeAnimationFns||[];e.data(W,{stagger:u,cacheKey:s,running:p.running||0,itemIndex:l,blockTransition:y,closeAnimationFns:C});var S=o(e);return y&&(_(S,!0),i&&e.css(i)),x&&$(S,!0),!0}function C(t,e,n,i,r){function s(){e.off(j,l),c.removeClass(e,f),c.removeClass(e,p),L&&a.cancel(L),k(e,n);var t=o(e);for(var i in v)t.style.removeProperty(v[i])}function l(t){t.stopPropagation();var e=t.originalEvent||t,n=e.$manualTimeStamp||e.timeStamp||Date.now(),r=parseFloat(e.elapsedTime.toFixed(z));Math.max(n-F,0)>=P&&r>=A&&i()}var u=o(e),d=e.data(W);if(-1==u.getAttribute("class").indexOf(n)||!d)return void i();var f="",p="";h(n.split(" "),function(t,e){var n=(e>0?" ":"")+t;f+=n+"-active",p+=n+"-pending"});var g="",v=[],y=d.itemIndex,w=d.stagger,x=0;if(y>0){var C=0;w.transitionDelay>0&&0===w.transitionDuration&&(C=w.transitionDelay*y);var S=0;w.animationDelay>0&&0===w.animationDuration&&(S=w.animationDelay*y,v.push(D+"animation-play-state")),x=Math.round(100*Math.max(C,S))/100}x||(c.addClass(e,f),d.blockTransition&&_(u,!1));var E=d.cacheKey+" "+f,T=b(e,E),A=Math.max(T.transitionDuration,T.animationDuration);if(0===A)return c.removeClass(e,f),k(e,n),void i();!x&&r&&Object.keys(r).length>0&&(T.transitionDuration||(e.css("transition",T.animationDuration+"s linear all"),v.push("transition")),e.css(r));var M=Math.max(T.transitionDelay,T.animationDelay),P=M*Y;if(v.length>0){var N=u.getAttribute("style")||"";";"!==N.charAt(N.length-1)&&(N+=";"),u.setAttribute("style",N+" "+g)}var L,F=Date.now(),j=I+" "+O,R=(M+A)*U,H=(x+R)*Y;return x>0&&(c.addClass(e,p),L=a(function(){L=null,T.transitionDuration>0&&_(u,!1),T.animationDuration>0&&$(u,!1),c.addClass(e,f),c.removeClass(e,p),r&&(0===T.transitionDuration&&e.css("transition",T.animationDuration+"s linear all"),e.css(r),v.push("transition"))},x*Y,!1)),e.on(j,l),d.closeAnimationFns.push(function(){s(),i()}),d.running++,m(e,H),s}function _(t,e){t.style[M+F]=e?"none":""}function $(t,e){t.style[P+H]=e?"paused":""}function S(t,e,n,i){return x(t,e,n,i)?function(t){t&&k(e,n)}:void 0}function E(t,e,n,i,r){return e.data(W)?C(t,e,n,i,r):(k(e,n),void i())}function T(t,e,n,i,r){var o=S(t,e,n,r.from);if(!o)return l(),void i();var a=o;return d(e,function(){a=E(t,e,n,i,r.to)}),function(t){(a||u)(t)}}function k(t,e){c.removeClass(t,e);var n=t.data(W);n&&(n.running&&n.running--,n.running&&0!==n.running||t.removeData(W))}function A(t,e){var n="";return t=f(t)?t:t.split(/\s+/),h(t,function(t,i){t&&t.length>0&&(n+=(i>0?" ":"")+t+e)}),n}var M,O,P,I,D="";t.ontransitionend===n&&t.onwebkittransitionend!==n?(D="-webkit-",M="WebkitTransition",O="webkitTransitionEnd transitionend"):(M="transition",O="transitionend"),t.onanimationend===n&&t.onwebkitanimationend!==n?(D="-webkit-",P="WebkitAnimation",I="webkitAnimationEnd animationend"):(P="animation",I="animationend");var N,L="Duration",F="Property",j="Delay",R="IterationCount",H="PlayState",B="$$ngAnimateKey",W="$$ngAnimateCSS3Data",z=3,U=1.5,Y=1e3,q={},V=0,X=[],G=null,K=0,Z=[];return{animate:function(t,e,n,i,r,o){return o=o||{},o.from=n,o.to=i,T("animate",t,e,r,o)},enter:function(t,e,n){return n=n||{},T("enter",t,"ng-enter",e,n)},leave:function(t,e,n){return n=n||{},T("leave",t,"ng-leave",e,n)},move:function(t,e,n){return n=n||{},T("move",t,"ng-move",e,n)},beforeSetClass:function(t,e,n,i,r){r=r||{};var o=A(n,"-remove")+" "+A(e,"-add"),a=S("setClass",t,o,r.from);return a?(d(t,i),a):(l(),void i())},beforeAddClass:function(t,e,n,i){i=i||{};var r=S("addClass",t,A(e,"-add"),i.from);return r?(d(t,n),r):(l(),void n())},beforeRemoveClass:function(t,e,n,i){i=i||{};var r=S("removeClass",t,A(e,"-remove"),i.from);return r?(d(t,n),r):(l(),void n())},setClass:function(t,e,n,i,r){r=r||{},n=A(n,"-remove"),e=A(e,"-add");var o=n+" "+e;return E("setClass",t,o,i,r.to)},addClass:function(t,e,n,i){return i=i||{},E("addClass",t,A(e,"-add"),n,i.to)},removeClass:function(t,e,n,i){return i=i||{},E("removeClass",t,A(e,"-remove"),n,i.to)}}}])}])}(window,window.angular),function(t,e,n){"use strict";function i(){function t(t,e,i){return function(r,o,a){var s=a.$normalize(e);n[s]&&!a[s]&&r.$watch(a[t],function(t){i&&(t=!t),o.attr(e,t)})}}var n={ariaHidden:!0,ariaChecked:!0,ariaDisabled:!0,ariaRequired:!0,ariaInvalid:!0,ariaMultiline:!0,ariaValue:!0,tabindex:!0,bindKeypress:!0};this.config=function(t){n=e.extend(n,t)},this.$get=function(){return{config:function(t){return n[t]},$$watchExpr:t}}}var r=e.module("ngAria",["ng"]).provider("$aria",i);r.directive("ngShow",["$aria",function(t){return t.$$watchExpr("ngShow","aria-hidden",!0)}]).directive("ngHide",["$aria",function(t){return t.$$watchExpr("ngHide","aria-hidden",!1)}]).directive("ngModel",["$aria",function(t){function e(e,n,i){return t.config(n)&&!i.attr(e)}function n(t,e){return!e.attr("role")&&e.attr("type")===t&&"INPUT"!==e[0].nodeName}function i(t,e){var n=t.type,i=t.role;return"checkbox"===(n||i)||"menuitemcheckbox"===i?"checkbox":"radio"===(n||i)||"menuitemradio"===i?"radio":"range"===n||"progressbar"===i||"slider"===i?"range":"textbox"===(n||i)||"TEXTAREA"===e[0].nodeName?"multiline":""}return{restrict:"A",require:"?ngModel",priority:200,compile:function(r,o){var a=i(o,r);return{pre:function(t,e,n,i){"checkbox"===a&&"checkbox"!==n.type&&(i.$isEmpty=function(t){return t===!1})},post:function(i,r,o,s){function l(){return s.$modelValue}function c(){return h?(h=!1,function(t){var e=o.value==s.$viewValue;r.attr("aria-checked",e),r.attr("tabindex",0-!e)}):function(t){r.attr("aria-checked",o.value==s.$viewValue)}}function u(){r.attr("aria-checked",!s.$isEmpty(s.$viewValue))}var h=e("tabindex","tabindex",r);switch(a){case"radio":case"checkbox":n(a,r)&&r.attr("role",a),e("aria-checked","ariaChecked",r)&&i.$watch(l,"radio"===a?c():u);break;case"range":n(a,r)&&r.attr("role","slider"),t.config("ariaValue")&&(o.min&&!r.attr("aria-valuemin")&&r.attr("aria-valuemin",o.min),o.max&&!r.attr("aria-valuemax")&&r.attr("aria-valuemax",o.max),r.attr("aria-valuenow")||i.$watch(l,function(t){r.attr("aria-valuenow",t)}));break;case"multiline":e("aria-multiline","ariaMultiline",r)&&r.attr("aria-multiline",!0)}h&&r.attr("tabindex",0),s.$validators.required&&e("aria-required","ariaRequired",r)&&i.$watch(function(){return s.$error.required},function(t){r.attr("aria-required",!!t)}),e("aria-invalid","ariaInvalid",r)&&i.$watch(function(){return s.$invalid},function(t){r.attr("aria-invalid",!!t)})}}}}}]).directive("ngDisabled",["$aria",function(t){return t.$$watchExpr("ngDisabled","aria-disabled")}]).directive("ngMessages",function(){return{restrict:"A",require:"?ngMessages",link:function(t,e,n,i){e.attr("aria-live")||e.attr("aria-live","assertive")}}}).directive("ngClick",["$aria","$parse",function(t,e){return{restrict:"A",compile:function(n,i){var r=e(i.ngClick,null,!0);return function(e,n,i){function o(t,e){return-1!==e.indexOf(t[0].nodeName)?!0:void 0}var a=["BUTTON","A","INPUT","TEXTAREA"];n.attr("role")||o(n,a)||n.attr("role","button"),t.config("tabindex")&&!n.attr("tabindex")&&n.attr("tabindex",0),!t.config("bindKeypress")||i.ngKeypress||o(n,a)||n.on("keypress",function(t){function n(){r(e,{$event:t})}(32===t.keyCode||13===t.keyCode)&&e.$apply(n)})}}}}]).directive("ngDblclick",["$aria",function(t){return function(e,n,i){t.config("tabindex")&&!n.attr("tabindex")&&n.attr("tabindex",0)}}])}(window,window.angular),function(t,e,n){"use strict";!function(){e.module("ngMaterial",["ng","ngAnimate","ngAria","material.core","material.core.gestures","material.core.theming.palette","material.core.theming","material.components.autocomplete","material.components.backdrop","material.components.bottomSheet","material.components.button","material.components.card","material.components.checkbox","material.components.chips","material.components.content","material.components.dialog","material.components.divider","material.components.fabActions","material.components.fabSpeedDial","material.components.fabToolbar","material.components.fabTrigger","material.components.gridList","material.components.icon","material.components.input","material.components.list","material.components.menu","material.components.progressCircular","material.components.progressLinear","material.components.radioButton","material.components.select","material.components.sidenav","material.components.slider","material.components.sticky","material.components.subheader","material.components.swipe","material.components.switch","material.components.tabs","material.components.toast","material.components.toolbar","material.components.tooltip","material.components.whiteframe"])}(),function(){function t(t,e){t.decorator("$$rAF",["$delegate",n]),e.theme("default").primaryPalette("indigo").accentPalette("pink").warnPalette("red").backgroundPalette("grey")}function n(t){return t.throttle=function(e){var n,i,r,o;return function(){n=arguments,o=this,r=e,i||(i=!0,t(function(){r.apply(o,n),i=!1}))}},t}e.module("material.core",["material.core.gestures","material.core.theming"]).config(t),t.$inject=["$provide","$mdThemingProvider"]}(),function(){function t(t,e){function n(t){return i?"webkit"+t.charAt(0).toUpperCase()+t.substring(1):t}var i=/webkit/i.test(e.vendorPrefix);return{KEY_CODE:{ENTER:13,ESCAPE:27,SPACE:32,LEFT_ARROW:37,UP_ARROW:38,RIGHT_ARROW:39,DOWN_ARROW:40,TAB:9,BACKSPACE:8,DELETE:46},CSS:{TRANSITIONEND:"transitionend"+(i?" webkitTransitionEnd":""),ANIMATIONEND:"animationend"+(i?" webkitAnimationEnd":""),TRANSFORM:n("transform"),TRANSFORM_ORIGIN:n("transformOrigin"),TRANSITION:n("transition"),TRANSITION_DURATION:n("transitionDuration"),ANIMATION_PLAY_STATE:n("animationPlayState"),ANIMATION_DURATION:n("animationDuration"),ANIMATION_NAME:n("animationName"),ANIMATION_TIMING:n("animationTimingFunction"),ANIMATION_DIRECTION:n("animationDirection")},MEDIA:{sm:"(max-width: 600px)","gt-sm":"(min-width: 600px)",md:"(min-width: 600px) and (max-width: 960px)","gt-md":"(min-width: 960px)",lg:"(min-width: 960px) and (max-width: 1200px)","gt-lg":"(min-width: 1200px)"},MEDIA_PRIORITY:["gt-lg","lg","gt-md","md","gt-sm","sm"]}}e.module("material.core").factory("$mdConstant",t),t.$inject=["$$rAF","$sniffer"]}(),function(){function t(t,n){function i(){return[].concat(b)}function r(){return b.length}function o(t){return b.length&&t>-1&&t<b.length}function a(t){return t?o(d(t)+1):!1}function s(t){return t?o(d(t)-1):!1}function l(t){return o(t)?b[t]:null}function c(t,e){return b.filter(function(n){return n[t]===e})}function u(t,n){return t?(e.isNumber(n)||(n=b.length),b.splice(n,0,t),d(t)):-1}function h(t){f(t)&&b.splice(d(t),1)}function d(t){return b.indexOf(t)}function f(t){return t&&d(t)>-1}function p(){return b.length?b[0]:null}function m(){return b.length?b[b.length-1]:null}function g(t,i,r,a){r=r||v;for(var s=d(i);;){if(!o(s))return null;var l=s+(t?-1:1),c=null;if(o(l)?c=b[l]:n&&(c=t?m():p(),l=d(c)),null===c||l===a)return null;if(r(c))return c;e.isUndefined(a)&&(a=l),s=l}}var v=function(){return!0};t&&!e.isArray(t)&&(t=Array.prototype.slice.call(t)),n=!!n;var b=t||[];return{items:i,count:r,inRange:o,contains:f,indexOf:d,itemAt:l,findBy:c,add:u,remove:h,first:p,last:m,next:e.bind(null,g,!1),previous:e.bind(null,g,!0),hasPrevious:s,hasNext:a}}e.module("material.core").config(["$provide",function(e){e.decorator("$mdUtil",["$delegate",function(e){return e.iterator=t,e}])}])}(),function(){function t(t,n,i){function r(t){var n=d[t];e.isUndefined(n)&&(n=d[t]=o(t));var i=p[n];return e.isUndefined(i)&&(i=a(n)),i}function o(e){return t.MEDIA[e]||("("!==e.charAt(0)?"("+e+")":e)}function a(t){var e=f[t]=i.matchMedia(t);return e.addListener(s),p[e.media]=!!e.matches}function s(t){n.$evalAsync(function(){p[t.media]=!!t.matches})}function l(t){return f[t]}function c(e,n){for(var i=0;i<t.MEDIA_PRIORITY.length;i++){var r=t.MEDIA_PRIORITY[i];if(f[d[r]].matches){var o=h(e,n+"-"+r);if(e[o])return e[o]}}return e[h(e,n)]}function u(n,i,r){var o=[];return n.forEach(function(n){var a=h(i,n);i[a]&&o.push(i.$observe(a,e.bind(void 0,r,null)));for(var s in t.MEDIA){if(a=h(i,n+"-"+s),!i[a])return;o.push(i.$observe(a,e.bind(void 0,r,s)))}}),function(){o.forEach(function(t){t()})}}function h(t,e){return m[e]||(m[e]=t.$normalize(e))}var d={},f={},p={},m={};return r.getResponsiveAttribute=c,r.getQuery=l,r.watchResponsiveAttributes=u,r}e.module("material.core").factory("$mdMedia",t),t.$inject=["$mdConstant","$rootScope","$window"]}(),function(){var i=0;e.module("material.core").factory("$mdUtil",["$cacheFactory","$document","$timeout","$q","$window","$mdConstant",function(r,o,a,s,l,c){function u(t){return t[0]||t}var h;return h={now:t.performance?e.bind(t.performance,t.performance.now):Date.now,clientRect:function(t,e,n){var i=u(t);e=u(e||i.offsetParent||document.body);var r=i.getBoundingClientRect(),o=n?e.getBoundingClientRect():{left:0,top:0,width:0,height:0};return{left:r.left-o.left,top:r.top-o.top,width:r.width,height:r.height}},offsetRect:function(t,e){return h.clientRect(t,e,!0)},nodesToArray:function(t){for(var e=[],n=0;n<t.length;++n)e.push(t.item(n));return e},disableScrollAround:function(t){function n(){function n(t){}function i(t){t.preventDefault()}var r=l.getComputedStyle(t[0]).zIndex-1;isNaN(r)&&(r=99);var s=e.element('<div class="md-scroll-mask" style="z-index: '+r+'">  <div class="md-scroll-mask-bar"></div></div>');return a.appendChild(s[0]),s.on("wheel",i),s.on("touchmove",i),o.on("keydown",n),function(){s.off("wheel"),s.off("touchmove"),s[0].parentNode.removeChild(s[0]),o.off("keydown",n),delete h.disableScrollAround._enableScrolling}}function i(){var t=a.getAttribute("style")||"",e=a.scrollTop+a.parentElement.scrollTop,n=a.clientWidth;return r(a,{position:"fixed",width:"100%",overflowY:"scroll",top:-e+"px"}),a.clientWidth<n&&r(a,{overflow:"hidden"}),function(){a.setAttribute("style",t),a.scrollTop=e}}function r(t,e){for(var n in e)t.style[n]=e[n]}if(h.disableScrollAround._enableScrolling)return h.disableScrollAround._enableScrolling;t=e.element(t);var a=o[0].body,s=i(),c=n();return h.disableScrollAround._enableScrolling=function(){s(),c(),delete h.disableScrollAround._enableScrolling}},enableScrolling:function(){var t=this.disableScrollAround._enableScrolling;t&&t()},floatingScrollbars:function(){if(this.floatingScrollbars.cached===n){var t=e.element('<div style="width: 100%; z-index: -1; position: absolute; height: 35px; overflow-y: scroll"><div style="height: 60;"></div></div>');o[0].body.appendChild(t[0]),this.floatingScrollbars.cached=t[0].offsetWidth==t[0].childNodes[0].offsetWidth,t.remove()}return this.floatingScrollbars.cached},forceFocus:function(e){var n=e[0]||e;document.addEventListener("click",function r(t){t.target===n&&t.$focus&&(n.focus(),t.stopImmediatePropagation(),t.preventDefault(),n.removeEventListener("click",r))},!0);var i=document.createEvent("MouseEvents");i.initMouseEvent("click",!1,!0,t,{},0,0,0,0,!1,!1,!1,!1,0,null),i.$material=!0,i.$focus=!0,n.dispatchEvent(i)},transitionEndPromise:function(t,e){function n(e){e&&e.target!==t[0]||(t.off(c.CSS.TRANSITIONEND,n),i.resolve())}e=e||{};var i=s.defer();return t.on(c.CSS.TRANSITIONEND,n),e.timeout&&a(n,e.timeout),i.promise},fakeNgModel:function(){return{$fake:!0,$setTouched:e.noop,$setViewValue:function(t){this.$viewValue=t,this.$render(t),this.$viewChangeListeners.forEach(function(t){t()})},$isEmpty:function(t){return 0===(""+t).length},$parsers:[],$formatters:[],$viewChangeListeners:[],$render:e.noop}},debounce:function(t,e,i,r){var o;return function(){var s=i,l=Array.prototype.slice.call(arguments);a.cancel(o),o=a(function(){o=n,t.apply(s,l)},e||10,r)}},throttle:function(t,e){var n;return function(){var i=this,r=arguments,o=h.now();(!n||o-n>e)&&(t.apply(i,r),n=o)}},time:function(t){var e=h.now();return t(),h.now()-e},nextUid:function(){return""+i++},disconnectScope:function(t){if(t&&t.$root!==t&&!t.$$destroyed){var e=t.$parent;t.$$disconnected=!0,e.$$childHead===t&&(e.$$childHead=t.$$nextSibling),e.$$childTail===t&&(e.$$childTail=t.$$prevSibling),t.$$prevSibling&&(t.$$prevSibling.$$nextSibling=t.$$nextSibling),t.$$nextSibling&&(t.$$nextSibling.$$prevSibling=t.$$prevSibling),t.$$nextSibling=t.$$prevSibling=null}},reconnectScope:function(t){if(t&&t.$root!==t&&t.$$disconnected){var e=t,n=e.$parent;e.$$disconnected=!1,e.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=e,n.$$childTail=e):n.$$childHead=n.$$childTail=e}},getClosest:function(t,n,i){if(t instanceof e.element&&(t=t[0]),n=n.toUpperCase(),i&&(t=t.parentNode),!t)return null;do if(t.nodeName===n)return t;while(t=t.parentNode);return null},extractElementByName:function(t,n){for(var i=0,r=t.length;r>i;i++)if(t[i].nodeName.toLowerCase()===n)return e.element(t[i]);return t},initOptionalProperties:function(t,n,i){i=i||{},e.forEach(t.$$isolateBindings,function(r,o){if(r.optional&&e.isUndefined(t[o])){var a=e.isDefined(n[r.attrName]);t[o]=e.isDefined(i[o])?i[o]:a}})}}}]),e.element.prototype.focus=e.element.prototype.focus||function(){return this.length&&this[0].focus(),this},e.element.prototype.blur=e.element.prototype.blur||function(){return this.length&&this[0].blur(),this}}(),function(){function t(t,n,i){function r(t,i,r){var o=t[0]||t;!o||o.hasAttribute(i)&&0!==o.getAttribute(i).length||l(o,i)||(r=e.isString(r)?r.trim():"",r.length?t.attr(i,r):n.warn('ARIA: Attribute "',i,'", required for accessibility, is missing on node:',o))}function o(e,n,i){t(function(){r(e,n,i())})}function a(t,e){o(t,e,function(){return s(t)})}function s(t){return t.text().trim()}function l(t,e){function n(t){var e=t.currentStyle?t.currentStyle:i.getComputedStyle(t);return"none"===e.display}var r=t.hasChildNodes(),o=!1;if(r)for(var a=t.childNodes,s=0;s<a.length;s++){var l=a[s];1===l.nodeType&&l.hasAttribute(e)&&(n(l)||(o=!0))}return o}return{expect:r,expectAsync:o,expectWithText:a}}e.module("material.core").service("$mdAria",t),t.$inject=["$$rAF","$log","$window"]}(),function(){function t(t,n,i,r,o,a){this.compile=function(s){var l=s.templateUrl,c=s.template||"",u=s.controller,h=s.controllerAs,d=s.resolve||{},f=s.locals||{},p=s.transformTemplate||e.identity,m=s.bindToController;return e.forEach(d,function(t,n){d[n]=e.isString(t)?i.get(t):i.invoke(t)}),e.extend(d,f),d.$template=l?n.get(l,{cache:a}).then(function(t){return t.data}):t.when(c),t.all(d).then(function(t){var n=p(t.$template),i=s.element||e.element("<div>").html(n.trim()).contents(),a=r(i);return{locals:t,element:i,link:function(n){if(t.$scope=n,u){var r=o(u,t,!0);m&&e.extend(r.instance,t);var s=r();i.data("$ngControllerController",s),i.children().data("$ngControllerController",s),h&&(n[h]=s)}return a(n)}}})}}e.module("material.core").service("$mdCompiler",t),t.$inject=["$q","$http","$injector","$compile","$controller","$templateCache"]}(),function(){function n(){}function i(n,i,r){function o(t,e,n){var i=f[e.replace(/^\$md./,"")];if(!i)throw new Error("Failed to register element with handler "+e+". Available handlers: "+Object.keys(f).join(", "));return i.registerElement(t,n)}function a(t,i){var r=new n(t);return e.extend(r,i),f[t]=r,m}var l=navigator.userAgent||navigator.vendor||t.opera,u=l.match(/ipad|iphone|ipod/i),h=l.match(/android/i),d="undefined"!=typeof t.jQuery&&e.element===t.jQuery,m={handler:a,register:o,isHijackingClicks:(u||h)&&!d&&!p};return m.isHijackingClicks&&m.handler("click",{options:{maxDistance:6},onEnd:function(t,e){e.distance<this.state.options.maxDistance&&this.dispatchEvent(t,"click")}}),m.handler("press",{onStart:function(t,e){this.dispatchEvent(t,"$md.pressdown")},onEnd:function(t,e){this.dispatchEvent(t,"$md.pressup")}}).handler("hold",{options:{maxDistance:6,delay:500},onCancel:function(){r.cancel(this.state.timeout)},onStart:function(t,n){return this.state.registeredParent?(this.state.pos={x:n.x,y:n.y},void(this.state.timeout=r(e.bind(this,function(){this.dispatchEvent(t,"$md.hold"),this.cancel()}),this.state.options.delay,!1))):this.cancel()},onMove:function(t,e){t.preventDefault();var n=this.state.pos.x-e.x,i=this.state.pos.y-e.y;Math.sqrt(n*n+i*i)>this.options.maxDistance&&this.cancel()},onEnd:function(){this.onCancel()}}).handler("drag",{options:{minDistance:6,horizontal:!0,cancelMultiplier:1.5},onStart:function(t){this.state.registeredParent||this.cancel()},onMove:function(t,e){var n,i;t.preventDefault(),this.state.dragPointer?this.dispatchDragMove(t):(this.state.options.horizontal?(n=Math.abs(e.distanceX)>this.state.options.minDistance,i=Math.abs(e.distanceY)>this.state.options.minDistance*this.state.options.cancelMultiplier):(n=Math.abs(e.distanceY)>this.state.options.minDistance,i=Math.abs(e.distanceX)>this.state.options.minDistance*this.state.options.cancelMultiplier),n?(this.state.dragPointer=s(t),c(t,this.state.dragPointer),this.dispatchEvent(t,"$md.dragstart",this.state.dragPointer)):i&&this.cancel())},dispatchDragMove:i.throttle(function(t){this.state.isRunning&&(c(t,this.state.dragPointer),this.dispatchEvent(t,"$md.drag",this.state.dragPointer))}),onEnd:function(t,e){this.state.dragPointer&&(c(t,this.state.dragPointer),this.dispatchEvent(t,"$md.dragend",this.state.dragPointer))}}).handler("swipe",{options:{minVelocity:.65,minDistance:10},onEnd:function(t,e){if(Math.abs(e.velocityX)>this.state.options.minVelocity&&Math.abs(e.distanceX)>this.state.options.minDistance){var n="left"==e.directionX?"$md.swipeleft":"$md.swiperight";this.dispatchEvent(t,n)}}})}function r(t){this.name=t,this.state={}}function o(){function n(t,n,i){i=i||h;var r=new e.element.Event(n);r.$material=!0,r.pointer=i,r.srcEvent=t,e.extend(r,{clientX:i.x,clientY:i.y,screenX:i.x,screenY:i.y,pageX:i.x,pageY:i.y,ctrlKey:t.ctrlKey,altKey:t.altKey,shiftKey:t.shiftKey,metaKey:t.metaKey}),e.element(i.target).trigger(r)}function i(e,n,i){i=i||h;var r;"click"===n?(r=document.createEvent("MouseEvents"),r.initMouseEvent("click",!0,!0,t,e.detail,i.x,i.y,i.x,i.y,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget||null)):(r=document.createEvent("CustomEvent"),r.initCustomEvent(n,!0,!0,{})),r.$material=!0,r.pointer=i,r.srcEvent=e,i.target.dispatchEvent(r)}var o="undefined"!=typeof t.jQuery&&e.element===t.jQuery;return r.prototype={options:{},dispatchEvent:o?n:i,onStart:e.noop,onMove:e.noop,onEnd:e.noop,onCancel:e.noop,start:function(t,n){if(!this.state.isRunning){var i=this.getNearestParent(t.target),r=i&&i.$mdGesture[this.name]||{};this.state={isRunning:!0,options:e.extend({},this.options,r),registeredParent:i},this.onStart(t,n)}},move:function(t,e){this.state.isRunning&&this.onMove(t,e)},end:function(t,e){this.state.isRunning&&(this.onEnd(t,e),this.state.isRunning=!1)},cancel:function(t,e){this.onCancel(t,e),this.state={}},getNearestParent:function(t){for(var e=t;e;){if((e.$mdGesture||{})[this.name])return e;e=e.parentNode}return null},registerElement:function(t,e){function n(){delete t[0].$mdGesture[i.name],t.off("$destroy",n)}var i=this;return t[0].$mdGesture=t[0].$mdGesture||{},t[0].$mdGesture[this.name]=e||{},t.on("$destroy",n),n}},r}function a(t,n){function i(t,e){var i;for(var r in f)i=f[r],i instanceof n&&("start"===t&&i.cancel(),i[t](e,h))}function r(t){if(!h){var e=+Date.now();d&&!l(t,d)&&e-d.endTime<1500||(h=s(t),i("start",t))}}function o(t){h&&l(t,h)&&(c(t,h),i("move",t))}function a(t){h&&l(t,h)&&(c(t,h),h.endTime=+Date.now(),i("end",t),d=h,h=null)}document.contains||(document.contains=function(t){return document.body.contains(t)}),!m&&t.isHijackingClicks&&(document.addEventListener("click",function(t){var e=0===t.clientX&&0===t.clientY;e||t.$material||t.isIonicTap||(t.preventDefault(),t.stopPropagation())},!0),m=!0);var u="mousedown touchstart pointerdown",p="mousemove touchmove pointermove",g="mouseup mouseleave touchend touchcancel pointerup pointercancel";e.element(document).on(u,r).on(p,o).on(g,a).on("$$mdGestureReset",function(){d=h=null})}function s(t){var e=u(t),n={startTime:+Date.now(),target:t.target,type:t.type.charAt(0)};return n.startX=n.x=e.pageX,n.startY=n.y=e.pageY,n}function l(t,e){return t&&e&&t.type.charAt(0)===e.type}function c(t,e){var n=u(t),i=e.x=n.pageX,r=e.y=n.pageY;e.distanceX=i-e.startX,e.distanceY=r-e.startY,e.distance=Math.sqrt(e.distanceX*e.distanceX+e.distanceY*e.distanceY),e.directionX=e.distanceX>0?"right":e.distanceX<0?"left":"",e.directionY=e.distanceY>0?"up":e.distanceY<0?"down":"",e.duration=+Date.now()-e.startTime,e.velocityX=e.distanceX/e.duration,e.velocityY=e.distanceY/e.duration}function u(t){return t=t.originalEvent||t,t.touches&&t.touches[0]||t.changedTouches&&t.changedTouches[0]||t}var h,d,f={},p=!1,m=!1;e.module("material.core.gestures",[]).provider("$mdGesture",n).factory("$$MdGestureHandler",o).run(a),n.prototype={skipClickHijack:function(){return p=!0},$get:["$$MdGestureHandler","$$rAF","$timeout",function(t,e,n){return new i(t,e,n)}]},i.$inject=["$$MdGestureHandler","$$rAF","$timeout"],a.$inject=["$mdGesture","$$MdGestureHandler"]}(),function(){function t(){function t(t){function n(t){return l.optionsFactory=t.options,l.methods=(t.methods||[]).concat(a),c}function i(t,e){return s[t]=e,c}function r(e,n){if(n=n||{},n.methods=n.methods||[],n.options=n.options||function(){return{}},/^cancel|hide|show$/.test(e))throw new Error("Preset '"+e+"' in "+t+" is reserved!");if(n.methods.indexOf("_options")>-1)throw new Error("Method '_options' in "+t+" is reserved!");return l.presets[e]={methods:n.methods.concat(a),optionsFactory:n.options,argOption:n.argOption},c}function o(n,i,r){function o(t){return t&&t._options&&(t=t._options),h.show(e.extend({},u,t))}function a(e,n){var i={};return i[t]=d,r.invoke(e||function(){return n},{},i)}var c,u,h=n(),d={hide:h.hide,cancel:h.cancel,show:o};return c=l.methods||[],u=a(l.optionsFactory,{}),e.forEach(s,function(t,e){d[e]=t}),e.forEach(l.presets,function(t,n){function i(t){this._options=e.extend({},r,t)}var r=a(t.optionsFactory,{}),o=(t.methods||[]).concat(c);if(e.extend(r,{$type:n}),e.forEach(o,function(t){i.prototype[t]=function(e){return this._options[t]=e,this}}),t.argOption){var s="show"+n.charAt(0).toUpperCase()+n.slice(1);d[s]=function(t){var e=d[n](t);return d.show(e)}}d[n]=function(n){return arguments.length&&t.argOption&&!e.isObject(n)&&!e.isArray(n)?(new i)[t.argOption](n):new i(n)}}),d}var a=["onHide","onShow","onRemove"],s={},l={presets:{}},c={setDefaults:n,addPreset:r,addMethod:i,$get:o};return c.addPreset("build",{methods:["controller","controllerAs","resolve","template","templateUrl","themable","transformTemplate","parent"]}),o.$inject=["$$interimElement","$animate","$injector"],c}function i(t,i,r,o,a,s,l,c,u){function h(t){return t&&e.isString(t)?t.replace(/\{\{/g,d).replace(/}}/g,f):t}var d=l.startSymbol(),f=l.endSymbol(),p="{{"===d&&"}}"===f,m=p?e.identity:h;return function(){function l(t){if(g.length)return p.cancel().then(function(){return l(t)});var e=new f(t);return g.push(e),e.show().then(function(){return e.deferred.promise})}function h(t){var e=g.shift();return e&&e.remove().then(function(){e.deferred.resolve(t)})}function d(t){var e=g.shift();return i.when(e&&e.remove().then(function(){e.deferred.reject(t)}))}function f(l){var h,d,f,g,v;return l=l||{},l=e.extend({preserveScope:!1,scope:l.scope||r.$new(l.isolateScope),onShow:function(t,e,n){return s.enter(e,n.parent)},onRemove:function(t,e,n){return e&&s.leave(e)||i.when()}},l),l.template&&(l.template=m(l.template)),h={options:l,deferred:i.defer(),show:function(){var n;return n=l.skipCompile?i(function(t){t({locals:{},link:function(){return l.element}})}):c.compile(l),g=n.then(function(n){function r(){l.hideDelay&&(d=o(p.cancel,l.hideDelay))}if(e.extend(n.locals,h.options),f=n.link(l.scope),e.isFunction(l.parent)?l.parent=l.parent(l.scope,f,l):e.isString(l.parent)&&(l.parent=e.element(t[0].querySelector(l.parent))),!(l.parent||{}).length){var s;a[0]&&a[0].querySelector&&(s=a[0].querySelector(":not(svg) > body")),s||(s=a[0]),"#comment"==s.nodeName&&(s=t[0].body),l.parent=e.element(s)}l.themable&&u(f);var c=l.onShow(l.scope,f,l);return i.when(c).then(function(){(l.onComplete||e.noop)(l.scope,f,l),r()})},function(t){g=!0,h.deferred.reject(t)})},cancelTimeout:function(){d&&(o.cancel(d),d=n)},remove:function(){return h.cancelTimeout(),v=i.when(g).then(function(){var t=f?l.onRemove(l.scope,f,l):!0;return i.when(t).then(function(){l.preserveScope||l.scope.$destroy(),v=!0})})}}}var p,g=[];return p={show:l,hide:h,cancel:d}}}return t.$get=i,i.$inject=["$document","$q","$rootScope","$timeout","$rootElement","$animate","$interpolate","$mdCompiler","$mdTheming"],t}e.module("material.core").provider("$$interimElement",t)}(),function(){function t(t,n){function i(t){return t&&""!==t}var r,o=[],a={};return r={notFoundError:function(e){t.error("No instance found for handle",e)},getInstances:function(){return o},get:function(t){if(!i(t))return null;var e,n,r;for(e=0,n=o.length;n>e;e++)if(r=o[e],r.$$mdHandle===t)return r;return null},register:function(t,n){function i(){var e=o.indexOf(t);-1!==e&&o.splice(e,1)}function r(){var e=a[n];e&&(e.resolve(t),delete a[n])}return n?(t.$$mdHandle=n,o.push(t),r(),i):e.noop},when:function(t){if(i(t)){var e=n.defer(),o=r.get(t);return o?e.resolve(o):a[t]=e,e.promise}return n.reject("Invalid `md-component-id` value.")}}}e.module("material.core").factory("$mdComponentRegistry",t),t.$inject=["$log","$q"]}(),function(){!function(){function t(t){function n(n,r,o){var a=i(r);return t.attach(n,r,e.extend(a,o))}function i(t){return t.hasClass("md-icon-button")?{isMenuItem:t.hasClass("md-menu-item"),fitRipple:!0,center:!0}:{isMenuItem:t.hasClass("md-menu-item"),dimBackground:!0}}return{attach:n}}e.module("material.core").factory("$mdButtonInkRipple",t),t.$inject=["$mdInkRipple"]}()}(),function(){!function(){function t(t){function n(n,i,r){return t.attach(n,i,e.extend({center:!0,dimBackground:!1,fitRipple:!0},r))}return{attach:n}}e.module("material.core").factory("$mdCheckboxInkRipple",t),t.$inject=["$mdInkRipple"]}()}(),function(){!function(){function t(t){function n(n,i,r){return t.attach(n,i,e.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},r))}return{attach:n}}e.module("material.core").factory("$mdListInkRipple",t),t.$inject=["$mdInkRipple"]}()}(),function(){function t(t,n){return{controller:e.noop,link:function(e,i,r){r.hasOwnProperty("mdInkRippleCheckbox")?n.attach(e,i):t.attach(e,i)}}}function n(t,n){function i(i,r,o){function a(){var t=r.data("$mdRippleContainer");return t?t:(t=e.element('<div class="md-ripple-container">'),r.append(t),r.data("$mdRippleContainer",t),t)}function s(t){function e(t){var e="#"===t.charAt(0)?t.substr(1):t,n=e.length/3,i=e.substr(0,n),r=e.substr(n,n),o=e.substr(2*n);return 1===n&&(i+=i,r+=r,o+=o),"rgba("+parseInt(i,16)+","+parseInt(r,16)+","+parseInt(o,16)+",0.1)"}function n(t){return t.replace(")",", 0.1)").replace("(","a(")}if(t)return 0===t.indexOf("rgba")?t.replace(/\d?\.?\d*\s*\)\s*$/,"0.1)"):0===t.indexOf("rgb")?n(t):0===t.indexOf("#")?e(t):void 0}function l(t,e){v.splice(v.indexOf(t),1),0===v.length&&a().css({backgroundColor:""}),n(function(){t.remove()},e,!1)}function c(t){var e=v.indexOf(t),n=b[e]||{},i=v.length>1?!1:w,r=v.length>1?!1:x;i||n.animating||r?t.addClass("md-ripple-visible"):t&&(t.removeClass("md-ripple-visible"),o.outline&&t.css({width:p+"px",height:p+"px",marginLeft:-1*p+"px",marginTop:-1*p+"px"}),l(t,o.outline?450:650))}function u(i,l){function u(t){var n=e.element('<div class="md-ripple" data-counter="'+g++ +'">');return v.unshift(n),b.unshift({animating:!0}),f.append(n),t&&n.css(t),n}function h(t,e){var n,i,r,a=f.prop("offsetWidth"),s=f.prop("offsetHeight");return o.isMenuItem?i=Math.sqrt(Math.pow(a,2)+Math.pow(s,2)):o.outline?(r=C.getBoundingClientRect(),t-=r.left,e-=r.top,a=Math.max(t,a-t),s=Math.max(e,s-e),i=2*Math.sqrt(Math.pow(a,2)+Math.pow(s,2))):(n=o.fullRipple?1.1:.8,
i=Math.sqrt(Math.pow(a,2)+Math.pow(s,2))*n,o.fitRipple&&(i=Math.min(s,a,i))),i}function d(t,e,n){function i(t){return t.replace("rgba","rgb").replace(/,[^\),]+\)/,")")}var r=C.getBoundingClientRect(),a={backgroundColor:i($),borderColor:i($),width:t+"px",height:t+"px"};return o.outline?(a.width=0,a.height=0):a.marginLeft=a.marginTop=t*-.5+"px",o.center?a.left=a.top="50%":(a.left=Math.round((e-r.left)/f.prop("offsetWidth")*100)+"%",a.top=Math.round((n-r.top)/f.prop("offsetHeight")*100)+"%"),a}$=s(r.attr("md-ink-ripple"))||s(t.getComputedStyle(o.colorElement[0]).color||"rgb(0, 0, 0)");var f=a(),m=h(i,l),y=d(m,i,l),w=u(y),x=v.indexOf(w),_=b[x]||{};return p=m,_.animating=!0,n(function(){o.dimBackground&&f.css({backgroundColor:$}),w.addClass("md-ripple-placed md-ripple-scaled"),w.css(o.outline?{borderWidth:.5*m+"px",marginLeft:m*-.5+"px",marginTop:m*-.5+"px"}:{left:"50%",top:"50%"}),c(w),n(function(){_.animating=!1,c(w)},o.outline?450:225,!1)},0,!1),w}function h(t){f()&&(u(t.pointer.x,t.pointer.y),x=!0)}function d(){x=!1;var t=v[v.length-1];n(function(){c(t)},0,!1)}function f(){function t(t){return t&&t.hasAttribute&&t.hasAttribute("disabled")}var e=C.parentNode,n=e&&e.parentNode,i=n&&n.parentNode;return!(t(C)||t(e)||t(n)||t(i))}if(r.controller("mdNoInk"))return e.noop;o=e.extend({colorElement:r,mousedown:!0,hover:!0,focus:!0,center:!1,mousedownPauseTime:150,dimBackground:!1,outline:!1,fullRipple:!0,isMenuItem:!1,fitRipple:!1},o);var p,m=r.controller("mdInkRipple")||{},g=0,v=[],b=[],y=r.attr("md-highlight"),w=!1,x=!1,C=r[0],_=r.attr("md-ripple-size"),$=s(r.attr("md-ink-ripple"))||s(o.colorElement.length&&t.getComputedStyle(o.colorElement[0]).color||"rgb(0, 0, 0)");switch(_){case"full":o.fullRipple=!0;break;case"partial":o.fullRipple=!1}return o.mousedown&&r.on("$md.pressdown",h).on("$md.pressup",d),m.createRipple=u,y&&i.$watch(y,function(t){w=t,w&&!v.length&&n(function(){u(0,0)},0,!1),e.forEach(v,c)}),function(){r.off("$md.pressdown",h).off("$md.pressup",d),a().remove()}}return{attach:i}}function i(){return function(){return{controller:e.noop}}}e.module("material.core").factory("$mdInkRipple",n).directive("mdInkRipple",t).directive("mdNoInk",i()).directive("mdNoBar",i()).directive("mdNoStretch",i()),t.$inject=["$mdButtonInkRipple","$mdCheckboxInkRipple"],n.$inject=["$window","$timeout"]}(),function(){!function(){function t(t){function n(n,i,r){return t.attach(n,i,e.extend({center:!1,dimBackground:!0,outline:!1,rippleSize:"full"},r))}return{attach:n}}e.module("material.core").factory("$mdTabInkRipple",t),t.$inject=["$mdInkRipple"]}()}(),function(){e.module("material.core.theming.palette",[]).constant("$mdColorPalette",{red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",A100:"#ff8a80",A200:"#ff5252",A400:"#ff1744",A700:"#d50000",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",A100:"#ff80ab",A200:"#ff4081",A400:"#f50057",A700:"#c51162",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100",contrastStrongLightColors:"500 600 A200 A400 A700"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",A100:"#ea80fc",A200:"#e040fb",A400:"#d500f9",A700:"#aa00ff",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400 A700"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",A100:"#b388ff",A200:"#7c4dff",A400:"#651fff",A700:"#6200ea",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",A100:"#8c9eff",A200:"#536dfe",A400:"#3d5afe",A700:"#304ffe",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 A100",contrastStrongLightColors:"300 400 A200 A400"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",A100:"#82b1ff",A200:"#448aff",A400:"#2979ff",A700:"#2962ff",contrastDefaultColor:"light",contrastDarkColors:"100 200 300 400 A100",contrastStrongLightColors:"500 600 700 A200 A400 A700"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",A100:"#80d8ff",A200:"#40c4ff",A400:"#00b0ff",A700:"#0091ea",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900 A700",contrastStrongLightColors:"500 600 700 800 A700"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",A100:"#84ffff",A200:"#18ffff",A400:"#00e5ff",A700:"#00b8d4",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700 800"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",A100:"#a7ffeb",A200:"#64ffda",A400:"#1de9b6",A700:"#00bfa5",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",A100:"#b9f6ca",A200:"#69f0ae",A400:"#00e676",A700:"#00c853",contrastDefaultColor:"dark",contrastLightColors:"500 600 700 800 900",contrastStrongLightColors:"500 600 700"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",A100:"#ccff90",A200:"#b2ff59",A400:"#76ff03",A700:"#64dd17",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",A100:"#f4ff81",A200:"#eeff41",A400:"#c6ff00",A700:"#aeea00",contrastDefaultColor:"dark",contrastLightColors:"900",contrastStrongLightColors:"900"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",A100:"#ffff8d",A200:"#ffff00",A400:"#ffea00",A700:"#ffd600",contrastDefaultColor:"dark"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",A100:"#ffe57f",A200:"#ffd740",A400:"#ffc400",A700:"#ffab00",contrastDefaultColor:"dark"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",A100:"#ffd180",A200:"#ffab40",A400:"#ff9100",A700:"#ff6d00",contrastDefaultColor:"dark",contrastLightColors:"800 900",contrastStrongLightColors:"800 900"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",A100:"#ff9e80",A200:"#ff6e40",A400:"#ff3d00",A700:"#dd2c00",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300 400 A100 A200",contrastStrongLightColors:"500 600 700 800 900 A400 A700"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723",A100:"#d7ccc8",A200:"#bcaaa4",A400:"#8d6e63",A700:"#5d4037",contrastDefaultColor:"light",contrastDarkColors:"50 100 200",contrastStrongLightColors:"300 400"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",1000:"#000000",A100:"#ffffff",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161",contrastDefaultColor:"dark",contrastLightColors:"600 700 800 900"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",A100:"#cfd8dc",A200:"#b0bec5",A400:"#78909c",A700:"#455a64",contrastDefaultColor:"light",contrastDarkColors:"50 100 200 300",contrastStrongLightColors:"400 500"}})}(),function(){function t(t){function i(t,e){return e=e||{},u[t]=a(t,e),v}function r(t,n){return a(t,e.extend({},u[t]||{},n))}function a(t,e){var n=$.filter(function(t){return!e[t]});if(n.length)throw new Error("Missing colors %1 in palette %2!".replace("%1",n.join(", ")).replace("%2",t));return e}function s(t,n){if(h[t])return h[t];n=n||"default";var i="string"==typeof n?h[n]:n,r=new l(t);return i&&e.forEach(i.colors,function(t,n){r.colors[n]={name:t.name,hues:e.extend({},t.hues)}}),h[t]=r,r}function l(t){function n(t){if(t=0===arguments.length?!0:!!t,t!==i.isDark){i.isDark=t,i.foregroundPalette=i.isDark?p:f,i.foregroundShadow=i.isDark?m:g;var n=i.isDark?_:C,r=i.isDark?C:_;return e.forEach(n,function(t,e){var n=i.colors[e],o=r[e];if(n)for(var a in n.hues)n.hues[a]===o[a]&&(n.hues[a]=t[a])}),i}}var i=this;i.name=t,i.colors={},i.dark=n,n(!1),w.forEach(function(t){var n=(i.isDark?_:C)[t];i[t+"Palette"]=function(r,o){var a=i.colors[t]={name:r,hues:e.extend({},n,o)};return Object.keys(a.hues).forEach(function(t){if(!n[t])throw new Error("Invalid hue name '%1' in theme %2's %3 color %4. Available hue names: %4".replace("%1",t).replace("%2",i.name).replace("%3",r).replace("%4",Object.keys(n).join(", ")))}),Object.keys(a.hues).map(function(t){return a.hues[t]}).forEach(function(e){if(-1==$.indexOf(e))throw new Error("Invalid hue value '%1' in theme %2's %3 color %4. Available hue values: %5".replace("%1",e).replace("%2",i.name).replace("%3",t).replace("%4",r).replace("%5",$.join(", ")))}),i},i[t+"Color"]=function(){var e=Array.prototype.slice.call(arguments);return console.warn("$mdThemingProviderTheme."+t+"Color() has been deprecated. Use $mdThemingProviderTheme."+t+"Palette() instead."),i[t+"Palette"].apply(i,e)}})}function d(t,i){function r(t){return t===n||""===t?!0:o.THEMES[t]!==n}function o(e,i){i===n&&(i=e,e=n),e===n&&(e=t),o.inherit(i,i)}return o.inherit=function(n,o){function a(t){r(t)||i.warn("Attempted to use unregistered theme '"+t+"'. Register it with $mdThemingProvider.theme().");var e=n.data("$mdThemeName");e&&n.removeClass("md-"+e+"-theme"),n.addClass("md-"+t+"-theme"),n.data("$mdThemeName",t)}var s=o.controller("mdTheme"),l=n.attr("md-theme-watch");if((y||e.isDefined(l))&&"false"!=l){var c=t.$watch(function(){return s&&s.$mdTheme||b},a);n.on("$destroy",c)}else{var u=s&&s.$mdTheme||b;a(u)}},o.THEMES=e.extend({},h),o.defaultTheme=function(){return b},o.registered=r,o}u={},h={};var v,b="default",y=!1;return e.extend(u,t),d.$inject=["$rootScope","$log"],v={definePalette:i,extendPalette:r,theme:s,setDefaultTheme:function(t){b=t},alwaysWatchTheme:function(t){y=t},$get:d,_LIGHT_DEFAULT_HUES:C,_DARK_DEFAULT_HUES:_,_PALETTES:u,_THEMES:h,_parseRules:o,_rgba:c}}function i(t,e,n){return{priority:100,link:{pre:function(i,r,o){var a={$setTheme:function(e){t.registered(e)||n.warn("attempted to use unregistered theme '"+e+"'"),a.$mdTheme=e}};r.data("$mdThemeController",a),a.$setTheme(e(o.mdTheme)(i)),o.$observe("mdTheme",a.$setTheme)}}}}function r(t){return t}function o(t,n,i){s(t,n),i=i.replace(/THEME_NAME/g,t.name);var r=[],o=t.colors[n],a=new RegExp(".md-"+t.name+"-theme","g"),l=new RegExp("('|\")?{{\\s*("+n+")-(color|contrast)-?(\\d\\.?\\d*)?\\s*}}(\"|')?","g"),h=/'?"?\{\{\s*([a-zA-Z]+)-(A?\d+|hue\-[0-3]|shadow)-?(\d\.?\d*)?\s*\}\}'?"?/g,d=u[o.name];return i=i.replace(h,function(e,n,i,r){return"foreground"===n?"shadow"==i?t.foregroundShadow:t.foregroundPalette[i]||t.foregroundPalette[1]:(0===i.indexOf("hue")&&(i=t.colors[n].hues[i]),c((u[t.colors[n].name][i]||"").value,r))}),e.forEach(o.hues,function(e,n){var o=i.replace(l,function(t,n,i,r,o){return c(d[e]["color"===r?"value":"contrast"],o)});"default"!==n&&(o=o.replace(a,".md-"+t.name+"-theme.md-"+n)),"default"==t.name&&(o=o.replace(/\.md-default-theme/g,"")),r.push(o)}),r}function a(t){function n(t){var n=t.contrastDefaultColor,i=t.contrastLightColors||[],r=t.contrastStrongLightColors||[],o=t.contrastDarkColors||[];"string"==typeof i&&(i=i.split(" ")),"string"==typeof r&&(r=r.split(" ")),"string"==typeof o&&(o=o.split(" ")),delete t.contrastDefaultColor,delete t.contrastLightColors,delete t.contrastStrongLightColors,delete t.contrastDarkColors,e.forEach(t,function(a,s){function c(){return"light"===n?o.indexOf(s)>-1?v:r.indexOf(s)>-1?y:b:i.indexOf(s)>-1?r.indexOf(s)>-1?y:b:v}if(!e.isObject(a)){var u=l(a);if(!u)throw new Error("Color %1, in palette %2's hue %3, is invalid. Hex or rgb(a) color expected.".replace("%1",a).replace("%2",t.name).replace("%3",s));t[s]={value:u,contrast:c()}}})}var i=document.getElementsByTagName("head")[0],r=i?i.firstElementChild:null,a=t.has("$MD_THEME_CSS")?t.get("$MD_THEME_CSS"):"";if(r&&0!==a.length){e.forEach(u,n);var s={},c=a.split(/\}(?!(\}|'|"|;))/).filter(function(t){return t&&t.length}).map(function(t){return t.trim()+"}"}),f=new RegExp("md-("+w.join("|")+")","g");w.forEach(function(t){s[t]=""}),c.forEach(function(t){for(var e,n=(t.match(f),0);e=w[n];n++)if(t.indexOf(".md-"+e)>-1)return s[e]+=t;for(n=0;e=w[n];n++)if(t.indexOf(e)>-1)return s[e]+=t;return s[x]+=t}),e.forEach(h,function(t){d[t.name]||(w.forEach(function(e){for(var n=o(t,e,s[e]);n.length;){var a=document.createElement("style");a.setAttribute("type","text/css"),a.appendChild(document.createTextNode(n.shift())),i.insertBefore(a,r)}}),t.colors.primary.name==t.colors.accent.name&&console.warn("$mdThemingProvider: Using the same palette for primary and accent. This violates the material design spec."),d[t.name]=!0)})}}function s(t,e){if(!u[(t.colors[e]||{}).name])throw new Error("You supplied an invalid color palette for theme %1's %2 palette. Available palettes: %3".replace("%1",t.name).replace("%2",e).replace("%3",Object.keys(u).join(", ")))}function l(t){if(e.isArray(t)&&3==t.length)return t;if(/^rgb/.test(t))return t.replace(/(^\s*rgba?\(|\)\s*$)/g,"").split(",").map(function(t,e){return 3==e?parseFloat(t,10):parseInt(t,10)});if("#"==t.charAt(0)&&(t=t.substring(1)),/^([a-fA-F0-9]{3}){1,2}$/g.test(t)){var n=t.length/3,i=t.substr(0,n),r=t.substr(n,n),o=t.substr(2*n);return 1===n&&(i+=i,r+=r,o+=o),[parseInt(i,16),parseInt(r,16),parseInt(o,16)]}}function c(t,n){return t?(4==t.length&&(t=e.copy(t),n?t.pop():n=t.pop()),n&&("number"==typeof n||"string"==typeof n&&n.length)?"rgba("+t.join(",")+","+n+")":"rgb("+t.join(",")+")"):"rgb('0,0,0')"}e.module("material.core.theming",["material.core.theming.palette"]).directive("mdTheme",i).directive("mdThemable",r).provider("$mdTheming",t).run(a);var u,h,d={},f={name:"dark",1:"rgba(0,0,0,0.87)",2:"rgba(0,0,0,0.54)",3:"rgba(0,0,0,0.26)",4:"rgba(0,0,0,0.12)"},p={name:"light",1:"rgba(255,255,255,1.0)",2:"rgba(255,255,255,0.7)",3:"rgba(255,255,255,0.3)",4:"rgba(255,255,255,0.12)"},m="1px 1px 0px rgba(0,0,0,0.4), -1px -1px 0px rgba(0,0,0,0.4)",g="",v=l("rgba(0,0,0,0.87)"),b=l("rgba(255,255,255,0.87"),y=l("rgb(255,255,255)"),w=["primary","accent","warn","background"],x="primary",C={accent:{"default":"A200","hue-1":"A100","hue-2":"A400","hue-3":"A700"},background:{"default":"A100","hue-1":"300","hue-2":"800","hue-3":"900"}},_={background:{"default":"800","hue-1":"300","hue-2":"600","hue-3":"900"}};w.forEach(function(t){var e={"default":"500","hue-1":"300","hue-2":"800","hue-3":"A100"};C[t]||(C[t]=e),_[t]||(_[t]=e)});var $=["50","100","200","300","400","500","600","700","800","900","A100","A200","A400","A700"];t.$inject=["$mdColorPalette"],i.$inject=["$mdTheming","$interpolate","$log"],r.$inject=["$mdTheming"],a.$inject=["$injector"]}(),function(){e.module("material.components.autocomplete",["material.core","material.components.icon"])}(),function(){function t(t){return t}e.module("material.components.backdrop",["material.core"]).directive("mdBackdrop",t),t.$inject=["$mdTheming"]}(),function(){function t(){return{restrict:"E"}}function n(t){function n(t,n,o,a,s,l,c,u,h){function d(i,r,h){r=o.extractElementByName(r,"md-bottom-sheet"),m=s('<md-backdrop class="md-opaque md-bottom-sheet-backdrop">')(i),m.on("click",function(){a(c.cancel)}),l.inherit(m,h.parent),t.enter(m,h.parent,null);var d=new p(r,h.parent);return h.bottomSheet=d,h.targetEvent&&e.element(h.targetEvent.target).blur(),l.inherit(d.element,h.parent),h.disableParentScroll&&(h.lastOverflow=h.parent.css("overflow"),h.parent.css("overflow","hidden")),t.enter(d.element,h.parent).then(function(){var t=e.element(r[0].querySelector("button")||r[0].querySelector("a")||r[0].querySelector("[ng-click]"));t.focus(),h.escapeToClose&&(h.rootElementKeyupCallback=function(t){t.keyCode===n.KEY_CODE.ESCAPE&&a(c.cancel)},u.on("keyup",h.rootElementKeyupCallback))})}function f(n,i,r){var o=r.bottomSheet;return t.leave(m),t.leave(o.element).then(function(){r.disableParentScroll&&(r.parent.css("overflow",r.lastOverflow),delete r.lastOverflow),o.cleanup(),r.targetEvent&&e.element(r.targetEvent.target).focus()})}function p(t,e){function o(e){t.css(n.CSS.TRANSITION_DURATION,"0ms")}function s(e){var i=e.pointer.distanceY;5>i&&(i=Math.max(-r,i/2)),t.css(n.CSS.TRANSFORM,"translate3d(0,"+(r+i)+"px,0)")}function l(e){if(e.pointer.distanceY>0&&(e.pointer.distanceY>20||Math.abs(e.pointer.velocityY)>i)){var r=t.prop("offsetHeight")-e.pointer.distanceY,o=Math.min(r/e.pointer.velocityY*.75,500);t.css(n.CSS.TRANSITION_DURATION,o+"ms"),a(c.cancel)}else t.css(n.CSS.TRANSITION_DURATION,""),t.css(n.CSS.TRANSFORM,"")}var u=h.register(e,"drag",{horizontal:!1});return e.on("$md.dragstart",o).on("$md.drag",s).on("$md.dragend",l),{element:t,cleanup:function(){u(),e.off("$md.dragstart",o).off("$md.drag",s).off("$md.dragend",l)}}}var m;return{themable:!0,targetEvent:null,onShow:d,onRemove:f,escapeToClose:!0,disableParentScroll:!0}}var i=.5,r=80;return n.$inject=["$animate","$mdConstant","$mdUtil","$timeout","$compile","$mdTheming","$mdBottomSheet","$rootElement","$mdGesture"],t("$mdBottomSheet").setDefaults({methods:["disableParentScroll","escapeToClose","targetEvent"],options:n})}e.module("material.components.bottomSheet",["material.core","material.components.backdrop"]).directive("mdBottomSheet",t).provider("$mdBottomSheet",n),n.$inject=["$$interimElementProvider"]}(),function(){function t(t,n,i,r){function o(t){return e.isDefined(t.href)||e.isDefined(t.ngHref)||e.isDefined(t.ngLink)||e.isDefined(t.uiSref)}function a(t,e){return o(e)?'<a class="md-button" ng-transclude></a>':'<button class="md-button" ng-transclude></button>'}function s(a,s,l){var c=s[0];n(s),t.attach(a,s);var u=c.textContent.trim();u||i.expect(s,"aria-label"),o(l)&&e.isDefined(l.ngDisabled)&&a.$watch(l.ngDisabled,function(t){s.attr("tabindex",t?-1:0)}),s.on("click",function(t){l.disabled===!0&&(t.preventDefault(),t.stopImmediatePropagation())}),a.mouseActive=!1,s.on("mousedown",function(){a.mouseActive=!0,r(function(){a.mouseActive=!1},100)}).on("focus",function(){a.mouseActive===!1&&s.addClass("md-focused")}).on("blur",function(){s.removeClass("md-focused")})}return{restrict:"EA",replace:!0,transclude:!0,template:a,link:s}}e.module("material.components.button",["material.core"]).directive("mdButton",t),t.$inject=["$mdButtonInkRipple","$mdTheming","$mdAria","$timeout"]}(),function(){function t(t){return{restrict:"E",link:function(e,n,i){t(n)}}}e.module("material.components.card",["material.core"]).directive("mdCard",t),t.$inject=["$mdTheming"]}(),function(){function t(t,n,i,r,o,a,s){function l(n,l){return l.type="checkbox",l.tabindex=l.tabindex||"0",n.attr("role",l.type),function(n,l,u,h){function d(t,e,i){u[t]&&n.$watch(u[t],function(t){i[t]&&l.attr(e,i[t])})}function f(t){var e=t.which||t.keyCode;(e===r.KEY_CODE.SPACE||e===r.KEY_CODE.ENTER)&&(t.preventDefault(),l.hasClass("md-focused")||l.addClass("md-focused"),p(t))}function p(t){l[0].hasAttribute("disabled")||n.$apply(function(){var e=u.ngChecked?u.checked:!h.$viewValue;h.$setViewValue(e,t&&t.type),h.$render()})}function m(){h.$viewValue?l.addClass(c):l.removeClass(c)}h=h||a.fakeNgModel(),o(l),u.ngChecked&&n.$watch(n.$eval.bind(n,u.ngChecked),h.$setViewValue.bind(h)),d("ngDisabled","tabindex",{"true":"-1","false":u.tabindex}),i.expectWithText(l,"aria-label"),t.link.pre(n,{on:e.noop,0:{}},u,[h]),n.mouseActive=!1,l.on("click",p).on("keypress",f).on("mousedown",function(){n.mouseActive=!0,s(function(){n.mouseActive=!1},100)}).on("focus",function(){n.mouseActive===!1&&l.addClass("md-focused")}).on("blur",function(){l.removeClass("md-focused")}),h.$render=m}}t=t[0];var c="md-checked";return{restrict:"E",transclude:!0,require:"?ngModel",priority:210,template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox><div class="md-icon"></div></div><div ng-transclude class="md-label"></div>',compile:l}}e.module("material.components.checkbox",["material.core"]).directive("mdCheckbox",t),t.$inject=["inputDirective","$mdInkRipple","$mdAria","$mdConstant","$mdTheming","$mdUtil","$timeout"]}(),function(){e.module("material.components.chips",["material.core","material.components.autocomplete"])}(),function(){function t(t){function e(t,e){this.$scope=t,this.$element=e}return{restrict:"E",controller:["$scope","$element",e],link:function(e,i,r){i[0];t(i),e.$broadcast("$mdContentLoaded",i),n(i[0])}}}function n(t){e.element(t).on("$md.pressdown",function(e){"t"===e.pointer.type&&(e.$materialScrollFixed||(e.$materialScrollFixed=!0,0===t.scrollTop?t.scrollTop=1:t.scrollHeight===t.scrollTop+t.offsetHeight&&(t.scrollTop-=1)))})}e.module("material.components.content",["material.core"]).directive("mdContent",t),t.$inject=["$mdTheming"]}(),function(){function t(t,e){return{restrict:"E",link:function(n,i,r){e(i),t(function(){var t=i[0].querySelector("md-dialog-content");t&&t.scrollHeight>t.clientHeight&&i.addClass("md-content-overflow")})}}}function n(t){function n(t,e){return{template:['<md-dialog md-theme="{{ dialog.theme }}" aria-label="{{ dialog.ariaLabel }}">','<md-dialog-content role="document" tabIndex="-1">','<h2 class="md-title">{{ dialog.title }}</h2>',"<p>{{ dialog.content }}</p>","</md-dialog-content>",'<div class="md-actions">','<md-button ng-if="dialog.$type == \'confirm\'" ng-click="dialog.abort()" class="md-primary">',"{{ dialog.cancel }}","</md-button>",'<md-button ng-click="dialog.hide()" class="md-primary">',"{{ dialog.ok }}","</md-button>","</div>","</md-dialog>"].join(""),controller:function(){this.hide=function(){t.hide(!0)},this.abort=function(){t.cancel()}},controllerAs:"dialog",bindToController:!0,theme:e.defaultTheme()}}function i(t,n,i,r,o,a,s,l,c,u,h){function d(t){var e=document.querySelector("md-dialog");e&&!e.contains(t.target)&&(t.stopImmediatePropagation(),e.focus())}function f(t,u,h){function f(){var t=u[0].querySelector(".dialog-close");if(!t){var n=u[0].querySelectorAll(".md-actions button");t=n[n.length-1]}return e.element(t)}e.element(n[0].body).addClass("md-dialog-is-showing"),u=i.extractElementByName(u,"md-dialog"),h.parent=e.element(h.parent),h.popInTarget=e.element((h.targetEvent||{}).target);var p=f();if(h.hasBackdrop){var g=h.parent[0]==n[0].body&&n[0].documentElement&&n[0].documentElement.scrollTop?e.element(n[0].documentElement):h.parent,y=g.prop("scrollTop");h.backdrop=e.element('<md-backdrop class="md-dialog-backdrop md-opaque">'),h.backdrop.css("top",y+"px"),o.inherit(h.backdrop,h.parent),c.enter(h.backdrop,h.parent),u.css("top",y+"px")}var w="dialog",x=p;return"alert"===h.$type&&(w="alertdialog",x=u.find("md-dialog-content")),m(u.find("md-dialog"),w,h),document.addEventListener("focus",d,!0),h.disableParentScroll&&(h.lastOverflow=h.parent.css("overflow"),h.parent.css("overflow","hidden")),b(u,h.parent,h.popInTarget&&h.popInTarget.length&&h.popInTarget).then(function(){v(u,!0),h.escapeToClose&&(h.rootElementKeyupCallback=function(t){t.keyCode===r.KEY_CODE.ESCAPE&&s(a.cancel)},l.on("keyup",h.rootElementKeyupCallback)),h.clickOutsideToClose&&(h.dialogClickOutsideCallback=function(t){t.target===u[0]&&s(a.cancel)},u.on("click",h.dialogClickOutsideCallback)),h.focusOnOpen&&x.focus()})}function p(t,i,r){return e.element(n[0].body).removeClass("md-dialog-is-showing"),r.backdrop&&c.leave(r.backdrop),r.disableParentScroll&&(r.parent.css("overflow",r.lastOverflow),delete r.lastOverflow),r.escapeToClose&&l.off("keyup",r.rootElementKeyupCallback),r.clickOutsideToClose&&i.off("click",r.dialogClickOutsideCallback),v(i,!1),document.removeEventListener("focus",d,!0),y(i,r.parent,r.popInTarget&&r.popInTarget.length&&r.popInTarget).then(function(){i.remove(),r.popInTarget&&r.popInTarget.focus()})}function m(e,n,r){e.attr({role:n,tabIndex:"-1"});var o=e.find("md-dialog-content");0===o.length&&(o=e);var a=e.attr("id")||"dialog_"+i.nextUid();o.attr("id",a),e.attr("aria-describedby",a),r.ariaLabel?t.expect(e,"aria-label",r.ariaLabel):t.expectAsync(e,"aria-label",function(){var t=o.text().split(/\s+/);return t.length>3&&(t=t.slice(0,3).concat("...")),t.join(" ")})}function g(t,e){return-1!==e.indexOf(t.nodeName)?!0:void 0}function v(t,e){function n(t){for(;t.parentNode;){if(t===document.body)return;for(var r=t.parentNode.children,o=0;o<r.length;o++)t===r[o]||g(r[o],["SCRIPT","STYLE"])||r[o].setAttribute(i,e);n(t=t.parentNode)}}var i="aria-hidden";t=t[0],n(t)}function b(t,e,n){var o=t.find("md-dialog");return e.append(t),w(o,n),u(function(){o.addClass("transition-in").css(r.CSS.TRANSFORM,"")}),i.transitionEndPromise(o)}function y(t,e,n){var r=t.find("md-dialog");return r.addClass("transition-out").removeClass("transition-in"),w(r,n),i.transitionEndPromise(r)}function w(t,e){if(e){var n=e[0].getBoundingClientRect(),i=t[0].getBoundingClientRect(),o=Math.min(.5,n.width/i.width),a=Math.min(.5,n.height/i.height);t.css(r.CSS.TRANSFORM,"translate3d("+(-i.left+n.left+n.width/2-i.width/2)+"px,"+(-i.top+n.top+n.height/2-i.height/2)+"px,0) scale("+o+","+a+")")}}return{hasBackdrop:!0,isolateScope:!0,onShow:f,onRemove:p,clickOutsideToClose:!1,escapeToClose:!0,targetEvent:null,focusOnOpen:!0,disableParentScroll:!0,transformTemplate:function(t){return'<div class="md-dialog-container">'+t+"</div>"}}}return n.$inject=["$mdDialog","$mdTheming"],i.$inject=["$mdAria","$document","$mdUtil","$mdConstant","$mdTheming","$mdDialog","$timeout","$rootElement","$animate","$$rAF","$q"],t("$mdDialog").setDefaults({methods:["disableParentScroll","hasBackdrop","clickOutsideToClose","escapeToClose","targetEvent","parent"],options:i}).addPreset("alert",{methods:["title","content","ariaLabel","ok","theme"],options:n}).addPreset("confirm",{methods:["title","content","ariaLabel","ok","cancel","theme"],options:n})}e.module("material.components.dialog",["material.core","material.components.backdrop"]).directive("mdDialog",t).provider("$mdDialog",n),t.$inject=["$$rAF","$mdTheming"],n.$inject=["$$interimElementProvider"]}(),function(){function t(t){return{restrict:"E",link:t}}e.module("material.components.divider",["material.core"]).directive("mdDivider",t),t.$inject=["$mdTheming"]}(),function(){!function(){function t(){return{restrict:"E",require:["^?mdFabSpeedDial","^?mdFabToolbar"],link:function(t,n,i,r){var o=r[0]||r[1];o&&e.forEach(n.children(),function(t){e.element(t).on("focus",o.open),e.element(t).on("blur",o.close)}),n.children().wrap('<div class="md-fab-action-item">')}}}e.module("material.components.fabActions",["material.core"]).directive("mdFabActions",t)}()}(),function(){!function(){function t(){function t(t,e){e.prepend('<div class="md-css-variables"></div>')}function e(t,e,n){function i(){a.direction=a.direction||"down",a.isOpen=a.isOpen||!1}function r(){e.on("mouseenter",a.open),e.on("mouseleave",a.close)}function o(){t.$watch("vm.direction",function(t,i){n.removeClass(e,"md-"+i),n.addClass(e,"md-"+t)}),t.$watch("vm.isOpen",function(t){var i=t?"md-is-open":"",r=t?"":"md-is-open";n.setClass(e,i,r)})}var a=this;a.open=function(){t.$apply("vm.isOpen = true")},a.close=function(){t.$apply("vm.isOpen = false")},i(),r(),o()}return e.$inject=["$scope","$element","$animate"],{restrict:"E",scope:{direction:"@?mdDirection",isOpen:"=?mdOpen"},bindToController:!0,controller:e,controllerAs:"vm",link:t}}function n(){function t(t){var n=t[0],i=t.controller("mdFabSpeedDial"),r=n.querySelectorAll(".md-fab-action-item"),o=n.querySelector(".md-css-variables"),a=o.style.zIndex;e.forEach(r,function(t,e){var n=t.style;n.transform="",n.transitionDelay="",n.opacity=1,t.style.zIndex=r.length-e+a}),i.isOpen||e.forEach(r,function(t,e){var n,r;switch(i.direction){case"up":n=t.scrollHeight*(e+1),r="Y";break;case"down":n=-t.scrollHeight*(e+1),r="Y";break;case"left":n=t.scrollWidth*(e+1),r="X";break;case"right":n=-t.scrollWidth*(e+1),r="X"}t.style.transform="translate"+r+"("+n+"px)"})}return{addClass:function(e,n,i){e.hasClass("md-fling")&&t(e)},removeClass:function(e,n,i){t(e)}}}function i(){function t(t){var i=t[0],r=t.controller("mdFabSpeedDial"),o=i.querySelectorAll(".md-fab-action-item");e.forEach(o,function(t,e){var i=t.style,a=e*n;i.opacity=r.isOpen?1:0,i.transform=r.isOpen?"scale(1)":"scale(0)",i.transitionDelay=(r.isOpen?a:o.length-a)+"ms"})}var n=65;return{addClass:function(e,n,i){t(e)},removeClass:function(e,n,i){t(e)}}}e.module("material.components.fabSpeedDial",["material.core","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabSpeedDial",t).animation(".md-fling",n).animation(".md-scale",i)}()}(),function(){!function(){function n(){function t(t,e,n){var i=this;i.isOpen=i.isOpen||!1,i.open=function(){i.isOpen=!0,t.$apply()},i.close=function(){i.isOpen=!1,t.$apply()},e.addClass("md-fab-toolbar"),e.on("mouseenter",i.open),e.on("mouseleave",i.close),t.$watch("vm.isOpen",function(t){var i=t?"md-is-open":"",r=t?"":"md-is-open";n.setClass(e,i,r)})}function e(t,e,n){e.find("md-fab-trigger").find("button").attr("tabindex","-1"),e.find("md-fab-trigger").find("button").prepend('<div class="md-fab-toolbar-background"></div>')}return t.$inject=["$scope","$element","$animate"],{restrict:"E",transclude:!0,template:'<div class="md-fab-toolbar-wrapper">  <div class="md-fab-toolbar-content" ng-transclude></div></div>',scope:{isOpen:"=?mdOpen"},bindToController:!0,controller:t,controllerAs:"vm",link:e}}function i(){function n(n,i,r){var o=n[0],a=n.controller("mdFabToolbar"),s=o.querySelector(".md-fab-toolbar-background"),l=o.querySelector("md-fab-trigger button"),c=o.querySelector("md-fab-trigger button md-icon"),u=n.find("md-fab-actions").children();if(l&&s){var h=t.getComputedStyle(l).getPropertyValue("background-color"),d=o.offsetWidth,f=(o.offsetHeight,2*d);s.style.backgroundColor=h,s.style.borderRadius=d+"px",a.isOpen?(s.style.width=f+"px",s.style.height=f+"px",s.style.top=-(f/2)+"px",n.hasClass("md-left")&&(s.style.left=-(f/2)+"px",s.style.right=null),n.hasClass("md-right")&&(s.style.right=-(f/2)+"px",s.style.left=null),s.style.transitionDelay="0ms",c.style.transitionDelay=".3s",e.forEach(u,function(t,e){t.style.transitionDelay=25*(u.length-e)+"ms"})):(s.style.width=l.offsetWidth+"px",s.style.height=l.offsetHeight+"px",s.style.top="0px",n.hasClass("md-left")&&(s.style.left="0px",s.style.right=null),n.hasClass("md-right")&&(s.style.right="0px",s.style.left=null),s.style.transitionDelay="200ms",c.style.transitionDelay="0ms",e.forEach(u,function(t,e){t.style.transitionDelay=25*e+"ms"}))}}return{addClass:function(t,e,i){n(t,e,i)},removeClass:function(t,e,i){n(t,e,i)}}}e.module("material.components.fabToolbar",["material.core","material.components.fabTrigger","material.components.fabActions"]).directive("mdFabToolbar",n).animation(".md-fab-toolbar",i)}()}(),function(){!function(){function t(){return{restrict:"E",require:["^?mdFabSpeedDial","^?mdFabToolbar"],link:function(t,n,i,r){var o=r[0]||r[1];o&&e.forEach(n.children(),function(t){
e.element(t).on("focus",o.open),e.element(t).on("blur",o.close)})}}}e.module("material.components.fabTrigger",["material.core"]).directive("mdFabTrigger",t)}()}(),function(){function t(t,i,r,o){function a(n,a,s,l){function c(){for(var t in i.MEDIA)o(t),o.getQuery(i.MEDIA[t]).addListener(_);return o.watchResponsiveAttributes(["md-cols","md-row-height"],s,h)}function u(){l.layoutDelegate=e.noop,$();for(var t in i.MEDIA)o.getQuery(i.MEDIA[t]).removeListener(_)}function h(t){null==t?l.invalidateLayout():o(t)&&l.invalidateLayout()}function d(t){var i=g(),o={tileSpans:v(i),colCount:b(),rowMode:x(),rowHeight:w(),gutter:y()};if(t||!e.equals(o,S)){var s=r(o.colCount,o.tileSpans,i).map(function(t,n){return{grid:{element:a,style:m(o.colCount,n,o.gutter,o.rowMode,o.rowHeight)},tiles:t.map(function(t,n){return{element:e.element(i[n]),style:p(t.position,t.spans,o.colCount,o.rowCount,o.gutter,o.rowMode,o.rowHeight)}})}}).reflow().performance();n.mdOnLayout({$event:{performance:s}}),S=o}}function f(t){return E+t+T}function p(t,e,n,i,r,o,a){var s=1/n*100,l=(n-1)/n,c=k({share:s,gutterShare:l,gutter:r}),u={left:A({unit:c,offset:t.col,gutter:r}),width:M({unit:c,span:e.col,gutter:r}),paddingTop:"",marginTop:"",top:"",height:""};switch(o){case"fixed":u.top=A({unit:a,offset:t.row,gutter:r}),u.height=M({unit:a,span:e.row,gutter:r});break;case"ratio":var h=s/a,d=k({share:h,gutterShare:l,gutter:r});u.paddingTop=M({unit:d,span:e.row,gutter:r}),u.marginTop=A({unit:d,offset:t.row,gutter:r});break;case"fit":var f=(i-1)/i,h=1/i*100,d=k({share:h,gutterShare:f,gutter:r});u.top=A({unit:d,offset:t.row,gutter:r}),u.height=M({unit:d,span:e.row,gutter:r})}return u}function m(t,e,n,i,r){var o={height:"",paddingBottom:""};switch(i){case"fixed":o.height=M({unit:r,span:e,gutter:n});break;case"ratio":var a=1===t?0:(t-1)/t,s=1/t*100,l=s*(1/r),c=k({share:l,gutterShare:a,gutter:n});o.paddingBottom=M({unit:c,span:e,gutter:n});break;case"fit":}return o}function g(){return[].filter.call(a.children(),function(t){return"MD-GRID-TILE"==t.tagName})}function v(t){return[].map.call(t,function(t){var n=e.element(t).controller("mdGridTile");return{row:parseInt(o.getResponsiveAttribute(n.$attrs,"md-rowspan"),10)||1,col:parseInt(o.getResponsiveAttribute(n.$attrs,"md-colspan"),10)||1}})}function b(){var t=parseInt(o.getResponsiveAttribute(s,"md-cols"),10);if(isNaN(t))throw"md-grid-list: md-cols attribute was not found, or contained a non-numeric value";return t}function y(){return C(o.getResponsiveAttribute(s,"md-gutter")||1)}function w(){var t=o.getResponsiveAttribute(s,"md-row-height");switch(x()){case"fixed":return C(t);case"ratio":var e=t.split(":");return parseFloat(e[0])/parseFloat(e[1]);case"fit":return 0}}function x(){var t=o.getResponsiveAttribute(s,"md-row-height");return"fit"==t?"fit":-1!==t.indexOf(":")?"ratio":"fixed"}function C(t){return/\D$/.test(t)?t:t+"px"}a.attr("role","list"),l.layoutDelegate=d;var _=e.bind(l,l.invalidateLayout),$=c();n.$on("$destroy",u);var S,E=t.startSymbol(),T=t.endSymbol(),k=t(f("share")+"% - ("+f("gutter")+" * "+f("gutterShare")+")"),A=t("calc(("+f("unit")+" + "+f("gutter")+") * "+f("offset")+")"),M=t("calc(("+f("unit")+") * "+f("span")+" + ("+f("span")+" - 1) * "+f("gutter")+")")}return{restrict:"E",controller:n,scope:{mdOnLayout:"&"},link:a}}function n(t){this.layoutInvalidated=!1,this.tilesInvalidated=!1,this.$timeout_=t,this.layoutDelegate=e.noop}function i(t){function n(e,n){var i,a,s,l,c,u;return l=t.time(function(){a=r(e,n)}),i={layoutInfo:function(){return a},map:function(e){return c=t.time(function(){var t=i.layoutInfo();s=e(t.positioning,t.rowCount)}),i},reflow:function(e){return u=t.time(function(){var t=e||o;t(s.grid,s.tiles)}),i},performance:function(){return{tileCount:n.length,layoutTime:l,mapTime:c,reflowTime:u,totalTime:l+c+u}}}}function i(t,e){t.element.css(t.style),e.forEach(function(t){t.element.css(t.style)})}function r(t,e){function n(e,n){if(e.col>t)throw"md-grid-list: Tile at position "+n+" has a colspan ("+e.col+") that exceeds the column count ("+t+")";for(var a=0,u=0;u-a<e.col;)s>=t?i():(a=c.indexOf(0,s),-1!==a&&-1!==(u=o(a+1))?s=u+1:(a=u=0,i()));return r(a,e.col,e.row),s=a+e.col,{col:a,row:l}}function i(){s=0,l++,r(0,t,-1)}function r(t,e,n){for(var i=t;t+e>i;i++)c[i]=Math.max(c[i]+n,0)}function o(t){var e;for(e=t;e<c.length;e++)if(0!==c[e])return e;return e===c.length?e:void 0}function a(){for(var e=[],n=0;t>n;n++)e.push(0);return e}var s=0,l=0,c=a();return{positioning:e.map(function(t,e){return{spans:t,position:n(t,e)}}),rowCount:l+Math.max.apply(Math,c)}}var o=i;return n.animateWith=function(t){o=e.isFunction(t)?t:i},n}function r(t){function n(n,i,r,o){i.attr("role","listitem");var a=t.watchResponsiveAttributes(["md-colspan","md-rowspan"],r,e.bind(o,o.invalidateLayout));o.invalidateTiles(),n.$on("$destroy",function(){a(),o.invalidateLayout()}),e.isDefined(n.$parent.$index)&&n.$watch(function(){return n.$parent.$index},function(t,e){t!==e&&o.invalidateTiles()})}return{restrict:"E",require:"^mdGridList",template:"<figure ng-transclude></figure>",transclude:!0,scope:{},controller:["$attrs",function(t){this.$attrs=t}],link:n}}function o(){return{template:"<figcaption ng-transclude></figcaption>",transclude:!0}}e.module("material.components.gridList",["material.core"]).directive("mdGridList",t).directive("mdGridTile",r).directive("mdGridTileFooter",o).directive("mdGridTileHeader",o).factory("$mdGridLayout",i),t.$inject=["$interpolate","$mdConstant","$mdGridLayout","$mdMedia"],n.$inject=["$timeout"],n.prototype={invalidateTiles:function(){this.tilesInvalidated=!0,this.invalidateLayout()},invalidateLayout:function(){this.layoutInvalidated||(this.layoutInvalidated=!0,this.$timeout_(e.bind(this,this.layout)))},layout:function(){try{this.layoutDelegate(this.tilesInvalidated)}finally{this.layoutInvalidated=!1,this.tilesInvalidated=!1}}},i.$inject=["$mdUtil"],r.$inject=["$mdMedia"]}(),function(){function t(t,n,i,r){function o(r,o,a){function s(){var t=o.parent();return t.attr("aria-label")||t.text()?!0:t.parent().attr("aria-label")||t.parent().text()?!0:!1}function l(){r.svgIcon||r.svgSrc||(r.fontIcon&&(o.addClass("md-font"),o.addClass(r.fontIcon)),r.fontSet&&o.addClass(t.fontSet(r.fontSet)),r.fontIcon||r.fontSet||e.isDefined(a["class"])||o.addClass("material-icons"))}n(o),l();var c=a.alt||r.fontIcon||r.svgIcon||o.text(),u=a.$normalize(a.$attr.mdSvgIcon||a.$attr.mdSvgSrc||"");a["aria-label"]||(""==c||s()?o.text()||i.expect(o,"aria-hidden","true"):(i.expect(o,"aria-label",c),i.expect(o,"role","img"))),u&&a.$observe(u,function(e){o.empty(),e&&t(e).then(function(t){o.append(t)})})}return{scope:{fontSet:"@mdFontSet",fontIcon:"@mdFontIcon",svgIcon:"@mdSvgIcon",svgSrc:"@mdSvgSrc"},restrict:"E",link:o}}e.module("material.components.icon",["material.core"]).directive("mdIcon",t),t.$inject=["$mdIcon","$mdTheming","$mdAria","$interpolate"]}(),function(){function t(){}function n(t,e){this.url=t,this.viewBoxSize=e||r.defaultViewBoxSize}function i(t,n,i,r,o){function a(t){return t=t||"",b[t]?i.when(b[t].clone()):y.test(t)?h(t).then(l(t)):(-1==t.indexOf(":")&&(t="$default:"+t),c(t)["catch"](u)["catch"](d)["catch"](f).then(l(t)))}function s(n){var i=e.isUndefined(n)||!(n&&n.length);if(i)return t.defaultFontSet;var r=n;return e.forEach(t.fontSets,function(t){t.alias==n&&(r=t.fontSet||r)}),r}function l(e){return function(n){return b[e]=p(n)?n:new m(n,t[e]),b[e].clone()}}function c(e){var n=t[e];return n?h(n.url).then(function(t){return new m(t,n)}):i.reject(e)}function u(e){function n(t){var n=e.slice(e.lastIndexOf(":")+1),r=t.querySelector("#"+n);return r?new m(r,o):i.reject(e)}var r=e.substring(0,e.lastIndexOf(":"))||"$default",o=t[r];return o?h(o.url).then(n):i.reject(e)}function h(t){return n.get(t,{cache:o}).then(function(t){return e.element("<div>").append(t.data).find("svg")[0]})}function d(t){var n;return e.isString(t)&&(n="icon "+t+" not found",r.warn(n)),i.reject(n||t)}function f(t){var n=e.isString(t)?t:t.message||t.data||t.statusText;return r.warn(n),i.reject(n)}function p(t){return e.isDefined(t.element)&&e.isDefined(t.config)}function m(t,n){"svg"!=t.tagName&&(t=e.element('<svg xmlns="http://www.w3.org/2000/svg">').append(t)[0]),t.getAttribute("xmlns")||t.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.element=t,this.config=n,this.prepare()}function g(){var n=this.config?this.config.viewBoxSize:t.defaultViewBoxSize;e.forEach({fit:"",height:"100%",width:"100%",preserveAspectRatio:"xMidYMid meet",viewBox:this.element.getAttribute("viewBox")||"0 0 "+n+" "+n},function(t,e){this.element.setAttribute(e,t)},this),e.forEach({"pointer-events":"none",display:"block"},function(t,e){this.element.style[e]=t},this)}function v(){return this.element.cloneNode(!0)}var b={},y=/[-a-zA-Z0-9@:%_\+.~#?&//=]{2,256}\.[a-z]{2,4}\b(\/[-a-zA-Z0-9@:%_\+.~#?&//=]*)?/i;return m.prototype={clone:v,prepare:g},a.fontSet=s,a}e.module("material.components.icon").provider("$mdIcon",t);var r={defaultViewBoxSize:24,defaultFontSet:"material-icons",fontSets:[]};t.prototype={icon:function(t,e,i){return-1==t.indexOf(":")&&(t="$default:"+t),r[t]=new n(e,i),this},iconSet:function(t,e,i){return r[t]=new n(e,i),this},defaultIconSet:function(t,e){var i="$default";return r[i]||(r[i]=new n(t,e)),r[i].viewBoxSize=e||r.defaultViewBoxSize,this},defaultViewBoxSize:function(t){return r.defaultViewBoxSize=t,this},fontSet:function(t,e){r.fontSets.push({alias:t,fontSet:e||t})},defaultFontSet:function(t){return r.defaultFontSet=t?t:"",this},defaultIconSize:function(t){return r.defaultIconSize=t,this},preloadIcons:function(t){var e=this,n=[{id:"md-tabs-arrow",url:"md-tabs-arrow.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><g><polygon points="15.4,7.4 14,6 8,12 14,18 15.4,16.6 10.8,12 "/></g></svg>'},{id:"md-close",url:"md-close.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><g><path d="M19 6.41l-1.41-1.41-5.59 5.59-5.59-5.59-1.41 1.41 5.59 5.59-5.59 5.59 1.41 1.41 5.59-5.59 5.59 5.59 1.41-1.41-5.59-5.59z"/></g></svg>'},{id:"md-cancel",url:"md-cancel.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 24 24"><g><path d="M12 2c-5.53 0-10 4.47-10 10s4.47 10 10 10 10-4.47 10-10-4.47-10-10-10zm5 13.59l-1.41 1.41-3.59-3.59-3.59 3.59-1.41-1.41 3.59-3.59-3.59-3.59 1.41-1.41 3.59 3.59 3.59-3.59 1.41 1.41-3.59 3.59 3.59 3.59z"/></g></svg>'},{id:"md-menu",url:"md-menu.svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 100 100"><path d="M 50 0 L 100 14 L 92 80 L 50 100 L 8 80 L 0 14 Z" fill="#b2b2b2"></path><path d="M 50 5 L 6 18 L 13.5 77 L 50 94 Z" fill="#E42939"></path><path d="M 50 5 L 94 18 L 86.5 77 L 50 94 Z" fill="#B72833"></path><path d="M 50 7 L 83 75 L 72 75 L 65 59 L 50 59 L 50 50 L 61 50 L 50 26 Z" fill="#b2b2b2"></path><path d="M 50 7 L 17 75 L 28 75 L 35 59 L 50 59 L 50 50 L 39 50 L 50 26 Z" fill="#fff"></path></svg>'},{id:"md-toggle-arrow",url:"md-toggle-arrow-svg",svg:'<svg version="1.1" x="0px" y="0px" viewBox="0 0 48 48"><path d="M24 16l-12 12 2.83 2.83 9.17-9.17 9.17 9.17 2.83-2.83z"/><path d="M0 0h48v48h-48z" fill="none"/></svg>'}];n.forEach(function(n){e.icon(n.id,n.url),t.put(n.url,n.svg)})},$get:["$http","$q","$log","$templateCache",function(t,e,n,o){return this.preloadIcons(o),i(r,t,e,n,o)}]}}(),function(){function t(t,e){function n(e,n,i){t(n)}function i(t,n,i){var r=this;r.isErrorGetter=i.mdIsError&&e(i.mdIsError),r.delegateClick=function(){r.input.focus()},r.element=n,r.setFocused=function(t){n.toggleClass("md-input-focused",!!t)},r.setHasValue=function(t){n.toggleClass("md-input-has-value",!!t)},r.setInvalid=function(t){n.toggleClass("md-input-invalid",!!t)},t.$watch(function(){return r.label&&r.input},function(t){t&&!r.label.attr("for")&&r.label.attr("for",r.input.attr("id"))})}return i.$inject=["$scope","$element","$attrs"],{restrict:"E",link:n,controller:i}}function n(){return{restrict:"E",require:"^?mdInputContainer",link:function(t,e,n,i){i&&!n.mdNoFloat&&(i.label=e,t.$on("$destroy",function(){i.label=null}))}}}function i(t,n,i){function r(r,o,a,s){function l(t){return h.setHasValue(!d.$isEmpty(t)),t}function c(){h.setHasValue(o.val().length>0||(o[0].validity||{}).badInput)}function u(){function i(t){return u(),t}function a(){c.style.height="auto",c.scrollTop=0;var t=s();t&&(c.style.height=t+"px")}function s(){var t=c.scrollHeight-c.offsetHeight;return c.offsetHeight+(t>0?t:0)}function l(t){c.scrollTop=0;var e=c.scrollHeight-c.offsetHeight,n=c.offsetHeight+e;c.style.height=n+"px"}var c=o[0],u=t.debounce(a,1);d?(d.$formatters.push(i),d.$viewChangeListeners.push(i)):u(),o.on("keydown input",u),o.on("scroll",l),e.element(n).on("resize",u),r.$on("$destroy",function(){e.element(n).off("resize",u)})}var h=s[0],d=s[1]||t.fakeNgModel(),f=e.isDefined(a.readonly);if(h){if(h.input)throw new Error("<md-input-container> can only have *one* <input> or <textarea> child element!");h.input=o,h.label||i.expect(o,"aria-label",o.attr("placeholder")),o.addClass("md-input"),o.attr("id")||o.attr("id","input_"+t.nextUid()),"textarea"===o[0].tagName.toLowerCase()&&u();var p=h.isErrorGetter||function(){return d.$invalid&&d.$touched};r.$watch(p,h.setInvalid),d.$parsers.push(l),d.$formatters.push(l),o.on("input",c),f||o.on("focus",function(t){h.setFocused(!0)}).on("blur",function(t){h.setFocused(!1),c()}),r.$on("$destroy",function(){h.setFocused(!1),h.setHasValue(!1),h.input=null})}}return{restrict:"E",require:["^?mdInputContainer","?ngModel"],link:r}}function r(t){function n(n,i,r,o){function a(t){return u.text((i.val()||t||"").length+"/"+s),t}var s,l=o[0],c=o[1],u=e.element('<div class="md-char-counter">');r.$set("ngTrim","false"),c.element.append(u),l.$formatters.push(a),l.$viewChangeListeners.push(a),i.on("input keydown",function(){a()}),n.$watch(r.mdMaxlength,function(n){s=n,e.isNumber(n)&&n>0?(u.parent().length||t.enter(u,c.element,e.element(c.element[0].lastElementChild)),a()):t.leave(u)}),l.$validators["md-maxlength"]=function(t,n){return!e.isNumber(s)||0>s?!0:(t||i.val()||n||"").length<=s}}return{restrict:"A",require:["ngModel","^mdInputContainer"],link:n}}function o(t){function n(n,r,o,a){if(a&&-1==i.indexOf(r[0].nodeName)&&!e.isDefined(a.element.attr("md-no-float"))){var s=o.placeholder;if(r.removeAttr("placeholder"),0==a.element.find("label").length){var l='<label ng-click="delegateClick()">'+s+"</label>";a.element.addClass("md-icon-float"),a.element.prepend(l)}else t.warn("The placeholder='"+s+"' will be ignored since this md-input-container has a child label element.")}}var i=["MD-SELECT"];return{restrict:"A",require:"^^?mdInputContainer",priority:200,link:n}}e.module("material.components.input",["material.core"]).directive("mdInputContainer",t).directive("label",n).directive("input",i).directive("textarea",i).directive("mdMaxlength",r).directive("placeholder",o),t.$inject=["$mdTheming","$parse"],i.$inject=["$mdUtil","$window","$mdAria"],r.$inject=["$animate"],o.$inject=["$log"]}(),function(){function t(t){return{restrict:"E",compile:function(e){return e[0].setAttribute("role","list"),t}}}function n(t,n,i){var r=["md-checkbox","md-switch"];return{restrict:"E",controller:"MdListController",compile:function(o,a){function s(){for(var t,e,n=["md-switch","md-checkbox"],i=0;e=n[i];++i)if((t=o.find(e)[0])&&!t.hasAttribute("aria-label")){var r=o.find("p")[0];if(!r)return;t.setAttribute("aria-label","Toggle "+r.textContent)}}function l(n){var i;if("div"==n)i=e.element('<div class="md-no-style md-list-item-inner">'),i.append(o.contents()),o.addClass("md-proxy-focus");else{i=e.element('<md-button class="md-no-style"><div class="md-list-item-inner"></div></md-button>');var r=["ng-click","aria-label","ng-disabled"];e.forEach(r,function(t){o[0].hasAttribute(t)&&(i[0].setAttribute(t,o[0].getAttribute(t)),o[0].removeAttribute(t))}),i.children().eq(0).append(o.contents())}if(o[0].setAttribute("tabindex","-1"),o.append(i),f&&f.hasAttribute("ng-click")){t.expect(f,"aria-label");var s=e.element('<md-button class="md-secondary-container md-icon-button">');s.attr("ng-click",f.getAttribute("ng-click")),f.removeAttribute("ng-click"),f.setAttribute("tabindex","-1"),f.classList.remove("md-secondary"),s.append(f),f=s[0]}f&&(f.hasAttribute("ng-click")||a.ngClick&&c(f))&&(o.addClass("md-with-secondary"),o.append(f))}function c(t){return-1!=r.indexOf(t.nodeName.toLowerCase())}function u(t,o,a,s){function l(){var t=o.children();t.length&&!t[0].hasAttribute("ng-click")&&e.forEach(r,function(t){e.forEach(h.querySelectorAll(t),function(t){u.push(t)})})}function c(){(u.length||d)&&(o.addClass("md-clickable"),s.attachRipple(t,e.element(o[0].querySelector(".md-no-style"))))}var u=[],h=o[0].firstElementChild,d=h&&h.hasAttribute("ng-click");l(),c(),o.hasClass("md-proxy-focus")&&u.length&&e.forEach(u,function(n){n=e.element(n),t.mouseActive=!1,n.on("mousedown",function(){t.mouseActive=!0,i(function(){t.mouseActive=!1},100)}).on("focus",function(){t.mouseActive===!1&&o.addClass("md-focused"),n.on("blur",function e(){o.removeClass("md-focused"),n.off("blur",e)})})}),d||u.length||h&&h.addEventListener("keypress",function(t){if("INPUT"!=t.target.nodeName&&"TEXTAREA"!=t.target.nodeName){var e=t.which||t.keyCode;e==n.KEY_CODE.SPACE&&h&&(h.click(),t.preventDefault(),t.stopPropagation())}}),o.off("click"),o.off("keypress"),u.length&&h&&o.children().eq(0).on("click",function(t){h.contains(t.target)&&e.forEach(u,function(n){t.target===n||n.contains(t.target)||e.element(n).triggerHandler("click")})})}var h,d,f=o[0].querySelector(".md-secondary");if(o[0].setAttribute("role","listitem"),a.ngClick)l("button");else{for(var p,m=0;p=r[m];++m)if(d=o[0].querySelector(p)){h=!0;break}h?l("div"):o[0].querySelector("md-button")||o.addClass("md-no-proxy")}return s(),u}}}function i(t,e,n){function i(t,e){var i={};n.attach(t,e,i)}var r=this;r.attachRipple=i}e.module("material.components.list",["material.core"]).controller("MdListController",i).directive("mdList",t).directive("mdListItem",n),t.$inject=["$mdTheming"],n.$inject=["$mdAria","$mdConstant","$timeout"],i.$inject=["$scope","$element","$mdListInkRipple"]}(),function(){function t(t){function n(t){t.addClass("md-menu");var e=t.children()[0];if(e.hasAttribute("ng-click")||(e=e.querySelector("[ng-click]")),e&&e.setAttribute("aria-haspopup","true"),2!=t.children().length)throw Error("Invalid HTML for md-menu. Expected two children elements.");return i}function i(t,n,i,r){var o=e.element('<div class="md-open-menu-container md-whiteframe-z2"></div>'),a=n.children()[1];o.append(a),r.init(o),t.$on("$destroy",function(){r.isOpen&&(o.remove(),r.close())})}return{restrict:"E",require:"mdMenu",controller:"mdMenuCtrl",scope:!0,compile:n}}function n(t,e,n,i){var r,o,a=this;this.init=function(t){r=t,o=n[0].querySelector("[ng-click]")},this.open=function(e){e&&e.stopPropagation(),a.isOpen=!0,o.setAttribute("aria-expanded","true"),t.show({mdMenuCtrl:a,element:r,target:n[0]})},i.$mdOpenMenu=this.open,this.close=function(e){a.isOpen=!1,o.setAttribute("aria-expanded","false"),t.hide(),e||n.children()[0].focus()},this.positionMode=function(){var t=(e.mdPositionMode||"target").split(" ");return 1==t.length&&t.push(t[0]),{left:t[0],top:t[1]}},this.offsets=function(){var t=(e.mdOffset||"0 0").split(" ").map(parseFloat);if(2==t.length)return{left:t[0],top:t[1]};if(1==t.length)return{top:t[0],left:t[0]};throw Error("Invalid offsets specified. Please follow format <x, y> or <n>")}}e.module("material.components.menu",["material.core","material.components.backdrop"]).directive("mdMenu",t).controller("mdMenuCtrl",n),t.$inject=["$mdMenu"],n.$inject=["$mdMenu","$attrs","$element","$scope"]}(),function(){function t(t){function i(t,i,o,a,s,l,c){function u(n,r,c){function u(){if(!c.target)throw Error("$mdMenu.show() expected a target to animate from in options.target");e.extend(c,{alreadyOpen:!1,isRemoved:!1,target:e.element(c.target),parent:e.element(c.parent),menuContentEl:e.element(r[0].querySelector("md-menu-content")),backdrop:c.hasBackdrop&&e.element('<md-backdrop class="md-menu-backdrop md-click-catcher">')})}function d(){c.resizeFn=function(){p(r,c)},e.element(i).on("resize",c.resizeFn),e.element(i).on("orientationchange",c.resizeFn)}function f(){c.parent.append(r),r.removeClass("md-leave"),t(function(){t(function(){p(r,c),t(function(){r.addClass("md-active"),c.alreadyOpen=!0,r[0].style[l.CSS.TRANSFORM]=""})})})}function m(){r.addClass("md-clickable"),c.backdrop&&c.backdrop.on("click",function(t){t.preventDefault(),t.stopPropagation(),c.mdMenuCtrl.close(!0)}),c.menuContentEl.on("keydown",function(t){n.$apply(function(){switch(t.keyCode){case l.KEY_CODE.ESCAPE:c.mdMenuCtrl.close();break;case l.KEY_CODE.UP_ARROW:h(t,c.menuContentEl,c,-1);break;case l.KEY_CODE.DOWN_ARROW:h(t,c.menuContentEl,c,1)}})}),c.menuContentEl.on("click",function(t){function e(){n.$apply(function(){c.mdMenuCtrl.close()})}var i=t.target;do if(i&&i.hasAttribute("ng-click")){i.hasAttribute("disabled")||e();break}while((i=i.parentNode)&&i!=c.menuContentEl)});var t=c.menuContentEl[0].querySelector("[md-menu-focus-target]");t||(t=c.menuContentEl[0].firstElementChild.firstElementChild),t.focus()}return u(c),a.inherit(c.menuContentEl,c.target),d(),c.disableParentScroll&&(c.restoreScroll=o.disableScrollAround(c.element)),s(m,75,!1),c.backdrop&&(a.inherit(c.backdrop,c.parent),c.parent.append(c.backdrop)),f(),o.transitionEndPromise(r,{timeout:350})}function h(t,e,n,i){for(var r=o.getClosest(t.target,"MD-MENU-ITEM"),a=o.nodesToArray(e[0].children),s=a.indexOf(r),l=s+i;l>=0&&l<a.length;l+=i){var c=a[l].firstElementChild||a[l],u=d(c);if(u)break}}function d(t){return t&&-1!=t.getAttribute("tabindex")?(t.focus(),c[0].activeElement==t?!0:!1):void 0}function f(t,r,a){return a.isRemoved=!0,r.addClass("md-leave").removeClass("md-clickable"),e.element(i).off("resize",a.resizeFn),e.element(i).off("orientationchange",a.resizeFn),a.resizeFn=n,o.transitionEndPromise(r,{timeout:350}).then(function(){r.removeClass("md-active"),a.backdrop&&a.backdrop.remove(),r[0].parentNode===a.parent[0]&&a.parent[0].removeChild(r[0]),a.restoreScroll&&a.restoreScroll()})}function p(t,e){function n(t){t.top=Math.max(Math.min(t.top,m.bottom-s.offsetHeight),m.top),t.left=Math.max(Math.min(t.left,m.right-s.offsetWidth),m.left)}if(!e.isRemoved){var i,o,a,s=t[0],c=t[0].firstElementChild,u=c.getBoundingClientRect(),h=e.parent[0],d=h.getBoundingClientRect(),f=e.target[0].querySelector("[md-menu-origin]")||e.target[0],p=f.getBoundingClientRect(),m={left:d.left+r,top:d.top+r,bottom:d.bottom-r,right:d.right-r},g=e.mdMenuCtrl.positionMode();("target"==g.top||"target"==g.left||"target-right"==g.left)&&(i=c.firstElementChild.firstElementChild||c.firstElementChild,i=i.querySelector("[md-menu-align-target]")||i,o=i.getBoundingClientRect(),a={top:parseFloat(s.style.top||0),left:parseFloat(s.style.left||0)});var v={},b="top ";switch(g.top){case"target":v.top=a.top+p.top-o.top;break;default:throw new Error('Invalid target mode "'+g.top+'" specified for md-menu on Y axis.')}switch(g.left){case"target":v.left=a.left+p.left-o.left,b+="left";break;case"target-right":v.left=p.right-u.width+(u.right-o.right),b+="right";break;default:throw new Error('Invalid target mode "'+g.left+'" specified for md-menu on X axis.')}var y=e.mdMenuCtrl.offsets();v.top+=y.top,v.left+=y.left,n(v),t.css({top:v.top+"px",left:v.left+"px"}),s.style[l.CSS.TRANSFORM_ORIGIN]=b,e.alreadyOpen||(s.style[l.CSS.TRANSFORM]="scale("+Math.min(p.width/s.offsetWidth,1)+","+Math.min(p.height/s.offsetHeight,1)+")")}}return{parent:"body",onShow:u,onRemove:f,hasBackdrop:!0,disableParentScroll:!0,skipCompile:!0,themable:!0}}var r=8;return i.$inject=["$$rAF","$window","$mdUtil","$mdTheming","$timeout","$mdConstant","$document"],t("$mdMenu").setDefaults({methods:["target"],options:i})}e.module("material.components.menu").provider("$mdMenu",t),t.$inject=["$$interimElementProvider"]}(),function(){function t(t,e){function n(t){return t.attr("aria-valuemin",0),t.attr("aria-valuemax",100),t.attr("role","progressbar"),i}function i(n,i,o){e(i);var a=i[0],s=o.mdDiameter||48,l=s/48;a.style[t.CSS.TRANSFORM]="scale("+l+")",o.$observe("value",function(t){var e=r(t);i.attr("aria-valuenow",e)})}function r(t){return Math.max(0,Math.min(t||0,100))}return{restrict:"E",template:'<div class="md-spinner-wrapper"><div class="md-inner"><div class="md-gap"></div><div class="md-left"><div class="md-half-circle"></div></div><div class="md-right"><div class="md-half-circle"></div></div></div></div>',compile:n}}e.module("material.components.progressCircular",["material.core"]).directive("mdProgressCircular",t),t.$inject=["$mdConstant","$mdTheming"]}(),function(){function t(t,i,r){function o(t,e,n){return t.attr("aria-valuemin",0),t.attr("aria-valuemax",100),t.attr("role","progressbar"),a}function a(o,a,l){r(a);var c=a[0].querySelector(".md-bar1").style,u=a[0].querySelector(".md-bar2").style,h=e.element(a[0].querySelector(".md-container"));l.$observe("value",function(t){if("query"!=l.mdMode){var e=s(t);a.attr("aria-valuenow",e),u[i.CSS.TRANSFORM]=n[e]}}),l.$observe("mdBufferValue",function(t){c[i.CSS.TRANSFORM]=n[s(t)]}),t(function(){h.addClass("md-ready")})}function s(t){return t>100?100:0>t?0:Math.ceil(t||0)}return{restrict:"E",template:'<div class="md-container"><div class="md-dashed"></div><div class="md-bar md-bar1"></div><div class="md-bar md-bar2"></div></div>',compile:o}}e.module("material.components.progressLinear",["material.core"]).directive("mdProgressLinear",t),t.$inject=["$$rAF","$mdConstant","$mdTheming"];var n=function(){function t(t){var e=t/100,n=(t-100)/2;return"translateX("+n.toString()+"%) scale("+e.toString()+", 1)"}for(var e=new Array(101),n=0;101>n;n++)e[n]=t(n);return e}()}(),function(){function t(t,n,i,r){function o(o,a,s,l){function c(){a.hasClass("md-focused")||a.addClass("md-focused")}function u(i){var r=i.which||i.keyCode;switch(r){case n.KEY_CODE.LEFT_ARROW:case n.KEY_CODE.UP_ARROW:i.preventDefault(),h.selectPrevious(),c();break;case n.KEY_CODE.RIGHT_ARROW:case n.KEY_CODE.DOWN_ARROW:i.preventDefault(),h.selectNext(),c();break;case n.KEY_CODE.ENTER:var o=e.element(t.getClosest(a[0],"form"));o.length>0&&o.triggerHandler("submit")}}i(a);var h=l[0],d=l[1]||t.fakeNgModel();h.init(d),o.mouseActive=!1,a.attr({role:"radiogroup",tabIndex:a.attr("tabindex")||"0"}).on("keydown",u).on("mousedown",function(t){o.mouseActive=!0,r(function(){o.mouseActive=!1},100)}).on("focus",function(){o.mouseActive===!1&&h.$element.addClass("md-focused")}).on("blur",function(){h.$element.removeClass("md-focused")})}function a(t){this._radioButtonRenderFns=[],this.$element=t}function s(){return{init:function(t){this._ngModelCtrl=t,this._ngModelCtrl.$render=e.bind(this,this.render)},add:function(t){this._radioButtonRenderFns.push(t)},remove:function(t){var e=this._radioButtonRenderFns.indexOf(t);-1!==e&&this._radioButtonRenderFns.splice(e,1)},render:function(){this._radioButtonRenderFns.forEach(function(t){t()})},setViewValue:function(t,e){this._ngModelCtrl.$setViewValue(t,e),this.render()},getViewValue:function(){return this._ngModelCtrl.$viewValue},selectNext:function(){return l(this.$element,1)},selectPrevious:function(){return l(this.$element,-1)},setActiveDescendant:function(t){this.$element.attr("aria-activedescendant",t)}}}function l(n,i){var r=t.iterator(n[0].querySelectorAll("md-radio-button"),!0);if(r.count()){var o=function(t){return!e.element(t).attr("disabled")},a=n[0].querySelector("md-radio-button.md-checked"),s=r[0>i?"previous":"next"](a,o)||r.first();e.element(s).triggerHandler("click")}}return a.prototype=s(),{restrict:"E",controller:["$element",a],require:["mdRadioGroup","?ngModel"],link:{pre:o}}}function n(t,e,n){function i(i,o,a,s){function l(t){o[0].hasAttribute("disabled")||i.$apply(function(){s.setViewValue(a.value,t&&t.type)})}function c(){var t=s.getViewValue()==a.value;t!==h&&(h=t,o.attr("aria-checked",t),t?(o.addClass(r),s.setActiveDescendant(o.attr("id"))):o.removeClass(r))}function u(n,i){function r(){return a.id||"radio_"+e.nextUid()}i.ariaId=r(),n.attr({id:i.ariaId,role:"radio","aria-checked":"false"}),t.expectWithText(n,"aria-label")}var h;n(o),u(o,i),s.add(c),a.$observe("value",c),o.on("click",l).on("$destroy",function(){s.remove(c)})}var r="md-checked";return{restrict:"E",require:"^mdRadioGroup",transclude:!0,template:'<div class="md-container" md-ink-ripple md-ink-ripple-checkbox><div class="md-off"></div><div class="md-on"></div></div><div ng-transclude class="md-label"></div>',link:i}}e.module("material.components.radioButton",["material.core"]).directive("mdRadioGroup",t).directive("mdRadioButton",n),t.$inject=["$mdUtil","$mdConstant","$mdTheming","$timeout"],n.$inject=["$mdAria","$mdUtil","$mdTheming"]}(),function(){function t(t,i,r,o,a,s,l){function c(a,c){var u=a.find("md-select-label").remove();if(u.length){if(!u[0].firstElementChild){var h=e.element("<span>");h.append(u.contents()),u.append(h)}}else u=e.element("<md-select-label><span></span></md-select-label>");if(u.append('<span class="md-select-icon" aria-hidden="true"></span>'),u.addClass("md-select-label"),u[0].hasAttribute("id")||u.attr("id","select_label_"+i.nextUid()),a.find("md-content").length||a.append(e.element("<md-content>").append(a.contents())),c.mdOnOpen&&a.find("md-content").prepend(e.element("<md-progress-circular>").attr("md-mode","indeterminate").attr("ng-hide","$$loadingAsyncDone").wrap("<div>").parent()),c.name){var d=e.element('<select class="md-visually-hidden">');d.attr({name:"."+c.name,"ng-model":c.ngModel,"aria-hidden":"true",tabindex:"-1"});var f=a.find("md-option");e.forEach(f,function(t){var n=e.element("<option>"+t.innerHTML+"</option>");t.hasAttribute("ng-value")?n.attr("ng-value",t.getAttribute("ng-value")):t.hasAttribute("value")&&n.attr("value",t.getAttribute("value")),d.append(n)}),a.parent().append(d)}var p='<div class="md-select-menu-container"><md-select-menu '+(e.isDefined(c.multiple)?"multiple":"")+">"+a.html()+"</md-select-menu></div>";return a.empty().append(u),c.tabindex=c.tabindex||"0",function(a,c,u,h){function d(){var t=c.attr("placeholder");t||(t=c.find("md-select-label").text()),o.expect(c,"aria-label",t)}function f(){w&&(C=C||w.find("md-select-menu").controller("mdSelectMenu"),_.setLabelText(C.selectedLabels()))}function m(){w=e.element(p);var t=w.find("md-select-menu");t.data("$ngModelController",$),t.data("$mdSelectController",_),x=a.$new(),w=s(w)(x),C=w.find("md-select-menu").controller("mdSelectMenu")}function g(t){var n=[32,13,38,40];if(-1!=n.indexOf(t.keyCode))t.preventDefault(),v(t);else if(t.keyCode<=90&&t.keyCode>=31){t.preventDefault();var i=C.optNodeForKeyboardSearch(t);if(!i)return;var r=e.element(i).controller("mdOption");C.isMultiple||C.deselect(Object.keys(C.selected)[0]),C.select(r.hashKey,r.value),C.refreshViewValue(),$.$render()}}function v(){a.$evalAsync(function(){b=!0,t.show({scope:x,preserveScope:!0,skipCompile:!0,element:w,target:c[0],hasBackdrop:!0,loadingAsync:u.mdOnOpen?a.$eval(u.mdOnOpen)||!0:!1}).then(function(t){b=!1})})}var b,y,w,x,C,_=h[0],$=h[1],S=h[2],E=c.find("md-select-label"),T=0!==E.text().length;if(m(),r(c),u.name&&S){var k=c.parent()[0].querySelector('select[name=".'+u.name+'"]');S.$removeControl(e.element(k).controller())}var A=$.$render;$.$render=function(){A(),f()},_.setLabelText=function(t){if(!T){_.setIsPlaceholder(!t),t=t||u.placeholder||"";var e=T?E:E.children().eq(0);e.text(t)}},_.setIsPlaceholder=function(t){t?E.addClass("md-placeholder"):E.removeClass("md-placeholder")},_.triggerClose=function(){l(u.mdOnClose)(a)},a.$$postDigest(function(){d(),f()});var M;u.$observe("ngMultiple",function(t){M&&M();var e=l(t);M=a.$watch(function(){return e(a)},function(t,e){(t!==n||e!==n)&&(t?c.attr("multiple","multiple"):c.removeAttr("multiple"),w&&(C.setMultiple(t),A=$.$render,$.$render=function(){A(),f()},C.refreshViewValue(),$.$render()))})}),u.$observe("disabled",function(t){"string"==typeof t&&(t=!0),(y===n||y!==t)&&(y=t,t?(c.attr({tabindex:-1,"aria-disabled":"true"}),c.off("click",v),c.off("keydown",g)):(c.attr({tabindex:u.tabindex,"aria-disabled":"false"}),c.on("click",v),c.on("keydown",g)))}),u.disabled||u.ngDisabled||(c.attr({
tabindex:u.tabindex,"aria-disabled":"false"}),c.on("click",v),c.on("keydown",g));var O={role:"combobox","aria-expanded":"false"};c[0].hasAttribute("id")||(O.id="select_"+i.nextUid()),c.attr(O),a.$on("$destroy",function(){b?t.cancel().then(function(){w.remove()}):w.remove()})}}return{restrict:"E",require:["mdSelect","ngModel","?^form"],compile:c,controller:function(){}}}function i(t,i,r){function o(t,n,o,a){function s(){n.attr({id:"select_menu_"+i.nextUid(),role:"listbox","aria-multiselectable":u.isMultiple?"true":"false"})}function l(t){(13==t.keyCode||32==t.keyCode)&&c(t)}function c(n){var r=i.getClosest(n.target,"md-option"),o=r&&e.element(r).data("$mdOptionController");if(r&&o){var a=u.hashGetter(o.value),s=e.isDefined(u.selected[a]);t.$apply(function(){u.isMultiple?s?u.deselect(a):u.select(a,o.value):s||(u.deselect(Object.keys(u.selected)[0]),u.select(a,o.value)),u.refreshViewValue()})}}var u=a[0],h=a[1];r(n),n.on("click",c),n.on("keypress",l),h&&u.init(h),s()}function a(r,o,a){function s(){var t=u.ngModel.$modelValue||u.ngModel.$viewValue;if(e.isArray(t)){var n=Object.keys(u.selected),i=t.map(u.hashGetter),r=n.filter(function(t){return-1===i.indexOf(t)});r.forEach(u.deselect),i.forEach(function(e,n){u.select(e,t[n])})}}function c(){var t=u.ngModel.$viewValue||u.ngModel.$modelValue;Object.keys(u.selected).forEach(u.deselect),u.select(u.hashGetter(t),t)}var u=this;u.isMultiple=e.isDefined(o.multiple),u.selected={},u.options={},r.$watch(function(){return u.options},function(){u.ngModel.$render()},!0);var h;u.setMultiple=function(t){function n(t,n){return e.isArray(t||n||[])}var i=u.ngModel;u.isMultiple=t,h&&h(),u.isMultiple?(i.$validators["md-multiple"]=n,i.$render=s,r.$watchCollection(o.ngModel,function(t){n(t)&&s(t)})):(delete i.$validators["md-multiple"],i.$render=c)};var d,f,p,m="",g=300;u.optNodeForKeyboardSearch=function(t){d&&clearTimeout(d),d=setTimeout(function(){d=n,m="",p=n,f=n},g),m+=String.fromCharCode(t.keyCode);var i=new RegExp("^"+m,"i");f||(f=a.find("md-option"),p=new Array(f.length),e.forEach(f,function(t,e){p[e]=t.textContent.trim()}));for(var r=0;r<p.length;++r)if(i.test(p[r]))return f[r]},u.init=function(n){if(u.ngModel=n,n.$options&&n.$options.trackBy){var i={},o=t(n.$options.trackBy);u.hashGetter=function(t,e){return i.$value=t,o(e||r,i)}}else u.hashGetter=function(t){return e.isObject(t)?"object_"+(t.$$mdSelectId||(t.$$mdSelectId=++l)):t};u.setMultiple(u.isMultiple)},u.selectedLabels=function(){var t=i.nodesToArray(a[0].querySelectorAll("md-option[selected]"));return t.length?t.map(function(t){return t.textContent}).join(", "):""},u.select=function(t,e){var n=u.options[t];n&&n.setSelected(!0),u.selected[t]=e},u.deselect=function(t){var e=u.options[t];e&&e.setSelected(!1),delete u.selected[t]},u.addOption=function(t,n){if(e.isDefined(u.options[t]))throw new Error('Duplicate md-option values are not allowed in a select. Duplicate value "'+n.value+'" found.');u.options[t]=n,e.isDefined(u.selected[t])&&(u.select(t,n.value),u.refreshViewValue())},u.removeOption=function(t){delete u.options[t]},u.refreshViewValue=function(){var t,e=[];for(var n in u.selected)e.push((t=u.options[n])?t.value:u.selected[n]);u.ngModel.$setViewValue(u.isMultiple?e:e[0])}}return a.$inject=["$scope","$attrs","$element"],{restrict:"E",require:["mdSelectMenu","?ngModel"],controller:a,link:{pre:o}}}function r(t,n){function i(t,n){return t.append(e.element('<div class="md-text">').append(t.contents())),t.attr("tabindex",n.tabindex||"0"),r}function r(i,r,o,a){function s(t,e){var n=u.hashGetter(e,i),r=u.hashGetter(t,i);c.hashKey=r,c.value=t,u.removeOption(n,c),u.addOption(r,c)}function l(){var t={role:"option","aria-selected":"false"};r[0].hasAttribute("id")||(t.id="select_option_"+n.nextUid()),r.attr(t)}var c=a[0],u=a[1];e.isDefined(o.ngValue)?i.$watch(o.ngValue,s):e.isDefined(o.value)?s(o.value):i.$watch(function(){return r.text()},s),i.$$postDigest(function(){o.$observe("selected",function(t){e.isDefined(t)&&(t?(u.isMultiple||u.deselect(Object.keys(u.selected)[0]),u.select(c.hashKey,c.value)):u.deselect(c.hashKey),u.refreshViewValue(),u.ngModel.$render())})}),t.attach(i,r),l(),i.$on("$destroy",function(){u.removeOption(c.hashKey,c)})}function o(t){this.selected=!1,this.setSelected=function(e){e&&!this.selected?t.attr({selected:"selected","aria-selected":"true"}):!e&&this.selected&&(t.removeAttr("selected"),t.attr("aria-selected","false")),this.selected=e}}return o.$inject=["$element"],{restrict:"E",require:["mdOption","^^mdSelectMenu"],controller:o,compile:i}}function o(){function t(t,n){var i=t.find("label");i.length||(i=e.element("<label>"),t.prepend(i)),n.label&&i.text(n.label)}return{restrict:"E",compile:t}}function a(t){function i(t,i,a,l,c,u,h){function d(n,r,o){function s(){o.target.attr("aria-expanded","true")}function d(){function e(t){var e=l.nodesToArray(f),n=e.indexOf(o.focusedNode);-1===n?n=0:"next"===t&&n<e.length-1?n++:"prev"===t&&n>0&&n--;var i=o.focusedNode=e[n];i&&i.focus()}function a(){e("next")}function s(){e("prev")}function c(){u.isMultiple||(o.restoreFocus=!0,n.$evalAsync(function(){t.hide(u.ngModel.$viewValue)}))}if(!o.isRemoved){var u=o.selectEl.controller("mdSelectMenu")||{};r.addClass("md-clickable"),o.backdrop&&o.backdrop.on("click",function(e){e.preventDefault(),e.stopPropagation(),o.restoreFocus=!1,n.$apply(t.cancel)}),o.selectEl.on("keydown",function(e){switch(e.keyCode){case i.KEY_CODE.SPACE:case i.KEY_CODE.ENTER:var r=l.getClosest(e.target,"md-option");r&&(o.selectEl.triggerHandler({type:"click",target:r}),e.preventDefault());break;case i.KEY_CODE.TAB:case i.KEY_CODE.ESCAPE:e.preventDefault(),o.restoreFocus=!0,n.$apply(t.cancel)}}),o.selectEl.on("keydown",function(t){switch(t.keyCode){case i.KEY_CODE.UP_ARROW:return s();case i.KEY_CODE.DOWN_ARROW:return a();default:if(t.keyCode>=31&&t.keyCode<=90){var e=o.selectEl.controller("mdSelectMenu").optNodeForKeyboardSearch(t);e&&e.focus()}}}),o.selectEl.on("click",c),o.selectEl.on("keydown",function(t){(32==t.keyCode||13==t.keyCode)&&c()})}}if(!o.target)throw new Error('$mdSelect.show() expected a target element in options.target but got "'+o.target+'"!');e.extend(o,{isRemoved:!1,target:e.element(o.target),parent:e.element(o.parent),selectEl:r.find("md-select-menu"),contentEl:r.find("md-content"),backdrop:o.hasBackdrop&&e.element('<md-backdrop class="md-select-backdrop md-click-catcher">')}),o.resizeFn=function(){a(function(){a(function(){p(n,r,o)})})},e.element(h).on("resize",o.resizeFn),e.element(h).on("orientationchange",o.resizeFn),s(),r.removeClass("md-leave");var f=o.selectEl[0].getElementsByTagName("md-option");return o.loadingAsync&&o.loadingAsync.then?o.loadingAsync.then(function(){n.$$loadingAsyncDone=!0,a(function(){a(function(){o.isRemoved||p(n,r,o)})})}):o.loadingAsync&&(n.$$loadingAsyncDone=!0),o.disableParentScroll&&!l.getClosest(o.target,"MD-DIALOG")?o.restoreScroll=l.disableScrollAround(o.element):o.disableParentScroll=!1,u(d,75,!1),o.backdrop&&(c.inherit(o.backdrop,o.parent),o.parent.append(o.backdrop)),o.parent.append(r),a(function(){a(function(){o.isRemoved||p(n,r,o)})}),l.transitionEndPromise(o.selectEl,{timeout:350})}function f(t,i,r){r.isRemoved=!0,i.addClass("md-leave").removeClass("md-clickable"),r.target.attr("aria-expanded","false"),e.element(h).off("resize",r.resizeFn),e.element(h).off("orientationchange",r.resizefn),r.resizeFn=n;var o=r.selectEl.controller("mdSelect");return o&&o.setLabelText(r.selectEl.controller("mdSelectMenu").selectedLabels()),l.transitionEndPromise(i,{timeout:350}).then(function(){i.removeClass("md-active"),r.backdrop&&r.backdrop.remove(),i[0].parentNode===r.parent[0]&&r.parent[0].removeChild(i[0]),r.disableParentScroll&&r.restoreScroll(),r.restoreFocus&&r.target.focus(),o&&o.triggerClose()})}function p(t,e,n){var c,u=e[0],d=n.target[0].firstElementChild.firstElementChild,f=n.parent[0],p=n.selectEl[0],m=n.contentEl[0],g=f.getBoundingClientRect(),v=d.getBoundingClientRect(),b=!1,y={left:g.left+s,top:s,bottom:g.height-s,right:g.width-s-(l.floatingScrollbars()?16:0)},w={top:v.top-y.top,left:v.left-y.left,right:y.right-(v.left+v.width),bottom:y.bottom-(v.top+v.height)},x=g.width-2*s,C=m.scrollHeight>m.offsetHeight,_=p.querySelector("md-option[selected]"),$=p.getElementsByTagName("md-option"),S=p.getElementsByTagName("md-optgroup");c=_?_:S.length?S[0]:$.length?$[0]:m.firstElementChild||m,m.offsetWidth>x&&(m.style["max-width"]=x+"px"),b&&(m.style["min-width"]=v.width+"px"),C&&p.classList.add("md-overflow");var E=p.getBoundingClientRect(),T=o(c);if(c){var k=h.getComputedStyle(c);T.paddingLeft=parseInt(k.paddingLeft,10)||0,T.paddingRight=parseInt(k.paddingRight,10)||0}var A=c;if("MD-OPTGROUP"===(A.tagName||"").toUpperCase()&&(A=$[0]||m.firstElementChild||m),C){var M=m.offsetHeight/2;m.scrollTop=T.top+T.height/2-M,w.top<M?m.scrollTop=Math.min(T.top,m.scrollTop+M-w.top):w.bottom<M&&(m.scrollTop=Math.max(T.top+T.height-E.height,m.scrollTop-M+w.bottom))}var O,P,I;b?(O=v.left,P=v.top+v.height,I="50% 0",P+E.height>y.bottom&&(P=v.top-E.height,I="50% 100%")):(O=v.left+T.left-T.paddingLeft,P=Math.floor(v.top+v.height/2-T.height/2-T.top+m.scrollTop),I=T.left+v.width/2+"px "+(T.top+T.height/2-m.scrollTop)+"px 0px",u.style.minWidth=v.width+T.paddingLeft+T.paddingRight+"px");var D=u.getBoundingClientRect();u.style.left=r(y.left,O,y.right-D.width)+"px",u.style.top=r(y.top,P,y.bottom-D.height)+"px",p.style[i.CSS.TRANSFORM_ORIGIN]=I,p.style[i.CSS.TRANSFORM]="scale("+Math.min(v.width/E.width,1)+","+Math.min(v.height/E.height,1)+")",a(function(){e.addClass("md-active"),p.style[i.CSS.TRANSFORM]="",A&&(n.focusedNode=A,A.focus())})}return{parent:"body",onShow:d,onRemove:f,hasBackdrop:!0,disableParentScroll:!0,themable:!0}}function r(t,e,n){return Math.max(t,Math.min(e,n))}function o(t){return t?{left:t.offsetLeft,top:t.offsetTop,width:t.offsetWidth,height:t.offsetHeight}:{left:0,top:0,width:0,height:0}}return i.$inject=["$mdSelect","$mdConstant","$$rAF","$mdUtil","$mdTheming","$timeout","$window"],t("$mdSelect").setDefaults({methods:["target"],options:i})}var s=8,l=0;e.module("material.components.select",["material.core","material.components.backdrop"]).directive("mdSelect",t).directive("mdSelectMenu",i).directive("mdOption",r).directive("mdOptgroup",o).provider("$mdSelect",a),t.$inject=["$mdSelect","$mdUtil","$mdTheming","$mdAria","$interpolate","$compile","$parse"],i.$inject=["$parse","$mdUtil","$mdTheming"],r.$inject=["$mdButtonInkRipple","$mdUtil"],a.$inject=["$$interimElementProvider"]}(),function(){function t(t,n){return function(i){function r(){return t.when(i).then(function(t){return s=t,t})}var o,a="SideNav '"+i+"' is not available!",s=t.get(i);return s||t.notFoundError(i),o={isOpen:function(){return s&&s.isOpen()},isLockedOpen:function(){return s&&s.isLockedOpen()},toggle:function(){return s?s.toggle():n.reject(a)},open:function(){return s?s.open():n.reject(a)},close:function(){return s?s.close():n.reject(a)},then:function(t){var i=s?n.when(s):r();return i.then(t||e.noop)}}}}function i(){return{restrict:"A",require:"^mdSidenav",link:function(t,e,n,i){i.focusElement(e)}}}function r(t,i,r,o,a,s,l,c,u,h){function d(d,f,p,m){function g(t,e){d.isLockedOpen=t,t===e?f.toggleClass("md-locked-open",!!t):i[t?"addClass":"removeClass"](f,"md-locked-open"),T.toggleClass("md-locked-open",!!t)}function v(t){var e=f.parent();e[t?"on":"off"]("keydown",w),T[t?"on":"off"]("click",x),t&&(_=h[0].activeElement);var n=m.focusElement();return b(t),$=u.all([t?i.enter(T,e):i.leave(T),i[t?"removeClass":"addClass"](f,"md-closed")]).then(function(){d.isOpen&&n&&n.focus()})}function b(t){var i=f.parent();t?(C=i.css("overflow"),i.css("overflow","hidden")):e.isDefined(C)&&(i.css("overflow",C),C=n)}function y(e){if(d.isOpen==e)return u.when(!0);var n=u.defer();return d.isOpen=e,t(function(){$.then(function(t){d.isOpen||(_&&_.focus(),_=null),n.resolve(t)})},0,!1),n.promise}function w(t){var e=t.keyCode===s.KEY_CODE.ESCAPE;return e?x(t):u.when(!0)}function x(t){return t.preventDefault(),t.stopPropagation(),m.close()}var C,_=null,$=u.when(!0),S=r(p.mdIsLockedOpen),E=function(){return S(d.$parent,{$media:function(t){return o.warn("$media is deprecated for is-locked-open. Use $mdMedia instead."),a(t)},$mdMedia:a})},T=l('<md-backdrop class="md-sidenav-backdrop md-opaque ng-enter">')(d);f.on("$destroy",m.destroy),c.inherit(T,f),d.$watch(E,g),d.$watch("isOpen",v),m.$toggleOpen=y,m.focusElement(m.focusElement()||f)}return{restrict:"E",scope:{isOpen:"=?mdIsOpen"},controller:"$mdSidenavController",compile:function(t){return t.addClass("md-closed"),t.attr("tabIndex","-1"),d}}}function o(t,n,i,r,o){var a,s=this;s.isOpen=function(){return!!t.isOpen},s.isLockedOpen=function(){return!!t.isLockedOpen},s.open=function(){return s.$toggleOpen(!0)},s.close=function(){return s.$toggleOpen(!1)},s.toggle=function(){return s.$toggleOpen(!t.isOpen)},s.focusElement=function(t){return e.isDefined(t)&&(a=t),a},s.$toggleOpen=function(){return o.when(t.isOpen)},s.destroy=r.register(s,i.mdComponentId)}e.module("material.components.sidenav",["material.core","material.components.backdrop"]).factory("$mdSidenav",t).directive("mdSidenav",r).directive("mdSidenavFocus",i).controller("$mdSidenavController",o),t.$inject=["$mdComponentRegistry","$q"],r.$inject=["$timeout","$animate","$parse","$log","$mdMedia","$mdConstant","$compile","$mdTheming","$q","$document"],o.$inject=["$scope","$element","$attrs","$mdComponentRegistry","$q"]}(),function(){function t(t,n,i,r,o,a,s,l){function c(t,e){return t.attr({tabIndex:0,role:"slider"}),i.expect(t,"aria-label"),u}function u(i,c,u,h){function d(){b(),C(),v()}function f(t){X=parseFloat(t),c.attr("aria-valuemin",t),d()}function p(t){G=parseFloat(t),c.attr("aria-valuemax",t),d()}function m(t){K=parseFloat(t),v()}function g(t){c.attr("aria-disabled",!!t)}function v(){if(e.isDefined(u.mdDiscrete)){var t=Math.floor((G-X)/K);if(!Z){var i=n.getComputedStyle(U[0]);Z=e.element('<canvas style="position:absolute;">'),J=Z[0].getContext("2d"),J.fillStyle=i.backgroundColor||"black",U.append(Z)}var r=y();Z[0].width=r.width,Z[0].height=r.height;for(var o,a=0;t>=a;a++)o=Math.floor(r.width*(a/t)),J.fillRect(o-1,0,2,r.height)}}function b(){Q=W[0].getBoundingClientRect()}function y(){return Y(),Q}function w(t){if(!c[0].hasAttribute("disabled")){var e;t.keyCode===o.KEY_CODE.LEFT_ARROW?e=-K:t.keyCode===o.KEY_CODE.RIGHT_ARROW&&(e=K),e&&((t.metaKey||t.ctrlKey||t.altKey)&&(e*=4),t.preventDefault(),t.stopPropagation(),i.$evalAsync(function(){x(h.$viewValue+e)}))}}function x(t){h.$setViewValue(_($(t)))}function C(){isNaN(h.$viewValue)&&(h.$viewValue=h.$modelValue);var t=(h.$viewValue-X)/(G-X);i.modelValue=h.$viewValue,c.attr("aria-valuenow",h.$viewValue),S(t),H.text(h.$viewValue)}function _(t){return e.isNumber(t)?Math.max(X,Math.min(G,t)):void 0}function $(t){if(e.isNumber(t)){var n=Math.round(t/K)*K;return Math.round(1e3*n)/1e3}}function S(t){z.css("width",100*t+"%"),B.css("left",100*t+"%"),c.toggleClass("md-min",0===t)}function E(t){if(!j()){c.addClass("active"),c[0].focus(),b();var e=N(D(t.pointer.x)),n=_($(e));i.$apply(function(){x(n),S(L(n))})}}function T(t){if(!j()){c.removeClass("dragging active");var e=N(D(t.pointer.x)),n=_($(e));i.$apply(function(){x(n),C()})}}function k(t){j()||(tt=!0,t.stopPropagation(),c.addClass("dragging"),O(t))}function A(t){tt&&(t.stopPropagation(),O(t))}function M(t){tt&&(t.stopPropagation(),tt=!1)}function O(t){et?I(t.pointer.x):P(t.pointer.x)}function P(t){i.$evalAsync(function(){x(N(D(t)))})}function I(t){var e=N(D(t)),n=_($(e));S(D(t)),H.text(n)}function D(t){return Math.max(0,Math.min(1,(t-Q.left)/Q.width))}function N(t){return X+t*(G-X)}function L(t){return(t-X)/(G-X)}a(c),h=h||{$setViewValue:function(t){this.$viewValue=t,this.$viewChangeListeners.forEach(function(t){t()})},$parsers:[],$formatters:[],$viewChangeListeners:[]};var F=u.ngDisabled&&l(u.ngDisabled),j=F?function(){return F(i.$parent)}:e.noop,R=e.element(c[0].querySelector(".md-thumb")),H=e.element(c[0].querySelector(".md-thumb-text")),B=R.parent(),W=e.element(c[0].querySelector(".md-track-container")),z=e.element(c[0].querySelector(".md-track-fill")),U=e.element(c[0].querySelector(".md-track-ticks")),Y=r.throttle(b,5e3);e.isDefined(u.min)?u.$observe("min",f):f(0),e.isDefined(u.max)?u.$observe("max",p):p(100),e.isDefined(u.step)?u.$observe("step",m):m(1);var q=e.noop;u.ngDisabled&&(q=i.$parent.$watch(u.ngDisabled,g)),s.register(c,"drag"),c.on("keydown",w).on("$md.pressdown",E).on("$md.pressup",T).on("$md.dragstart",k).on("$md.drag",A).on("$md.dragend",M),setTimeout(d);var V=t.throttle(d);e.element(n).on("resize",V),i.$on("$destroy",function(){e.element(n).off("resize",V),q()}),h.$render=C,h.$viewChangeListeners.push(C),h.$formatters.push(_),h.$formatters.push($);var X,G,K,Z,J,Q={};b();var tt=!1,et=e.isDefined(u.mdDiscrete)}return{scope:{},require:"?ngModel",template:'<div class="md-slider-wrapper">        <div class="md-track-container">          <div class="md-track"></div>          <div class="md-track md-track-fill"></div>          <div class="md-track-ticks"></div>        </div>        <div class="md-thumb-container">          <div class="md-thumb"></div>          <div class="md-focus-thumb"></div>          <div class="md-focus-ring"></div>          <div class="md-sign">            <span class="md-thumb-text"></span>          </div>          <div class="md-disabled-thumb"></div>        </div>      </div>',compile:c}}e.module("material.components.slider",["material.core"]).directive("mdSlider",t),t.$inject=["$$rAF","$window","$mdAria","$mdUtil","$mdConstant","$mdTheming","$mdGesture","$parse"]}(),function(){function t(t,i,r,o,a){function s(t){function e(t,e){e.addClass("md-sticky-clone"),e.css("top",g+"px");var n={element:t,clone:e};return m.items.push(n),f.parent().prepend(n.clone),p(),function(){m.items.forEach(function(e,n){e.element[0]===t[0]&&(m.items.splice(n,1),e.clone.remove())}),p()}}function r(){m.items.forEach(s),m.items=m.items.sort(function(t,e){return t.top<e.top?-1:1});for(var t,e=f.prop("scrollTop"),n=m.items.length-1;n>=0;n--)if(e>m.items[n].top){t=m.items[n];break}u(t)}function s(t){var e=t.element[0];for(t.top=0,t.left=0;e&&e!==f[0];)t.top+=e.offsetTop,t.left+=e.offsetLeft,e=e.offsetParent;t.height=t.element.prop("offsetHeight"),t.clone.css("margin-left",t.left+"px"),a.floatingScrollbars()&&t.clone.css("margin-right","0")}function l(){var t=f.prop("scrollTop"),e=t>(l.prevScrollTop||0);l.prevScrollTop=t,0===t?u(null):e&&m.next?m.next.top-t<=0?u(m.next):m.current&&(m.next.top-t<=m.next.height?d(m.current,m.next.top-m.next.height-t):d(m.current,null)):!e&&m.current&&(t<m.current.top&&u(m.prev),m.current&&m.next&&(t>=m.next.top-m.current.height?d(m.current,m.next.top-t-m.current.height):d(m.current,null)))}function u(t){if(m.current!==t){m.current&&(d(m.current,null),h(m.current,null)),t&&h(t,"active"),m.current=t;var e=m.items.indexOf(t);m.next=m.items[e+1],m.prev=m.items[e-1],h(m.next,"next"),h(m.prev,"prev")}}function h(t,e){t&&t.state!==e&&(t.state&&(t.clone.attr("sticky-prev-state",t.state),t.element.attr("sticky-prev-state",t.state)),t.clone.attr("sticky-state",e),t.element.attr("sticky-state",e),t.state=e)}function d(t,e){t&&(null===e||e===n?t.translateY&&(t.translateY=null,t.clone.css(i.CSS.TRANSFORM,"")):(t.translateY=e,t.clone.css(i.CSS.TRANSFORM,"translate3d("+t.left+"px,"+e+"px,0)")))}var f=t.$element,p=o.throttle(r);c(f),f.on("$scrollstart",p),f.on("$scroll",l);var m,g=f.prop("offsetTop");return m={prev:null,current:null,next:null,items:[],add:e,refreshElements:r}}function l(n){var i,r=e.element("<div>");t[0].body.appendChild(r[0]);for(var o=["sticky","-webkit-sticky"],a=0;a<o.length;++a)if(r.css({position:o[a],top:0,"z-index":2}),r.css("position")==o[a]){i=o[a];break}return r.remove(),i}function c(t){function e(){+a.now()-i>r?(n=!1,t.triggerHandler("$scrollend")):(t.triggerHandler("$scroll"),o(e))}var n,i,r=200;t.on("scroll touchmove",function(){n||(n=!0,o(e),t.triggerHandler("$scrollstart")),t.triggerHandler("$scroll"),i=+a.now()})}var u=l();return function(t,e,n){var i=e.controller("mdContent");if(i)if(u)e.css({position:u,top:0,"z-index":2});else{var r=i.$element.data("$$sticky");r||(r=s(i),i.$element.data("$$sticky",r));var o=r.add(e,n||e.clone());t.$on("$destroy",o)}}}e.module("material.components.sticky",["material.core","material.components.content"]).factory("$mdSticky",t),t.$inject=["$document","$mdConstant","$compile","$$rAF","$mdUtil"]}(),function(){function t(t,n,i){return{restrict:"E",replace:!0,transclude:!0,template:'<h2 class="md-subheader"><div class="md-subheader-inner"><span class="md-subheader-content"></span></div></h2>',compile:function(r,o,a){return function(r,o,s){function l(t){return e.element(t[0].querySelector(".md-subheader-content"))}i(o);var c=o[0].outerHTML;a(r,function(t){l(o).append(t)}),o.hasClass("md-no-sticky")||a(r,function(i){var a=n(e.element(c))(r);l(a).append(i),t(r,o,a)})}}}}e.module("material.components.subheader",["material.core","material.components.sticky"]).directive("mdSubheader",t),t.$inject=["$mdSticky","$compile","$mdTheming"]}(),function(){function t(t){function e(t){function e(e,r,o){var a=t(o[n]);r.on(i,function(t){e.$apply(function(){a(e,{$event:t})})})}return{restrict:"A",link:e}}var n="md"+t,i="$md."+t.toLowerCase();return e.$inject=["$parse"],e}e.module("material.components.swipe",["material.core"]).directive("mdSwipeLeft",t("SwipeLeft")).directive("mdSwipeRight",t("SwipeRight"))}(),function(){function t(t,n,i,r,o,a,s,l){function c(t,n){var r=u.compile(t,n);return t.addClass("md-dragging"),function(t,n,c,u){function h(e){m(t)||(e.stopPropagation(),n.addClass("md-dragging"),b={width:g.prop("offsetWidth")},n.removeClass("transition"))}function d(t){if(b){t.stopPropagation(),t.srcEvent&&t.srcEvent.preventDefault();var e=t.pointer.distanceX/b.width,n=u.$viewValue?1+e:e;n=Math.max(0,Math.min(1,n)),g.css(o.CSS.TRANSFORM,"translate3d("+100*n+"%,0,0)"),b.translate=n}}function f(t){if(b){t.stopPropagation(),n.removeClass("md-dragging"),g.css(o.CSS.TRANSFORM,"");var e=u.$viewValue?b.translate<.5:b.translate>.5;e&&p(!u.$viewValue),b=null}}function p(e){t.$apply(function(){u.$setViewValue(e),u.$render()})}u=u||i.fakeNgModel();var m=a(c.ngDisabled),g=e.element(n[0].querySelector(".md-thumb-container")),v=e.element(n[0].querySelector(".md-container"));s(function(){n.removeClass("md-dragging")}),r(t,n,c,u),e.isDefined(c.ngDisabled)&&t.$watch(m,function(t){n.attr("tabindex",t?-1:0)}),l.register(v,"drag"),v.on("$md.dragstart",h).on("$md.drag",d).on("$md.dragend",f);var b}}var u=t[0];return{restrict:"E",priority:210,transclude:!0,template:'<div class="md-container"><div class="md-bar"></div><div class="md-thumb-container"><div class="md-thumb" md-ink-ripple md-ink-ripple-checkbox></div></div></div><div ng-transclude class="md-label"></div>',require:"?ngModel",compile:c}}e.module("material.components.switch",["material.core","material.components.checkbox"]).directive("mdSwitch",t),t.$inject=["mdCheckboxDirective","$mdTheming","$mdUtil","$document","$mdConstant","$parse","$$rAF","$mdGesture"]}(),function(){e.module("material.components.tabs",["material.core","material.components.icon"])}(),function(){function t(){return{restrict:"E"}}function n(t){function e(t,e,i,r){function o(o,a,l){return a=r.extractElementByName(a,"md-toast"),n=l.content,a.addClass(l.position.split(" ").map(function(t){return"md-"+t}).join(" ")),l.parent.addClass(s(l.position)),l.onSwipe=function(e,n){a.addClass("md-"+e.type.replace("$md.","")),t(i.cancel)},a.on("$md.swipeleft $md.swiperight",l.onSwipe),e.enter(a,l.parent)}function a(t,n,i){return n.off("$md.swipeleft $md.swiperight",i.onSwipe),i.parent.removeClass(s(i.position)),e.leave(n)}function s(t){return"md-toast-open-"+(t.indexOf("top")>-1?"top":"bottom")}return{onShow:o,onRemove:a,position:"bottom left",themable:!0,hideDelay:3e3}}var n,i=t("$mdToast").setDefaults({methods:["position","hideDelay","capsule"],options:e}).addPreset("simple",{argOption:"content",methods:["content","action","highlightAction","theme","parent"],options:["$mdToast","$mdTheming",function(t,e){var i={template:['<md-toast md-theme="{{ toast.theme }}" ng-class="{\'md-capsule\': toast.capsule}">',"<span flex>{{ toast.content }}</span>",'<md-button class="md-action" ng-if="toast.action" ng-click="toast.resolve()" ng-class="{\'md-highlight\': toast.highlightAction}">',"{{ toast.action }}","</md-button>","</md-toast>"].join(""),controller:["$scope",function(e){var i=this;e.$watch(function(){return n},function(){i.content=n}),this.resolve=function(){t.hide()}}],theme:e.defaultTheme(),controllerAs:"toast",bindToController:!0};return i}]}).addMethod("updateContent",function(t){n=t});return e.$inject=["$timeout","$animate","$mdToast","$mdUtil"],i}e.module("material.components.toast",["material.core","material.components.button"]).directive("mdToast",t).provider("$mdToast",n),n.$inject=["$$interimElementProvider"]}(),function(){function t(t,n,i,r,o,a){return{restrict:"E",controller:e.noop,link:function(s,l,c){function u(){function e(e,n){l.parent()[0]===n.parent()[0]&&(d&&d.off("scroll",g),n.on("scroll",g),n.attr("scroll-shrink","true"),d=n,t(r))}function r(){h=l.prop("offsetHeight");var t=-h*m+"px";d.css("margin-top",t),d.css("margin-bottom",t),u()}function u(t){var e=t?t.target.scrollTop:p;v(),f=Math.min(h/m,Math.max(0,f+e-p)),l.css(n.CSS.TRANSFORM,"translate3d(0,"+-f*m+"px,0)"),d.css(n.CSS.TRANSFORM,"translate3d(0,"+(h-f)*m+"px,0)"),p=e,l.hasClass("md-whiteframe-z1")?f||a(function(){o.removeClass(l,"md-whiteframe-z1")}):f&&a(function(){o.addClass(l,"md-whiteframe-z1")})}var h,d,f=0,p=0,m=c.mdShrinkSpeedFactor||.5,g=t.throttle(u),v=i.debounce(r,5e3);s.$on("$mdContentLoaded",e)}r(l),e.isDefined(c.mdScrollShrink)&&u()}}}e.module("material.components.toolbar",["material.core","material.components.content"]).directive("mdToolbar",t),t.$inject=["$$rAF","$mdConstant","$mdUtil","$mdTheming","$animate","$timeout"]}(),function(){function t(t,n,i,r,o,a,s,l,c){function u(u,f,p){function m(){g(),y(),_(),v(),b()}function g(){e.isDefined(p.mdDelay)||(u.delay=h)}function v(){u.$on("$destroy",function(){u.visible=!1,f.remove(),e.element(n).off("resize",D)}),u.$watch("visible",function(t){t?S():E()})}function b(){k.attr("aria-label")||k.text().trim()||k.attr("aria-label",f.text().trim())}function y(){f.detach(),f.attr("role","tooltip")}function w(){for(var t=f.parent();t&&"none"==n.getComputedStyle(t[0])["pointer-events"];)t=t.parent();return t}function x(){for(var t=f.parent()[0];t&&t!==s[0]&&t!==document.body;)t=t.parentNode;return t}function C(t,i){var r=n.getComputedStyle(f[0]);return e.isDefined(r[t])&&r[t]==i}function _(){var t=!1,i=function(){C("pointer-events","none")||$(!0)},o=function(){var e=u.hasOwnProperty("autohide")?u.autohide:p.hasOwnProperty("mdAutohide");(e||t||r[0].activeElement!==k[0])&&$(!1),t=!1};k.on("mousedown",function(){t=!0}),k.on("focus mouseenter touchstart",i),k.on("blur mouseleave touchend touchcancel",o),e.element(n).on("resize",D)}function $(e){$.value=!!e,$.queued||(e?($.queued=!0,t(function(){u.visible=$.value,$.queued=!1},u.delay)):t(function(){u.visible=!1}))}function S(){return I.append(f),C("display","none")?(u.visible=!1,void f.detach()):(T(),void e.forEach([f,A,M],function(t){l.addClass(t,"md-show")}))}function E(){c.all([l.removeClass(M,"md-show"),l.removeClass(A,"md-show"),l.removeClass(f,"md-show")]).then(function(){u.visible||f.detach()})}function T(){function t(){var t="left"===O||"right"===O?2*Math.sqrt(Math.pow(i.width,2)+Math.pow(i.height/2,2)):2*Math.sqrt(Math.pow(i.width/2,2)+Math.pow(i.height,2)),e="left"===O?{left:100,top:50}:"right"===O?{left:0,top:50}:"top"===O?{left:50,top:100}:{left:50,top:0};A.css({width:t+"px",height:t+"px",left:e.left+"%",top:e.top+"%"})}function e(t){var e={left:t.left,top:t.top};return e.left=Math.min(e.left,I.prop("scrollWidth")-i.width-d),e.left=Math.max(e.left,d),e.top=Math.min(e.top,I.prop("scrollHeight")-i.height-d),e.top=Math.max(e.top,d),e}function n(t){return"left"===t?{left:r.left-i.width-d,top:r.top+r.height/2-i.height/2}:"right"===t?{left:r.left+r.width+d,top:r.top+r.height/2-i.height/2}:"top"===t?{left:r.left+r.width/2-i.width/2,top:r.top-i.height-d}:{left:r.left+r.width/2-i.width/2,top:r.top+r.height+d}}var i=o.offsetRect(f,I),r=o.offsetRect(k,I),a=n(O);O?a=e(a):a.top>f.prop("offsetParent").scrollHeight-i.height-d&&(a=e(n("top"))),f.css({top:a.top+"px",left:a.left+"px"}),t()}a(f);var k=w(),A=e.element(f[0].getElementsByClassName("md-background")[0]),M=e.element(f[0].getElementsByClassName("md-content")[0]),O=p.mdDirection,P=x(),I=e.element(P||document.body),D=i.throttle(function(){u.visible&&T()});return m()}var h=300,d=8;return{restrict:"E",transclude:!0,priority:210,template:'        <div class="md-background"></div>        <div class="md-content" ng-transclude></div>',scope:{visible:"=?mdVisible",delay:"=?mdDelay",autohide:"=?mdAutohide"},link:u}}e.module("material.components.tooltip",["material.core"]).directive("mdTooltip",t),t.$inject=["$timeout","$window","$$rAF","$document","$mdUtil","$mdTheming","$rootElement","$animate","$q"]}(),function(){e.module("material.components.whiteframe",[])}(),function(){function t(t,n,o,a,s,l,c,u,h,d){function f(){o.initOptionalProperties(t,d,{searchText:null,selectedItem:null}),l(n),v(),s(function(){y(),g(),m()})}function p(){function t(){var t=J.ul.getBoundingClientRect(),n={};t.right>o.right-r&&(n.left=e.right-t.width+"px"),J.$.ul.css(n)}if(!J)return s(p,0,!1);var e=J.wrap.getBoundingClientRect(),n=J.snap.getBoundingClientRect(),o=J.root.getBoundingClientRect(),a=n.bottom-o.top,l=o.bottom-n.top,c=e.left-o.left,u=e.width,h={left:c+"px",minWidth:u+"px",maxWidth:Math.max(e.right-o.left,o.right-e.left)-r+"px"};a>l&&o.height-e.bottom-r<i?(h.top="auto",h.bottom=l+"px",h.maxHeight=Math.min(i,e.top-o.top-r)+"px"):(h.top=a+"px",h.bottom="auto",h.maxHeight=Math.min(i,o.bottom-e.bottom-r)+"px"),J.$.ul.css(h),s(t,0,!1)}function m(){J.$.root.length&&(l(J.$.ul),J.$.ul.detach(),J.$.root.append(J.$.ul),u.pin&&u.pin(J.$.ul,h))}function g(){t.autofocus&&J.input.focus()}function v(){var n=parseInt(t.delay,10)||0;d.$observe("disabled",function(t){G.isDisabled=t}),d.$observe("required",function(t){G.isRequired=null!==t}),t.$watch("searchText",n?o.debounce(M,n):M),k(E),t.$watch("selectedItem",T),e.element(c).on("resize",p),t.$on("$destroy",b)}function b(){e.element(c).off("resize",p),J.$.ul.remove()}function y(){J={main:n[0],ul:n.find("ul")[0],input:n.find("input")[0],wrap:n.find("md-autocomplete-wrap")[0],root:document.body},J.li=J.ul.getElementsByTagName("li"),J.snap=w(),J.$=x(J)}function w(){for(var t=n;t.length;t=t.parent())if(e.isDefined(t.attr("md-autocomplete-snap")))return t[0];return J.wrap}function x(t){var n={};for(var i in t)n[i]=e.element(t[i]);return n}function C(t,e){!t&&e&&p(),t?o.enableScrolling():J&&s(function(){o.disableScrollAround(J.ul)},0,!1)}function _(){et=!0}function $(){et=!1,it||(G.hidden=!0)}function S(){J.input.focus()}function E(n,i){n&&(t.searchText=N(n)),e.isFunction(t.itemChange)&&n!==i&&t.itemChange(L(n))}function T(t,e){for(var n=0;n<nt.length;++n)nt[n](t,e)}function k(t){-1==nt.indexOf(t)&&nt.push(t)}function A(t){var e=nt.indexOf(t);-1!=e&&nt.splice(e,1)}function M(n,i){G.index=F(),n!==i&&n!==N(t.selectedItem)&&(t.selectedItem=null,e.isFunction(t.textChange)&&n!==i&&t.textChange(L(t.selectedItem)),H()?X():(G.loading=!1,G.matches=[],G.hidden=j(),Y()))}function O(){it=!1,et||(G.hidden=!0)}function P(){it=!0,e.isString(t.searchText)||(t.searchText=""),t.minLength>0||(G.hidden=j(),G.hidden||X())}function I(t){switch(t.keyCode){case a.KEY_CODE.DOWN_ARROW:if(G.loading)return;t.preventDefault(),G.index=Math.min(G.index+1,G.matches.length-1),V(),Y();break;case a.KEY_CODE.UP_ARROW:if(G.loading)return;t.preventDefault(),G.index=G.index<0?G.matches.length-1:Math.max(0,G.index-1),V(),Y();break;case a.KEY_CODE.TAB:case a.KEY_CODE.ENTER:if(G.hidden||G.loading||G.index<0||G.matches.length<1)return;t.preventDefault(),W(G.index);break;case a.KEY_CODE.ESCAPE:G.matches=[],
G.hidden=!0,G.index=F()}}function D(){return e.isNumber(t.minLength)?t.minLength:1}function N(e){return e&&t.itemText?t.itemText(L(e)):e}function L(t){if(t){var e={};return G.itemName&&(e[G.itemName]=t),e}}function F(){return t.autoselect?0:-1}function j(){return H()?void 0:!0}function R(){return N(G.matches[G.index])}function H(){return e.isDefined(t.searchText)&&t.searchText.length>=D()}function B(t,e,n){Object.defineProperty(G,t,{get:function(){return n},set:function(t){var i=n;n=t,e(t,i)}})}function W(e){t.selectedItem=G.matches[e],G.hidden=!0,G.index=0,G.matches=[],s(function(){J.$.input.controller("ngModel").$setViewValue(N(t.selectedItem)||t.searchText),G.hidden=!0})}function z(){t.searchText="",W(-1);var e=document.createEvent("CustomEvent");e.initCustomEvent("input",!0,!0,{value:t.searchText}),J.input.dispatchEvent(e),J.input.focus()}function U(n){function i(e){tt[o]=e,n===t.searchText&&(G.loading=!1,Q=null,G.matches=e,G.hidden=j(),Y(),p())}var r=t.$parent.$eval(Z),o=n.toLowerCase();e.isArray(r)?i(r):r&&(G.loading=!0,r.success&&r.success(i),r.then&&r.then(i),r.error&&r.error(function(){G.loading=!1}))}function Y(){G.messages=[q(),R()]}function q(){if(rt===G.matches.length)return"";switch(rt=G.matches.length,G.matches.length){case 0:return"There are no matches available.";case 1:return"There is 1 match available.";default:return"There are "+G.matches.length+" matches available."}}function V(){if(J.li[G.index]){var t=J.li[G.index],e=t.offsetTop,n=e+t.offsetHeight,i=J.ul.clientHeight;e<J.ul.scrollTop?J.ul.scrollTop=e:n>J.ul.scrollTop+i&&(J.ul.scrollTop=n-i)}}function X(){var e=t.searchText,n=e.toLowerCase();Q&&Q.cancel&&(Q.cancel(),Q=null),!t.noCache&&tt[n]?(G.matches=tt[n],Y()):U(e),it&&(G.hidden=j())}var G=this,K=t.itemsExpr.split(/ in /i),Z=K[1],J=null,Q=null,tt={},et=!1,nt=[],it=!1,rt=0;return B("hidden",C,!0),G.scope=t,G.parent=t.$parent,G.itemName=K[0],G.matches=[],G.loading=!1,G.hidden=!0,G.index=null,G.messages=[],G.id=o.nextUid(),G.isDisabled=null,G.isRequired=null,G.keydown=I,G.blur=O,G.focus=P,G.clear=z,G.select=W,G.listEnter=_,G.listLeave=$,G.mouseUp=S,G.getCurrentDisplayValue=R,G.registerSelectedItemWatcher=k,G.unregisterSelectedItemWatcher=A,f()}e.module("material.components.autocomplete").controller("MdAutocompleteCtrl",t);var n=41,i=5.5*n,r=8;t.$inject=["$scope","$element","$mdUtil","$mdConstant","$timeout","$mdTheming","$window","$animate","$rootElement","$attrs"]}(),function(){function t(t,e){return{controller:"MdAutocompleteCtrl",controllerAs:"$mdAutocompleteCtrl",scope:{inputName:"@mdInputName",inputMinlength:"@mdInputMinlength",inputMaxlength:"@mdInputMaxlength",searchText:"=?mdSearchText",selectedItem:"=?mdSelectedItem",itemsExpr:"@mdItems",itemText:"&mdItemText",placeholder:"@placeholder",noCache:"=?mdNoCache",itemChange:"&?mdSelectedItemChange",textChange:"&?mdSearchTextChange",minLength:"=?mdMinLength",delay:"=?mdDelay",autofocus:"=?mdAutofocus",floatingLabel:"@?mdFloatingLabel",autoselect:"=?mdAutoselect",menuClass:"@?mdMenuClass"},template:function(t,e){function n(){var e=t.find("md-item-template").remove(),n=e.length?e.html():t.html();return e.length||t.empty(),n}function i(){var e=t.find("md-not-found").remove(),n=e.length?e.html():"";return n?'<li ng-if="!$mdAutocompleteCtrl.matches.length && !$mdAutocompleteCtrl.loading                         && !$mdAutocompleteCtrl.hidden"                         ng-hide="$mdAutocompleteCtrl.hidden"                         md-autocomplete-parent-scope>'+n+"</li>":""}function r(){return e.mdFloatingLabel?'            <md-input-container flex ng-if="floatingLabel">              <label>{{floatingLabel}}</label>              <input type="search"                  id="fl-input-{{$mdAutocompleteCtrl.id}}"                  name="{{inputName}}"                  autocomplete="off"                  ng-required="isRequired"                  ng-minlength="inputMinlength"                  ng-maxlength="inputMaxlength"                  ng-disabled="$mdAutocompleteCtrl.isDisabled"                  ng-model="$mdAutocompleteCtrl.scope.searchText"                  ng-keydown="$mdAutocompleteCtrl.keydown($event)"                  ng-blur="$mdAutocompleteCtrl.blur()"                  ng-focus="$mdAutocompleteCtrl.focus()"                  aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                  aria-label="{{floatingLabel}}"                  aria-autocomplete="list"                  aria-haspopup="true"                  aria-activedescendant=""                  aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>              <div md-autocomplete-parent-scope md-autocomplete-replace>'+s+"</div>            </md-input-container>":'            <input flex type="search"                id="input-{{$mdAutocompleteCtrl.id}}"                name="{{inputName}}"                ng-if="!floatingLabel"                autocomplete="off"                ng-required="isRequired"                ng-disabled="$mdAutocompleteCtrl.isDisabled"                ng-model="$mdAutocompleteCtrl.scope.searchText"                ng-keydown="$mdAutocompleteCtrl.keydown($event)"                ng-blur="$mdAutocompleteCtrl.blur()"                ng-focus="$mdAutocompleteCtrl.focus()"                placeholder="{{placeholder}}"                aria-owns="ul-{{$mdAutocompleteCtrl.id}}"                aria-label="{{placeholder}}"                aria-autocomplete="list"                aria-haspopup="true"                aria-activedescendant=""                aria-expanded="{{!$mdAutocompleteCtrl.hidden}}"/>            <button                type="button"                tabindex="-1"                ng-if="$mdAutocompleteCtrl.scope.searchText && !$mdAutocompleteCtrl.isDisabled"                ng-click="$mdAutocompleteCtrl.clear()">              <md-icon md-svg-icon="md-close"></md-icon>              <span class="md-visually-hidden">Clear</span>            </button>                '}var o=i(),a=n(),s=t.html();return'        <md-autocomplete-wrap            layout="row"            ng-class="{ \'md-whiteframe-z1\': !floatingLabel }"            role="listbox">          '+r()+'          <md-progress-linear              ng-if="$mdAutocompleteCtrl.loading"              md-mode="indeterminate"></md-progress-linear>          <ul role="presentation"              class="md-autocomplete-suggestions md-whiteframe-z1 {{menuClass || \'\'}}"              id="ul-{{$mdAutocompleteCtrl.id}}"              ng-hide="$mdAutocompleteCtrl.hidden"              ng-mouseenter="$mdAutocompleteCtrl.listEnter()"              ng-mouseleave="$mdAutocompleteCtrl.listLeave()"              ng-mouseup="$mdAutocompleteCtrl.mouseUp()">            <li ng-repeat="(index, item) in $mdAutocompleteCtrl.matches"                ng-class="{ selected: index === $mdAutocompleteCtrl.index }"                ng-click="$mdAutocompleteCtrl.select(index)"                md-autocomplete-list-item="$mdAutocompleteCtrl.itemName">                '+a+"            </li>            "+o+'          </ul>        </md-autocomplete-wrap>        <aria-status            class="md-visually-hidden"            role="status"            aria-live="assertive">          <p ng-repeat="message in $mdAutocompleteCtrl.messages" ng-if="message">{{message}}</p>        </aria-status>'}}}e.module("material.components.autocomplete").directive("mdAutocomplete",t),t.$inject=["$mdTheming","$mdUtil"]}(),function(){function t(t,n,i){function r(r){var o=i(n.html())(t),s=e.element("<div>").text(o).html(),l=n.attr("md-highlight-flags")||"",c=t.$watch(r,function(t){var e=a(t,l),i=s.replace(e,'<span class="highlight">$&</span>');n.html(i)});n.on("$destroy",function(){c()})}function o(t){return t?t.replace(/[\\\^\$\*\+\?\.\(\)\|\{\}\[\]]/g,"\\$&"):t}function a(t,e){var n="";return e.indexOf("^")>=1&&(n+="^"),n+=t,e.indexOf("$")>=1&&(n+="$"),new RegExp(o(n),e.replace(/[\$\^]/g,""))}return this.init=r,r()}e.module("material.components.autocomplete").controller("MdHighlightCtrl",t),t.$inject=["$scope","$element","$interpolate"]}(),function(){function t(){return{terminal:!0,scope:!1,controller:"MdHighlightCtrl",link:function(t,e,n,i){i.init(n.mdHighlightText)}}}e.module("material.components.autocomplete").directive("mdHighlightText",t)}(),function(){function t(t,e){function n(n,i,r){var o=n.$parent.$mdAutocompleteCtrl,a=o.parent.$new(!1,o.parent),s=o.scope.$eval(r.mdAutocompleteListItem);a[s]=n.item,t(i.contents())(a),i.attr({role:"option",id:"item_"+e.nextUid()})}return{terminal:!0,link:n,scope:!1}}e.module("material.components.autocomplete").directive("mdAutocompleteListItem",t),t.$inject=["$compile","$mdUtil"]}(),function(){function t(t,e){function n(e,n,i){var r=e.$parent.$mdAutocompleteCtrl;t(n.contents())(r.parent),i.hasOwnProperty("mdAutocompleteReplace")&&(n.after(n.contents()),n.remove())}return{restrict:"A",terminal:!0,link:n,scope:!1}}e.module("material.components.autocomplete").directive("mdAutocompleteParentScope",t),t.$inject=["$compile","$mdUtil"]}(),function(){function t(t){function i(i,r){return i.append(n),function(n,i,r,o){i.addClass("md-chip"),t(i),o&&e.element(i[0].querySelector(".md-chip-content")).on("blur",function(){o.selectedChip=-1})}}return{restrict:"E",require:"^?mdChips",compile:i}}e.module("material.components.chips").directive("mdChip",t);var n='    <span ng-if="!$mdChipsCtrl.readonly" class="md-visually-hidden">      {{$mdChipsCtrl.deleteHint}}    </span>';t.$inject=["$mdTheming"]}(),function(){function t(t){function e(e,n,i,r){n.on("click",function(t){e.$apply(function(){r.removeChip(e.$$replacedScope.$index)})}),t(function(){n.attr({tabindex:-1,ariaHidden:!0}),n.find("button").attr("tabindex","-1")})}return{restrict:"A",require:"^mdChips",scope:!1,link:e}}e.module("material.components.chips").directive("mdChipRemove",t),t.$inject=["$timeout"]}(),function(){function t(t,e){function n(e,n,i){var r=e.$parent.$mdChipsCtrl,o=r.parent.$new(!1,r.parent);o.$$replacedScope=e,o.$chip=e.$chip,o.$mdChipsCtrl=r,n.html(r.$scope.$eval(i.mdChipTransclude)),t(n.contents())(o)}return{restrict:"EA",terminal:!0,link:n,scope:!1}}e.module("material.components.chips").directive("mdChipTransclude",t),t.$inject=["$compile","$mdUtil"]}(),function(){function t(t,e,n,i,r){this.$timeout=r,this.$mdConstant=e,this.$scope=t,this.parent=t.$parent,this.$log=n,this.$element=i,this.ngModelCtrl=null,this.userInputNgModelCtrl=null,this.userInputElement=null,this.items=[],this.selectedChip=-1,this.deleteHint="Press delete to remove this chip.",this.deleteButtonLabel="Remove",this.chipBuffer="",this.useMdOnAppend=!1}e.module("material.components.chips").controller("MdChipsCtrl",t),t.$inject=["$scope","$mdConstant","$log","$element","$timeout"],t.prototype.inputKeydown=function(t){var e=this.getChipBuffer();switch(t.keyCode){case this.$mdConstant.KEY_CODE.ENTER:if(this.$scope.requireMatch||!e)break;t.preventDefault(),this.appendChip(e),this.resetChipBuffer();break;case this.$mdConstant.KEY_CODE.BACKSPACE:if(e)break;t.stopPropagation(),this.items.length&&this.selectAndFocusChipSafe(this.items.length-1)}},t.prototype.chipKeydown=function(t){if(!this.getChipBuffer())switch(t.keyCode){case this.$mdConstant.KEY_CODE.BACKSPACE:case this.$mdConstant.KEY_CODE.DELETE:if(this.selectedChip<0)return;t.preventDefault(),this.removeAndSelectAdjacentChip(this.selectedChip);break;case this.$mdConstant.KEY_CODE.LEFT_ARROW:t.preventDefault(),this.selectedChip<0&&(this.selectedChip=this.items.length),this.items.length&&this.selectAndFocusChipSafe(this.selectedChip-1);break;case this.$mdConstant.KEY_CODE.RIGHT_ARROW:t.preventDefault(),this.selectAndFocusChipSafe(this.selectedChip+1);break;case this.$mdConstant.KEY_CODE.ESCAPE:case this.$mdConstant.KEY_CODE.TAB:if(this.selectedChip<0)return;t.preventDefault(),this.onFocus()}},t.prototype.getPlaceholder=function(){var t=this.items.length&&(""==this.secondaryPlaceholder||this.secondaryPlaceholder);return t?this.placeholder:this.secondaryPlaceholder},t.prototype.removeAndSelectAdjacentChip=function(t){var n=this.getAdjacentChipIndex(t);this.removeChip(t),this.$timeout(e.bind(this,function(){this.selectAndFocusChipSafe(n)}))},t.prototype.resetSelectedChip=function(){this.selectedChip=-1},t.prototype.getAdjacentChipIndex=function(t){var e=this.items.length-1;return 0==e?-1:t==e?t-1:t},t.prototype.appendChip=function(t){this.items.indexOf(t)+1||(this.useMdOnAppend&&this.mdOnAppend&&(t=this.mdOnAppend({$chip:t})),this.items.push(t))},t.prototype.useMdOnAppendExpression=function(){this.useMdOnAppend=!0},t.prototype.getChipBuffer=function(){return this.userInputElement?this.userInputNgModelCtrl?this.userInputNgModelCtrl.$viewValue:this.userInputElement[0].value:this.chipBuffer},t.prototype.resetChipBuffer=function(){this.userInputElement?this.userInputNgModelCtrl?(this.userInputNgModelCtrl.$setViewValue(""),this.userInputNgModelCtrl.$render()):this.userInputElement[0].value="":this.chipBuffer=""},t.prototype.removeChip=function(t){this.items.splice(t,1)},t.prototype.removeChipAndFocusInput=function(t){this.removeChip(t),this.onFocus()},t.prototype.selectAndFocusChipSafe=function(t){return this.items.length?t===this.items.length?this.onFocus():(t=Math.max(t,0),t=Math.min(t,this.items.length-1),this.selectChip(t),void this.focusChip(t)):(this.selectChip(-1),void this.onFocus())},t.prototype.selectChip=function(t){t>=-1&&t<=this.items.length?this.selectedChip=t:this.$log.warn("Selected Chip index out of bounds; ignoring.")},t.prototype.selectAndFocusChip=function(t){this.selectChip(t),-1!=t&&this.focusChip(t)},t.prototype.focusChip=function(t){this.$element[0].querySelector('md-chip[index="'+t+'"] .md-chip-content').focus()},t.prototype.configureNgModel=function(t){this.ngModelCtrl=t;var e=this;t.$render=function(){e.items=e.ngModelCtrl.$viewValue}},t.prototype.onFocus=function(){var t=this.$element[0].querySelector("input");t&&t.focus(),this.resetSelectedChip()},t.prototype.onInputFocus=function(){this.inputHasFocus=!0,this.resetSelectedChip()},t.prototype.onInputBlur=function(){this.inputHasFocus=!1},t.prototype.configureUserInput=function(t){this.userInputElement=t;var n=t.controller("ngModel");n!=this.ngModelCtrl&&(this.userInputNgModelCtrl=n);var i=this.$scope,r=this;t.attr({tabindex:0}).on("keydown",function(t){i.$apply(e.bind(r,function(){r.inputKeydown(t)}))}).on("focus",e.bind(r,r.onInputFocus)).on("blur",e.bind(r,r.onInputBlur))},t.prototype.configureAutocomplete=function(t){t.registerSelectedItemWatcher(e.bind(this,function(t){t&&(this.appendChip(t),this.resetChipBuffer())})),this.$element.find("input").on("focus",e.bind(this,this.onInputFocus)).on("blur",e.bind(this,this.onInputBlur))},t.prototype.hasFocus=function(){return this.inputHasFocus||this.selectedChip>=0}}(),function(){function t(t,e,a,s,l){function c(n,c){function u(t){if(c.ngModel){var e=h[0].querySelector(t);return e&&e.outerHTML}}var h=c.$mdUserTemplate;c.$mdUserTemplate=null;var d=u("md-chips>*[md-chip-remove]")||o,f=u("md-chips>md-chip-template")||r,p=u("md-chips>md-autocomplete")||u("md-chips>input")||i,m=h.find("md-chip");return h[0].querySelector("md-chip-template>*[md-chip-remove]")&&s.warn("invalid placement of md-chip-remove within md-chip-template."),function(n,r,o,s){e.initOptionalProperties(n,c),t(r);var u=s[0];if(u.chipContentsTemplate=f,u.chipRemoveTemplate=d,u.chipInputTemplate=p,r.attr({ariaHidden:!0,tabindex:-1}).on("focus",function(){u.onFocus()}),c.ngModel&&(u.configureNgModel(r.controller("ngModel")),o.mdOnAppend&&u.useMdOnAppendExpression(),p!=i&&l(function(){0===p.indexOf("<md-autocomplete")&&u.configureAutocomplete(r.find("md-autocomplete").controller("mdAutocomplete")),u.configureUserInput(r.find("input"))})),m.length>0){var h=a(m)(n.$parent);l(function(){r.find("md-chips-wrap").prepend(h)})}}}return{template:function(t,e){e.$mdUserTemplate=t.clone();return n},require:["mdChips"],restrict:"E",controller:"MdChipsCtrl",controllerAs:"$mdChipsCtrl",bindToController:!0,compile:c,scope:{readonly:"=readonly",placeholder:"@",secondaryPlaceholder:"@",mdOnAppend:"&",deleteHint:"@",deleteButtonLabel:"@",requireMatch:"=?mdRequireMatch"}}}e.module("material.components.chips").directive("mdChips",t);var n='      <md-chips-wrap          ng-if="!$mdChipsCtrl.readonly || $mdChipsCtrl.items.length > 0"          ng-keydown="$mdChipsCtrl.chipKeydown($event)"          ng-class="{ \'md-focused\': $mdChipsCtrl.hasFocus() }"          class="md-chips">        <md-chip ng-repeat="$chip in $mdChipsCtrl.items"            index="{{$index}}"            ng-class="{\'md-focused\': $mdChipsCtrl.selectedChip == $index}">          <div class="md-chip-content"              tabindex="-1"              aria-hidden="true"              ng-focus="!$mdChipsCtrl.readonly && $mdChipsCtrl.selectChip($index)"              md-chip-transclude="$mdChipsCtrl.chipContentsTemplate"></div>          <div class="md-chip-remove-container"              md-chip-transclude="$mdChipsCtrl.chipRemoveTemplate"></div>        </md-chip>        <div ng-if="!$mdChipsCtrl.readonly && $mdChipsCtrl.ngModelCtrl"            class="md-chip-input-container"            md-chip-transclude="$mdChipsCtrl.chipInputTemplate"></div>        </div>      </md-chips-wrap>',i='        <input            tabindex="0"            placeholder="{{$mdChipsCtrl.getPlaceholder()}}"            aria-label="{{$mdChipsCtrl.getPlaceholder()}}"            ng-model="$mdChipsCtrl.chipBuffer"            ng-focus="$mdChipsCtrl.onInputFocus()"            ng-blur="$mdChipsCtrl.onInputBlur()"            ng-keydown="$mdChipsCtrl.inputKeydown($event)">',r="      <span>{{$chip}}</span>",o='      <button          class="md-chip-remove"          ng-if="!$mdChipsCtrl.readonly"          ng-click="$mdChipsCtrl.removeChipAndFocusInput($$replacedScope.$index)"          type="button"          aria-hidden="true"          tabindex="-1">        <md-icon md-svg-icon="md-close"></md-icon>        <span class="md-visually-hidden">          {{$mdChipsCtrl.deleteButtonLabel}}        </span>      </button>';t.$inject=["$mdTheming","$mdUtil","$compile","$log","$timeout"]}(),function(){function t(){this.selectedItem=null,this.searchText=""}e.module("material.components.chips").controller("MdContactChipsCtrl",t),t.prototype.queryContact=function(t){var n=this.contactQuery({$query:t});return this.filterSelected?n.filter(e.bind(this,this.filterSelectedContacts)):n},t.prototype.filterSelectedContacts=function(t){return-1==this.contacts.indexOf(t)}}(),function(){function t(t,e){function i(n,i){return function(n,r,o,a){e.initOptionalProperties(n,i),t(r),r.attr("tabindex","-1")}}return{template:function(t,e){return n},restrict:"E",controller:"MdContactChipsCtrl",controllerAs:"$mdContactChipsCtrl",bindToController:!0,compile:i,scope:{contactQuery:"&mdContacts",placeholder:"@",secondaryPlaceholder:"@",contactName:"@mdContactName",contactImage:"@mdContactImage",contactEmail:"@mdContactEmail",contacts:"=ngModel",requireMatch:"=?mdRequireMatch"}}}e.module("material.components.chips").directive("mdContactChips",t);var n='      <md-chips class="md-contact-chips"          ng-model="$mdContactChipsCtrl.contacts"          md-require-match="$mdContactChipsCtrl.requireMatch"          md-autocomplete-snap>          <md-autocomplete              md-menu-class="md-contact-chips-suggestions"              md-selected-item="$mdContactChipsCtrl.selectedItem"              md-search-text="$mdContactChipsCtrl.searchText"              md-items="item in $mdContactChipsCtrl.queryContact($mdContactChipsCtrl.searchText)"              md-item-text="$mdContactChipsCtrl.mdContactName"              md-no-cache="true"              md-autoselect              placeholder="{{$mdContactChipsCtrl.contacts.length == 0 ?                  $mdContactChipsCtrl.placeholder : $mdContactChipsCtrl.secondaryPlaceholder}}">            <div class="md-contact-suggestion">              <img                   ng-src="{{item[$mdContactChipsCtrl.contactImage]}}"                  alt="{{item[$mdContactChipsCtrl.contactName]}}" />              <span class="md-contact-name" md-highlight-text="$mdContactChipsCtrl.searchText">                {{item[$mdContactChipsCtrl.contactName]}}              </span>              <span class="md-contact-email" >{{item[$mdContactChipsCtrl.contactEmail]}}</span>            </div>          </md-autocomplete>          <md-chip-template>            <div class="md-contact-avatar">              <img                   ng-src="{{$chip[$mdContactChipsCtrl.contactImage]}}"                  alt="{{$chip[$mdContactChipsCtrl.contactName]}}" />            </div>            <div class="md-contact-name">              {{$chip[$mdContactChipsCtrl.contactName]}}            </div>          </md-chip-template>      </md-chips>';t.$inject=["$mdTheming","$mdUtil"]}(),function(){function t(){function t(t,n,i,r){if(r){var o=n.parent()[0].getElementsByTagName("md-tab"),a=Array.prototype.indexOf.call(o,n[0]),s=n.find("md-tab-body").eq(0).remove(),l=n.find("md-tab-label").eq(0).remove(),c=r.insertTab({scope:t,parent:t.$parent,index:a,element:n,template:s.html(),label:l.html()},a);t.select=t.select||e.noop,t.deselect=t.deselect||e.noop,t.$watch("active",function(t){t&&r.select(c.getIndex())}),t.$watch("disabled",function(){r.refreshIndex()}),t.$watch(function(){return Array.prototype.indexOf.call(o,n[0])},function(t){c.index=t,r.updateTabOrder()}),t.$on("$destroy",function(){r.removeTab(c)})}}return{require:"^?mdTabs",terminal:!0,template:function(t,e){function n(){function n(){return e.label}function i(){var e=t.find("md-tab-label").eq(0);return e.length?e.remove().html():void 0}function r(){var e=t.html();return t.empty(),e}return i()||n()||r()}function i(){var n=t.find("md-tab-body").eq(0),i=n.length?n.html():e.label?t.html():"";return n.length?n.remove():e.label&&t.empty(),i}var r=n(),o=i();return"<md-tab-label>"+r+"</md-tab-label><md-tab-body>"+o+"</md-tab-body>"},scope:{active:"=?mdActive",disabled:"=?ngDisabled",select:"&?mdOnSelect",deselect:"&?mdOnDeselect"},link:t}}e.module("material.components.tabs").directive("mdTab",t)}(),function(){function t(){return{require:"^?mdTabs",link:function(t,e,n,i){i&&i.attachRipple(t,e)}}}e.module("material.components.tabs").directive("mdTabItem",t)}(),function(){function t(){return{terminal:!0}}e.module("material.components.tabs").directive("mdTabLabel",t)}(),function(){function t(t){return{restrict:"A",compile:function(e,n){var i=t(n.mdTabScroll,null,!0);return function(t,e){e.on("mousewheel",function(e){t.$apply(function(){i(t,{$event:e})})})}}}}e.module("material.components.tabs").directive("mdTabScroll",t),t.$inject=["$parse"]}(),function(){function t(t,n,i,r,o,a,s,l,c,u,h){function d(){t.selectedIndex=t.selectedIndex||0,f(),m(),p(),h(n),r(function(){q(),W(),j(),Z.tabs[t.selectedIndex]&&Z.tabs[t.selectedIndex].scope.select(),nt=!0})}function f(){var t=c.$mdTabsTemplate,n=e.element(Q.data);n.html(t),u(n.contents())(Z.parent),delete c.$mdTabsTemplate}function p(){e.element(i).on("resize",T),e.element(Q.paging).on("DOMSubtreeModified",Z.updateInkBarStyles),e.element(Q.paging).on("DOMSubtreeModified",j)}function m(){s.initOptionalProperties(t,c),c.$observe("mdNoBar",function(n){t.noInkBar=e.isDefined(n)}),t.$watch("selectedIndex",w),t.$watch("dynamicHeight",function(t){t?n.addClass("md-dynamic-height"):n.removeClass("md-dynamic-height")}),t.$on("$destroy",g)}function g(){et=!0,e.element(i).off("resize",T),e.element(Q.paging).off("DOMSubtreeModified",Z.updateInkBarStyles),e.element(Q.paging).off("DOMSubtreeModified",j)}function v(t){n[t?"removeClass":"addClass"]("md-no-tab-content")}function b(n){var i=Z.shouldCenterTabs?"":"-"+n+"px";e.element(Q.paging).css(o.CSS.TRANSFORM,"translate3d("+i+", 0, 0)"),t.$broadcast("$mdTabsPaginationChanged")}function y(t,e){t!==e&&Q.tabs[t]&&(W(),B())}function w(e,n){e!==n&&(t.selectedIndex=L(e),Z.lastSelectedIndex=n,Z.updateInkBarStyles(),q(),W(e),t.$broadcast("$mdTabsChanged"),Z.tabs[n]&&Z.tabs[n].scope.deselect(),Z.tabs[e]&&Z.tabs[e].scope.select())}function x(){x.watcher||(x.watcher=t.$watch(function(){r(function(){x.watcher&&n.prop("offsetParent")&&(x.watcher(),x.watcher=null,T())},0,!1)}))}function C(e){switch(e.keyCode){case o.KEY_CODE.LEFT_ARROW:e.preventDefault(),H(-1,!0);break;case o.KEY_CODE.RIGHT_ARROW:e.preventDefault(),H(1,!0);break;case o.KEY_CODE.SPACE:case o.KEY_CODE.ENTER:e.preventDefault(),J||(t.selectedIndex=Z.focusIndex)}Z.lastClick=!1}function _(e){J||(Z.focusIndex=t.selectedIndex=e),Z.lastClick=!0,Z.tabs[e].element.triggerHandler("click")}function $(t){Z.shouldPaginate&&(t.preventDefault(),Z.offsetLeft=G(Z.offsetLeft-t.wheelDelta))}function S(){var t,e,n=Q.canvas.clientWidth,i=n+Z.offsetLeft;for(t=0;t<Q.tabs.length&&(e=Q.tabs[t],!(e.offsetLeft+e.offsetWidth>i));t++);Z.offsetLeft=G(e.offsetLeft)}function E(){var t,e;for(t=0;t<Q.tabs.length&&(e=Q.tabs[t],!(e.offsetLeft+e.offsetWidth>=Z.offsetLeft));t++);Z.offsetLeft=G(e.offsetLeft+e.offsetWidth-Q.canvas.clientWidth)}function T(){t.$apply(function(){Z.lastSelectedIndex=t.selectedIndex,Z.offsetLeft=G(Z.offsetLeft),r(Z.updateInkBarStyles,0,!1),r(j)})}function k(e){var n=t.selectedIndex,i=Z.tabs.splice(e.getIndex(),1)[0];Y(),t.selectedIndex!==n||et||(i.scope.deselect(),Z.tabs[t.selectedIndex]&&Z.tabs[t.selectedIndex].scope.select()),r(function(){j(),Z.offsetLeft=G(Z.offsetLeft)})}function A(n,i){var o={getIndex:function(){return Z.tabs.indexOf(a)},isActive:function(){return this.getIndex()===t.selectedIndex},isLeft:function(){return this.getIndex()<t.selectedIndex},isRight:function(){return this.getIndex()>t.selectedIndex},shouldRender:function(){return!t.noDisconnect||this.isActive()},hasFocus:function(){return!Z.lastClick&&Z.hasFocus&&this.getIndex()===Z.focusIndex},id:s.nextUid()},a=e.extend(o,n);return e.isDefined(i)?Z.tabs.splice(i,0,a):Z.tabs.push(a),z(),U(),nt&&t.autoselect&&r(function(){_(Z.tabs.indexOf(a))}),r(j),a}function M(){var t={};return t.wrapper=n[0].getElementsByTagName("md-tabs-wrapper")[0],t.data=n[0].getElementsByTagName("md-tab-data")[0],t.canvas=t.wrapper.getElementsByTagName("md-tabs-canvas")[0],t.paging=t.canvas.getElementsByTagName("md-pagination-wrapper")[0],t.tabs=t.paging.getElementsByTagName("md-tab-item"),t.dummies=t.canvas.getElementsByTagName("md-dummy-tab"),t.inkBar=t.paging.getElementsByTagName("md-ink-bar")[0],t.contentsWrapper=n[0].getElementsByTagName("md-tabs-content-wrapper")[0],t.contents=t.contentsWrapper.getElementsByTagName("md-tab-content"),t}function O(){return Z.offsetLeft>0}function P(){var t=Q.tabs[Q.tabs.length-1];return t&&t.offsetLeft+t.offsetWidth>Q.canvas.clientWidth+Z.offsetLeft}function I(){switch(t.stretchTabs){case"always":return!0;case"never":return!1;default:return!Z.shouldPaginate&&i.matchMedia("(max-width: 600px)").matches}}function D(){return t.centerTabs&&!Z.shouldPaginate}function N(){if(t.noPagination||!nt)return!1;var i=n.prop("clientWidth");return e.forEach(Q.dummies,function(t){i-=t.offsetWidth}),0>i}function L(t){var e,n,i=Math.max(Z.tabs.length-t,t);for(e=0;i>=e;e++){if(n=Z.tabs[t+e],n&&n.scope.disabled!==!0)return n.getIndex();if(n=Z.tabs[t-e],n&&n.scope.disabled!==!0)return n.getIndex()}return t}function F(t,e,n){Object.defineProperty(Z,t,{get:function(){return n},set:function(t){var i=n;n=t,e(t,i)}})}function j(){Z.shouldPaginate=N(),Z.shouldCenterTabs=D(),r(function(){W(t.selectedIndex)})}function R(){var e=Z.tabs[t.selectedIndex],n=Z.tabs[Z.focusIndex];Z.tabs=Z.tabs.sort(function(t,e){return t.index-e.index}),t.selectedIndex=Z.tabs.indexOf(e),Z.focusIndex=Z.tabs.indexOf(n)}function H(t){var e,n=Z.focusIndex;for(e=n+t;Z.tabs[e]&&Z.tabs[e].scope.disabled;e+=t);Z.tabs[e]&&(Z.focusIndex=e)}function B(){Q.dummies[Z.focusIndex].focus()}function W(t){if(Q.tabs[t]&&!Z.shouldCenterTabs){null==t&&(t=Z.focusIndex);var e=Q.tabs[t],n=e.offsetLeft,i=e.offsetWidth+n;Z.offsetLeft=Math.max(Z.offsetLeft,G(i-Q.canvas.clientWidth)),Z.offsetLeft=Math.min(Z.offsetLeft,G(n))}}function z(){tt.forEach(function(t){r(t)}),tt=[]}function U(){var t=!1;e.forEach(Z.tabs,function(e){e.template&&(t=!0)}),Z.hasContent=t}function Y(){t.selectedIndex=L(t.selectedIndex),Z.focusIndex=L(Z.focusIndex)}function q(){if(!t.dynamicHeight)return n.css("height","");if(!Z.tabs.length)return tt.push(q);var e=Q.contents[t.selectedIndex],i=e?e.offsetHeight:0,r=Q.wrapper.offsetHeight,o=i+r,a=n.prop("clientHeight");a!==o&&(J=!0,l.animate(n,{height:a+"px"},{height:o+"px"}).then(function(){n.css("height",""),J=!1}))}function V(){if(Q.tabs[t.selectedIndex]){if(!Z.tabs.length)return tt.push(Z.updateInkBarStyles);if(!n.prop("offsetParent"))return x();var i=t.selectedIndex,r=Q.paging.offsetWidth,o=Q.tabs[i],a=o.offsetLeft,s=r-a-o.offsetWidth;X(),e.element(Q.inkBar).css({left:a+"px",right:s+"px"})}}function X(){var n=t.selectedIndex,i=Z.lastSelectedIndex,r=e.element(Q.inkBar);e.isNumber(i)&&(i>n?r.addClass("md-left").removeClass("md-right"):n>i&&r.addClass("md-right").removeClass("md-left"))}function G(t){if(!Q.tabs.length||!Z.shouldPaginate)return 0;var e=Q.tabs[Q.tabs.length-1],n=e.offsetLeft+e.offsetWidth;return t=Math.max(0,t),t=Math.min(n-Q.canvas.clientWidth,t)}function K(t,n){var i={colorElement:e.element(Q.inkBar)};a.attach(t,n,i)}var Z=this,J=!1,Q=M(),tt=[],et=!1,nt=!1;F("focusIndex",y,t.selectedIndex||0),F("offsetLeft",b,0),F("hasContent",v,!1),Z.scope=t,Z.parent=t.$parent,Z.tabs=[],Z.lastSelectedIndex=null,Z.hasFocus=!1,Z.lastClick=!0,Z.shouldPaginate=!1,Z.shouldCenterTabs=D(),Z.redirectFocus=B,Z.attachRipple=K,Z.shouldStretchTabs=I,Z.insertTab=A,Z.removeTab=k,Z.select=_,Z.scroll=$,Z.nextPage=S,Z.previousPage=E,Z.keydown=C,Z.canPageForward=P,Z.canPageBack=O,Z.refreshIndex=Y,Z.incrementSelectedIndex=H,Z.updateInkBarStyles=s.debounce(V,100),Z.updateTabOrder=s.debounce(R,100),d()}e.module("material.components.tabs").controller("MdTabsController",t),t.$inject=["$scope","$element","$window","$timeout","$mdConstant","$mdTabInkRipple","$mdUtil","$animate","$attrs","$compile","$mdTheming"]}(),function(){function t(t,e,n){return{scope:{noPagination:"=?mdNoPagination",dynamicHeight:"=?mdDynamicHeight",centerTabs:"=?mdCenterTabs",selectedIndex:"=?mdSelected",stretchTabs:"@?mdStretchTabs",swipeContent:"=?mdSwipeContent",noDisconnect:"=?mdNoDisconnect",autoselect:"=?mdAutoselect"},template:function(t,e){return e.$mdTabsTemplate=t.html(),'        <md-tabs-wrapper ng-class="{ \'md-stretch-tabs\': $mdTabsCtrl.shouldStretchTabs() }">          <md-tab-data></md-tab-data>          <md-prev-button              tabindex="-1"              role="button"              aria-label="Previous Page"              aria-disabled="{{!$mdTabsCtrl.canPageBack()}}"              ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageBack() }"              ng-if="$mdTabsCtrl.shouldPaginate"              ng-click="$mdTabsCtrl.previousPage()">            <md-icon md-svg-icon="md-tabs-arrow"></md-icon>          </md-prev-button>          <md-next-button              tabindex="-1"              role="button"              aria-label="Next Page"              aria-disabled="{{!$mdTabsCtrl.canPageForward()}}"              ng-class="{ \'md-disabled\': !$mdTabsCtrl.canPageForward() }"              ng-if="$mdTabsCtrl.shouldPaginate"              ng-click="$mdTabsCtrl.nextPage()">            <md-icon md-svg-icon="md-tabs-arrow"></md-icon>          </md-next-button>          <md-tabs-canvas              tabindex="0"              aria-activedescendant="tab-item-{{$mdTabsCtrl.tabs[$mdTabsCtrl.focusIndex].id}}"              ng-focus="$mdTabsCtrl.redirectFocus()"              ng-class="{                  \'md-paginated\': $mdTabsCtrl.shouldPaginate,                  \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs              }"              ng-keydown="$mdTabsCtrl.keydown($event)"              role="tablist">            <md-pagination-wrapper                ng-class="{ \'md-center-tabs\': $mdTabsCtrl.shouldCenterTabs }"                md-tab-scroll="$mdTabsCtrl.scroll($event)">              <md-tab-item                  tabindex="-1"                  class="md-tab"                  style="max-width: {{ tabWidth ? tabWidth + \'px\' : \'none\' }}"                  ng-repeat="tab in $mdTabsCtrl.tabs"                  role="tab"                  aria-controls="tab-content-{{tab.id}}"                  aria-selected="{{tab.isActive()}}"                  aria-disabled="{{tab.scope.disabled || \'false\'}}"                  ng-click="$mdTabsCtrl.select(tab.getIndex())"                  ng-class="{                      \'md-active\':    tab.isActive(),                      \'md-focused\':   tab.hasFocus(),                      \'md-disabled\':  tab.scope.disabled                  }"                  ng-disabled="tab.scope.disabled"                  md-swipe-left="$mdTabsCtrl.nextPage()"                  md-swipe-right="$mdTabsCtrl.previousPage()"                  md-template="tab.label"                  md-scope="tab.parent"></md-tab-item>              <md-ink-bar ng-hide="noInkBar"></md-ink-bar>            </md-pagination-wrapper>            <div class="md-visually-hidden md-dummy-wrapper">              <md-dummy-tab                  class="md-tab"                  tabindex="-1"                  id="tab-item-{{tab.id}}"                  role="tab"                  aria-controls="tab-content-{{tab.id}}"                  aria-selected="{{tab.isActive()}}"                  aria-disabled="{{tab.scope.disabled || \'false\'}}"                  ng-focus="$mdTabsCtrl.hasFocus = true"                  ng-blur="$mdTabsCtrl.hasFocus = false"                  ng-repeat="tab in $mdTabsCtrl.tabs"                  md-template="tab.label"                  md-scope="tab.parent"></md-dummy-tab>            </div>          </md-tabs-canvas>        </md-tabs-wrapper>        <md-tabs-content-wrapper ng-show="$mdTabsCtrl.hasContent">          <md-tab-content              id="tab-content-{{tab.id}}"              role="tabpanel"              aria-labelledby="tab-item-{{tab.id}}"              md-swipe-left="swipeContent && $mdTabsCtrl.incrementSelectedIndex(1)"              md-swipe-right="swipeContent && $mdTabsCtrl.incrementSelectedIndex(-1)"              ng-if="$mdTabsCtrl.hasContent"              ng-repeat="(index, tab) in $mdTabsCtrl.tabs"              md-connected-if="tab.isActive()"              ng-class="{                \'md-no-transition\': $mdTabsCtrl.lastSelectedIndex == null,                \'md-active\':        tab.isActive(),                \'md-left\':          tab.isLeft(),                \'md-right\':         tab.isRight(),                \'md-no-scroll\':     dynamicHeight              }">            <div                md-template="tab.template"                md-scope="tab.parent"                ng-if="tab.shouldRender()"></div>          </md-tab-content>        </md-tabs-content-wrapper>      ';

},controller:"MdTabsController",controllerAs:"$mdTabsCtrl"}}e.module("material.components.tabs").directive("mdTabs",t),t.$inject=["$mdTheming","$mdUtil","$compile"]}(),function(){function t(t,e,n){function i(i,r,o,a){function s(){i.$watch("connected",function(t){t===!1?l():c()}),i.$on("$destroy",c)}function l(){a.scope.noDisconnect||e.disconnectScope(u)}function c(){a.scope.noDisconnect||e.reconnectScope(u)}if(a){var u=i.compileScope.$new();return r.html(i.template),t(r.contents())(u),n(s)}}return{restrict:"A",link:i,scope:{template:"=mdTemplate",compileScope:"=mdScope",connected:"=?mdConnectedIf"},require:"^?mdTabs"}}e.module("material.components.tabs").directive("mdTemplate",t),t.$inject=["$compile","$mdUtil","$timeout"]}(),function(){e.module("material.core").constant("$MD_THEME_CSS","/* mixin definition ; sets LTR and RTL within the same style call */md-autocomplete.md-THEME_NAME-theme {  background: '{{background-50}}'; }  md-autocomplete.md-THEME_NAME-theme[disabled] {    background: '{{background-100}}'; }  md-autocomplete.md-THEME_NAME-theme button md-icon path {    fill: '{{background-600}}'; }  md-autocomplete.md-THEME_NAME-theme button:after {    background: '{{background-600-0.3}}'; }.md-autocomplete-suggestions.md-THEME_NAME-theme {  background: '{{background-50}}'; }  .md-autocomplete-suggestions.md-THEME_NAME-theme li {    color: '{{background-900}}'; }    .md-autocomplete-suggestions.md-THEME_NAME-theme li .highlight {      color: '{{background-600}}'; }    .md-autocomplete-suggestions.md-THEME_NAME-theme li:hover, .md-autocomplete-suggestions.md-THEME_NAME-theme li.selected {      background: '{{background-200}}'; }md-backdrop.md-opaque.md-THEME_NAME-theme {  background-color: '{{foreground-4-0.5}}'; }md-bottom-sheet.md-THEME_NAME-theme {  background-color: '{{background-50}}';  border-top-color: '{{background-300}}'; }  md-bottom-sheet.md-THEME_NAME-theme.md-list md-list-item {    color: '{{foreground-1}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    background-color: '{{background-50}}'; }  md-bottom-sheet.md-THEME_NAME-theme .md-subheader {    color: '{{foreground-1}}'; }a.md-button.md-THEME_NAME-theme, .md-button.md-THEME_NAME-theme {  border-radius: 3px; }  a.md-button.md-THEME_NAME-theme:not([disabled]):hover, .md-button.md-THEME_NAME-theme:not([disabled]):hover {    background-color: '{{background-500-0.2}}'; }  a.md-button.md-THEME_NAME-theme:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme:not([disabled]).md-focused {    background-color: '{{background-500-0.2}}'; }  a.md-button.md-THEME_NAME-theme:not([disabled]).md-icon-button:hover, .md-button.md-THEME_NAME-theme:not([disabled]).md-icon-button:hover {    background-color: transparent; }  a.md-button.md-THEME_NAME-theme.md-fab, .md-button.md-THEME_NAME-theme.md-fab {    border-radius: 50%;    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-fab md-icon, .md-button.md-THEME_NAME-theme.md-fab md-icon {      color: '{{accent-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {      background-color: '{{accent-color}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {      background-color: '{{accent-A700}}'; }  a.md-button.md-THEME_NAME-theme.md-icon-button, .md-button.md-THEME_NAME-theme.md-icon-button {    border-radius: 50%; }  a.md-button.md-THEME_NAME-theme.md-primary, .md-button.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }    a.md-button.md-THEME_NAME-theme.md-primary.md-raised, a.md-button.md-THEME_NAME-theme.md-primary.md-fab, .md-button.md-THEME_NAME-theme.md-primary.md-raised, .md-button.md-THEME_NAME-theme.md-primary.md-fab {      color: '{{primary-contrast}}';      background-color: '{{primary-color}}'; }      a.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]) md-icon, a.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]) md-icon {        color: '{{primary-contrast}}'; }      a.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover, a.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]):hover {        background-color: '{{primary-color}}'; }      a.md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]).md-focused, a.md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-primary.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-primary.md-fab:not([disabled]).md-focused {        background-color: '{{primary-600}}'; }    a.md-button.md-THEME_NAME-theme.md-primary:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-primary:not([disabled]) md-icon {      color: '{{primary-color}}'; }  a.md-button.md-THEME_NAME-theme.md-fab, .md-button.md-THEME_NAME-theme.md-fab {    border-radius: 50%;    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]) .md-icon, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]) .md-icon {      color: '{{accent-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]):hover {      background-color: '{{accent-color}}'; }    a.md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-fab:not([disabled]).md-focused {      background-color: '{{accent-A700}}'; }  a.md-button.md-THEME_NAME-theme.md-raised, .md-button.md-THEME_NAME-theme.md-raised {    color: '{{background-contrast}}';    background-color: '{{background-50}}'; }    a.md-button.md-THEME_NAME-theme.md-raised:not([disabled]) .md-icon, .md-button.md-THEME_NAME-theme.md-raised:not([disabled]) .md-icon {      color: '{{background-contrast}}'; }    a.md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-raised:not([disabled]):hover {      background-color: '{{background-50}}'; }    a.md-button.md-THEME_NAME-theme.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-raised:not([disabled]).md-focused {      background-color: '{{background-200}}'; }  a.md-button.md-THEME_NAME-theme.md-warn, .md-button.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }    a.md-button.md-THEME_NAME-theme.md-warn.md-raised, a.md-button.md-THEME_NAME-theme.md-warn.md-fab, .md-button.md-THEME_NAME-theme.md-warn.md-raised, .md-button.md-THEME_NAME-theme.md-warn.md-fab {      color: '{{warn-contrast}}';      background-color: '{{warn-color}}'; }      a.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]) md-icon, a.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]) md-icon {        color: '{{warn-contrast}}'; }      a.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover, a.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]):hover {        background-color: '{{warn-color}}'; }      a.md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]).md-focused, a.md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-warn.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-warn.md-fab:not([disabled]).md-focused {        background-color: '{{warn-700}}'; }    a.md-button.md-THEME_NAME-theme.md-warn:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-warn:not([disabled]) md-icon {      color: '{{warn-color}}'; }  a.md-button.md-THEME_NAME-theme.md-accent, .md-button.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }    a.md-button.md-THEME_NAME-theme.md-accent.md-raised, a.md-button.md-THEME_NAME-theme.md-accent.md-fab, .md-button.md-THEME_NAME-theme.md-accent.md-raised, .md-button.md-THEME_NAME-theme.md-accent.md-fab {      color: '{{accent-contrast}}';      background-color: '{{accent-color}}'; }      a.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]) md-icon, a.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]) md-icon {        color: '{{accent-contrast}}'; }      a.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover, a.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]):hover, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]):hover {        background-color: '{{accent-color}}'; }      a.md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]).md-focused, a.md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-accent.md-raised:not([disabled]).md-focused, .md-button.md-THEME_NAME-theme.md-accent.md-fab:not([disabled]).md-focused {        background-color: '{{accent-700}}'; }    a.md-button.md-THEME_NAME-theme.md-accent:not([disabled]) md-icon, .md-button.md-THEME_NAME-theme.md-accent:not([disabled]) md-icon {      color: '{{accent-color}}'; }  a.md-button.md-THEME_NAME-theme[disabled], a.md-button.md-THEME_NAME-theme.md-raised[disabled], a.md-button.md-THEME_NAME-theme.md-fab[disabled], a.md-button.md-THEME_NAME-theme.md-accent[disabled], a.md-button.md-THEME_NAME-theme.md-warn[disabled], .md-button.md-THEME_NAME-theme[disabled], .md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled], .md-button.md-THEME_NAME-theme.md-accent[disabled], .md-button.md-THEME_NAME-theme.md-warn[disabled] {    color: '{{foreground-3}}';    cursor: not-allowed; }    a.md-button.md-THEME_NAME-theme[disabled] md-icon, a.md-button.md-THEME_NAME-theme.md-raised[disabled] md-icon, a.md-button.md-THEME_NAME-theme.md-fab[disabled] md-icon, a.md-button.md-THEME_NAME-theme.md-accent[disabled] md-icon, a.md-button.md-THEME_NAME-theme.md-warn[disabled] md-icon, .md-button.md-THEME_NAME-theme[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-raised[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-fab[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-accent[disabled] md-icon, .md-button.md-THEME_NAME-theme.md-warn[disabled] md-icon {      color: '{{foreground-3}}'; }  a.md-button.md-THEME_NAME-theme.md-raised[disabled], a.md-button.md-THEME_NAME-theme.md-fab[disabled], .md-button.md-THEME_NAME-theme.md-raised[disabled], .md-button.md-THEME_NAME-theme.md-fab[disabled] {    background-color: '{{foreground-4}}'; }  a.md-button.md-THEME_NAME-theme[disabled], .md-button.md-THEME_NAME-theme[disabled] {    background-color: transparent; }md-card.md-THEME_NAME-theme {  background-color: '{{background-color}}';  border-radius: 2px; }  md-card.md-THEME_NAME-theme .md-card-image {    border-radius: 2px 2px 0 0; }md-checkbox.md-THEME_NAME-theme .md-ripple {  color: '{{accent-600}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme.md-checked.md-focused .md-container:before {  background-color: '{{accent-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme .md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-icon {  background-color: '{{accent-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme.md-checked .md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-ripple {  color: '{{primary-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ripple {  color: '{{background-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary .md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon {  background-color: '{{primary-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked.md-focused .md-container:before {  background-color: '{{primary-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-ripple {  color: '{{warn-600}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn .md-icon {  border-color: '{{foreground-2}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon {  background-color: '{{warn-color-0.87}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked.md-focused:not([disabled]) .md-container:before {  background-color: '{{warn-color-0.26}}'; }md-checkbox.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-icon:after {  border-color: '{{background-200}}'; }md-checkbox.md-THEME_NAME-theme[disabled] .md-icon {  border-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled].md-checked .md-icon {  background-color: '{{foreground-3}}'; }md-checkbox.md-THEME_NAME-theme[disabled] .md-label {  color: '{{foreground-3}}'; }md-chips.md-THEME_NAME-theme .md-chips {  box-shadow: 0 1px '{{background-300}}'; }  md-chips.md-THEME_NAME-theme .md-chips.md-focused {    box-shadow: 0 2px '{{primary-color}}'; }md-chips.md-THEME_NAME-theme .md-chip {  background: '{{background-300}}';  color: '{{background-800}}'; }  md-chips.md-THEME_NAME-theme .md-chip.md-focused {    background: '{{primary-color}}';    color: '{{primary-contrast}}'; }    md-chips.md-THEME_NAME-theme .md-chip.md-focused md-icon {      color: '{{primary-contrast}}'; }md-chips.md-THEME_NAME-theme md-chip-remove .md-button md-icon path {  fill: '{{background-500}}'; }.md-contact-suggestion span.md-contact-email {  color: '{{background-400}}'; }md-content.md-THEME_NAME-theme {  background-color: '{{background-color}}'; }md-dialog.md-THEME_NAME-theme {  border-radius: 4px;  background-color: '{{background-color}}'; }  md-dialog.md-THEME_NAME-theme.md-content-overflow .md-actions {    border-top-color: '{{foreground-4}}'; }md-divider.md-THEME_NAME-theme {  border-top-color: '{{foreground-4}}'; }md-icon.md-THEME_NAME-theme {  color: '{{foreground-2}}'; }  md-icon.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  md-icon.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  md-icon.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-input-container.md-THEME_NAME-theme .md-input {  color: '{{foreground-1}}';  border-color: '{{foreground-4}}';  text-shadow: '{{foreground-shadow}}'; }  md-input-container.md-THEME_NAME-theme .md-input::-webkit-input-placeholder, md-input-container.md-THEME_NAME-theme .md-input::-moz-placeholder, md-input-container.md-THEME_NAME-theme .md-input:-moz-placeholder, md-input-container.md-THEME_NAME-theme .md-input:-ms-input-placeholder {    color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme > md-icon {  color: '{{foreground-1}}'; }md-input-container.md-THEME_NAME-theme label, md-input-container.md-THEME_NAME-theme .md-placeholder {  text-shadow: '{{foreground-shadow}}';  color: '{{foreground-3}}'; }md-input-container.md-THEME_NAME-theme ng-messages, md-input-container.md-THEME_NAME-theme [ng-message], md-input-container.md-THEME_NAME-theme [data-ng-message], md-input-container.md-THEME_NAME-theme [x-ng-message] {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-has-value label {  color: '{{foreground-2}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused .md-input {  border-color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused label {  color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused md-icon {  color: '{{primary-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent .md-input {  border-color: '{{accent-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-accent label {  color: '{{accent-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn .md-input {  border-color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme:not(.md-input-invalid).md-input-focused.md-warn label {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid .md-input {  border-color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid.md-input-focused label {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme.md-input-invalid ng-message, md-input-container.md-THEME_NAME-theme.md-input-invalid data-ng-message, md-input-container.md-THEME_NAME-theme.md-input-invalid x-ng-message, md-input-container.md-THEME_NAME-theme.md-input-invalid [ng-message], md-input-container.md-THEME_NAME-theme.md-input-invalid [data-ng-message], md-input-container.md-THEME_NAME-theme.md-input-invalid [x-ng-message], md-input-container.md-THEME_NAME-theme.md-input-invalid .md-char-counter {  color: '{{warn-500}}'; }md-input-container.md-THEME_NAME-theme .md-input[disabled], [disabled] md-input-container.md-THEME_NAME-theme .md-input {  border-bottom-color: transparent;  color: '{{foreground-3}}';  background-image: linear-gradient(to right, '{{foreground-3}}' 0%, '{{foreground-3}}' 33%, transparent 0%);  background-image: -ms-linear-gradient(left, transparent 0%, '{{foreground-3}}' 100%); }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h3, md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text h4, md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h3, md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text h4 {  color: '{{foreground-1}}'; }md-list.md-THEME_NAME-theme md-list-item.md-2-line .md-list-item-text p, md-list.md-THEME_NAME-theme md-list-item.md-3-line .md-list-item-text p {  color: '{{foreground-2}}'; }md-list.md-THEME_NAME-theme .md-proxy-focus.md-focused div.md-no-style {  background-color: '{{background-100}}'; }md-list.md-THEME_NAME-theme md-list-item > md-icon {  color: '{{foreground-2}}'; }  md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight {    color: '{{primary-color}}'; }    md-list.md-THEME_NAME-theme md-list-item > md-icon.md-highlight.md-accent {      color: '{{accent-color}}'; }md-list.md-THEME_NAME-theme md-list-item button {  background-color: '{{background-color}}'; }  md-list.md-THEME_NAME-theme md-list-item button.md-button:not([disabled]):hover {    background-color: '{{background-color}}'; }md-menu-content.md-THEME_NAME-theme {  background-color: '{{background-color}}'; }  md-menu-content.md-THEME_NAME-theme md-menu-divider {    background-color: '{{foreground-4}}'; }md-progress-circular.md-THEME_NAME-theme {  background-color: transparent; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-gap {    border-top-color: '{{primary-color}}';    border-bottom-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-left .md-half-circle, md-progress-circular.md-THEME_NAME-theme .md-inner .md-right .md-half-circle {    border-top-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-right .md-half-circle {    border-right-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme .md-inner .md-left .md-half-circle {    border-left-color: '{{primary-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-gap {    border-top-color: '{{warn-color}}';    border-bottom-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-left .md-half-circle, md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-right .md-half-circle {    border-top-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-right .md-half-circle {    border-right-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-warn .md-inner .md-left .md-half-circle {    border-left-color: '{{warn-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-gap {    border-top-color: '{{accent-color}}';    border-bottom-color: '{{accent-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-left .md-half-circle, md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-right .md-half-circle {    border-top-color: '{{accent-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-right .md-half-circle {    border-right-color: '{{accent-color}}'; }  md-progress-circular.md-THEME_NAME-theme.md-accent .md-inner .md-left .md-half-circle {    border-left-color: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme .md-container {  background-color: '{{primary-100}}'; }md-progress-linear.md-THEME_NAME-theme .md-bar {  background-color: '{{primary-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn .md-container {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-warn .md-bar {  background-color: '{{warn-color}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent .md-container {  background-color: '{{accent-100}}'; }md-progress-linear.md-THEME_NAME-theme.md-accent .md-bar {  background-color: '{{accent-color}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-bar1 {  background-color: '{{warn-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-warn .md-dashed:before {  background: radial-gradient('{{warn-100}}' 0%, '{{warn-100}}' 16%, transparent 42%); }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-bar1 {  background-color: '{{accent-100}}'; }md-progress-linear.md-THEME_NAME-theme[md-mode=buffer].md-accent .md-dashed:before {  background: radial-gradient('{{accent-100}}' 0%, '{{accent-100}}' 16%, transparent 42%); }md-radio-button.md-THEME_NAME-theme .md-off {  border-color: '{{foreground-2}}'; }md-radio-button.md-THEME_NAME-theme .md-on {  background-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked .md-off {  border-color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme.md-checked .md-ink-ripple {  color: '{{accent-color-0.87}}'; }md-radio-button.md-THEME_NAME-theme .md-container .md-ripple {  color: '{{accent-600}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-on, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-on, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-on {  background-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-off {  border-color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary.md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary.md-checked .md-ink-ripple {  color: '{{primary-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-primary .md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-primary .md-container .md-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-primary .md-container .md-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-primary .md-container .md-ripple {  color: '{{primary-600}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-on, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-on, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-on, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-on {  background-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-off, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-off, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-off {  border-color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn.md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-checked .md-ink-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn.md-checked .md-ink-ripple {  color: '{{warn-color-0.87}}'; }md-radio-group.md-THEME_NAME-theme:not([disabled]) .md-warn .md-container .md-ripple, md-radio-group.md-THEME_NAME-theme:not([disabled]).md-warn .md-container .md-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]) .md-warn .md-container .md-ripple, md-radio-button.md-THEME_NAME-theme:not([disabled]).md-warn .md-container .md-ripple {  color: '{{warn-600}}'; }md-radio-group.md-THEME_NAME-theme[disabled], md-radio-button.md-THEME_NAME-theme[disabled] {  color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] .md-container .md-off, md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-off {    border-color: '{{foreground-3}}'; }  md-radio-group.md-THEME_NAME-theme[disabled] .md-container .md-on, md-radio-button.md-THEME_NAME-theme[disabled] .md-container .md-on {    border-color: '{{foreground-3}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked .md-container:before {  background-color: '{{accent-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked:not([disabled]).md-primary .md-container:before {  background-color: '{{primary-color-0.26}}'; }md-radio-group.md-THEME_NAME-theme.md-focused:not(:empty) .md-checked.md-primary .md-container:before {  background-color: '{{warn-color-0.26}}'; }md-select.md-THEME_NAME-theme.ng-invalid.ng-dirty .md-select-label {  color: '{{warn-500}}' !important;  border-bottom-color: '{{warn-500}}' !important; }md-select.md-THEME_NAME-theme:not([disabled]):focus .md-select-label {  border-bottom-color: '{{primary-color}}';  color: '{{ foreground-1 }}'; }  md-select.md-THEME_NAME-theme:not([disabled]):focus .md-select-label.md-placeholder {    color: '{{ foreground-1 }}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-accent .md-select-label {  border-bottom-color: '{{accent-color}}'; }md-select.md-THEME_NAME-theme:not([disabled]):focus.md-warn .md-select-label {  border-bottom-color: '{{warn-color}}'; }md-select.md-THEME_NAME-theme[disabled] .md-select-label {  color: '{{foreground-3}}'; }  md-select.md-THEME_NAME-theme[disabled] .md-select-label.md-placeholder {    color: '{{foreground-3}}'; }md-select.md-THEME_NAME-theme .md-select-label {  border-bottom-color: '{{foreground-4}}'; }  md-select.md-THEME_NAME-theme .md-select-label.md-placeholder {    color: '{{foreground-2}}'; }md-select-menu.md-THEME_NAME-theme md-optgroup {  color: '{{foreground-2}}'; }  md-select-menu.md-THEME_NAME-theme md-optgroup md-option {    color: '{{foreground-1}}'; }md-select-menu.md-THEME_NAME-theme md-option[selected] {  color: '{{primary-500}}'; }  md-select-menu.md-THEME_NAME-theme md-option[selected]:focus {    color: '{{primary-600}}'; }  md-select-menu.md-THEME_NAME-theme md-option[selected].md-accent {    color: '{{accent-500}}'; }    md-select-menu.md-THEME_NAME-theme md-option[selected].md-accent:focus {      color: '{{accent-600}}'; }md-select-menu.md-THEME_NAME-theme md-option:focus:not([selected]) {  background: '{{background-200}}'; }md-sidenav.md-THEME_NAME-theme {  background-color: '{{background-color}}'; }md-slider.md-THEME_NAME-theme .md-track {  background-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme .md-track-ticks {  background-color: '{{foreground-4}}'; }md-slider.md-THEME_NAME-theme .md-focus-thumb {  background-color: '{{foreground-2}}'; }md-slider.md-THEME_NAME-theme .md-focus-ring {  border-color: '{{foreground-4}}'; }md-slider.md-THEME_NAME-theme .md-disabled-thumb {  border-color: '{{background-color}}'; }md-slider.md-THEME_NAME-theme.md-min .md-thumb:after {  background-color: '{{background-color}}'; }md-slider.md-THEME_NAME-theme .md-track.md-track-fill {  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme .md-thumb:after {  border-color: '{{accent-color}}';  background-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme .md-sign {  background-color: '{{accent-color}}'; }  md-slider.md-THEME_NAME-theme .md-sign:after {    border-top-color: '{{accent-color}}'; }md-slider.md-THEME_NAME-theme .md-thumb-text {  color: '{{accent-contrast}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-track.md-track-fill {  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-thumb:after {  border-color: '{{warn-color}}';  background-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-sign {  background-color: '{{warn-color}}'; }  md-slider.md-THEME_NAME-theme.md-warn .md-sign:after {    border-top-color: '{{warn-color}}'; }md-slider.md-THEME_NAME-theme.md-warn .md-thumb-text {  color: '{{warn-contrast}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-track.md-track-fill {  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-thumb:after {  border-color: '{{primary-color}}';  background-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-sign {  background-color: '{{primary-color}}'; }  md-slider.md-THEME_NAME-theme.md-primary .md-sign:after {    border-top-color: '{{primary-color}}'; }md-slider.md-THEME_NAME-theme.md-primary .md-thumb-text {  color: '{{primary-contrast}}'; }md-slider.md-THEME_NAME-theme[disabled] .md-thumb:after {  border-color: '{{foreground-3}}'; }md-slider.md-THEME_NAME-theme[disabled]:not(.md-min) .md-thumb:after {  background-color: '{{foreground-3}}'; }.md-subheader.md-THEME_NAME-theme {  color: '{{ foreground-2-0.23 }}';  background-color: '{{background-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-primary {    color: '{{primary-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-accent {    color: '{{accent-color}}'; }  .md-subheader.md-THEME_NAME-theme.md-warn {    color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme .md-thumb {  background-color: '{{background-50}}'; }md-switch.md-THEME_NAME-theme .md-bar {  background-color: '{{background-500}}'; }md-switch.md-THEME_NAME-theme.md-checked .md-thumb {  background-color: '{{accent-color}}'; }md-switch.md-THEME_NAME-theme.md-checked .md-bar {  background-color: '{{accent-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-focused .md-thumb:before {  background-color: '{{accent-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-thumb {  background-color: '{{primary-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary .md-bar {  background-color: '{{primary-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-primary.md-focused .md-thumb:before {  background-color: '{{primary-color-0.26}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-thumb {  background-color: '{{warn-color}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn .md-bar {  background-color: '{{warn-color-0.5}}'; }md-switch.md-THEME_NAME-theme.md-checked.md-warn.md-focused .md-thumb:before {  background-color: '{{warn-color-0.26}}'; }md-switch.md-THEME_NAME-theme[disabled] .md-thumb {  background-color: '{{background-400}}'; }md-switch.md-THEME_NAME-theme[disabled] .md-bar {  background-color: '{{foreground-4}}'; }md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: transparent;  border-color: '{{foreground-4}}'; }md-tabs.md-THEME_NAME-theme .md-paginator md-icon {  color: '{{primary-color}}'; }md-tabs.md-THEME_NAME-theme md-ink-bar {  color: '{{accent-color}}';  background: '{{accent-color}}'; }md-tabs.md-THEME_NAME-theme .md-tab {  color: '{{foreground-2}}'; }  md-tabs.md-THEME_NAME-theme .md-tab[disabled] {    color: '{{foreground-3}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-active, md-tabs.md-THEME_NAME-theme .md-tab.md-focused {    color: '{{primary-color}}'; }  md-tabs.md-THEME_NAME-theme .md-tab.md-focused {    background: '{{primary-color-0.1}}'; }  md-tabs.md-THEME_NAME-theme .md-tab .md-ripple-container {    color: '{{accent-100}}'; }md-tabs.md-THEME_NAME-theme.md-accent md-tabs-wrapper {  background-color: '{{accent-color}}'; }md-tabs.md-THEME_NAME-theme.md-accent md-tab-item:not([disabled]) {  color: '{{accent-100}}'; }  md-tabs.md-THEME_NAME-theme.md-accent md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-accent md-tab-item:not([disabled]).md-focused {    color: '{{accent-contrast}}'; }  md-tabs.md-THEME_NAME-theme.md-accent md-tab-item:not([disabled]).md-focused {    background: '{{accent-contrast-0.1}}'; }md-tabs.md-THEME_NAME-theme.md-accent md-ink-bar {  color: '{{primary-600-1}}';  background: '{{primary-600-1}}'; }md-tabs.md-THEME_NAME-theme.md-primary md-tabs-wrapper {  background-color: '{{primary-color}}'; }md-tabs.md-THEME_NAME-theme.md-primary md-tab-item:not([disabled]) {  color: '{{primary-100}}'; }  md-tabs.md-THEME_NAME-theme.md-primary md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-primary md-tab-item:not([disabled]).md-focused {    color: '{{primary-contrast}}'; }  md-tabs.md-THEME_NAME-theme.md-primary md-tab-item:not([disabled]).md-focused {    background: '{{primary-contrast-0.1}}'; }md-tabs.md-THEME_NAME-theme.md-warn md-tabs-wrapper {  background-color: '{{warn-color}}'; }md-tabs.md-THEME_NAME-theme.md-warn md-tab-item:not([disabled]) {  color: '{{warn-100}}'; }  md-tabs.md-THEME_NAME-theme.md-warn md-tab-item:not([disabled]).md-active, md-tabs.md-THEME_NAME-theme.md-warn md-tab-item:not([disabled]).md-focused {    color: '{{warn-contrast}}'; }  md-tabs.md-THEME_NAME-theme.md-warn md-tab-item:not([disabled]).md-focused {    background: '{{warn-contrast-0.1}}'; }md-toolbar > md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: '{{primary-color}}'; }md-toolbar > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]) {  color: '{{primary-100}}'; }  md-toolbar > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-active, md-toolbar > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    color: '{{primary-contrast}}'; }  md-toolbar > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    background: '{{primary-contrast-0.1}}'; }md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: '{{accent-color}}'; }md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]) {  color: '{{accent-100}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-active, md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    color: '{{accent-contrast}}'; }  md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    background: '{{accent-contrast-0.1}}'; }md-toolbar.md-accent > md-tabs.md-THEME_NAME-theme md-ink-bar {  color: '{{primary-600-1}}';  background: '{{primary-600-1}}'; }md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tabs-wrapper {  background-color: '{{warn-color}}'; }md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]) {  color: '{{warn-100}}'; }  md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-active, md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    color: '{{warn-contrast}}'; }  md-toolbar.md-warn > md-tabs.md-THEME_NAME-theme md-tab-item:not([disabled]).md-focused {    background: '{{warn-contrast-0.1}}'; }md-toast.md-THEME_NAME-theme {  background-color: #323232;  color: '{{background-50}}'; }  md-toast.md-THEME_NAME-theme .md-button {    color: '{{background-50}}'; }    md-toast.md-THEME_NAME-theme .md-button.md-highlight {      color: '{{primary-A200}}'; }      md-toast.md-THEME_NAME-theme .md-button.md-highlight.md-accent {        color: '{{accent-A200}}'; }      md-toast.md-THEME_NAME-theme .md-button.md-highlight.md-warn {        color: '{{warn-A200}}'; }md-toolbar.md-THEME_NAME-theme {  background-color: '{{primary-color}}';  color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme md-icon {    color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme .md-button {    color: '{{primary-contrast}}'; }  md-toolbar.md-THEME_NAME-theme.md-accent {    background-color: '{{accent-color}}';    color: '{{accent-contrast}}'; }  md-toolbar.md-THEME_NAME-theme.md-warn {    background-color: '{{warn-color}}';    color: '{{warn-contrast}}'; }md-tooltip.md-THEME_NAME-theme {  color: '{{background-A100}}'; }  md-tooltip.md-THEME_NAME-theme .md-background {    background-color: '{{foreground-2}}'; }");

}()}(window,window.angular),function(){function t(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}function e(t,e,n,i,a,s,c){function u(){return"input"===e[0].tagName.toLowerCase()&&e.attr("type")&&"file"===e.attr("type").toLowerCase()}function h(e){if(!g){g=!0;try{var c=e.__files_||e.target&&e.target.files,u=[],h=[],d=a(n.ngAccept);for(l=0;l<c.length;l++){var f=c.item(l);o(t,d,f,e)?u.push(f):h.push(f)}r(a,s,t,i,n,n.ngFileChange||n.ngFileSelect,u,h,e),0==u.length&&(e.target.value=u),e.target&&e.target.getAttribute("__ngf_gen__")&&angular.element(e.target).remove()}finally{g=!1}}}function d(e){n.ngMultiple&&e.attr("multiple",a(n.ngMultiple)(t)),n.accept&&e.attr("accept",n.accept),n.ngCapture&&e.attr("capture",a(n.ngCapture)(t)),n.ngDisabled&&e.attr("disabled",a(n.ngDisabled)(t)),e.bind("change",h)}function f(t){if(!e.attr("disabled")){for(var n=angular.element('<input type="file">'),i=0;i<e[0].attributes.length;i++){var r=e[0].attributes[i];n.attr(r.name,r.value)}return u()?(e.replaceWith(n),e=n):(n.css("width","0px").css("height","0px").css("position","absolute").css("padding",0).css("margin",0).css("overflow","hidden").attr("tabindex","-1").css("opacity",0).attr("__ngf_gen__",!0),e.__ngf_ref_elem__&&e.__ngf_ref_elem__.remove(),e.__ngf_ref_elem__=n,e.parent()[0].insertBefore(n[0],e[0]),e.css("overflow","hidden")),d(n),n}}function p(e){r(a,s,t,i,n,n.ngFileChange||n.ngFileSelect,[],[],e,!0)}function m(t){var n=f(t);n&&(p(t),n[0].click()),u()&&(e.bind("click",m),t.preventDefault())}var g=!1;window.FileAPI&&window.FileAPI.ngfFixIE?window.FileAPI.ngfFixIE(e,f,h,p):e.bind("click",m)}function n(t,e,n,a,s,c,u){function h(t,e,n){var i=!0,r=n.dataTransfer.items;if(null!=r)for(l=0;l<r.length&&i;l++)i=i&&("file"==r[l].kind||""==r[l].kind)&&o(t,b,r[l],n);var a=s(e.dragOverClass)(t,{$event:n});return a&&(a.delay&&(v=a.delay),a.accept&&(a=i?a.accept:a.reject)),a||e.dragOverClass||"dragover"}function d(e,n,i,r){function a(n){o(t,b,n,e)?h.push(n):d.push(n)}function s(t,e,n){if(null!=e)if(e.isDirectory){var i=(n||"")+e.name;a({name:e.name,type:"directory",path:i});var r=e.createReader(),o=[];p++;var c=function(){r.readEntries(function(i){try{if(i.length)o=o.concat(Array.prototype.slice.call(i||[],0)),c();else{for(l=0;l<o.length;l++)s(t,o[l],(n?n:"")+e.name+"/");p--}}catch(r){p--,console.error(r)}},function(){p--})};c()}else p++,e.file(function(t){try{p--,t.path=(n?n:"")+t.name,a(t)}catch(e){p--,console.error(e)}},function(){p--})}var h=[],d=[],f=e.dataTransfer.items,p=0;if(f&&f.length>0&&"file"!=u.protocol())for(l=0;l<f.length;l++){if(f[l].webkitGetAsEntry&&f[l].webkitGetAsEntry()&&f[l].webkitGetAsEntry().isDirectory){var m=f[l].webkitGetAsEntry();if(m.isDirectory&&!i)continue;null!=m&&s(h,m)}else{var g=f[l].getAsFile();null!=g&&a(g)}if(!r&&h.length>0)break}else{var v=e.dataTransfer.files;if(null!=v)for(l=0;l<v.length&&(a(v.item(l)),r||!(h.length>0));l++);}var y=0;!function w(t){c(function(){if(p)10*y++<2e4&&w(10);else{if(!r&&h.length>1){for(l=0;"directory"==h[l].type;)l++;h=[h[l]]}n(h,d)}},t||0)}()}var f=i();if(n.dropAvailable&&c(function(){t.dropAvailable?t.dropAvailable.value=f:t.dropAvailable=f}),!f)return void(1==s(n.hideOnDropNotAvailable)(t)&&e.css("display","none"));var p,m=null,g=s(n.stopPropagation),v=1,b=s(n.ngAccept),y=s(n.ngDisabled);e[0].addEventListener("dragover",function(i){if(!y(t)){if(i.preventDefault(),g(t)&&i.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var r=i.dataTransfer.effectAllowed;i.dataTransfer.dropEffect="move"===r||"linkMove"===r?"move":"copy"}c.cancel(m),t.actualDragOverClass||(p=h(t,n,i)),e.addClass(p)}},!1),e[0].addEventListener("dragenter",function(e){y(t)||(e.preventDefault(),g(t)&&e.stopPropagation())},!1),e[0].addEventListener("dragleave",function(){y(t)||(m=c(function(){e.removeClass(p),p=null},v||1))},!1),e[0].addEventListener("drop",function(i){y(t)||(i.preventDefault(),g(t)&&i.stopPropagation(),e.removeClass(p),p=null,d(i,function(e,o){r(s,c,t,a,n,n.ngFileChange||n.ngFileDrop,e,o,i)},0!=s(n.allowDir)(t),n.multiple||s(n.ngMultiple)(t)))},!1)}function i(){var t=document.createElement("div");return"draggable"in t&&"ondrop"in t}function r(t,e,n,i,r,o,a,s,l,c){function u(){i&&(t(r.ngModel).assign(n,a),e(function(){i&&i.$setViewValue(null!=a&&0==a.length?null:a)})),r.ngModelRejected&&t(r.ngModelRejected).assign(n,s),o&&t(o)(n,{$files:a,$rejectedFiles:s,$event:l})}c?u():e(function(){u()})}function o(t,e,n,i){var r=e(t,{$file:n,$event:i});if(null==r)return!0;if(angular.isString(r)){var o=new RegExp(a(r),"gi");r=null!=n.type&&n.type.match(o)||null!=n.name&&n.name.match(o)}return r}function a(t){if(t.length>2&&"/"===t[0]&&"/"===t[t.length-1])return t.substring(1,t.length-1);var e=t.split(","),n="";if(e.length>1)for(l=0;l<e.length;l++)n+="("+a(e[l])+")",l<e.length-1&&(n+="|");else 0==t.indexOf(".")&&(t="*"+t),n="^"+t.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",n=n.replace(/\\\*/g,".*").replace(/\\\?/g,".");return n}var s,l;window.XMLHttpRequest&&!window.XMLHttpRequest.__isFileAPIShim&&t("setRequestHeader",function(t){return function(e,n){if("__setXHR_"===e){var i=n(this);i instanceof Function&&i(this)}else t.apply(this,arguments)}});var c=angular.module("angularFileUpload",[]);c.version="3.2.4",c.service("$upload",["$http","$q","$timeout",function(t,e,n){function i(i){i.method=i.method||"POST",i.headers=i.headers||{},i.transformRequest=i.transformRequest||function(e,n){return window.ArrayBuffer&&e instanceof window.ArrayBuffer?e:t.defaults.transformRequest[0](e,n)};var r=e.defer(),o=r.promise;return i.headers.__setXHR_=function(){return function(t){t&&(i.__XHR=t,i.xhrFn&&i.xhrFn(t),t.upload.addEventListener("progress",function(t){t.config=i,r.notify?r.notify(t):o.progress_fn&&n(function(){o.progress_fn(t)})},!1),t.upload.addEventListener("load",function(t){t.lengthComputable&&(t.config=i,r.notify?r.notify(t):o.progress_fn&&n(function(){o.progress_fn(t)}))},!1))}},t(i).then(function(t){r.resolve(t)},function(t){r.reject(t)},function(t){r.notify(t)}),o.success=function(t){return o.then(function(e){t(e.data,e.status,e.headers,i)}),o},o.error=function(t){return o.then(null,function(e){t(e.data,e.status,e.headers,i)}),o},o.progress=function(t){return o.progress_fn=t,o.then(null,null,function(e){t(e)}),o},o.abort=function(){return i.__XHR&&n(function(){i.__XHR.abort()}),o},o.xhr=function(t){return i.xhrFn=function(e){return function(){e&&e.apply(o,arguments),t.apply(o,arguments)}}(i.xhrFn),o},o}this.upload=function(t){return t.headers=t.headers||{},t.headers["Content-Type"]=void 0,t.transformRequest=t.transformRequest?"[object Array]"===Object.prototype.toString.call(t.transformRequest)?t.transformRequest:[t.transformRequest]:[],t.transformRequest.push(function(e){var n=new FormData,i={};for(s in t.fields)t.fields.hasOwnProperty(s)&&(i[s]=t.fields[s]);if(e&&(i.data=e),t.formDataAppender)for(s in i)i.hasOwnProperty(s)&&t.formDataAppender(n,s,i[s]);else for(s in i)if(i.hasOwnProperty(s)){var r=i[s];void 0!==r&&("[object String]"===Object.prototype.toString.call(r)?n.append(s,r):t.sendObjectsAsJsonBlob&&"object"==typeof r?n.append(s,new Blob([r],{type:"application/json"})):n.append(s,JSON.stringify(r)))}if(null!=t.file){var o=t.fileFormDataName||"file";if("[object Array]"===Object.prototype.toString.call(t.file)){var a="[object String]"===Object.prototype.toString.call(o);for(l=0;l<t.file.length;l++)n.append(a?o:o[l],t.file[l],t.fileName&&t.fileName[l]||t.file[l].name)}else n.append(o,t.file,t.fileName||t.file.name)}return n}),i(t)},this.http=function(t){return i(t)}}]),c.directive("ngFileSelect",["$parse","$timeout","$compile",function(t,n,i){return{restrict:"AEC",require:"?ngModel",link:function(r,o,a,s){e(r,o,a,s,t,n,i)}}}]),c.directive("ngFileDrop",["$parse","$timeout","$location",function(t,e,i){return{restrict:"AEC",require:"?ngModel",link:function(r,o,a,s){n(r,o,a,s,t,e,i)}}}]),c.directive("ngNoFileDrop",function(){return function(t,e){i()&&e.css("display","none")}}),c.directive("ngFileDropAvailable",["$parse","$timeout",function(t,e){return function(n,r,o){if(i()){var a=t(o.ngFileDropAvailable);e(function(){a(n)})}}}]);var u=angular.module("ngFileUpload",[]);for(s in c)c.hasOwnProperty(s)&&(u[s]=c[s])}(),function(){function t(t,e){window.XMLHttpRequest.prototype[t]=e(window.XMLHttpRequest.prototype[t])}function e(t,e,n){try{Object.defineProperty(t,e,{get:n})}catch(i){}}function n(t){return"input"===t[0].tagName.toLowerCase()&&t.attr("type")&&"file"===t.attr("type").toLowerCase()}var i=function(){try{var t=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(t)return!0}catch(e){if(void 0!=navigator.mimeTypes["application/x-shockwave-flash"])return!0}return!1};if(window.XMLHttpRequest&&!window.FormData||window.FileAPI&&FileAPI.forceLoad){var r=function(t){if(!t.__listeners){t.upload||(t.upload={}),t.__listeners=[];var e=t.upload.addEventListener;t.upload.addEventListener=function(n,i,r){t.__listeners[n]=i,e&&e.apply(this,arguments)}}};t("open",function(t){return function(e,n,i){r(this),this.__url=n;try{t.apply(this,[e,n,i])}catch(o){o.message.indexOf("Access is denied")>-1&&(this.__origError=o,t.apply(this,[e,"_fix_for_ie_crossdomain__",i]))}}}),t("getResponseHeader",function(t){return function(e){return this.__fileApiXHR&&this.__fileApiXHR.getResponseHeader?this.__fileApiXHR.getResponseHeader(e):null==t?null:t.apply(this,[e])}}),t("getAllResponseHeaders",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.getAllResponseHeaders?this.__fileApiXHR.getAllResponseHeaders():null==t?null:t.apply(this)}}),t("abort",function(t){return function(){return this.__fileApiXHR&&this.__fileApiXHR.abort?this.__fileApiXHR.abort():null==t?null:t.apply(this)}}),t("setRequestHeader",function(t){return function(e,n){if("__setXHR_"===e){r(this);var i=n(this);i instanceof Function&&i(this)}else this.__requestHeaders=this.__requestHeaders||{},this.__requestHeaders[e]=n,t.apply(this,arguments)}}),t("send",function(t){return function(){var n=this;if(arguments[0]&&arguments[0].__isFileAPIShim){var r=arguments[0],o={url:n.__url,jsonp:!1,cache:!0,complete:function(t,i){n.__completed=!0,!t&&n.__listeners.load&&n.__listeners.load({type:"load",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),!t&&n.__listeners.loadend&&n.__listeners.loadend({type:"loadend",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),"abort"===t&&n.__listeners.abort&&n.__listeners.abort({type:"abort",loaded:n.__loaded,total:n.__total,target:n,lengthComputable:!0}),void 0!==i.status&&e(n,"status",function(){return 0==i.status&&t&&"abort"!==t?500:i.status}),void 0!==i.statusText&&e(n,"statusText",function(){return i.statusText}),e(n,"readyState",function(){return 4}),void 0!==i.response&&e(n,"response",function(){return i.response});var r=i.responseText||(t&&0==i.status&&"abort"!==t?t:void 0);e(n,"responseText",function(){return r}),e(n,"response",function(){return r}),t&&e(n,"err",function(){return t}),n.__fileApiXHR=i,n.onreadystatechange&&n.onreadystatechange(),n.onload&&n.onload()},fileprogress:function(t){if(t.target=n,n.__listeners.progress&&n.__listeners.progress(t),n.__total=t.total,n.__loaded=t.loaded,t.total===t.loaded){var e=this;setTimeout(function(){n.__completed||(n.getAllResponseHeaders=function(){},e.complete(null,{status:204,statusText:"No Content"}))},FileAPI.noContentTimeout||1e4)}},headers:n.__requestHeaders};o.data={},o.files={};for(var a=0;a<r.data.length;a++){var s=r.data[a];null!=s.val&&null!=s.val.name&&null!=s.val.size&&null!=s.val.type?o.files[s.key]=s.val:o.data[s.key]=s.val}setTimeout(function(){if(!i())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';n.__fileApiXHR=FileAPI.upload(o)},1)}else{if(this.__origError)throw this.__origError;t.apply(n,arguments)}}}),window.XMLHttpRequest.__isFileAPIShim=!0,FileAPI.ngfFixIE=function(t,e,r,o){if(!i())throw'Adode Flash Player need to be installed. To check ahead use "FileAPI.hasFlash"';var a=function(i){if(t.attr("disabled"))t.__ngf_elem__.removeClass("js-fileapi-wrapper");else{var o=t.__ngf_elem__=e();o.addClass("js-fileapi-wrapper"),n(t)||((""===o.parent().css("position")||"static"===o.parent().css("position"))&&o.parent().css("position","relative"),o.css("position","absolute").css("top",t[0].offsetTop+"px").css("left",t[0].offsetLeft+"px").css("width",t[0].offsetWidth+"px").css("height",t[0].offsetHeight+"px").css("padding",t.css("padding")).css("margin",t.css("margin")).css("filter","alpha(opacity=0)"),o.css("z-index","1000")),setTimeout(function(){o.bind("mouseenter",a)},10),o.unbind("change"),o.bind("change",function(t){s.apply(this,[t]),r.apply(this,[t])})}};t.bind("mouseenter",a);var s=function(t){for(var e=FileAPI.getFiles(t),n=0;n<e.length;n++)void 0===e[n].size&&(e[n].size=0),void 0===e[n].name&&(e[n].name="file"),void 0===e[n].type&&(e[n].type="undefined");t.target||(t.target={}),t.target.files=e,t.target.files!=e&&(t.__files_=e),(t.__files_||t.target.files).item=function(e){return(t.__files_||t.target.files)[e]||null}}},window.FormData=FormData=function(){return{append:function(t,e,n){e.__isFileAPIBlobShim&&(e=e.data[0]),this.data.push({key:t,val:e,name:n})},data:[],__isFileAPIShim:!0}},window.Blob=Blob=function(t){return{data:t,__isFileAPIBlobShim:!0}},function(){if(window.FileAPI||(window.FileAPI={}),FileAPI.forceLoad&&(FileAPI.html5=!1),!FileAPI.upload){var t,e,n,r,o,a=document.createElement("script"),s=document.getElementsByTagName("script");if(window.FileAPI.jsUrl)t=window.FileAPI.jsUrl;else if(window.FileAPI.jsPath)e=window.FileAPI.jsPath;else for(n=0;n<s.length;n++)if(o=s[n].src,r=o.search(/\/angular\-file\-upload[\-a-zA-z0-9\.]*\.js/),r>-1){e=o.substring(0,r+1);break}null==FileAPI.staticPath&&(FileAPI.staticPath=e),a.setAttribute("src",t||e+"FileAPI.min.js"),document.getElementsByTagName("head")[0].appendChild(a),FileAPI.hasFlash=i()}}(),FileAPI.disableFileInput=function(t,e){e?t.removeClass("js-fileapi-wrapper"):t.addClass("js-fileapi-wrapper")}}window.FileReader||(window.FileReader=function(){var t=this,e=!1;this.listeners={},this.addEventListener=function(e,n){t.listeners[e]=t.listeners[e]||[],t.listeners[e].push(n)},this.removeEventListener=function(e,n){t.listeners[e]&&t.listeners[e].splice(t.listeners[e].indexOf(n),1)},this.dispatchEvent=function(e){var n=t.listeners[e.type];if(n)for(var i=0;i<n.length;i++)n[i].call(t,e)},this.onabort=this.onerror=this.onload=this.onloadstart=this.onloadend=this.onprogress=null;var n=function(e,n){var i={type:e,target:t,loaded:n.loaded,total:n.total,error:n.error};return null!=n.result&&(i.target.result=n.result),i},i=function(i){if(e||(e=!0,t.onloadstart&&t.onloadstart(n("loadstart",i))),"load"===i.type){t.onloadend&&t.onloadend(n("loadend",i));var r=n("load",i);t.onload&&t.onload(r),t.dispatchEvent(r)}else if("progress"===i.type){var r=n("progress",i);t.onprogress&&t.onprogress(r),t.dispatchEvent(r)}else{var r=n("error",i);t.onerror&&t.onerror(r),t.dispatchEvent(r)}};this.readAsArrayBuffer=function(t){FileAPI.readAsBinaryString(t,i)},this.readAsBinaryString=function(t){FileAPI.readAsBinaryString(t,i)},this.readAsDataURL=function(t){FileAPI.readAsDataURL(t,i)},this.readAsText=function(t){FileAPI.readAsText(t,i)}})}(),function(t,e,n){"use strict";function i(t){function e(t,e){return t?r(t)?t.indexOf(e)>=0:t.hasOwnProperty(e):void 0}return["$animate",function(t){return{restrict:"AE",transclude:"element",terminal:!0,require:"^^ngMessages",link:function(n,i,o,a,s){var l,c=i[0],u=o.ngMessage||o.when,h=o.ngMessageExp||o.whenExp,d=function(t){l=t?r(t)?t:t.split(/[\s,]+/):null,a.reRender()};h?(d(n.$eval(h)),n.$watchCollection(h,d)):d(u);var f,p;a.register(c,p={test:function(t){return e(l,t)},attach:function(){f||s(n,function(e){t.enter(e,null,i),f=e,f.on("$destroy",function(){f&&(a.deregister(c),p.detach())})})},detach:function(){if(f){var e=f;f=null,t.leave(e)}}})}}}]}var r=e.isArray,o=e.forEach,a=e.isString,s=e.element;e.module("ngMessages",[]).directive("ngMessages",["$animate",function(t){function e(t,e){return a(e)&&0===e.length||n(t.$eval(e))}function n(t){return a(t)?t.length:!!t}var i="ng-active",r="ng-inactive";return{require:"ngMessages",restrict:"AE",controller:["$element","$scope","$attrs",function(a,s,l){function c(t,e){for(var n=e,i=[];n&&n!==t;){var r=n.$$ngMessageNode;if(r&&r.length)return g[r];n.childNodes.length&&-1==i.indexOf(n)?(i.push(n),n=n.childNodes[n.childNodes.length-1]):n=n.previousSibling||n.parentNode}}function u(t,e,n){var i=g[n];if(p.head){var r=c(t,e);r?(i.next=r.next,r.next=i):(i.next=p.head,p.head=i)}else p.head=i}function h(t,e,n){var i=g[n],r=c(t,e);r?r.next=i.next:p.head=i.next}var d,f,p=this,m=0,g=this.messages={};this.render=function(c){c=c||{},d=!1,f=c;for(var u=e(s,l.ngMessagesMultiple)||e(s,l.multiple),h=[],m={},g=p.head,v=!1,b=0;null!=g;){b++;var y=g.message,w=!1;v||o(c,function(t,e){if(!w&&n(t)&&y.test(e)){if(m[e])return;m[e]=!0,w=!0,y.attach()}}),w?v=!u:h.push(y),g=g.next}o(h,function(t){t.detach()}),h.length!==b?t.setClass(a,i,r):t.setClass(a,r,i)},s.$watchCollection(l.ngMessages||l["for"],p.render),this.reRender=function(){d||(d=!0,s.$evalAsync(function(){d&&f&&p.render(f)}))},this.register=function(t,e){var n=m.toString();g[n]={message:e},u(a[0],t,n),t.$$ngMessageNode=n,m++,p.reRender()},this.deregister=function(t){var e=t.$$ngMessageNode;delete t.$$ngMessageNode,h(a[0],t,e),delete g[e],p.reRender()}}]}}]).directive("ngMessagesInclude",["$templateRequest","$document","$compile",function(t,e,n){return{restrict:"AE",require:"^^ngMessages",link:function(i,r,o){var a=o.ngMessagesInclude||o.src;t(a).then(function(t){n(t)(i,function(t){r.after(t);var n=s(e[0].createComment(" ngMessagesInclude: "+a+" "));r.after(n),r.remove()})})}}}]).directive("ngMessage",i("AE")).directive("ngMessageExp",i("A"))}(window,window.angular),angular.module("afkl.lazyImage",[]),angular.module("afkl.lazyImage").service("afklSrcSetService",["$window",function(t){"use strict";function e(t){this.src=t.src,this.w=t.w||1/0,this.h=t.h||1/0,this.x=t.x||1}var n=/^[0-9]+$/,i=function(t){for(var e=t.split(/\s/),i={},r=0,o=e.length;o>r;r++){var a=e[r];if(a.length>0){var s=a.slice(-1),l=a.substring(0,a.length-1),c=parseInt(l,10),u=parseFloat(l);l.match(n)&&"w"===s?i[s]=c:l.match(n)&&"h"===s?i[s]=c:isNaN(u)||"x"!==s||(i[s]=u)}}return i},r=function(t,e){for(var n=t[0],i=0,r=t.length;r>i;i++){var o=t[i];e(o,n)&&(n=o)}return n},o=function(t,e){for(var n=t.length-1;n>=0;n--){var i=t[n];e(i)&&t.splice(n,1)}return t},a=function(e,n){if(e){n||(n={w:t.innerWidth||document.documentElement.clientWidth,h:t.innerHeight||document.documentElement.clientHeight,x:t.devicePixelRatio||1});var i=e.slice(0),a=r(i,function(t,e){return t.w>e.w});o(i,function(){return function(t){return t.w<n.w}}(this)),0===i.length&&(i=[a]);var s=r(i,function(t,e){return t.h>e.h});o(i,function(){return function(t){return t.h<n.h}}(this)),0===i.length&&(i=[s]);var l=r(i,function(t,e){return t.x>e.x});o(i,function(){return function(t){return t.x<n.x}}(this)),0===i.length&&(i=[l]);var c=r(i,function(t,e){return t.w<e.w});o(i,function(t){return t.w>c.w});var u=r(i,function(t,e){return t.h<e.h});o(i,function(t){return t.h>u.h});var h=r(i,function(t,e){return t.x<e.x});return o(i,function(t){return t.x>h.x}),i[0]}},s=function(t){var n=[],r=t.src,o=t.srcset;if(o){var s=function(t){for(var e=0,i=n.length;i>e;e++){var r=n[e];if(r.x===t.x&&r.w===t.w&&r.h===t.h)return}n.push(t)},l=function(){for(var t,n,a=o,l=0,c=[];""!==a;){for(;" "===a.charAt(0);)a=a.slice(1);l=a.indexOf(" "),-1!==l?(t=a.slice(0,l),a=a.slice(l+1),l=a.indexOf(","),-1===l?(n=a,a=""):(n=a.slice(0,l),a=a.slice(l+1)),c.push({url:t,descriptors:n})):(c.push({url:a,descriptors:""}),a="")}for(var u=0,h=c.length;h>u;u++){var d=c[u],f=i(d.descriptors);s(new e({src:d.url,x:f.x,w:f.w,h:f.h}))}r&&s(new e({src:r}))};l();var c=a(n),u={best:c,candidates:n};return n=null,u}};return{get:s,image:a}}]),angular.module("afkl.lazyImage").directive("afklImageContainer",function(){"use strict";return{restrict:"A",controller:["$scope","$element",function(t,e){e.data("afklImageContainer",e)}]}}).directive("afklLazyImage",["$window","$timeout","afklSrcSetService",function(t,e,n){"use strict";var i=function(t){var e,i=n.get({srcset:t});return i&&(e=i.best.src),e};return{restrict:"A",link:function(n,r,o){var a=r.inheritedData("afklImageContainer");a||(a=angular.element(o.afklLazyImageContainer||t));var s,l,c=!1,u=o.afklLazyImage,h=o.afklLazyImageOptions?angular.fromJson(o.afklLazyImageOptions):{},d=null,f=h.offset?h.offset:50,p=h.alt?'alt="'+h.alt+'"':'alt=""',m="afkl-lazy-image-loading",g=function(){if(a.scrollTop){var t=a.scrollTop();if(t)return t}var e=a[0];return void 0!==e.pageYOffset?e.pageYOffset:void 0!==e.scrollTop?e.scrollTop:document.documentElement.scrollTop||0},v=function(){if(a.innerHeight)return a.innerHeight();var t=a[0];return void 0!==t.innerHeight?t.innerHeight:void 0!==t.clientHeight?t.clientHeight:document.documentElement.clientHeight||0},b=function(){if(r.offset)return r.offset().top;var t=r[0].getBoundingClientRect();return t.top+g()-document.documentElement.clientTop},y=function(){return r.offset?r.offset().top-a.offset().top:r[0].getBoundingClientRect().top-a[0].getBoundingClientRect().top},w=function(){h.background?r[0].style.backgroundImage='url("'+d+'")':l[0].src=d},x=function(){c=!0,d=i(u),d&&(h.background||l||(r.addClass(m),l=angular.element("<img "+p+' class="afkl-lazy-image" src=""/>'),l.one("load",_),r.append(l)),w()),a.off("scroll",$)},C=function(){if(c){var t=i(u);t!==d&&(d=t,w())}};C();var _=function(){r.removeClass(m)},$=function(){var e,n,i,r=v(),o=g(),s=a[0]===t?b():y();i=a[0]===t?r+o:r,e=s-i,n=f>=e,n&&!c&&x()},S=function(){e.cancel(s),s=e(function(){C(),$()},300)},E=function(){e.cancel(s),a.off("scroll",$),angular.element(t).off("resize",S),a[0]!==t&&a.off("resize",S),l&&l.remove(),l=s=d=void 0};return a.on("scroll",$),angular.element(t).on("resize",S),a[0]!==t&&a.on("resize",S),o.$observe("afklLazyImage",function(){u=o.afklLazyImage,c&&x()}),h.nolazy&&x(),n.$on("$destroy",function(){return E()}),$()}}}]),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="ui.router"),function(t,e,n){"use strict";function i(t,e){return j(new(j(function(){},{prototype:t})),e)}function r(t){return F(arguments,function(e){e!==t&&F(e,function(e,n){t.hasOwnProperty(n)||(t[n]=e)})}),t}function o(t,e){var n=[];for(var i in t.path){if(t.path[i]!==e.path[i])break;n.push(t.path[i])}return n}function a(t){if(Object.keys)return Object.keys(t);var n=[];return e.forEach(t,function(t,e){n.push(e)}),n}function s(t,e){if(Array.prototype.indexOf)return t.indexOf(e,Number(arguments[2])||0);var n=t.length>>>0,i=Number(arguments[2])||0;for(i=0>i?Math.ceil(i):Math.floor(i),0>i&&(i+=n);n>i;i++)if(i in t&&t[i]===e)return i;return-1}function l(t,e,n,i){var r,l=o(n,i),c={},u=[];for(var h in l)if(l[h].params&&(r=a(l[h].params),r.length))for(var d in r)s(u,r[d])>=0||(u.push(r[d]),c[r[d]]=t[r[d]]);return j({},c,e)}function c(t,e,n){if(!n){n=[];for(var i in t)n.push(i)}for(var r=0;r<n.length;r++){var o=n[r];if(t[o]!=e[o])return!1}return!0}function u(t,e){var n={};return F(t,function(t){n[t]=e[t]}),n}function h(t){var e={},n=Array.prototype.concat.apply(Array.prototype,Array.prototype.slice.call(arguments,1));for(var i in t)-1==s(n,i)&&(e[i]=t[i]);return e}function d(t,e){var n=L(t),i=n?[]:{};return F(t,function(t,r){e(t,r)&&(i[n?i.length:r]=t)}),i}function f(t,e){var n=L(t)?[]:{};return F(t,function(t,i){n[i]=e(t,i)}),n}function p(t,e){var i=1,o=2,l={},c=[],u=l,d=j(t.when(l),{$$promises:l,$$values:l});this.study=function(l){function f(t,n){if(b[n]!==o){if(v.push(n),b[n]===i)throw v.splice(0,s(v,n)),new Error("Cyclic dependency: "+v.join(" -> "));if(b[n]=i,D(t))g.push(n,[function(){return e.get(t)}],c);else{var r=e.annotate(t);F(r,function(t){t!==n&&l.hasOwnProperty(t)&&f(l[t],t)}),g.push(n,t,r)}v.pop(),b[n]=o}}function p(t){return N(t)&&t.then&&t.$$promises}if(!N(l))throw new Error("'invocables' must be an object");var m=a(l||{}),g=[],v=[],b={};return F(l,f),l=v=b=null,function(i,o,a){function s(){--w||(x||r(y,o.$$values),v.$$values=y,v.$$promises=v.$$promises||!0,delete v.$$inheritedValues,f.resolve(y))}function l(t){v.$$failure=t,f.reject(t)}function c(n,r,o){function c(t){h.reject(t),l(t)}function u(){if(!P(v.$$failure))try{h.resolve(e.invoke(r,a,y)),h.promise.then(function(t){y[n]=t,s()},c)}catch(t){c(t)}}var h=t.defer(),d=0;F(o,function(t){b.hasOwnProperty(t)&&!i.hasOwnProperty(t)&&(d++,b[t].then(function(e){y[t]=e,--d||u()},c))}),d||u(),b[n]=h.promise}if(p(i)&&a===n&&(a=o,o=i,i=null),i){if(!N(i))throw new Error("'locals' must be an object")}else i=u;if(o){if(!p(o))throw new Error("'parent' must be a promise returned by $resolve.resolve()")}else o=d;var f=t.defer(),v=f.promise,b=v.$$promises={},y=j({},i),w=1+g.length/3,x=!1;if(P(o.$$failure))return l(o.$$failure),v;o.$$inheritedValues&&r(y,h(o.$$inheritedValues,m)),j(b,o.$$promises),o.$$values?(x=r(y,h(o.$$values,m)),v.$$inheritedValues=h(o.$$values,m),s()):(o.$$inheritedValues&&(v.$$inheritedValues=h(o.$$inheritedValues,m)),o.then(s,l));for(var C=0,_=g.length;_>C;C+=3)i.hasOwnProperty(g[C])?s():c(g[C],g[C+1],g[C+2]);return v}},this.resolve=function(t,e,n,i){return this.study(t)(e,n,i)}}function m(t,e,n){this.fromConfig=function(t,e,n){return P(t.template)?this.fromString(t.template,e):P(t.templateUrl)?this.fromUrl(t.templateUrl,e):P(t.templateProvider)?this.fromProvider(t.templateProvider,e,n):null},this.fromString=function(t,e){return I(t)?t(e):t},this.fromUrl=function(n,i){return I(n)&&(n=n(i)),null==n?null:t.get(n,{cache:e,headers:{Accept:"text/html"}}).then(function(t){return t.data})},this.fromProvider=function(t,e,i){return n.invoke(t,null,i||{params:e})}}function g(t,e,r){function o(e,n,i,r){if(g.push(e),p[e])return p[e];if(!/^\w+(-+\w+)*(?:\[\])?$/.test(e))throw new Error("Invalid parameter name '"+e+"' in pattern '"+t+"'");if(m[e])throw new Error("Duplicate parameter name '"+e+"' in pattern '"+t+"'");return m[e]=new H.Param(e,n,i,r),m[e]}function a(t,e,n){var i=["",""],r=t.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!e)return r;switch(n){case!1:i=["(",")"];break;case!0:i=["?(",")?"];break;default:i=["("+n+"|",")?"]}return r+i[0]+e+i[1]}function s(n,r){var o,a,s,l,c;return o=n[2]||n[3],c=e.params[o],s=t.substring(d,n.index),a=r?n[4]:n[4]||("*"==n[1]?".*":null),l=H.type(a||"string")||i(H.type("string"),{pattern:new RegExp(a)}),{id:o,regexp:a,segment:s,type:l,cfg:c}}e=j({params:{}},N(e)?e:{});var l,c=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,u=/([:]?)([\w\[\]-]+)|\{([\w\[\]-]+)(?:\:((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,h="^",d=0,f=this.segments=[],p=r?r.params:{},m=this.params=r?r.params.$$new():new H.ParamSet,g=[];this.source=t;for(var v,b,y;(l=c.exec(t))&&(v=s(l,!1),!(v.segment.indexOf("?")>=0));)b=o(v.id,v.type,v.cfg,"path"),h+=a(v.segment,b.type.pattern.source,b.squash),f.push(v.segment),d=c.lastIndex;y=t.substring(d);var w=y.indexOf("?");if(w>=0){var x=this.sourceSearch=y.substring(w);if(y=y.substring(0,w),this.sourcePath=t.substring(0,d+w),x.length>0)for(d=0;l=u.exec(x);)v=s(l,!0),b=o(v.id,v.type,v.cfg,"search"),d=c.lastIndex}else this.sourcePath=t,this.sourceSearch="";h+=a(y)+(e.strict===!1?"/?":"")+"$",f.push(y),this.regexp=new RegExp(h,e.caseInsensitive?"i":n),this.prefix=f[0],this.$$paramNames=g}function v(t){j(this,t)}function b(){function t(t){return null!=t?t.toString().replace(/\//g,"%2F"):t}function r(t){return null!=t?t.toString().replace(/%2F/g,"/"):t}function o(t){return this.pattern.test(t)}function l(){return{strict:y,caseInsensitive:m}}function c(t){return I(t)||L(t)&&I(t[t.length-1])}function u(){for(;_.length;){var t=_.shift();if(t.pattern)throw new Error("You cannot override a type's .pattern at runtime.");e.extend(x[t.name],p.invoke(t.def))}}function h(t){j(this,t||{})}H=this;var p,m=!1,y=!0,w=!1,x={},C=!0,_=[],$={string:{encode:t,decode:r,is:o,pattern:/[^/]*/},"int":{encode:t,decode:function(t){return parseInt(t,10)},is:function(t){return P(t)&&this.decode(t.toString())===t},pattern:/\d+/},bool:{encode:function(t){return t?1:0},decode:function(t){return 0!==parseInt(t,10)},is:function(t){return t===!0||t===!1},pattern:/0|1/},date:{encode:function(t){return this.is(t)?[t.getFullYear(),("0"+(t.getMonth()+1)).slice(-2),("0"+t.getDate()).slice(-2)].join("-"):n},decode:function(t){if(this.is(t))return t;var e=this.capture.exec(t);return e?new Date(e[1],e[2]-1,e[3]):n},is:function(t){return t instanceof Date&&!isNaN(t.valueOf())},equals:function(t,e){return this.is(t)&&this.is(e)&&t.toISOString()===e.toISOString()},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/},json:{encode:e.toJson,decode:e.fromJson,is:e.isObject,equals:e.equals,pattern:/[^/]*/},any:{encode:e.identity,decode:e.identity,is:e.identity,equals:e.equals,pattern:/.*/}};b.$$getDefaultValue=function(t){if(!c(t.value))return t.value;if(!p)throw new Error("Injectable functions cannot be called at configuration time");return p.invoke(t.value)},this.caseInsensitive=function(t){return P(t)&&(m=t),m},this.strictMode=function(t){return P(t)&&(y=t),y},this.defaultSquashPolicy=function(t){if(!P(t))return w;if(t!==!0&&t!==!1&&!D(t))throw new Error("Invalid squash policy: "+t+". Valid policies: false, true, arbitrary-string");return w=t,t},this.compile=function(t,e){return new g(t,j(l(),e))},this.isMatcher=function(t){if(!N(t))return!1;var e=!0;return F(g.prototype,function(n,i){I(n)&&(e=e&&P(t[i])&&I(t[i]))}),e},this.type=function(t,e,n){if(!P(e))return x[t];if(x.hasOwnProperty(t))throw new Error("A type named '"+t+"' has already been defined.");return x[t]=new v(j({name:t},e)),n&&(_.push({name:t,def:n}),C||u()),this},F($,function(t,e){x[e]=new v(j({name:e},t))}),x=i(x,{}),this.$get=["$injector",function(t){return p=t,C=!1,u(),F($,function(t,e){x[e]||(x[e]=new v(t))}),this}],this.Param=function(t,e,i,r){function o(t){var e=N(t)?a(t):[],n=-1===s(e,"value")&&-1===s(e,"type")&&-1===s(e,"squash")&&-1===s(e,"array");return n&&(t={value:t}),t.$$fn=c(t.value)?t.value:function(){return t.value},t}function l(e,n,i){if(e.type&&n)throw new Error("Param '"+t+"' has two type configurations.");return n?n:e.type?e.type instanceof v?e.type:new v(e.type):"config"===i?x.any:x.string}function u(){var e={array:"search"===r?"auto":!1},n=t.match(/\[\]$/)?{array:!0}:{};return j(e,n,i).array}function h(t,e){var n=t.squash;if(!e||n===!1)return!1;if(!P(n)||null==n)return w;if(n===!0||D(n))return n;throw new Error("Invalid squash policy: '"+n+"'. Valid policies: false, true, or arbitrary string")}function m(t,e,i,r){var o,a,l=[{from:"",to:i||e?n:""},{from:null,to:i||e?n:""}];return o=L(t.replace)?t.replace:[],D(r)&&o.push({from:r,to:n}),a=f(o,function(t){return t.from}),d(l,function(t){return-1===s(a,t.from)}).concat(o)}function g(){if(!p)throw new Error("Injectable functions cannot be called at configuration time");return p.invoke(i.$$fn)}function b(t){function e(t){return function(e){return e.from===t}}function n(t){var n=f(d(C.replace,e(t)),function(t){return t.to});return n.length?n[0]:t}return t=n(t),P(t)?C.type.decode(t):g()}function y(){return"{Param:"+t+" "+e+" squash: '"+S+"' optional: "+$+"}"}var C=this;i=o(i),e=l(i,e,r);var _=u();e=_?e.$asArray(_,"search"===r):e,"string"!==e.name||_||"path"!==r||i.value!==n||(i.value="");var $=i.value!==n,S=h(i,$),E=m(i,_,$,S);j(this,{id:t,type:e,location:r,array:_,squash:S,replace:E,isOptional:$,value:b,dynamic:n,config:i,toString:y})},h.prototype={$$new:function(){return i(this,j(new h,{$$parent:this}))},$$keys:function(){for(var t=[],e=[],n=this,i=a(h.prototype);n;)e.push(n),n=n.$$parent;return e.reverse(),F(e,function(e){F(a(e),function(e){-1===s(t,e)&&-1===s(i,e)&&t.push(e)})}),t},$$values:function(t){var e={},n=this;return F(n.$$keys(),function(i){e[i]=n[i].value(t&&t[i])}),e},$$equals:function(t,e){var n=!0,i=this;return F(i.$$keys(),function(r){
var o=t&&t[r],a=e&&e[r];i[r].type.equals(o,a)||(n=!1)}),n},$$validates:function(t){var e,n,i,r=!0,o=this;return F(this.$$keys(),function(a){i=o[a],n=t[a],e=!n&&i.isOptional,r=r&&(e||!!i.type.is(n))}),r},$$parent:n},this.ParamSet=h}function y(t,i){function r(t){var e=/^\^((?:\\[^a-zA-Z0-9]|[^\\\[\]\^$*+?.()|{}]+)*)/.exec(t.source);return null!=e?e[1].replace(/\\(.)/g,"$1"):""}function o(t,e){return t.replace(/\$(\$|\d{1,2})/,function(t,n){return e["$"===n?0:Number(n)]})}function a(t,e,n){if(!n)return!1;var i=t.invoke(e,e,{$match:n});return P(i)?i:!0}function s(i,r,o,a){function s(t,e,n){return"/"===m?t:e?m.slice(0,-1)+t:n?m.slice(1)+t:t}function d(t){function e(t){var e=t(o,i);return e?(D(e)&&i.replace().url(e),!0):!1}if(!t||!t.defaultPrevented){var r=p&&i.url()===p;if(p=n,r)return!0;var a,s=c.length;for(a=0;s>a;a++)if(e(c[a]))return;u&&e(u)}}function f(){return l=l||r.$on("$locationChangeSuccess",d)}var p,m=a.baseHref(),g=i.url();return h||f(),{sync:function(){d()},listen:function(){return f()},update:function(t){return t?void(g=i.url()):void(i.url()!==g&&(i.url(g),i.replace()))},push:function(t,e,r){i.url(t.format(e||{})),p=r&&r.$$avoidResync?i.url():n,r&&r.replace&&i.replace()},href:function(n,r,o){if(!n.validates(r))return null;var a=t.html5Mode();e.isObject(a)&&(a=a.enabled);var l=n.format(r);if(o=o||{},a||null===l||(l="#"+t.hashPrefix()+l),l=s(l,a,o.absolute),!o.absolute||!l)return l;var c=!a&&l?"/":"",u=i.port();return u=80===u||443===u?"":":"+u,[i.protocol(),"://",i.host(),u,c,l].join("")}}}var l,c=[],u=null,h=!1;this.rule=function(t){if(!I(t))throw new Error("'rule' must be a function");return c.push(t),this},this.otherwise=function(t){if(D(t)){var e=t;t=function(){return e}}else if(!I(t))throw new Error("'rule' must be a function");return u=t,this},this.when=function(t,e){var n,s=D(e);if(D(t)&&(t=i.compile(t)),!s&&!I(e)&&!L(e))throw new Error("invalid 'handler' in when()");var l={matcher:function(t,e){return s&&(n=i.compile(e),e=["$match",function(t){return n.format(t)}]),j(function(n,i){return a(n,e,t.exec(i.path(),i.search()))},{prefix:D(t.prefix)?t.prefix:""})},regex:function(t,e){if(t.global||t.sticky)throw new Error("when() RegExp must not be global or sticky");return s&&(n=e,e=["$match",function(t){return o(n,t)}]),j(function(n,i){return a(n,e,t.exec(i.path()))},{prefix:r(t)})}},c={matcher:i.isMatcher(t),regex:t instanceof RegExp};for(var u in c)if(c[u])return this.rule(l[u](t,e));throw new Error("invalid 'what' in when()")},this.deferIntercept=function(t){t===n&&(t=!0),h=t},this.$get=s,s.$inject=["$location","$rootScope","$injector","$browser"]}function w(t,r){function o(t){return 0===t.indexOf(".")||0===t.indexOf("^")}function h(t,e){if(!t)return n;var i=D(t),r=i?t:t.name,a=o(r);if(a){if(!e)throw new Error("No reference point given for path '"+r+"'");e=h(e);for(var s=r.split("."),l=0,c=s.length,u=e;c>l;l++)if(""!==s[l]||0!==l){if("^"!==s[l])break;if(!u.parent)throw new Error("Path '"+r+"' not valid for state '"+e.name+"'");u=u.parent}else u=e;s=s.slice(l).join("."),r=u.name+(u.name&&s?".":"")+s}var d=$[r];return!d||!i&&(i||d!==t&&d.self!==t)?n:d}function d(t,e){S[t]||(S[t]=[]),S[t].push(e)}function p(t){for(var e=S[t]||[];e.length;)m(e.shift())}function m(e){e=i(e,{self:e,resolve:e.resolve||{},toString:function(){return this.name}});var n=e.name;if(!D(n)||n.indexOf("@")>=0)throw new Error("State must have a valid name");if($.hasOwnProperty(n))throw new Error("State '"+n+"'' is already defined");var r=-1!==n.indexOf(".")?n.substring(0,n.lastIndexOf(".")):D(e.parent)?e.parent:N(e.parent)&&D(e.parent.name)?e.parent.name:"";if(r&&!$[r])return d(r,e.self);for(var o in T)I(T[o])&&(e[o]=T[o](e,T.$delegates[o]));return $[n]=e,!e[E]&&e.url&&t.when(e.url,["$match","$stateParams",function(t,n){_.$current.navigable==e&&c(t,n)||_.transitionTo(e,t,{inherit:!0,location:!1})}]),p(n),e}function g(t){return t.indexOf("*")>-1}function v(t){var e=t.split("."),n=_.$current.name.split(".");if("**"===e[0]&&(n=n.slice(s(n,e[1])),n.unshift("**")),"**"===e[e.length-1]&&(n.splice(s(n,e[e.length-2])+1,Number.MAX_VALUE),n.push("**")),e.length!=n.length)return!1;for(var i=0,r=e.length;r>i;i++)"*"===e[i]&&(n[i]="*");return n.join("")===e.join("")}function b(t,e){return D(t)&&!P(e)?T[t]:I(e)&&D(t)?(T[t]&&!T.$delegates[t]&&(T.$delegates[t]=T[t]),T[t]=e,this):this}function y(t,e){return N(t)?e=t:e.name=t,m(e),this}function w(t,r,o,s,d,p,m,b,y){function w(e,n,i,o){var a=t.$broadcast("$stateNotFound",e,n,i);if(a.defaultPrevented)return m.update(),A;if(!a.retry)return null;if(o.$retry)return m.update(),M;var s=_.transition=r.when(a.retry);return s.then(function(){return s!==_.transition?T:(e.options.$retry=!0,_.transitionTo(e.to,e.toParams,e.options))},function(){return A}),m.update(),s}function S(t,n,i,a,l,c){var h=i?n:u(t.params.$$keys(),n),f={$stateParams:h};l.resolve=d.resolve(t.resolve,f,l.resolve,t);var p=[l.resolve.then(function(t){l.globals=t})];return a&&p.push(a),F(t.views,function(n,i){var r=n.resolve&&n.resolve!==t.resolve?n.resolve:{};r.$template=[function(){return o.load(i,{view:n,locals:f,params:h,notify:c.notify})||""}],p.push(d.resolve(r,f,l.resolve,t).then(function(o){if(I(n.controllerProvider)||L(n.controllerProvider)){var a=e.extend({},r,f);o.$$controller=s.invoke(n.controllerProvider,null,a)}else o.$$controller=n.controller;o.$$state=t,o.$$controllerAs=n.controllerAs,l[i]=o}))}),r.all(p).then(function(t){return l})}var T=r.reject(new Error("transition superseded")),k=r.reject(new Error("transition prevented")),A=r.reject(new Error("transition aborted")),M=r.reject(new Error("transition failed"));return C.locals={resolve:null,globals:{$stateParams:{}}},_={params:{},current:C.self,$current:C,transition:null},_.reload=function(){return _.transitionTo(_.current,p,{reload:!0,inherit:!1,notify:!0})},_.go=function(t,e,n){return _.transitionTo(t,e,j({inherit:!0,relative:_.$current},n))},_.transitionTo=function(e,n,o){n=n||{},o=j({location:!0,inherit:!1,relative:null,notify:!0,reload:!1,$retry:!1},o||{});var a,c=_.$current,d=_.params,f=c.path,g=h(e,o.relative);if(!P(g)){var v={to:e,toParams:n,options:o},b=w(v,c.self,d,o);if(b)return b;if(e=v.to,n=v.toParams,o=v.options,g=h(e,o.relative),!P(g)){if(!o.relative)throw new Error("No such state '"+e+"'");throw new Error("Could not resolve '"+e+"' from state '"+o.relative+"'")}}if(g[E])throw new Error("Cannot transition to abstract state '"+e+"'");if(o.inherit&&(n=l(p,n||{},_.$current,g)),!g.params.$$validates(n))return M;n=g.params.$$values(n),e=g;var y=e.path,$=0,A=y[$],O=C.locals,I=[];if(!o.reload)for(;A&&A===f[$]&&A.ownParams.$$equals(n,d);)O=I[$]=A.locals,$++,A=y[$];if(x(e,c,O,o))return e.self.reloadOnSearch!==!1&&m.update(),_.transition=null,r.when(_.current);if(n=u(e.params.$$keys(),n||{}),o.notify&&t.$broadcast("$stateChangeStart",e.self,n,c.self,d).defaultPrevented)return m.update(),k;for(var D=r.when(O),N=$;N<y.length;N++,A=y[N])O=I[N]=i(O),D=S(A,n,A===e,D,O,o);var L=_.transition=D.then(function(){var i,r,a;if(_.transition!==L)return T;for(i=f.length-1;i>=$;i--)a=f[i],a.self.onExit&&s.invoke(a.self.onExit,a.self,a.locals.globals),a.locals=null;for(i=$;i<y.length;i++)r=y[i],r.locals=I[i],r.self.onEnter&&s.invoke(r.self.onEnter,r.self,r.locals.globals);return _.transition!==L?T:(_.$current=e,_.current=e.self,_.params=n,R(_.params,p),_.transition=null,o.location&&e.navigable&&m.push(e.navigable.url,e.navigable.locals.globals.$stateParams,{$$avoidResync:!0,replace:"replace"===o.location}),o.notify&&t.$broadcast("$stateChangeSuccess",e.self,n,c.self,d),m.update(!0),_.current)},function(i){return _.transition!==L?T:(_.transition=null,a=t.$broadcast("$stateChangeError",e.self,n,c.self,d,i),a.defaultPrevented||m.update(),r.reject(i))});return L},_.is=function(t,e,i){i=j({relative:_.$current},i||{});var r=h(t,i.relative);return P(r)?_.$current!==r?!1:e?c(r.params.$$values(e),p):!0:n},_.includes=function(t,e,i){if(i=j({relative:_.$current},i||{}),D(t)&&g(t)){if(!v(t))return!1;t=_.$current.name}var r=h(t,i.relative);return P(r)?P(_.$current.includes[r.name])?e?c(r.params.$$values(e),p,a(e)):!0:!1:n},_.href=function(t,e,i){i=j({lossy:!0,inherit:!0,absolute:!1,relative:_.$current},i||{});var r=h(t,i.relative);if(!P(r))return null;i.inherit&&(e=l(p,e||{},_.$current,r));var o=r&&i.lossy?r.navigable:r;return o&&o.url!==n&&null!==o.url?m.href(o.url,u(r.params.$$keys(),e||{}),{absolute:i.absolute}):null},_.get=function(t,e){if(0===arguments.length)return f(a($),function(t){return $[t].self});var n=h(t,e||_.$current);return n&&n.self?n.self:null},_}function x(t,e,n,i){return t!==e||(n!==e.locals||i.reload)&&t.self.reloadOnSearch!==!1?void 0:!0}var C,_,$={},S={},E="abstract",T={parent:function(t){if(P(t.parent)&&t.parent)return h(t.parent);var e=/^(.+)\.[^.]+$/.exec(t.name);return e?h(e[1]):C},data:function(t){return t.parent&&t.parent.data&&(t.data=t.self.data=j({},t.parent.data,t.data)),t.data},url:function(t){var e=t.url,n={params:t.params||{}};if(D(e))return"^"==e.charAt(0)?r.compile(e.substring(1),n):(t.parent.navigable||C).url.concat(e,n);if(!e||r.isMatcher(e))return e;throw new Error("Invalid url '"+e+"' in state '"+t+"'")},navigable:function(t){return t.url?t:t.parent?t.parent.navigable:null},ownParams:function(t){var e=t.url&&t.url.params||new H.ParamSet;return F(t.params||{},function(t,n){e[n]||(e[n]=new H.Param(n,null,t,"config"))}),e},params:function(t){return t.parent&&t.parent.params?j(t.parent.params.$$new(),t.ownParams):new H.ParamSet},views:function(t){var e={};return F(P(t.views)?t.views:{"":t},function(n,i){i.indexOf("@")<0&&(i+="@"+t.parent.name),e[i]=n}),e},path:function(t){return t.parent?t.parent.path.concat(t):[]},includes:function(t){var e=t.parent?j({},t.parent.includes):{};return e[t.name]=!0,e},$delegates:{}};C=m({name:"",url:"^",views:null,"abstract":!0}),C.navigable=null,this.decorator=b,this.state=y,this.$get=w,w.$inject=["$rootScope","$q","$view","$injector","$resolve","$stateParams","$urlRouter","$location","$urlMatcherFactory"]}function x(){function t(t,e){return{load:function(n,i){var r,o={template:null,controller:null,view:null,locals:null,notify:!0,async:!0,params:{}};return i=j(o,i),i.view&&(r=e.fromConfig(i.view,i.params,i.locals)),r&&i.notify&&t.$broadcast("$viewContentLoading",i),r}}}this.$get=t,t.$inject=["$rootScope","$templateFactory"]}function C(){var t=!1;this.useAnchorScroll=function(){t=!0},this.$get=["$anchorScroll","$timeout",function(e,n){return t?e:function(t){n(function(){t[0].scrollIntoView()},0,!1)}}]}function _(t,n,i,r){function o(){return n.has?function(t){return n.has(t)?n.get(t):null}:function(t){try{return n.get(t)}catch(e){return null}}}function a(t,e){var n=function(){return{enter:function(t,e,n){e.after(t),n()},leave:function(t,e){t.remove(),e()}}};if(c)return{enter:function(t,e,n){var i=c.enter(t,null,e,n);i&&i.then&&i.then(n)},leave:function(t,e){var n=c.leave(t,e);n&&n.then&&n.then(e)}};if(l){var i=l&&l(e,t);return{enter:function(t,e,n){i.enter(t,null,e),n()},leave:function(t,e){i.leave(t),e()}}}return n()}var s=o(),l=s("$animator"),c=s("$animate"),u={restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(n,o,s){return function(n,o,l){function c(){h&&(h.remove(),h=null),f&&(f.$destroy(),f=null),d&&(v.leave(d,function(){h=null}),h=d,d=null)}function u(a){var u,h=S(n,l,o,r),b=h&&t.$current&&t.$current.locals[h];if(a||b!==p){u=n.$new(),p=t.$current.locals[h];var y=s(u,function(t){v.enter(t,o,function(){f&&f.$emit("$viewContentAnimationEnded"),(e.isDefined(g)&&!g||n.$eval(g))&&i(t)}),c()});d=y,f=u,f.$emit("$viewContentLoaded"),f.$eval(m)}}var h,d,f,p,m=l.onload||"",g=l.autoscroll,v=a(l,n);n.$on("$stateChangeSuccess",function(){u(!1)}),n.$on("$viewContentLoading",function(){u(!1)}),u(!0)}}};return u}function $(t,e,n,i){return{restrict:"ECA",priority:-400,compile:function(r){var o=r.html();return function(r,a,s){var l=n.$current,c=S(r,s,a,i),u=l&&l.locals[c];if(u){a.data("$uiView",{name:c,state:u.$$state}),a.html(u.$template?u.$template:o);var h=t(a.contents());if(u.$$controller){u.$scope=r;var d=e(u.$$controller,u);u.$$controllerAs&&(r[u.$$controllerAs]=d),a.data("$ngControllerController",d),a.children().data("$ngControllerController",d)}h(r)}}}}}function S(t,e,n,i){var r=i(e.uiView||e.name||"")(t),o=n.inheritedData("$uiView");return r.indexOf("@")>=0?r:r+"@"+(o?o.state.name:"")}function E(t,e){var n,i=t.match(/^\s*({[^}]*})\s*$/);if(i&&(t=e+"("+i[1]+")"),n=t.replace(/\n/g," ").match(/^([^(]+?)\s*(\((.*)\))?$/),!n||4!==n.length)throw new Error("Invalid state ref '"+t+"'");return{state:n[1],paramExpr:n[3]||null}}function T(t){var e=t.parent().inheritedData("$uiView");return e&&e.state&&e.state.name?e.state:void 0}function k(t,n){var i=["location","inherit","reload"];return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,o,a,s){var l=E(a.uiSref,t.current.name),c=null,u=T(o)||t.$current,h=null,d="A"===o.prop("tagName"),f="FORM"===o[0].nodeName,p=f?"action":"href",m=!0,g={relative:u,inherit:!0},v=r.$eval(a.uiSrefOpts)||{};e.forEach(i,function(t){t in v&&(g[t]=v[t])});var b=function(n){if(n&&(c=e.copy(n)),m){h=t.href(l.state,c,g);var i=s[1]||s[0];return i&&i.$$setStateInfo(l.state,c),null===h?(m=!1,!1):void a.$set(p,h)}};l.paramExpr&&(r.$watch(l.paramExpr,function(t,e){t!==c&&b(t)},!0),c=e.copy(r.$eval(l.paramExpr))),b(),f||o.bind("click",function(e){var i=e.which||e.button;if(!(i>1||e.ctrlKey||e.metaKey||e.shiftKey||o.attr("target"))){var r=n(function(){t.go(l.state,c,g)});e.preventDefault();var a=d&&!h?1:0;e.preventDefault=function(){a--<=0&&n.cancel(r)}}})}}}function A(t,e,n){return{restrict:"A",controller:["$scope","$element","$attrs",function(e,i,r){function o(){a()?i.addClass(c):i.removeClass(c)}function a(){return"undefined"!=typeof r.uiSrefActiveEq?s&&t.is(s.name,l):s&&t.includes(s.name,l)}var s,l,c;c=n(r.uiSrefActiveEq||r.uiSrefActive||"",!1)(e),this.$$setStateInfo=function(e,n){s=t.get(e,T(i)),l=n,o()},e.$on("$stateChangeSuccess",o)}]}}function M(t){var e=function(e){return t.is(e)};return e.$stateful=!0,e}function O(t){var e=function(e){return t.includes(e)};return e.$stateful=!0,e}var P=e.isDefined,I=e.isFunction,D=e.isString,N=e.isObject,L=e.isArray,F=e.forEach,j=e.extend,R=e.copy;e.module("ui.router.util",["ng"]),e.module("ui.router.router",["ui.router.util"]),e.module("ui.router.state",["ui.router.router","ui.router.util"]),e.module("ui.router",["ui.router.state"]),e.module("ui.router.compat",["ui.router"]),p.$inject=["$q","$injector"],e.module("ui.router.util").service("$resolve",p),m.$inject=["$http","$templateCache","$injector"],e.module("ui.router.util").service("$templateFactory",m);var H;g.prototype.concat=function(t,e){var n={caseInsensitive:H.caseInsensitive(),strict:H.strictMode(),squash:H.defaultSquashPolicy()};return new g(this.sourcePath+t+this.sourceSearch,j(n,e),this)},g.prototype.toString=function(){return this.source},g.prototype.exec=function(t,e){function n(t){function e(t){return t.split("").reverse().join("")}function n(t){return t.replace(/\\-/,"-")}var i=e(t).split(/-(?!\\)/),r=f(i,e);return f(r,n).reverse()}var i=this.regexp.exec(t);if(!i)return null;e=e||{};var r,o,a,s=this.parameters(),l=s.length,c=this.segments.length-1,u={};if(c!==i.length-1)throw new Error("Unbalanced capture group in route '"+this.source+"'");for(r=0;c>r;r++){a=s[r];var h=this.params[a],d=i[r+1];for(o=0;o<h.replace;o++)h.replace[o].from===d&&(d=h.replace[o].to);d&&h.array===!0&&(d=n(d)),u[a]=h.value(d)}for(;l>r;r++)a=s[r],u[a]=this.params[a].value(e[a]);return u},g.prototype.parameters=function(t){return P(t)?this.params[t]||null:this.$$paramNames},g.prototype.validates=function(t){return this.params.$$validates(t)},g.prototype.format=function(t){function e(t){return encodeURIComponent(t).replace(/-/g,function(t){return"%5C%"+t.charCodeAt(0).toString(16).toUpperCase()})}t=t||{};var n=this.segments,i=this.parameters(),r=this.params;if(!this.validates(t))return null;var o,a=!1,s=n.length-1,l=i.length,c=n[0];for(o=0;l>o;o++){var u=s>o,h=i[o],d=r[h],p=d.value(t[h]),m=d.isOptional&&d.type.equals(d.value(),p),g=m?d.squash:!1,v=d.type.encode(p);if(u){var b=n[o+1];if(g===!1)null!=v&&(c+=L(v)?f(v,e).join("-"):encodeURIComponent(v)),c+=b;else if(g===!0){var y=c.match(/\/$/)?/\/?(.*)/:/(.*)/;c+=b.match(y)[1]}else D(g)&&(c+=g+b)}else{if(null==v||m&&g!==!1)continue;L(v)||(v=[v]),v=f(v,encodeURIComponent).join("&"+h+"="),c+=(a?"&":"?")+(h+"="+v),a=!0}}return c},v.prototype.is=function(t,e){return!0},v.prototype.encode=function(t,e){return t},v.prototype.decode=function(t,e){return t},v.prototype.equals=function(t,e){return t==e},v.prototype.$subPattern=function(){var t=this.pattern.toString();return t.substr(1,t.length-2)},v.prototype.pattern=/.*/,v.prototype.toString=function(){return"{Type:"+this.name+"}"},v.prototype.$asArray=function(t,e){function i(t,e){function i(t,e){return function(){return t[e].apply(t,arguments)}}function r(t){return L(t)?t:P(t)?[t]:[]}function o(t){switch(t.length){case 0:return n;case 1:return"auto"===e?t[0]:t;default:return t}}function a(t){return!t}function s(t,e){return function(n){n=r(n);var i=f(n,t);return e===!0?0===d(i,a).length:o(i)}}function l(t){return function(e,n){var i=r(e),o=r(n);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!t(i[a],o[a]))return!1;return!0}}this.encode=s(i(t,"encode")),this.decode=s(i(t,"decode")),this.is=s(i(t,"is"),!0),this.equals=l(i(t,"equals")),this.pattern=t.pattern,this.$arrayMode=e}if(!t)return this;if("auto"===t&&!e)throw new Error("'auto' array mode is for query parameters only");return new i(this,t)},e.module("ui.router.util").provider("$urlMatcherFactory",b),e.module("ui.router.util").run(["$urlMatcherFactory",function(t){}]),y.$inject=["$locationProvider","$urlMatcherFactoryProvider"],e.module("ui.router.router").provider("$urlRouter",y),w.$inject=["$urlRouterProvider","$urlMatcherFactoryProvider"],e.module("ui.router.state").value("$stateParams",{}).provider("$state",w),x.$inject=[],e.module("ui.router.state").provider("$view",x),e.module("ui.router.state").provider("$uiViewScroll",C),_.$inject=["$state","$injector","$uiViewScroll","$interpolate"],$.$inject=["$compile","$controller","$state","$interpolate"],e.module("ui.router.state").directive("uiView",_),e.module("ui.router.state").directive("uiView",$),k.$inject=["$state","$timeout"],A.$inject=["$state","$stateParams","$interpolate"],e.module("ui.router.state").directive("uiSref",k).directive("uiSrefActive",A).directive("uiSrefActiveEq",A),M.$inject=["$state"],O.$inject=["$state"],e.module("ui.router.state").filter("isState",M).filter("includedByState",O)}(window,window.angular),angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(t){var e=t.storageKey(),n=t.storage(),i=function(){var i=t.preferredLanguage();angular.isString(i)?t.use(i):n.put(e,t.use())};n?n.get(e)?t.use(n.get(e))["catch"](i):i():angular.isString(t.preferredLanguage())&&t.use(t.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(t){var e,n,i,r,o,a,s,l,c,u,h,d,f,p,m,g={},v=[],b=t,y=[],w=!1,x="translate-cloak",C=!1,_=".",$="2.5.2",S=function(){var t,e,n=window.navigator,i=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(n.languages))for(t=0;t<n.languages.length;t++)if(e=n.languages[t],e&&e.length)return e;for(t=0;t<i.length;t++)if(e=n[i[t]],e&&e.length)return e;return null};S.displayName="angular-translate/service: getFirstBrowserLanguage";var E=function(){return(S()||"").split("-").join("_")};E.displayName="angular-translate/service: getLocale";var T=function(t,e){for(var n=0,i=t.length;i>n;n++)if(t[n]===e)return n;return-1},k=function(){return this.replace(/^\s+|\s+$/g,"")},A=function(t){for(var e=[],i=angular.lowercase(t),r=0,o=v.length;o>r;r++)e.push(angular.lowercase(v[r]));if(T(e,i)>-1)return t;if(n){var a;for(var s in n){var l=!1,c=Object.prototype.hasOwnProperty.call(n,s)&&angular.lowercase(s)===angular.lowercase(t);if("*"===s.slice(-1)&&(l=s.slice(0,-1)===t.slice(0,s.length-1)),(c||l)&&(a=n[s],T(e,angular.lowercase(a))>-1))return a}}var u=t.split("_");return u.length>1&&T(e,angular.lowercase(u[0]))>-1?u[0]:t},M=function(t,e){if(!t&&!e)return g;if(t&&!e){if(angular.isString(t))return g[t]}else angular.isObject(g[t])||(g[t]={}),angular.extend(g[t],O(e));return this};this.translations=M,this.cloakClassName=function(t){return t?(x=t,this):x};var O=function(t,e,n,i){var r,o,a,s;e||(e=[]),n||(n={});for(r in t)Object.prototype.hasOwnProperty.call(t,r)&&(s=t[r],angular.isObject(s)?O(s,e.concat(r),n,r):(o=e.length?""+e.join(_)+_+r:r,e.length&&r===i&&(a=""+e.join(_),n[a]="@:"+o),n[o]=s));return n};this.addInterpolation=function(t){return y.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return u=t,this},this.useSanitizeValueStrategy=function(t){return w=t,this},this.preferredLanguage=function(t){return P(t),this};var P=function(t){return t&&(e=t),e};this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(f=t,this):f},this.translationNotFoundIndicatorRight=function(t){return t?(p=t,this):p},this.fallbackLanguage=function(t){return I(t),this};var I=function(t){return t?(angular.isString(t)?(r=!0,i=[t]):angular.isArray(t)&&(r=!1,i=t),angular.isString(e)&&T(i,e)<0&&i.push(e),this):r?i[0]:i};this.use=function(t){if(t){if(!g[t]&&!h)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'");return o=t,this}return o};var D=function(t){return t?void(b=t):l?l+b:b};this.storageKey=D,this.useUrlLoader=function(t,e){return this.useLoader("$translateUrlLoader",angular.extend({url:t},e))},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return h=t,d=e||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return s=t,this},this.storagePrefix=function(t){return t?(l=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return c=t,this},this.usePostCompiling=function(t){return C=!!t,this},this.determinePreferredLanguage=function(t){var n=t&&angular.isFunction(t)?t():E();return e=v.length?A(n):n,this},this.registerAvailableLanguageKeys=function(t,e){return t?(v=t,e&&(n=e),this):v},this.useLoaderCache=function(t){return t===!1?m=void 0:t===!0?m=!0:"undefined"==typeof t?m="$translationCache":t&&(m=t),this},this.$get=["$log","$injector","$rootScope","$q",function(t,n,l,v){var _,S,E,N=n.get(u||"$translateDefaultInterpolation"),L=!1,F={},j={},R=function(t,n,r){if(angular.isArray(t)){var a=function(t){for(var e={},i=[],o=function(t){var i=v.defer(),o=function(n){e[t]=n,i.resolve([t,n])};return R(t,n,r).then(o,o),i.promise},a=0,s=t.length;s>a;a++)i.push(o(t[a]));return v.all(i).then(function(){return e})};return a(t)}var l=v.defer();t&&(t=k.apply(t));var c=function(){var t=e?j[e]:j[o];if(S=0,s&&!t){var n=_.get(b);if(t=j[n],i&&i.length){var r=T(i,n);S=0===r?1:0,T(i,e)<0&&i.push(e)}}return t}();return c?c.then(function(){Z(t,n,r).then(l.resolve,l.reject)},l.reject):Z(t,n,r).then(l.resolve,l.reject),l.promise},H=function(t){return f&&(t=[f,t].join(" ")),p&&(t=[t,p].join(" ")),t},B=function(t){o=t,l.$emit("$translateChangeSuccess",{language:t}),s&&_.put(R.storageKey(),o),N.setLocale(o),angular.forEach(F,function(t,e){F[e].setLocale(o)}),l.$emit("$translateChangeEnd",{language:t})},W=function(t){if(!t)throw"No language key specified for loading.";var e=v.defer();l.$emit("$translateLoadingStart",{language:t}),L=!0;var i=m;"string"==typeof i&&(i=n.get(i));var r=angular.extend({},d,{key:t,$http:angular.extend({},{cache:i},d.$http)});return n.get(h)(r).then(function(n){var i={};l.$emit("$translateLoadingSuccess",{language:t}),angular.isArray(n)?angular.forEach(n,function(t){angular.extend(i,O(t))}):angular.extend(i,O(n)),L=!1,e.resolve({key:t,table:i}),l.$emit("$translateLoadingEnd",{language:t})},function(t){l.$emit("$translateLoadingError",{language:t}),e.reject(t),l.$emit("$translateLoadingEnd",{language:t})}),e.promise};if(s&&(_=n.get(s),!_.get||!_.put))throw new Error("Couldn't use storage '"+s+"', missing get() or put() method!");angular.isFunction(N.useSanitizeValueStrategy)&&N.useSanitizeValueStrategy(w),y.length&&angular.forEach(y,function(t){var i=n.get(t);i.setLocale(e||o),angular.isFunction(i.useSanitizeValueStrategy)&&i.useSanitizeValueStrategy(w),F[i.getInterpolationIdentifier()]=i});var z=function(t){var e=v.defer();return Object.prototype.hasOwnProperty.call(g,t)?e.resolve(g[t]):j[t]?j[t].then(function(t){M(t.key,t.table),e.resolve(t.table)},e.reject):e.reject(),e.promise},U=function(t,e,n,i){var r=v.defer();return z(t).then(function(a){Object.prototype.hasOwnProperty.call(a,e)?(i.setLocale(t),r.resolve(i.interpolate(a[e],n)),i.setLocale(o)):r.reject()},r.reject),r.promise},Y=function(t,e,n,i){var r,a=g[t];return a&&Object.prototype.hasOwnProperty.call(a,e)&&(i.setLocale(t),r=i.interpolate(a[e],n),i.setLocale(o)),r},q=function(t){if(c){var e=n.get(c)(t,o);return void 0!==e?e:t}return t},V=function(t,e,n,r){var o=v.defer();if(t<i.length){var a=i[t];U(a,e,n,r).then(o.resolve,function(){V(t+1,e,n,r).then(o.resolve)})}else o.resolve(q(e));return o.promise},X=function(t,e,n,r){var o;if(t<i.length){var a=i[t];o=Y(a,e,n,r),o||(o=X(t+1,e,n,r))}return o},G=function(t,e,n){return V(E>0?E:S,t,e,n)},K=function(t,e,n){return X(E>0?E:S,t,e,n)},Z=function(t,e,n){var r=v.defer(),a=o?g[o]:g,s=n?F[n]:N;if(a&&Object.prototype.hasOwnProperty.call(a,t)){var l=a[t];"@:"===l.substr(0,2)?R(l.substr(2),e,n).then(r.resolve,r.reject):r.resolve(s.interpolate(l,e))}else{var u;c&&!L&&(u=q(t)),o&&i&&i.length?G(t,e,s).then(function(t){r.resolve(t)},function(t){r.reject(H(t))}):c&&!L&&u?r.resolve(u):r.reject(H(t))}return r.promise},J=function(t,e,n){var r,a=o?g[o]:g,s=n?F[n]:N;if(a&&Object.prototype.hasOwnProperty.call(a,t)){var l=a[t];r="@:"===l.substr(0,2)?J(l.substr(2),e,n):s.interpolate(l,e)}else{var u;c&&!L&&(u=q(t)),o&&i&&i.length?(S=0,r=K(t,e,s)):r=c&&!L&&u?u:H(t)}return r};if(R.preferredLanguage=function(t){return t&&P(t),e},R.cloakClassName=function(){return x},R.fallbackLanguage=function(t){if(void 0!==t&&null!==t){if(I(t),h&&i&&i.length)for(var e=0,n=i.length;n>e;e++)j[i[e]]||(j[i[e]]=W(i[e]));R.use(R.use())}return r?i[0]:i},R.useFallbackLanguage=function(t){if(void 0!==t&&null!==t)if(t){var e=T(i,t);e>-1&&(E=e)}else E=0},R.proposedLanguage=function(){return a},R.storage=function(){return _},R.use=function(t){if(!t)return o;var e=v.defer();l.$emit("$translateChangeStart",{language:t});var n=A(t);return n&&(t=n),g[t]||!h||j[t]?(e.resolve(t),B(t)):(a=t,j[t]=W(t).then(function(n){return M(n.key,n.table),e.resolve(n.key),B(n.key),a===t&&(a=void 0),n},function(t){a===t&&(a=void 0),l.$emit("$translateChangeError",{language:t}),e.reject(t),l.$emit("$translateChangeEnd",{language:t})})),e.promise},R.storageKey=function(){return D()},R.isPostCompilingEnabled=function(){return C},R.refresh=function(t){function e(){r.resolve(),l.$emit("$translateRefreshEnd",{language:t})}function n(){r.reject(),l.$emit("$translateRefreshEnd",{language:t})}if(!h)throw new Error("Couldn't refresh translation table, no loader registered!");var r=v.defer();if(l.$emit("$translateRefreshStart",{language:t}),t)g[t]?W(t).then(function(n){M(n.key,n.table),t===o&&B(o),e()},n):n();else{var a=[],s={};if(i&&i.length)for(var c=0,u=i.length;u>c;c++)a.push(W(i[c])),s[i[c]]=!0;o&&!s[o]&&a.push(W(o)),v.all(a).then(function(t){angular.forEach(t,function(t){g[t.key]&&delete g[t.key],M(t.key,t.table)}),o&&B(o),e()})}return r.promise},R.instant=function(t,n,r){if(null===t||angular.isUndefined(t))return t;if(angular.isArray(t)){for(var a={},s=0,l=t.length;l>s;s++)a[t[s]]=R.instant(t[s],n,r);return a}if(angular.isString(t)&&t.length<1)return t;t&&(t=k.apply(t));var u,h=[];e&&h.push(e),o&&h.push(o),i&&i.length&&(h=h.concat(i));for(var d=0,f=h.length;f>d;d++){var p=h[d];if(g[p]&&"undefined"!=typeof g[p][t]&&(u=J(t,n,r)),"undefined"!=typeof u)break}return u||""===u||(u=N.interpolate(t,n),c&&!L&&(u=q(t))),u},R.versionInfo=function(){return $},R.loaderCache=function(){return m},h&&(angular.equals(g,{})&&R.use(R.use()),i&&i.length))for(var Q=function(t){return M(t.key,t.table),l.$emit("$translateChangeEnd",{language:t.key}),t},tt=0,et=i.length;et>tt;tt++)j[i[tt]]=W(i[tt]).then(Q);return R}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(t){var e,n={},i="default",r=null,o={escaped:function(t){var e={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=angular.element("<div></div>").text(t[n]).html());return e}},a=function(t){var e;return e=angular.isFunction(o[r])?o[r](t):t};return n.setLocale=function(t){e=t},n.getInterpolationIdentifier=function(){return i},n.useSanitizeValueStrategy=function(t){return r=t,this},n.interpolate=function(e,n){return r&&(n=a(n)),t(e)(n||{})},n}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(t,e,n,i,r,o){return{restrict:"AE",scope:!0,compile:function(e,a){var s=a.translateValues?a.translateValues:void 0,l=a.translateInterpolation?a.translateInterpolation:void 0,c=e[0].outerHTML.match(/translate-value-+/i),u="^(.*)("+n.startSymbol()+".*"+n.endSymbol()+")(.*)",h="^(.*)"+n.startSymbol()+"(.*)"+n.endSymbol()+"(.*)";return function(e,d,f){e.interpolateParams={},e.preText="",e.postText="";var p={},m=function(t){if(angular.equals(t,"")||!angular.isDefined(t)){var i=d.text().match(u);angular.isArray(i)?(e.preText=i[1],e.postText=i[3],p.translate=n(i[2])(e.$parent),watcherMatches=d.text().match(h),angular.isArray(watcherMatches)&&watcherMatches[2]&&watcherMatches[2].length&&e.$watch(watcherMatches[2],function(t){p.translate=t,w()})):p.translate=d.text().replace(/^\s+|\s+$/g,"")}else p.translate=t;w()},g=function(t){f.$observe(t,function(e){p[t]=e,w()})};f.$observe("translate",function(t){m(t)});for(var v in f)f.hasOwnProperty(v)&&"translateAttr"===v.substr(0,13)&&g(v);if(f.$observe("translateDefault",function(t){e.defaultText=t}),s&&f.$observe("translateValues",function(t){t&&e.$parent.$watch(function(){angular.extend(e.interpolateParams,r(t)(e.$parent))})}),c){var b=function(t){f.$observe(t,function(n){var i=angular.lowercase(t.substr(14,1))+t.substr(15);e.interpolateParams[i]=n})};for(var y in f)Object.prototype.hasOwnProperty.call(f,y)&&"translateValue"===y.substr(0,14)&&"translateValues"!==y&&b(y)}var w=function(){for(var t in p)p.hasOwnProperty(t)&&p[t]&&x(t,p[t],e,e.interpolateParams)},x=function(e,n,i,r){t(n,r,l).then(function(t){C(t,i,!0,e)},function(t){C(t,i,!1,e)})},C=function(e,n,r,o){if("translate"===o){r||"undefined"==typeof n.defaultText||(e=n.defaultText),d.html(n.preText+e+n.postText);var s=t.isPostCompilingEnabled(),l="undefined"!=typeof a.translateCompile,c=l&&"false"!==a.translateCompile;(s&&!l||c)&&i(d.contents())(n)}else{r||"undefined"==typeof n.defaultText||(e=n.defaultText);var u=f.$attr[o].substr(15);d.attr(u,e)}};e.$watch("interpolateParams",w,!0);var _=o.$on("$translateChangeSuccess",w);d.text().length&&m(""),w(),e.$on("$destroy",_)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(t,e){return{compile:function(n){var i=function(){n.addClass(e.cloakClassName())},r=function(){n.removeClass(e.cloakClassName())},o=t.$on("$translateChangeEnd",function(){r(),o(),o=null});return i(),function(t,n,o){o.translateCloak&&o.translateCloak.length&&o.$observe("translateCloak",function(t){
e(t).then(r,i)})}}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(t,e){var n=function(n,i,r){return angular.isObject(i)||(i=t(i)(this)),e.instant(n,i,r)};return n.$stateful=!0,n}]),angular.module("pascalprecht.translate").factory("$translateUrlLoader",["$q","$http",function(t,e){return function(n){if(!n||!n.url)throw new Error("Couldn't use urlLoader since no url is given!");var i=t.defer(),r={};return r[n.queryParameter||"lang"]=n.key,e(angular.extend({url:n.url,params:r,method:"GET"},n.$http)).success(function(t){i.resolve(t)}).error(function(t){i.reject(n.key)}),i.promise}}]),function(){function t(t,e,n){function i(i,u){var h=u.dirPaginate,d=h.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),f=/\|\s*itemsPerPage\s*:[^|]*/;if(null===d[2].match(f))throw"pagination directive: the 'itemsPerPage' filter must be set.";var p=d[2].replace(f,""),m=e(p);a(i);var g=u.paginationId||c;return n.registerInstance(g),function(i,a,u){var d=e(u.paginationId)(i)||u.paginationId||c;n.registerInstance(d);var f=r(h,d);o(a,u,f),s(a);var p=t(a),g=l(i,u,d);n.setCurrentPageParser(d,g,i),"undefined"!=typeof u.totalItems?(n.setAsyncModeTrue(d),i.$watch(function(){return e(u.totalItems)(i)},function(t){t>=0&&n.setCollectionLength(d,t)})):i.$watchCollection(function(){return m(i)},function(t){t&&n.setCollectionLength(d,t.length)}),p(i)}}function r(t,e){var n,i=!!t.match(/(\|\s*itemsPerPage\s*:[^|]*:[^|]*)/);return n=e===c||i?t:t.replace(/(\|\s*itemsPerPage\s*:[^|]*)/,"$1 : '"+e+"'")}function o(t,e,n){t[0].hasAttribute("dir-paginate-start")||t[0].hasAttribute("data-dir-paginate-start")?(e.$set("ngRepeatStart",n),t.eq(t.length-1).attr("ng-repeat-end",!0)):e.$set("ngRepeat",n)}function a(t){angular.forEach(t,function(t){t.nodeType===Node.ELEMENT_NODE&&angular.element(t).attr("dir-paginate-no-compile",!0)})}function s(t){angular.forEach(t,function(t){t.nodeType===Node.ELEMENT_NODE&&angular.element(t).removeAttr("dir-paginate-no-compile")}),t.eq(0).removeAttr("dir-paginate-start").removeAttr("dir-paginate").removeAttr("data-dir-paginate-start").removeAttr("data-dir-paginate"),t.eq(t.length-1).removeAttr("dir-paginate-end").removeAttr("data-dir-paginate-end")}function l(t,n,i){var r;if(n.currentPage)r=e(n.currentPage);else{var o=i+"__currentPage";t[o]=1,r=e(o)}return r}return{terminal:!0,multiElement:!0,compile:i}}function e(){return{priority:5e3,terminal:!0}}function n(t){t.put("angularUtils.directives.dirPagination.template",'<ul class="pagination" ng-if="1 < pages.length"><li ng-if="boundaryLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(1)">&laquo;</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == 1 }"><a href="" ng-click="setCurrent(pagination.current - 1)">&lsaquo;</a></li><li ng-repeat="pageNumber in pages track by $index" ng-class="{ active : pagination.current == pageNumber, disabled : pageNumber == \'...\' }"><a href="" ng-click="setCurrent(pageNumber)">{{ pageNumber }}</a></li><li ng-if="directionLinks" ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.current + 1)">&rsaquo;</a></li><li ng-if="boundaryLinks"  ng-class="{ disabled : pagination.current == pagination.last }"><a href="" ng-click="setCurrent(pagination.last)">&raquo;</a></li></ul>')}function i(t,e){function n(e,n,r){function a(n){u(n)&&(e.pages=i(n,t.getCollectionLength(d),t.getItemsPerPage(d),p),e.pagination.current=n,l(),e.onPageChange&&e.onPageChange({newPageNumber:n}))}function s(){var n=parseInt(t.getCurrentPage(d))||1;e.pages=i(n,t.getCollectionLength(d),t.getItemsPerPage(d),p),e.pagination.current=n,e.pagination.last=e.pages[e.pages.length-1],e.pagination.last<e.pagination.current?e.setCurrent(e.pagination.last):l()}function l(){var n=t.getCurrentPage(d),i=t.getItemsPerPage(d),r=t.getCollectionLength(d);e.range.lower=(n-1)*i+1,e.range.upper=Math.min(n*i,r),e.range.total=r}function u(t){return o.test(t)&&t>0&&t<=e.pagination.last}var h=r.paginationId||c,d=e.paginationId||r.paginationId||c;if(!t.isRegistered(d)&&!t.isRegistered(h)){var f=d!==c?" (id: "+d+") ":" ";throw"pagination directive: the pagination controls"+f+"cannot be used without the corresponding pagination directive."}e.maxSize||(e.maxSize=9),e.directionLinks=angular.isDefined(r.directionLinks)?e.$parent.$eval(r.directionLinks):!0,e.boundaryLinks=angular.isDefined(r.boundaryLinks)?e.$parent.$eval(r.boundaryLinks):!1;var p=Math.max(e.maxSize,5);e.pages=[],e.pagination={last:1,current:1},e.range={lower:1,upper:1,total:1},e.$watch(function(){return(t.getCollectionLength(d)+1)*t.getItemsPerPage(d)},function(t){t>0&&s()}),e.$watch(function(){return t.getItemsPerPage(d)},function(t,n){t!=n&&"undefined"!=typeof n&&a(e.pagination.current)}),e.$watch(function(){return t.getCurrentPage(d)},function(t,e){t!=e&&a(t)}),e.setCurrent=function(e){u(e)&&(e=parseInt(e,10),t.setCurrentPage(d,e))}}function i(t,e,n,i){var o,a=[],s=Math.ceil(e/n),l=Math.ceil(i/2);o=l>=t?"start":t>s-l?"end":"middle";for(var c=s>i,u=1;s>=u&&i>=u;){var h=r(u,t,i,s),d=2===u&&("middle"===o||"end"===o),f=u===i-1&&("middle"===o||"start"===o);a.push(c&&(d||f)?"...":h),u++}return a}function r(t,e,n,i){var r=Math.ceil(n/2);return t===n?i:1===t?t:i>n?e>i-r?i-n+t:e>r?e-r+t:t:t}var o=/^\d+$/;return{restrict:"AE",templateUrl:function(t,n){return n.templateUrl||e.getPath()},scope:{maxSize:"=?",onPageChange:"&?",paginationId:"=?"},link:n}}function r(t){return function(e,n,i){if("undefined"==typeof i&&(i=c),!t.isRegistered(i))throw"pagination directive: the itemsPerPage id argument (id: "+i+") does not match a registered pagination-id.";var r,o;return e instanceof Array?(n=parseInt(n)||9999999999,o=t.isAsyncMode(i)?0:(t.getCurrentPage(i)-1)*n,r=o+n,t.setItemsPerPage(i,n),e.slice(o,r)):e}}function o(){var t,e={};this.registerInstance=function(n){"undefined"==typeof e[n]&&(e[n]={asyncMode:!1},t=n)},this.isRegistered=function(t){return"undefined"!=typeof e[t]},this.getLastInstanceId=function(){return t},this.setCurrentPageParser=function(t,n,i){e[t].currentPageParser=n,e[t].context=i},this.setCurrentPage=function(t,n){e[t].currentPageParser.assign(e[t].context,n)},this.getCurrentPage=function(t){var n=e[t].currentPageParser;return n?n(e[t].context):1},this.setItemsPerPage=function(t,n){e[t].itemsPerPage=n},this.getItemsPerPage=function(t){return e[t].itemsPerPage},this.setCollectionLength=function(t,n){e[t].collectionLength=n},this.getCollectionLength=function(t){return e[t].collectionLength},this.setAsyncModeTrue=function(t){e[t].asyncMode=!0},this.isAsyncMode=function(t){return e[t].asyncMode}}function a(){var t="angularUtils.directives.dirPagination.template";this.setPath=function(e){t=e},this.$get=function(){return{getPath:function(){return t}}}}var s,l="angularUtils.directives.dirPagination",c="__default";try{s=angular.module(l)}catch(u){s=angular.module(l,[])}s.directive("dirPaginate",["$compile","$parse","paginationService",t]).directive("dirPaginateNoCompile",e).directive("dirPaginationControls",["paginationService","paginationTemplate",i]).filter("itemsPerPage",["paginationService",r]).service("paginationService",o).provider("paginationTemplate",a).run(["$templateCache",n])}(),angular.module("pixie.dashboard",[]),angular.module("image.directives",[]),angular.module("pixie.admin",[]),angular.module("app",["ui.router","ngMaterial","ngAnimate","ngMessages","afkl.lazyImage","pascalprecht.translate","angularFileUpload","angularUtils.directives.dirPagination","pixie.dashboard","pixie.admin","ImageEditor"]).config(["$mdThemingProvider","$translateProvider","$compileProvider",function(t,e,n){n.debugInfoEnabled(!1),t.theme("default").primaryPalette("deep-orange").accentPalette("brown"),vars.selectedLocale?(e.translations(vars.selectedLocale,vars.trans),e.preferredLanguage(vars.selectedLocale)):(e.translations("en",vars.trans),e.preferredLanguage("en")),e.useUrlLoader("trans-messages"),e.useSanitizeValueStrategy("escaped")}]).run(["$rootScope","$state","users","utils",function(t,e,n,i){t.baseUrl=vars.baseUrl+"/",i.isDemo=parseInt(vars.isDemo),t.token=vars.token,n.assignCurrentUser(vars.user?JSON.parse(vars.user):!1),i.setAllSettings(vars.settings),$("#vars").remove(),delete window.vars,moment.locale(i.getSetting("dateLocale","en"));var r=document.createElement("input");r.type="file",i.folderUploadSupported="webkitdirectory"in r,t.isSmallScreen=window.outerWidth<=690,t.isTablet=window.outerWidth<=1200&&window.outerWidth>690;var o=["dashboard","editor","admin"];t.$on("$stateChangeStart",function(r,a,s){var l=a.name.replace(/\..+?$/,"");e.get(l)||r.preventDefault(),"home"===a.name&&(a.templateUrl=i.getHomeTemplateUrl(),a.controller=i.getHomeController()),"editor"===a.name&&(s.id||(r.preventDefault(),e.go("dashboard.albums"))),o.indexOf(l)>-1&&!n.current&&(r.preventDefault(),e.go("login")),"login"!=l&&"register"!=l||!n.current||(r.preventDefault(),e.go("dashboard.albums")),"register"!=l||i.getSetting("enableRegistration")||(r.preventDefault(),e.go("login")),"users"==l&&(n.current&&t.userCan("superuser")||t.isDemo||(r.preventDefault(),e.go("dashboard")))})}]),angular.module("app").config(["$urlRouterProvider","$stateProvider","$urlMatcherFactoryProvider","$locationProvider",function(t,e,n,i){parseInt(vars.settings.enablePushState)&&i.html5Mode(!0),n.strictMode(!1),t.when("/dashboard","/dashboard/albums"),t.otherwise("/"),e.state("home",{url:"/",templateUrl:"assets/views/home.html",controller:"HomeController"}).state("view",{url:"/view/:type/:id/:name",templateUrl:"assets/views/view.html",controller:"ViewController"}).state("login",{url:"/login",templateUrl:"assets/views/login.html",controller:"LoginController"}).state("register",{url:"/register",templateUrl:"assets/views/register.html",controller:"RegisterController"}).state("dashboard",{url:"/dashboard","abstract":!0,templateUrl:"assets/views/dashboard/dashboard.html",controller:"DashboardController"}).state("dashboard.trash",{url:"/trash",templateUrl:"assets/views/dashboard/files.html",controller:"TrashController"}).state("dashboard.recent",{url:"/recent",templateUrl:"assets/views/dashboard/files.html",controller:"RecentController"}).state("dashboard.favorites",{url:"/favorites",templateUrl:"assets/views/dashboard/files.html",controller:"FavoritesController"}).state("dashboard.search",{url:"/search/:query",templateUrl:"assets/views/dashboard/files.html",controller:"SearchController"}).state("dashboard.albums",{url:"/albums/:folderName?",templateUrl:"assets/views/dashboard/files.html",params:{folderName:{value:null}}}).state("dashboard.albumsRoot",{url:"/albums",templateUrl:"assets/views/dashboard/files.html",params:{folderName:{value:null}}}).state("admin",{url:"/admin","abstract":!0,templateUrl:"assets/views/admin/admin.html",controller:"AdminController"}).state("admin.users",{url:"/users",templateUrl:"assets/views/admin/users.html"}).state("admin.photos",{url:"/photos",templateUrl:"assets/views/admin/photos.html"}).state("admin.analytics",{url:"/analytics",templateUrl:"assets/views/admin/analytics.html",controller:"AnalyticsController"}).state("admin.settings",{url:"/settings",templateUrl:"assets/views/admin/settings.html",controller:"SettingsController"}).state("admin.ads",{url:"/ads",templateUrl:"assets/views/admin/admin-ads.html",controller:"SettingsController"}).state("editor",{url:"/editor/{id}",templateUrl:"assets/views/editor.html",controller:"EditorController",params:{id:{value:null}}})}]),angular.module("app").factory("localStorage",function(){var t={expireAfter:2,get:function(e,n){var i=JSON.parse(localStorage.getItem(e));return i&&t.isValid(i.time)?i.value:n},set:function(t,e,n){var i={value:e,time:(new Date).getTime()};if(n){var r=this.get(t);angular.isArray(e)||(i.value=[e]),angular.isArray(r)&&(r.push(e),i.value=r)}return localStorage.setItem(t,JSON.stringify(i))},remove:function(t){return localStorage.removeItem(t)},isValid:function(e){var n=((new Date).getTime()-new Date(e).getTime())/864e5;return n<t.expireAfter}};return t}),angular.module("app").controller("LoginController",["$rootScope","$scope","$http","$state","$mdDialog","users","utils",function(t,e,n,i,r,o,a){e.registrationEnabled=!0,e.credentials={remember:!0},e.passResetCredentials={email:""},e.resetPasswordError="",e.resetPassword=function(){n.post(t.baseUrl+"password/email",e.passResetCredentials).success(function(t){a.showToast(t),e.resetPasswordError="",e.closePasswordResetModal()}).error(function(t){e.resetPasswordError=t.email||t})},e.submit=function(){return e.loading=!0,o.login(e.credentials).success(function(){e.credentials={},i.go("dashboard.albums")}).error(function(t){e.errors=t})["finally"](function(){e.loading=!1})},e.showPasswordResetModal=function(t){r.show({templateUrl:"modals/resetPassword.html",targetEvent:t,controller:"LoginController",clickOutsideToClose:!0})},e.closePasswordResetModal=function(){e.passResetCredentials={},r.hide()}}]),angular.module("app").controller("RegisterController",["$rootScope","$scope","$state","users",function(t,e,n,i){e.credentials={},e.submit=function(){return e.loading=!0,i.register(e.credentials).success(function(){e.credentials={},n.go("dashboard.albums")}).error(function(t){e.errors=t})["finally"](function(){e.loading=!1})}}]),angular.module("app").controller("SocialLoginController",["$rootScope","$scope","$http","$state","$mdDialog","$mdToast","$translate","users",function(t,e,n,i,r,o,a,s){e.credentials={},e.loginWith=function(t){var n=e.baseUrl+"auth/social/"+t,i=screen.width/2-290,r=screen.height/2-225;window.$tempScope=e,window.open(n,"Authenticate Account","menubar=0, location=0, toolbar=0, titlebar=0, status=0, width=580, height=450, left="+i+", top="+r)},e.socialLoginCallback=function(t){window.$tempScope=void 0,t?(s.current=t,i.go("dashboard.albums")):e.requestUserEmail()},e.socialLoginCallbackError=function(){o.show(o.simple({position:"bottom right"}).content(a.instant("genericSocialError")))},e.createAndLoginUser=function(){n.post(t.baseUrl+"auth/social/request-email-callback",{email:e.credentials.email}).success(function(t){e.goToDashboard(t)}).error(function(t){1===t.code&&e.requestUserPassword()})},e.connectAccounts=function(){n.post(t.baseUrl+"auth/social/connect-accounts",{password:e.credentials.password}).success(function(t){e.goToDashboard(t)}).error(function(t){e.errorMessage=t})},e.requestUserPassword=function(t){r.show({templateUrl:"assets/views/modals/request-password-modal.html",targetEvent:t,controller:"SocialLoginController"})},e.requestUserEmail=function(t){r.show({templateUrl:"assets/views/modals/request-email-modal.html",targetEvent:t,controller:"SocialLoginController"})},e.closeModal=function(){r.hide()},e.goToDashboard=function(n){s.current=n,t.tempUser=void 0,e.credentials={},e.errorMessage=void 0,e.closeModal(),i.go("dashboard.albums")}}]),angular.module("app").factory("users",["$http","$rootScope","$state","$mdDialog","utils",function(t,e,n,i,r){var o={current:!1,accountSettings:{},changePasswordModel:{oldPassword:""},all:[],getAll:function(){return t.get("users").success(function(t){angular.isArray(t)&&(o.all=t)})},login:function(e){return t.post("auth/login",e).success(function(t){o.assignCurrentUser(t)})},register:function(e){return t.post("auth/register",e).success(function(t){o.current||o.assignCurrentUser(t)})},assignCurrentUser:function(t){t&&(r.isDemo&&(t.isAdmin=!0),this.current=t,this.accountSettings.username=this.getUsernameForCurrentUser(),this.accountSettings.first_name=t.first_name,this.accountSettings.last_name=t.last_name,this.accountSettings.gender=t.gender)},"delete":function(e){if(angular.isArray(e))var n=t.post("users",{users:e});else{var n=t["delete"]("users/"+e.id);e=[e]}return n.success(function(t){o.all=o.all.filter(function(t){return-1===e.indexOf(t)}),r.showToast(t)})},changePassword:function(){t.post(e.baseUrl+"password/change",this.changePasswordModel).success(function(t){r.showToast(t),o.closeModal()})},logout:function(){return t.post("auth/logout").success(function(){o.current=!1,r.stateIs(["dashboard","admin"])&&n.go("home"),r.showToast("logOutSuccess",!0)})},getUsernameForCurrentUser:function(){return this.current&&this.current.email?this.current.username?this.current.username:this.current.email.split("@")[0]:void 0},getAvatar:function(t){return t||(t=this.current),t.avatar_url?t.avatar_url:"male"!==t.gender&&t.gender?e.baseUrl+"assets/images/avatars/female.png":e.baseUrl+"assets/images/avatars/male.png"},updateAccountSettings:function(n,i){var a=n||this.accountSettings,s=i||this.current.id;return t.put(e.baseUrl+"users/"+s,a).success(function(t){n||(r.showToast("profileUpdateSuccess",!0),o.closeModal(),o.current=t)})},removeAvatar:function(){return t["delete"](e.baseUrl+"users/"+this.current.id+"/avatar").success(function(t){o.current.avatar_url="",r.showToast(t)})},showAccountSettingsModal:function(t,n){var o={templateUrl:"assets/views/modals/account-settings.html",targetEvent:t,locals:{activeTab:"settings"},clickOutsideToClose:!0,controller:["$scope","$upload","users","activeTab",function(t,n,i,o){t.users=i,t.activeTab=o,t.upload=function(t){if(t.length){var o=t[0];n.upload({url:e.baseUrl+"users/"+i.current.id+"/avatar",file:o}).success(function(t){i.current.avatar_url=t}).error(function(t,e){422===e&&r.showToast(t.file[0])})}}}]};"avatar"===n?o.locals.activeTab="avatar":n&&(o.onComplete=function(){$(".account-settings-modal ."+n).focus()}),i.show(o)},closeModal:function(){i.hide(),this.changePasswordModel={}}};return o}]),angular.module("app").controller("HomeController",["$scope","$state","utils","linkGenerator",function(t,e,n,i){t.ad1=n.trustHtml(n.getSetting("ad_home_slot_1")),t.links=i,t.shareable={},t.linkSelectModel={type:"directLink",size:"absoluteUrl"},t.assignShareable=function(e){t.shareable=e}}]),angular.module("app").controller("RootController",["$scope","$rootScope","$state","$mdToast","$translate","users","utils",function(t,e,n,i,r,o,a){t.users=o,t.utils=a,e.delayEditorStart=!0,t.statesWhereNavbarIsHidden=["editor","login","register"],t.isNavbarVisible=function(){return n.current.name&&-1===t.statesWhereNavbarIsHidden.indexOf(n.current.name)},e.ajaxProgress={files:!0},e.$on("$stateChangeStart",function(t,e,n){var i=a.getSetting("siteName");i=n.folderName?n.folderName+" - "+a.getSetting("siteName"):e.name.indexOf("folders")>-1?r.instant("dashboardTitle"):"view"===e.name?n.name+" - "+a.getSetting("siteName"):"editor"===e.name?a.trans("photoEditor")+" - "+a.getSetting("siteName"):a.getSetting("siteName")+" - "+r.instant(e.name.split(".")[1]||e.name+"Title"),document.title=i})}]),angular.module("app").controller("UploadController",["$rootScope","$scope","$translate","$upload","$state","folders","photos","activity","utils","users","localStorage",function(t,e,n,i,r,o,a,s,l,c,u){function h(t){return t&&t.length?t.filter(function(t){return"directory"===t.type?!1:d(t)?(t.uploaded=!0,t.rejected=!0,e.uploadHistory.push(t),!1):!0}):[]}function d(t){var n=t.type.split("/")[1],i=-1===e.validExtensions.indexOf(n),r=1e6*parseInt(e.maxFileSize)<=t.size;return i||r}function f(t){var e=l.getSetting("maxSimultUploads");return t.length>e&&(l.showToast(l.trans("maxSimultUploadsWarning",{number:e})),t.splice(0,t.length-e)),t}function p(){if(c.current)return{folder:o.selected.id};var t=l.randomString();return u.set("attachIds",t,!0),{attach_id:t}}function m(n,a){i.upload({url:e.baseUrl+"photos",file:n,fields:p()}).progress(function(t){a.percentageUploaded=parseInt(100*t.loaded/t.total),a.bytesUploaded=l.formatFileSize(t.loaded)}).success(function(n){return r.includes("dashboard")?(n.uploaded.length&&(o.selected.photos=o.selected.photos.concat(n.uploaded),a.id=n.uploaded[0].id),void(n.rejected.length&&(a.uploaded=!0,a.rejected=!0))):(e.uploadedFiles=e.uploadedFiles.concat(n.uploaded),e.selectedFile=e.uploadedFiles[0],t.$emit("photos.uploaded",n))}).error(function(t){a.rejected=!0,angular.isString(t)&&t.length<300&&l.showToast(t)})["finally"](function(){a.uploaded=!0,e.uploadsInProgress-=1,0===e.uploadsInProgress&&c.current&&t.$emit("activity.happened","uploaded","photo",e.uploadHistory.slice())})}e.uploadHistory=[],e.uploadsInProgress=0,e.validExtensions=l.getSetting("validExtensions").replace(/ /g,"").split(","),e.maxFileSize=l.getSetting("maxFileSize"),e.uploadedFiles=[],e.selectedFile={},e.assignSelectedFile=function(t){e.selectedFile=t},e.upload=function(n){if(!l.getSetting("enableHomeUpload")&&!c.current)return l.showToast("loginToUpload",!0);if(e.uploadsInProgress=0,e.uploadHistory=[],e.uploadedFiles=[],n&&n.length&&n[0].type){n=h(n),t.$emit("upload.started"),n=f(n),e.uploadsInProgress=n.length;for(var i=0;i<n.length;i++){var r=n[i],o=e.uploadHistory.push(r)-1;m(r,e.uploadHistory[o])}}}}]).directive("edUploadPanelVisibility",["$rootScope",function(t){return{restrict:"A",link:function(e,n){n.find(".close-panel").on("click",function(){e.$apply(function(){n.removeClass("open"),e.uploadHistory=[],e.uploadedFiles=[],e.selectedFile={}})}),t.$on("upload.started",function(){n.addClass("open")})}}}]),angular.module("app").controller("ViewController",["$rootScope","$scope","$stateParams","$http","utils","photos","gallery","users","selectedItem",function(t,e,n,i,r,o,a,s,l){function c(t){e.shareable=t,e.type=t.file_size?"photo":"folder",!t.password||s.current&&s.current.id==t.user_id||(e.passContainerVisible=!0),l.set(t),e.$broadcast("shareable.ready",t)}e.passContainerVisible=!1,e.closeButtonVisible=!1,e.ad1=r.trustHtml(r.getSetting("ad_preview_slot_1")),e.ad2=r.trustHtml(r.getSetting("ad_preview_slot_2")),t.shareable&&s.current?(c(t.shareable),e.closeButtonVisible=!0):i.post("shareable/preview",n).success(function(t){c(t)}).error(function(){r.toState(s.current?"dashboard.albums":"home")}),e.toDashboard=function(){r.toState("dashboard.albums")},e.goHome=function(){r.toState("home")},e.openGallery=function(t,e){angular.isArray(t)||(t=[t]),a.open(t,e||0,!0)},e.isFolder=function(){return e.shareable&&angular.isArray(e.shareable.photos)},e.checkPassword=function(){var t={id:e.shareable.id,type:e.type,password:e.password};i.post("shareable-password/check",t).success(function(){e.passContainerVisible=!1}).error(function(t){e.error=t})},e.$on("$destroy",function(){t.shareable=!1,l.set({})})}]),angular.module("app").directive("demoAlert",["localStorage",function(t){return{restrict:"E",replace:!0,template:'<div class="demo-alert"><p></p><i ng-click="removeDemoAlert()" class="icon icon-cancel"></i></div>',scope:{},controller:["$scope",function(e){e.removeDemoAlert=function(){$(".demo-alert").remove(),t.set("readPicturish"+e.alertKey+"DemoWarning",!0)}}],link:function(e,n,i){return e.alertKey=i.storageKey,t.get("readPicturish"+e.alertKey+"DemoWarning")?n.hide():void n.find("p").text(i.message)}}}]),angular.module("app").directive("demoInfoContainer",["$compile","localStorage","users","utils",function(t,e,n,i){return{restrict:"E",scope:{},link:function(r,o){var a=e.get("picturish-demo-credentials");if(n.current)return void o.hide();if(a&&a.email&&a.password)return void o.html("<h3>Your demo account information</h3><div>Email: <strong>"+a.email+"</strong></div><div>Password: <strong>"+a.password+"</strong></div>");var s='<div><h2>Demo site information <i class="icon icon-cancel"></i></h2><ol><li>There is no general demo account. Click the button below or register to create one.</li><li>On Demo site admin area is accessible to everyone.</li><li>Demo accounts will be reset every 2 days. (photos, activity etc will be deleted).</li><li>Accounts on demo site are limited to 40MB of storage space.</li><li>Demo accounts created via the button below will be populated with sample images.</li></ol><div class="demo-btn-container"><md-button class="md-primary md-raised">Create my demo account</md-button></div></div>';o.html(t(s)(r)),o.find(".icon").on("click",function(){o.hide()}),o.find(".md-button").on("click",function(){var t={email:i.randomString(10)+"@demo.com",password:"demo",password_confirmation:"demo",createDemoContent:!0};$(this).addClass("active").find("span").text("creating your demo account..."),n.register(t).success(function(t){e.set("picturish-demo-credentials",{email:t.email,password:"demo"}),i.toState("dashboard.albums")})})}}}]),angular.module("app").directive("edDisqus",["utils",function(t){return{restrict:"E",template:'<section id="disqus_container"><div id="disqus_thread"></div></section>',replace:!0,link:function(e){var n=t.getSetting("disqusShortname"),i=e.$watch("shareable.share_id",function(t,e){t&&t!==e&&!window.DISQUS&&(window.disqus_identifier=t,function(){var t=document.createElement("script");t.type="text/javascript",t.async=!0,t.src="//"+n+".disqus.com/embed.js",(document.getElementsByTagName("head")[0]||document.getElementsByTagName("body")[0]).appendChild(t)}(),i())})}}}]),angular.module("app").directive("edDownloadShareable",["$state","gallery","selectedItem",function(t,e,n){return{restrict:"A",link:function(e,i,r){{var o=!1;r.edDownloadShareable||"photo"}i.on("click",function(){return o||(o=$('<iframe style="display: none"></iframe>').appendTo(i)),"view"===t.current.name?o.attr("src",e.baseUrl+e.type+"/"+e.shareable.share_id+"/download"):void o.attr("src",e.baseUrl+n.get("type")+"/"+n.get("share_id")+"/download")})}}}]),angular.module("app").directive("edLoginRegisterValidator",function(){return{restrict:"A",link:function(t,e){$("form");t.$watch("errors",function(t,n){t&&($(".form-error").remove(),$.each(t,function(t,n){if("*"==t)e.find(".alert").show().addClass("animated shake").find(".message").text(n);else{var t=$('[name="'+t+'"]');$('<span class="form-error help-block">'+n+"</span>").appendTo("#login-page").css({top:t.offset().top-4,left:t.offset().left+t.outerWidth()}).addClass("animated flipInX")}}))})}}}),angular.module("app").directive("edPhotosWaiting",["$rootScope","$compile","localStorage","utils",function(t,e,n,i){return{restrict:"E",template:'<div id="photos-waiting"></div>',replace:!0,link:function(r,o){function a(){var t=n.get("attachIds");t&&t.length?(e(o.html(i.trans("photosWaiting",{number:t.length})))(r),o.fadeIn()):o.fadeOut()}a(),t.$on("photos.uploaded",a),o.on("click",".icon-cancel",function(){o.fadeOut()})}}}]),angular.module("app").directive("edSelectOnClick",function(){return{restrict:"A",link:function(t,e){e.on("click",function(){this.setSelectionRange(0,this.value.length)})}}}),angular.module("app").directive("edShareableLinks",["$compile","linkGenerator","utils",function(t,e,n){return{restrict:"E",template:'<div class="links-container"></div>',replace:!0,link:function(t,i,r){function o(e){$(document).on("click",".link-input",function(){this.select()}),a(e),r.edGenerateNav&&s(e),t.$watch("shareable",function(t,e){t&&t!==e&&(s(t),a(t))})}function a(t){var r=e.getLinksFor(t),o='<div class="shareable-links">';$(".shareable-links").remove();for(var a=0;a<r.length;a++){var s=r[a],l=e[s](t);o+='<label class="link-label">'+n.trans(s)+'</label><input value="'+l+'" class="link-input" readonly/>'}o+="</div>",i.prepend(o)}function s(t){if($(".link-sizes-nav").remove(),"photo"===t.type&&"gif"!==t.extension){var r='<ul class="link-sizes-nav">';$.each(e.linkSizes,function(t,e){r+="original"===t?'<li class="active" data-name="'+e+'">'+n.trans(t)+"</li>":'<li data-name="'+e+'">'+n.trans(t)+"</li>"}),r+="</ul>",i.append(r),i.off("click").on("click",".link-sizes-nav > li",function(n){e.activeSize=n.target.dataset.name,a(t),i.find(".active").removeClass("active"),$(n.target).addClass("active")})}}t.shareable?o(t.shareable):t.$on("shareable.ready",function(t,e){o(e)})}}}]),angular.module("app").directive("edShareIcons",["$rootScope","$compile","utils",function(t,e,n){function i(i,r){for(var a="",s=0;s<o.length;s++)a+='<div class="social-icon '+o[s]+'" data-service="'+o[s]+'" ed-tooltip="'+o[s]+'"></div>';e(r.html(a))(i),r.on("click",".social-icon",function(t){var e=575,n=400,i=($(window).width()-e)/2,r=($(window).height()-n)/2,o=l[t.currentTarget.dataset.service](),a="status=1,width="+e+",height="+n+",top="+r+",left="+i;window.open(o,"share",a)});var l={base:t.baseUrl+(n.getSetting("enablePushState")?"":"#/")+"view/"+i.shareable.type+"/"+i.shareable.share_id+"/"+i.shareable.name,blogger:function(){return"https://www.blogger.com/blog_this.pyra?t&u="+this.base+"&n="+i.shareable.name},stumbleupon:function(){return"http://www.stumbleupon.com/submit?url="+this.base},tumblr:function(){var t="https://www.tumblr.com/widgets/share/tool?shareSource=legacy&canonicalUrl=&posttype=link&title=&caption="+i.shareable.name+"&content=";return"photo"===i.shareable.type&&(t+=i.shareable.absoluteUrl),t},twitter:function(){return"https://twitter.com/intent/tweet?url="+this.formatUrl(this.base)+"&text=Share "+i.shareable.name},facebook:function(){return"https://www.facebook.com/sharer/sharer.php?u="+this.formatUrl(this.base)},googleplus:function(){return"https://plus.google.com/share?url="+this.formatUrl(this.base)},pinterest:function(t,e,n){var r="https://pinterest.com/pin/create/button/?url="+this.base;return i.shareable.absoluteUrl&&(r+="&media="+i.shareable.absoluteUrl),i.shareable.description&&(r+="&description="+i.shareable.description),r},formatUrl:function(t){return t.replace(/^\/\//,"http://")}}}var r={restrict:"E",template:'<section class="social-icons"></section>',replace:!0,link:function(t,e){t.shareable?i(t,e):t.$on("shareable.ready",function(){i(t,e)})}},o=["facebook","twitter","googleplus","pinterest","tumblr","stumbleupon","blogger"];return r}]),angular.module("app").directive("spaceUsage",["$rootScope","$http","users","utils",function(t,e,n,i){function r(){return e.get("users/space-usage")}function o(t,e){var n=e/i.getSetting("maxUserSpace")*100,r=i.formatFileSize(e),o=i.formatFileSize(i.getSetting("maxUserSpace"));t.find(".progress-bar").css("width",n+"%"),t.find(".space-used").text(r),t.find(".space-avail").text(o),n>=100&&t.find(".progress-bar").css("background-color","#B71C1C")}return{restrict:"E",replace:!0,template:'<div class="space-usage"><div class="progress"><div class="progress-bar" role="progressbar" aria-valuenow="60" aria-valuemin="0" aria-valuemax="100"></div></div><div class="text"><span class="space-used"></span> {{:: "of" | translate }} <span class="space-avail"></span> {{:: "used" | translate }}</div></div>',scope:{},link:function(e,n){r().success(function(t){o(n,t),n.show()});var i=t.$on("activity.happened",function(){r().success(function(t){o(n,t)})}),a=t.$on("photos.permaDeleted",function(){r().success(function(t){o(n,t)})});e.$on("$destroy",function(){i(),a()})}}}]),angular.module("app").directive("edToggleFolderDropdown",function(){return{restrict:"A",link:function(t,e,n){var i=$(".dropdown-folders-list");i.on("click","li, .heading",function(){i.removeClass("open")}),$(document).on("click",function(t){var n=t.which||t.button,r=$(t.target).closest(e).length||$(t.target).closest(".dropdown-folders-list").length;1!==n||r||i.removeClass("open")}),e.on("click",function(t){i.hasClass("open")?i.removeClass("open"):i.css({top:e.offset().top,left:e.offset().left}).addClass("open")})}}}),angular.module("app").directive("edTooltip",function(){return{restrict:"A",link:function(t,e,n){t.isSmallScreen||e.tooltip({placement:"bottom",delay:50,title:n.edTooltip})}}}),angular.module("app").factory("activity",["$rootScope","$translate","$http","folders",function(t,e,n,i){var r={all:[],icons:{folder:"folder-empty",photo:"picture"},log:function(t,e,n){var i=this.createActivityItem(t,e,n);r.all.unshift(i),this.saveActivityItem(i)},createActivityItem:function(t,e,n){var r={action:t,itemName:e,happenedAt:Date.now(),items:[],user:"You"};angular.isArray(n)||(n=[n]),n[0]&&(r.folder_id=parseInt("folder"===n[0].type?n[0].id:n[0].folder_id||i.selected.id));for(var o=0;o<n.length;o++){var a=n[o];a.rejected||r.items.push({name:a.name,id:a.id,icon:this.icons[e]})}return r},saveActivityItem:function(e){return n.post(t.baseUrl+"activity",{content:e})},getAll:function(){n.get(t.baseUrl+"activity").success(function(t){
r.all=t})}};return t.$on("activity.happened",function(t,e,n,i){r.log(e,n,i)}),r}]),angular.module("app").factory("folders",["$rootScope","$http","$mdDialog","$stateParams","$state","gallery","utils","dashboardState",function(t,e,n,i,r,o,a,s){var l={folderNameModel:{},available:[],selected:!1,getAll:function(){return e.get("folders").success(function(t){l.available=t,l.bindEvents()})},open:function(t){t&&r.go("dashboard.albums",{folderName:t})},createNew:function(){return this.folderNameModel["new"]?e.post("folders",{name:this.folderNameModel["new"]}).success(function(e){l.closeModal(),a.showToast("newAlbumCreated",!0),l.available.push(e),l.open(e.name),$(".folder-name-modal .md-modal-error").html(""),t.$emit("activity.happened","created","folder",e)}).error(function(t){$(".folder-name-modal .md-modal-error").html(t)}):void 0},getPhotoById:function(t,e){if(this.selected&&this.selected.photos||e){t=parseInt(t);for(var n=0;n<this.selected.photos.length;n++)if(this.selected.photos[n].id===t)return this.selected.photos[n]}},rename:function(n){var i=this.getByName(n),r={name:this.folderNameModel["new"]};i&&"root"!==i.name&&e.put(t.baseUrl+"folders/"+i.id,r).success(function(e){a.showToast("folderRenameSuccess",!0),l.closeModal();for(var n=0;n<l.available.length;n++)if(e.id===l.available[n].id){l.available[n]=e,t.$emit("activity.happened","renamed","folder",e);break}})},openShareModal:function(t){n.show({template:$("#share-modal").html(),targetEvent:t,controller:"ShareModalController"})},openNewModal:function(t){n.show({template:$("#new-folder-name-modal").html(),clickOutsideToClose:!0,targetEvent:t,controller:["$scope","folders",function(t,e){t.folders=e,t.create=!0}],onComplete:function(){$("#folder-name").focus()}})},openRenameModal:function(t){this.folderNameModel["new"]=t,this.folderNameModel.old=t,n.show({template:$("#new-folder-name-modal").html(),clickOutsideToClose:!0,controller:["$scope","folders",function(t,e){t.folders=e,t.rename=!0}],onComplete:function(){$("#folder-name").focus()}})},closeModal:function(){l.folderNameModel={},n.hide()},anyOpen:function(){return this.selected&&this.selected.name&&"root"!==this.selected.name||-1===r.current.name.indexOf("albums")},bindEvents:function(){if(!this.eventsBound){var e=t.$on("folders.fetchedPhotos",function(){s.loaded=!0,e()});this.selectByName(i.folderName||"root"),t.$on("$stateChangeStart",function(t,e,n){e.name.indexOf("albums")>-1&&(l.selectByName(n.folderName||"root"),l.getPhotosFor(n.folderName))}),this.eventsBound=!0}},preview:function(t){var e=this.getByName(t);if(angular.isArray(e.photos)){if(!e.photos.length)return a.showToast("nothingToPreview",!0);o.open(e.photos)}else this.getPhotosFor(e).success(function(){return e=l.getByName(t),e.photos.length?void o.open(e.photos):a.showToast("nothingToPreview",!0)})},getTotalSize:function(){if(!this.selected||!this.selected.photos||!this.selected.photos.length)return 0;for(var t=0,e=0;e<this.selected.photos.length;e++)t+=parseInt(this.selected.photos[e].file_size);return a.formatFileSize(t)},getPhotosFor:function(n){return n=angular.isObject(n)?n:this.getById(n),!n||n.photos&&angular.isArray(l.photos)?void 0:n&&!n.photos?(t.ajaxProgress.files=!0,e.get(t.baseUrl+"folders/"+n.id).success(function(e){for(var i=0;i<l.available.length;i++)n.id===l.available[i].id&&(l.available[i]=e,l.selected=l.available[i],t.$emit("folders.fetchedPhotos",n))})["finally"](function(){t.ajaxProgress.files=!1})):void 0},getByName:function(t){if(t)for(var e=0;e<this.available.length;e++)if(this.available[e].name===t)return this.available[e]},getById:function(t){if(t)for(var e=0;e<this.available.length;e++)if(this.available[e].id===t)return this.available[e]},selectByName:function(e){this.selected=this.getByName(e)||this.getByName("root"),this.getPhotosFor(this.selected),t.$emit("folders.selected.changed")}};return t.$on("$stateChangeStart",function(){l.selectByName("root")}),l}]),angular.module("app").factory("gallery",["$rootScope","$translate",function(t,e){var n={ps:!1,open:function(t,e){if(t){this.initiated||this.init();var n=this.formatSlidesArray(t),i={index:e||0,closeOnScroll:!1,history:!1,shareEl:!1};this.ps=new PhotoSwipe(this.node,PhotoSwipeUI_Default,n,i),this.ps.init()}},init:function(){this.node=$(".pswp")[0]},formatSlidesArray:function(t){var e=[];angular.isArray(t)||(t=[t]);for(var n=0;n<t.length;n++){var i=t[n];e.push({src:i.absoluteUrl,w:i.width,h:i.height,title:i.name,name:i.name})}return e}};return n}]),angular.module("app").factory("linkGenerator",["utils",function(t){return{activeSize:"absoluteUrl",linkSizes:{original:"absoluteUrl",smallThumbnail:"smallThumbnail",mediumThumbnail:"mediumThumbnail",largeThumbnail:"largeThumbnail"},getLinksFor:function(t){return"photo"===t.type?["linkToPhoto","directLink","downloadLink","htmlEmbedCode","forumEmbedCode"]:["linkToAlbum","downloadLink"]},htmlEmbedCode:function(t){return this.encode('<a href="'+this.linkToPhoto(t)+'" target="_blank"><img src="'+this.directLink(t)+'" alt="'+t.name+'" /></a>')},forumEmbedCode:function(t){return this.encode("[URL="+this.linkToPhoto(t)+"][IMG]"+this.directLink(t)+"[/IMG][/URL]")},linkToShareable:function(t){return"photo"===t.type?this.linkToPhoto(t):this.linkToAlbum(t)},linkToPhoto:function(e){return t.baseUrl()+(t.getSetting("enablePushState")?"":"#/")+"view/photo/"+e.share_id+"/"+e.name},linkToAlbum:function(e){return t.baseUrl()+(t.getSetting("enablePushState")?"":"#/")+"/view/folder/"+e.share_id+"/"+e.name},directLink:function(t){return t[this.activeSize]},downloadLink:function(e){return t.baseUrl()+e.type+"/"+e.share_id+"/download"},encode:function(t){return String(t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}}}]),angular.module("app").factory("photos",["$rootScope","$http","$mdDialog","folders","utils",function(t,e,n,i,r){var o={trashed:{dirty:!0,items:[]},favorites:{dirty:!0,items:[]},get:function(n){return e.get(t.baseUrl+"photos/"+n)},getAll:function(n){return e.get(t.baseUrl+"photos?all="+n)},getTrashed:function(){return e.get(t.baseUrl+"user-trash").success(function(t){o.trashed.items=t,o.trashed.dirty=!1})},getFavorites:function(){return e.get(t.baseUrl+"labels/favorite").success(function(t){o.favorites.items=t,o.favorites.dirty=!1})},attachToUser:function(n){return e.post(t.baseUrl+"photo/attach-to-user",{ids:n}).success(function(t){t&&r.showToast(t)})},save:function(n){return e.post(t.baseUrl+"photos",n).success(function(e){i.selected.photos.push(e),t.$emit("activity.happened","created","photo",e)})},restore:function(n){e.post(t.baseUrl+"trash/restore/"+n.id).success(function(t){for(var e=0;e<o.trashed.items.length;e++)if(o.trashed.items[e].id==t.id){var n=o.trashed.items[e],a=i.getById(n.folder_id);a&&angular.isArray(a.photos)&&a.photos.push(n),o.trashed.items.splice(e,1),o.selected=!1,r.showToast("photoRestoreSuccess",!0);break}})},rename:function(n){e.put(t.baseUrl+"photos/"+n,{name:this.photoNameModel}).success(function(e){var n=i.getById(e.folder_id);if(!n||!n.photos)return o.closeModal(),t.$emit("activity.happened","renamed","photo",e),r.showToast("photoRenameSuccess",!0);for(var a=0;a<n.photos.length;a++)if(n.photos[a].id==e.id)return n.photos[a]=e,o.closeModal(),t.$emit("activity.happened","renamed","photo",e),r.showToast("photoRenameSuccess",!0)})},moveToFolder:function(n,a){e.put(t.baseUrl+"photos/"+n.id,{folder_id:a}).success(function(e){for(var n=0;n<i.selected.photos.length;n++)i.selected.photos[n].id==e.id&&i.selected.photos.splice(n,1);for(var s=0;s<i.available.length;s++)if(i.available[s].id==a)return angular.isArray(i.available[s].photos)?i.available[s].photos.push(e):i.available[s].photos=[e],o.selected=!1,o.closeModal(),t.$emit("activity.happened","moved","photo",e),r.showToast("photoMoveSuccess",!0)})},openRenameModal:function(t){this.photoNameModel=t,n.show({templateUrl:"assets/views/modals/renamePhoto.html",controller:["$scope","photos","selectedItem",function(t,e,n){t.photos=e,t.selectedItem=n}],onComplete:function(){$("#photo-name").focus()}})},selectById:function(t){for(var e=0;e<i.selected.photos.length;e++)i.selected.photos[e].id==t&&(this.selected=i.selected.photos[e])},closeModal:function(){n.hide(),this.photoNameModel=!1}};return o}]),angular.module("app").factory("selectedItem",["$rootScope","$mdDialog","$http","$timeout","utils","photos","folders","gallery","labels","deleter",function(t,e,n,i,r,o,a,s,l,c){var u={item:!1,get:function(t){return this.item||(this.item=a.selected),t?this.item&&this.item[t]:this.item},deselect:function(){this.item=a.selected},set:function(t){return this.item=t},share:function(){e.show({templateUrl:"assets/views/modals/share.html",controller:"ShareModalController",clickOutsideToClose:!0,locals:{folderName:this.item.name},onComplete:function(){var t=$("#share-modal-input")[0];t.setSelectionRange(0,t.value.length)}})},restore:function(){o.restore(this.get())},openInEditor:function(){r.toState("editor",{id:this.get("id")})},"delete":function(){c["delete"](this.get())},update:function(e){var i="photo"===this.get("type")?"photos":"folders";return n.put(t.baseUrl+i+"/"+this.get("id"),e||this.get()).success(function(t){if("folder"===u.get("type"))a.selected=t;else if(u.set(t),angular.isArray(a.selected.photos))for(var e=0;e<a.selected.photos.length;e++)if(a.selected.photos[e].id==t.id){a.selected.photos[e]=t;break}})},getLinks:function(){e.show({templateUrl:"assets/views/modals/links.html",clickOutsideToClose:!0,onComplete:function(){$(".link-input").first().focus()[0].select()},controller:["$scope","selectedItem","utils",function(t,e,n){t.shareable=e.get(),t.close=n.closeModal}]})},copy:function(){n.post("photos/"+this.get("id")+"/copy").success(function(t){a.selected.photos.push(t),u.set(t),r.showToast("PhotoCopySuccess",!0)}).error(function(t){angular.isString(t)&&r.showToast(t)})},rename:function(){"folder"===this.get("type")?a.openRenameModal(this.get().name):o.openRenameModal(this.get().name)},move:function(){e.show({templateUrl:"assets/views/modals/move.html",controller:["$scope","photos","folders","selectedItem",function(t,e,n,i){t.photos=e,t.selectedItem=i,t.folders=n}]})},download:function(){var e=this;$("#download-iframe").remove(),$('<iframe id="download-iframe" style="display: none"></iframe>').appendTo("body").attr("src",t.baseUrl+e.get("type")+"/"+e.get().share_id+"/download")},favorite:function(){this.addLabel("favorite")},addLabel:function(t){l.addLabel(t,this.get())},removeLabel:function(t){l.removeLabel(t,this.get())},preview:function(){var t=this;i(function(){return"folder"===t.get("type")?a.preview(t.get("name")):void s.open(t.get())})}};return t.$on("$stateChangeSuccess",function(){u.deselect()}),t.$on("activity.happened",function(t,e,n,i){angular.isArray(i)||(i=[i]);for(var r=0;r<i.length;r++)if(i[r].id===u.get("id")){if("deleted"===e||"moved"===e){"folder"===n&&a.open("root"),u.deselect();break}u.set(i[r])}}),u}]),angular.module("app").factory("utils",["$rootScope","$translate","$mdToast","$mdDialog","$state","$sce",function(t,e,n,i,r,o){return{settings:{},showToast:function(t,i){t=i?e.instant(t):t,n.show(n.simple({position:"bottom right",hideDelay:2200}).content(t))},formatFileSize:function(t,e){if(0==t)return"0 Byte";var n=1e3,i=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(t)/Math.log(n)),o=(t/Math.pow(n,r)).toPrecision(3);return e?o:o+" "+i[r]},randomString:function(t){return t||(t=15),Math.random().toString(36).substr(2,t)},formatDate:function(t){return moment.utc(t).format("MMMM Do YYYY, h:mm:ss a")},capitalize:function(t){return t.charAt(0).toUpperCase()+t.slice(1)},trustHtml:function(t){return o.trustAsHtml(t)},toState:function(t,e){r.go(t,e)},stateIs:function(t){angular.isArray(t)||(t=[t]);for(var e=0;e<t.length;e++)if(r.includes(t[e]))return!0},trans:function(t,n){return e.instant(t,n)},confirm:function(t){var e='<md-dialog class="md-modal md-modal-wide confirm-photo-delete-modal"><div class="md-modal-header"><h1>{{:: \''+t.title+'\' | translate }}</h1><div ng-click="utils.closeModal()" class="md-close-modal"><i class="mdi mdi-close"></i></div></div><p>{{:: \''+t.content+"' | translate }}</p>"+(t.subcontent?"<strong>{{:: '"+t.subcontent+"' | translate }}</strong>":"")+'<div class="buttons"><md-button ng-click="utils.closeModal()">{{:: \'cancel\' | translate }}</md-button><md-button ng-click="confirm()" class="md-raised md-primary">{{:: \''+t.ok+"' | translate }}</md-button></div></md-dialog>";i.show({template:e,clickOutsideToClose:!0,controller:["$scope","utils",function(e,n){e.utils=n,e.confirm=function(){t.onConfirm(),e.utils.closeModal()}}]})},openModal:function(t,e){var n=t.charAt(0).toUpperCase()+t.slice(1)+"Controller",r="#"+t.replace(/([A-Z])/g,function(t){return"-"+t.toLowerCase()})+"-modal-template";n||(n=["$scope","photos","utils",function(t,e,n){t.photos=e,t.utils=n}]),i.show({template:$(r).html(),targetEvent:e,controller:n,clickOutsideToClose:!0})},closeModal:function(){i.hide()},baseUrl:function(){return t.baseUrl},getAllSettings:function(){return this.settings},getSetting:function(t,e){var n=this.settings[t];return"undefined"==typeof n&&(n=e),"1"===n||"0"===n?parseInt(n):n},setAllSettings:function(t){angular.isObject(t)&&(this.settings=t)},getHomeTemplateUrl:function(){var t="assets/views/";return"login"===this.settings.homepage?t+"/login.html":"custom"===this.settings.homepage&&this.settings.customHomePath?this.settings.customHomePath:t+"/home.html"},getHomeController:function(){return"login"===this.settings.homepage?"LoginController":"HomeController"}}}]),angular.module("pixie.dashboard").controller("DashboardController",["$scope","$state","$mdDialog","gallery","rightPanel","utils","selectedItem","folders","localStorage","photos","dashboardState","activity",function(t,e,n,i,r,o,a,s,l,c,u,h){t.$state=e,t.gallery=i,t.rightPanel=r,t.selectedItem=a,t.folders=s,t.ad1=o.trustHtml(o.getSetting("ad_dashboard_slot_1")),t.ad2=o.trustHtml(o.getSetting("ad_dashboard_slot_2")),t.ad3=o.trustHtml(o.getSetting("ad_dashboard_slot_3")),t.dashboardState=u,t.openNewImageModal=function(t){n.show({template:$("#new-image-modal-template").html(),targetEvent:t,controller:"DashboardController"})};var d=l.get("attachIds");d?c.attachToUser(d).success(function(){l.remove("attachIds"),s.getAll(),h.getAll()}):s.available.length||(s.getAll(),h.getAll())}]).value("dashboardState",{loaded:!1}),angular.module("pixie.dashboard").controller("FavoritesController",["$scope","photos",function(t,e){e.favorites.dirty&&e.getFavorites(),t.$watch("photos.favorites.items",function(n){angular.isArray(n)&&(t.items=e.favorites.items)})}]),angular.module("pixie.dashboard").controller("ItemsController",["$scope","$filter","photos","folders","localStorage","selectedItem","rightPanel",function(t,e,n,i,r,o,a){function s(){i.selected&&angular.isArray(i.selected.photos)&&(t.items=e("orderBy")(i.selected.photos||[],t.order.prop),t.filteredPhotos=t.items)}t.photos=n,t.folders=i,t.selectedItem={},t.order={prop:"-updated_at"},t.changeOrder=function(e){t.order.prop=e},t.openRightPanel=function(){a.open=!0},t.filteredPhotos=[],t.$watchCollection("folders.selected.photos",function(){s()}),t.$watch("order.prop",function(){s()}),t.selectedView=r.get("selectedView","grid"),t.toggleSelectedView=function(){t.selectedView="list"===t.selectedView?"grid":"list",r.set("selectedView",t.selectedView)},t.selectedFolderFilterPredicate=function(){return i.selected.id?{folder_id:i.selected.id}:{folder_id:null}},t.itemIsSelected=function(t){return o.get("id")==t.id&&o.get("type")===t.type},t.selectItem=function(t){o.set(t)},t.openEditorWithDesign=function(t){designs.active=t,$state.go("editor",{id:t.id})},t.formatTime=function(t){return moment.utc(t).fromNow()}}]),angular.module("pixie.dashboard").controller("NavbarController",["$rootScope","$scope","$http","utils","linkGenerator","selectedItem",function(t,e,n,i,r,o){e.selectedItem=!1,e.getSearchResults=function(t){return n.get("search/"+t).then(function(t){return e.searchResults=t.data,t.data})},e.goToSearchPage=function(){e.searchText&&i.toState("dashboard.search",{query:e.searchText})},e.selectItem=function(){e.selectedItem&&(t.shareable=e.selectedItem,i.toState("view",{type:e.selectedItem.type,id:e.selectedItem.share_id,name:e.selectedItem.name}),e.searchText="",e.selectedItem=!1)}}]),angular.module("pixie.dashboard").controller("NewPhotoController",["$rootScope","$scope","photos","folders","utils",function(t,e,n,i,r){e.photos=n,e.customDimensions={width:800,height:800,name:"Untitled Photo"},e.selectedPreset=r.trans("socialMedia"),e.presets=[{name:r.trans("socialMedia"),url:"social-media.png",size:{width:800,height:800,format:"px"}},{name:r.trans("presentation"),url:"presentation.png",size:{width:1024,height:768,format:"px"}},{name:r.trans("facebookCover"),url:"facebook-cover.jpg",size:{width:851,height:315,format:"px"}},{name:r.trans("facebookPost"),url:"facebook-post.png",size:{width:940,height:788,format:"px"}},{name:r.trans("twitterPost"),url:"twitter-post.png",size:{width:1024,height:512,format:"px"}},{name:r.trans("instagramPost"),url:"instagram-post.png",size:{width:640,height:640,format:"px"}}],e.applyPreset=function(t){for(var n=0;n<e.presets.length;n++){var i=e.presets[n];i.name===t&&(e.customDimensions.width=i.size.width,e.customDimensions.height=i.size.height)}},e.openEditorWithCustomDimensions=function(){e.customDimensions&&n.save({name:e.customDimensions.name,folder_id:i.selected.id,width:e.customDimensions.width,height:e.customDimensions.height}).success(function(t){r.toState("editor",{id:t.id}),r.closeModal()}).error(function(t){angular.isString(t)&&(r.showToast(t),r.closeModal())})}}]),angular.module("pixie.dashboard").controller("PhotosListController",["$scope","photos","utils","selectedItem","deleter",function(t,e,n,i,r){t.search={query:""},t.currentPage=1,t.selectedItems=[],t.itemsPerPage=12,t.deleteSelectedPhotos=function(){r["delete"](t.selectedItems),t.selectedItems=[]},t.isItemSelected=function(e){return t.selectedItems.indexOf(e)>-1},t.select=function(e){var n=t.selectedItems.indexOf(e);n>-1?t.selectedItems.splice(n,1):t.selectedItems.push(e),i.set(e)},t.toggleAllPhotos=function(){t.selectedItems=t.selectedItems.length===t.items.length?[]:t.items.slice()}}]),angular.module("pixie.dashboard").controller("RecentController",["$scope","$http","dashboardState",function(t,e,n){t.items=[],e.get("photos/recent").success(function(e){t.items=e,n.recentLoaded=!0})}]),angular.module("pixie.dashboard").value("rightPanel",{open:!0}).controller("RightPanelController",["$scope","activity","rightPanel","localStorage","selectedItem","utils",function(t,e,n,i,r,o){t.activity=e,n.open=i.get("rightPanelOpen",!0),t.activeTab="details",t.rightPanelModel={},t.descriptionAjaxInProgress=!1,t.editDescription=function(){r.get("name")&&r.update({description:r.get("description")}).success(function(){o.showToast("descriptionUpdated",!0)})},t.activityFolderFilterPredicate=function(){return"folder"===r.get("type")?{folder_id:r.get("id")}:void 0},t.activityFileFilterPredicate=function(){return"photo"===r.get("type")?{id:r.get("id")}:void 0},t.openTab=function(e){t.activeTab=e},t.toRelativeTime=function(t){return moment.utc(t).fromNow()}}]).filter("activityRelativeToContext",["selectedItem",function(t){return function(e){function n(e){return e.folder_id==t.get("id")}function i(e){for(var n=0;n<e.items.length;n++)if(e.items[n].id==t.get("id"))return!0}for(var r=[],o=0;o<e.length;o++){var a=e[o];"photo"===t.get("type")?i(a)&&r.push(a):"folder"===t.get("type")&&n(a)&&r.push(a)}return r}}]),angular.module("pixie.dashboard").controller("SearchController",["$rootScope","$scope","$http","$stateParams",function(t,e,n,i){function r(i){return n.get("search/"+i+"?full=true").success(function(t){e.items=t})["finally"](function(){t.ajaxProgress.files=!1})}r(i.query);var o=t.$on("activity.happened",function(t,n,i,r){"deleted"===n&&(e.items=e.items.filter(function(t){return-1===r.indexOf(t)}))});e.$on("$destroy",function(){o()})}]),angular.module("pixie.dashboard").controller("ShareModalController",["$scope","$rootScope","$translate","$mdDialog","$http","photos","selectedItem","utils",function(t,e,n,i,r,o,a,s){t.passwordContainerVisible=!1,t.password={value:""},t.shareable=a.get(),t.rawType=a.get("type"),t.link=e.baseUrl+(s.getSetting("enablePushState")?"":"#/")+"view/"+t.rawType+"/"+t.shareable.share_id+"/"+t.shareable.name,t.type=n.instant("photo"==t.rawType?"photo":"album"),t.addPassword=function(){if(t.password.value){var n={id:t.shareable.id,type:t.type,password:t.password.value};r.post(e.baseUrl+"shareable-password/add",n).success(function(n){t.shareable.password=!0,t.closePasswordContainer(),e.showToast(n)})}},t.removePassword=function(){var n={id:t.shareable.id,type:t.type};r.post(e.baseUrl+"shareable-password/remove",n).success(function(n){t.shareable.password.value=!1,e.showToast(n)})},t.togglePasswordContainer=function(){t.passwordContainerVisible=!t.passwordContainerVisible},t.closePasswordContainer=function(){t.passwordContainerVisible=!1,t.password=""},t.closeModal=function(){i.hide()}}]),angular.module("pixie.dashboard").controller("TrashController",["$scope","photos",function(t,e){e.trashed.dirty&&e.getTrashed(),t.$watch("photos.trashed.items",function(n){angular.isArray(n)&&(t.items=e.trashed.items)})}]),angular.module("pixie.dashboard").directive("edContextMenuItem",["contextMenu","selectedItem","folders",function(t,e,n){return{restrict:"A",link:function(i,r,o){r.on("contextmenu",function(r){i.$apply(function(){e.set("edIsRootFolder"in o?n.getByName("root"):i.item||i.folder)}),t.show(r)})}}}]).directive("edMoreOptionsMenu",["$rootScope","contextMenu","selectedItem",function(t,e,n){return{restrict:"A",link:function(i,r){{var o=!1;$("#context-menu")}r.on("click",function(){if(!o||e.open){var t=n.get("type"),i=r[0].getBoundingClientRect();e.generateMenu(t),e.positionMenu({clientX:i.left,clientY:i.top+r.height()+10}),o=!0,e.open=!1}else e.hide(),o=!1}),t.$on("contextmenu.closed",function(){o=!1})}}}]).directive("edContextMenu",["$rootScope","contextMenu","selectedItem",function(t,e,n){return{restrict:"A",compile:function(e){e.on("click",".context-menu-item",function(t){t.stopPropagation(),t.preventDefault(),n[t.currentTarget.dataset.action](),e.hide()}),e.on("contextmenu",function(t){t.preventDefault()}),e.css("max-height",window.innerHeight-20),window.onresize=function(){e.hide(),e.css("max-height",window.innerHeight-20)},$(document).on("click",function(n){var i=n.which||n.button,r=$(n.target).closest(e).length||$(n.target).closest("#more-options").length;1!==i||r||t.$emit("contextmenu.closed")})}}}]).factory("contextMenu",["$rootScope","photos","utils","selectedItem","folders",function(t,e,n,i,r){var o=[{name:n.trans("preview"),icon:"eye",action:"preview",context:["photo","folder","rootFolder"]},{name:n.trans("openInEditor"),icon:"edit-alt",action:"openInEditor",context:["photo"],separator:!0},{name:n.trans("share"),icon:"share",action:"share",context:["photo","folder","rootFolder"]},{name:n.trans("getLinks"),icon:"link",action:"getLinks",context:["photo","folder","rootFolder"]},{name:n.trans("moveTo"),icon:"folder-empty",action:"move",context:["photo"]},{name:n.trans("favorite"),icon:"star",action:"favorite",context:["photo"]},{name:n.trans("rename"),icon:"pencil",action:"rename",context:["photo","folder"]},{name:n.trans("makeACopy"),icon:"docs",action:"copy",context:["photo"]},{name:n.trans("download"),icon:"download",action:"download",context:["photo","folder","rootFolder"],separator:!0},{name:n.trans("remove"),icon:"trash",action:"delete",context:["photo","folder"]},{name:n.trans("restore"),icon:"ccw",action:"restore",context:["trash"]},{name:n.trans("deleteForever"),icon:"trash",action:"delete",context:["trash"]}],a={open:!1,show:function(t){var e=n.stateIs("dashboard.trash")?"trash":i.get("type");"folder"===e&&"root"===i.get("name")&&(e="rootFolder"),t.preventDefault(),this.generateMenu(e),this.positionMenu(t),this.open=!0},hide:function(){$("#context-menu").hide(),this.open=!1},generateMenu:function(t){var e=$("#context-menu");e.find("li").remove();for(var i=0;i<o.length;i++){var a=o[i];-1===a.context.indexOf(t)||("preview"==a.action||"getLinks"==a.action)&&n.stateIs("view")||("move"!==a.action||1!==r.available.length)&&(e.append('<li class="context-menu-item" data-action="'+a.action+'"><i class="icon icon-'+a.icon+'"></i> '+a.name+"</li>"),a.separator&&e.append('<li class="separator"></li>'))}e.show()},positionMenu:function(t){var e=$("#context-menu");e.css("display","block");var n=e.width()+4,i=e.height()+20,r=window.innerWidth,o=window.innerHeight,a=t.clientX,s=t.clientY;n>r-a?e.css("left",r-n+1):e.css("left",a+1),i>o-s?e.css("top",o-i+1):e.css("top",s+1)}};return t.$on("contextmenu.closed",function(){a.hide()}),a}]),angular.module("pixie.dashboard").directive("edDeselectFile",["selectedItem",function(t){return{restrict:"A",link:function(e){$(document).on("click",".deselect-file",function(n){n.target===this&&"photo"===t.get("type")&&e.$apply(function(){t.deselect()})})}}}]),angular.module("pixie.dashboard").directive("edFileDraggable",["selectedItem",function(t){return{link:function(e,n){n.draggable({revert:"invalid",appendTo:"body",helper:function(){return document.body.classList.add("dragging"),e.$apply(function(){t.set(e.item)}),'<div id="photo-drag-helper"><i class="icon icon-picture"></i>'+t.get("name")+"</div>"},cursorAt:{top:0,left:-10},stop:function(){document.body.classList.remove("dragging")}}),e.$on("$destroy",function(){n.off("**")})}}}]).directive("edFolderDroppable",["selectedItem","photos",function(t,e){return{link:function(n,i){i.droppable({hoverClass:"draggable-over",drop:function(n){e.moveToFolder(t.get(),n.target.dataset.id)},tolerance:"pointer"}),n.$on("$destroy",function(){i.off("**")})}}}]).directive("edTrashDroppable",["selectedItem","photos",function(t,e){return{link:function(n,i){i.droppable({hoverClass:"draggable-over",drop:function(){e["delete"](t.get())},tolerance:"pointer"}),n.$on("$destroy",function(){i.off("**")})}}}]),angular.module("pixie.dashboard").directive("edPanelCloser",["rightPanel","localStorage",function(t,e){return{restrict:"A",link:function(n,i){i.on("click",function(){n.$apply(function(){t.open=!1,e.set("rightPanelOpen",!1)})})}}}]),angular.module("pixie.dashboard").directive("edToggleInfoPanel",["rightPanel","localStorage",function(t,e){return{restrict:"A",link:function(n,i){i.on("click",function(){n.$apply(function(){t.open=!t.open,e.set("rightPanelOpen",t.open)})})}}}]),angular.module("pixie.dashboard").factory("deleter",["$rootScope","$http","utils","photos","folders",function(t,e,n,i,r){function o(e){e.length&&(t.ajaxProgress.files=!0,n.stateIs(["dashboard.trash","admin.photos"])?a(e).success(function(){i.trashed.items=i.trashed.items.filter(function(t){return-1===e.indexOf(t)}),t.$emit("photos.permaDeleted")})["finally"](function(){t.ajaxProgress.files=!1}):s(e),t.$emit("activity.happened","deleted","photo",e))}function a(t){return t.length?e.post("delete-items",{items:t}).success(function(t){n.showToast(n.trans("permaDeletedItems",{number:t}))}).error(function(t){n.showToast(t)}):void 0}function s(o){for(var a=[],s=0;s<o.length;s++)a.push(parseInt(o[s].id));return e.post("trash/put",{ids:a}).success(function(t){n.showToast(n.trans("movedToTrash",{number:t})),i.trashed.dirty=!0,n.stateIs(["dashboard.albums","dashboard.albumsRoot"])&&(r.selected.photos=r.selected.photos.filter(function(t){return-1===o.indexOf(t)}))})["finally"](function(){t.ajaxProgress.files=!1})}function l(e){e.length&&(a(e).success(function(){t.$emit("activity.happened","deleted","folder",e),r.available=r.available.filter(function(t){return-1===e.indexOf(t)})}),t.$emit("activity.happened","deleted","folder",e))}function c(t){for(var e=[],i=[],r=0;r<t.length;r++){var a=t[r];"folder"===a.type?e.push(a):i.push(a)}l(e),o(i),n.stateIs("view")&&n.toState("dashboard.albums")}function u(t){return n.stateIs("dashboard.trash")?{title:"deleteForever",content:"confirmPermaDelete",subcontent:"permaDeleteWarning",ok:"delete",onConfirm:function(){c(t)}}:n.stateIs("dashboard.search")?{title:"deleteItems",content:"sureWantToDeleteItems",ok:"delete",onConfirm:function(){c(t)}}:"folder"===t[0].type?{title:"deleteForever",content:"permaDeleteAlbumWarning",subcontent:"permaDeleteWarning",ok:"delete",onConfirm:function(){c(t)}}:void 0}return{"delete":function(t){if(t){angular.isArray(t)||(t=[t]);var e=u(t);e?n.confirm(e):c(t)}}}}]),angular.module("pixie.dashboard").factory("labels",["$rootScope","$http","photos","utils",function(t,e,n,i){return{addLabel:function(r,o){var a=this;return o["is"+i.capitalize(r)]?a.removeLabel("favorite",o):void e.post(t.baseUrl+"labels/attach",{label:r,photoId:o.id}).success(function(t){n[r+"s"].dirty=!0,a.addLabelToModel(o,r),i.showToast(t)}).error(function(t){i.showToast(t)})},removeLabel:function(r,o){var a=this;e.post(t.baseUrl+"labels/detach",{label:r,photoId:o.id}).success(function(t){a.removeLabelFromModel(o,r),i.showToast(t);for(var e=0;e<n.favorites.items.length;e++)if(n.favorites.items[e].id==o.id){n.favorites.items.splice(e,1);break}}).error(function(t){i.showToast(t)})},addLabelToModel:function(t,e){t["is"+i.capitalize(e)]=!0},removeLabelFromModel:function(t,e){t["is"+i.capitalize(e)]=!1}}}]),function(t){var e={init:function(n){var i=t.extend({items:1,itemsOnPage:1,pages:0,displayedPages:5,edges:2,currentPage:0,hrefTextPrefix:"#page-",hrefTextSuffix:"",prevText:"Prev",nextText:"Next",ellipseText:"&hellip;",cssStyle:"light-theme",labelMap:[],selectOnClick:!0,nextAtFront:!1,invertPageOrder:!1,onPageClick:function(t,e){},onInit:function(){}},n||{}),r=this;return i.pages=i.pages?i.pages:Math.ceil(i.items/i.itemsOnPage)?Math.ceil(i.items/i.itemsOnPage):1,i.currentPage=i.currentPage?i.currentPage-1:i.invertPageOrder?i.pages-1:0,i.halfDisplayed=i.displayedPages/2,this.each(function(){r.addClass(i.cssStyle+" simple-pagination").data("pagination",i),e._draw.call(r)}),i.onInit(),this},selectPage:function(t){return e._selectPage.call(this,t-1),this},prevPage:function(){var t=this.data("pagination");return t.invertPageOrder?t.currentPage<t.pages-1&&e._selectPage.call(this,t.currentPage+1):t.currentPage>0&&e._selectPage.call(this,t.currentPage-1),this},nextPage:function(){var t=this.data("pagination");return t.invertPageOrder?t.currentPage>0&&e._selectPage.call(this,t.currentPage-1):t.currentPage<t.pages-1&&e._selectPage.call(this,t.currentPage+1),this},getPagesCount:function(){return this.data("pagination").pages},getCurrentPage:function(){return this.data("pagination").currentPage+1},destroy:function(){return this.empty(),this},drawPage:function(t){var n=this.data("pagination");return n.currentPage=t-1,this.data("pagination",n),e._draw.call(this),this},redraw:function(){return e._draw.call(this),this},disable:function(){var t=this.data("pagination");return t.disabled=!0,this.data("pagination",t),e._draw.call(this),this},enable:function(){var t=this.data("pagination");return t.disabled=!1,this.data("pagination",t),e._draw.call(this),this},updateItems:function(t){var n=this.data("pagination");n.items=t,n.pages=e._getPages(n),this.data("pagination",n),e._draw.call(this)},updateItemsOnPage:function(t){var n=this.data("pagination");return n.itemsOnPage=t,n.pages=e._getPages(n),this.data("pagination",n),e._selectPage.call(this,0),this},_draw:function(){var n,i,r=this.data("pagination"),o=e._getInterval(r);e.destroy.call(this),i="function"==typeof this.prop?this.prop("tagName"):this.attr("tagName");var a="UL"===i?this:t("<ul></ul>").appendTo(this);if(r.prevText&&e._appendItem.call(this,r.invertPageOrder?r.currentPage+1:r.currentPage-1,{text:r.prevText,classes:"prev"}),r.nextText&&r.nextAtFront&&e._appendItem.call(this,r.invertPageOrder?r.currentPage-1:r.currentPage+1,{text:r.nextText,classes:"next"}),r.invertPageOrder){if(o.end<r.pages&&r.edges>0){var s=Math.max(r.pages-r.edges,o.end);for(n=r.pages-1;n>=s;n--)e._appendItem.call(this,n);r.pages-r.edges>o.end&&r.pages-r.edges-o.end!=1?a.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):r.pages-r.edges-o.end==1&&e._appendItem.call(this,o.end);

}}else if(o.start>0&&r.edges>0){var l=Math.min(r.edges,o.start);for(n=0;l>n;n++)e._appendItem.call(this,n);r.edges<o.start&&o.start-r.edges!=1?a.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):o.start-r.edges==1&&e._appendItem.call(this,r.edges)}if(r.invertPageOrder)for(n=o.end-1;n>=o.start;n--)e._appendItem.call(this,n);else for(n=o.start;n<o.end;n++)e._appendItem.call(this,n);if(r.invertPageOrder){if(o.start>0&&r.edges>0){r.edges<o.start&&o.start-r.edges!=1?a.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):o.start-r.edges==1&&e._appendItem.call(this,r.edges);var l=Math.min(r.edges,o.start);for(n=l-1;n>=0;n--)e._appendItem.call(this,n)}}else if(o.end<r.pages&&r.edges>0){r.pages-r.edges>o.end&&r.pages-r.edges-o.end!=1?a.append('<li class="disabled"><span class="ellipse">'+r.ellipseText+"</span></li>"):r.pages-r.edges-o.end==1&&e._appendItem.call(this,o.end);var s=Math.max(r.pages-r.edges,o.end);for(n=s;n<r.pages;n++)e._appendItem.call(this,n)}r.nextText&&!r.nextAtFront&&e._appendItem.call(this,r.invertPageOrder?r.currentPage-1:r.currentPage+1,{text:r.nextText,classes:"next"})},_getPages:function(t){var e=Math.ceil(t.items/t.itemsOnPage);return e||1},_getInterval:function(t){return{start:Math.ceil(t.currentPage>t.halfDisplayed?Math.max(Math.min(t.currentPage-t.halfDisplayed,t.pages-t.displayedPages),0):0),end:Math.ceil(t.currentPage>t.halfDisplayed?Math.min(t.currentPage+t.halfDisplayed,t.pages):Math.min(t.displayedPages,t.pages))}},_appendItem:function(n,i){var r,o,a=this,s=a.data("pagination"),l=t("<li></li>"),c=a.find("ul");n=0>n?0:n<s.pages?n:s.pages-1,r={text:n+1,classes:""},s.labelMap.length&&s.labelMap[n]&&(r.text=s.labelMap[n]),r=t.extend(r,i||{}),n==s.currentPage||s.disabled?(l.addClass(s.disabled?"disabled":"active"),o=t('<span class="current">'+r.text+"</span>")):(o=t('<a href="'+s.hrefTextPrefix+(n+1)+s.hrefTextSuffix+'" class="page-link">'+r.text+"</a>"),o.click(function(t){return e._selectPage.call(a,n,t)})),r.classes&&o.addClass(r.classes),l.append(o),c.length?c.append(l):a.append(l)},_selectPage:function(t,n){var i=this.data("pagination");return i.currentPage=t,i.selectOnClick&&e._draw.call(this),i.onPageClick(t+1,n)}};t.fn.pagination=function(n){return e[n]&&"_"!=n.charAt(0)?e[n].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof n&&n?void t.error("Method "+n+" does not exist on jQuery.pagination"):e.init.apply(this,arguments)}}(jQuery),angular.module("pixie.admin").controller("AdminController",["$rootScope","$scope",function(t,e){e.currentPage=1,e.itemsPerPage=15,t.$on("$stateChangeSuccess",function(){e.selectedItems=[],e.currentPage=1})}]),angular.module("app").controller("AnalyticsController",["$scope","$http","utils",function(t,e,n){t.stats={},e.get(t.baseUrl+"stats").success(function(e){e.photos_size=n.formatFileSize(e.photos_size),t.stats=e})}]),angular.module("app").controller("PhotosController",["$scope","$rootScope","utils","$http","$mdDialog","photos","deleter",function(t,e,n,i,r,o,a){t.photos=o,t.allPhotos=[],t.search={query:""},t.selectedItems=[],t.isItemSelected=function(e){return t.selectedItems.indexOf(e)>-1},t.select=function(e){var n=t.selectedItems.indexOf(e);n>-1?t.selectedItems.splice(n,1):t.selectedItems.push(e)},t.deletePhotos=function(){return n.isDemo?(n.showToast("Sorry, you can't do that on demo site."),void(t.selectedItems=[])):(a["delete"](t.selectedItems),n.isDemo||(t.allPhotos=t.allPhotos.filter(function(e){return-1===t.selectedItems.indexOf(e)})),void(t.selectedItems=[]))},t.toggleAllPhotos=function(){t.selectedItems=t.selectedItems.length===t.allPhotos.length?[]:t.allPhotos.slice()},t.showUserModal=function(t,n){r.show({template:$("#user-modal").html(),targetEvent:n,controller:["$scope","users",function(n,i){n.users=i,t?(n.userModel=angular.copy(t),delete n.userModel.password,delete n.userModel.id,n.type="edit"):n.type="create",n.submit=function(){var r="create"===n.type?"register":"updateAccountSettings";i[r](n.userModel,t.id).error(function(t){$(".user-modal .errors").html("");for(var e in t)$(".user-modal .errors").append('<div class="error">'+t[e][0]+"</div>")}).success(function(){if(i.closeModal(),"create"===n.type)e.showToast("createdUserSuccessfully",!0),i.all.push(n.userModel);else{e.showToast("updatedUserSuccessfully",!0);for(var r=0;r<i.all.length;r++)if(i.all[r].id==t.id){i.all[r]=n.userModel;break}}n.userModel={}})}}]})},t.photosAjaxInProgress=!0,o.getAll(!0).success(function(e){t.allPhotos=e})["finally"](function(){t.photosAjaxInProgress=!1})}]),angular.module("pixie.admin").controller("SettingsController",["$scope","$http","utils","users",function(t,e,n,i){t.settings=angular.copy(n.getAllSettings()),t.updateSettings=function(){return n.isDemo?void n.showToast("Sorry, you can't do that on demo site."):void e.post("settings",t.settings).success(function(t){n.showToast(t)}).error(function(t){n.showToast(t)})}}]),angular.module("app").controller("UsersController",["$scope","$rootScope","$state","$mdDialog","utils","users",function(t,e,n,i,r,o){t.users=o,t.search={query:""},t.selectedItems=[],t.isItemSelected=function(e){return t.selectedItems.indexOf(e)>-1},t.select=function(e){var n=t.selectedItems.indexOf(e);n>-1?t.selectedItems.splice(n,1):t.selectedItems.push(e)},t.showNotAttachedPhotosOnly=!1,t.deleteUsers=function(){return r.isDemo?(r.showToast("Sorry, you can't do that on demo site."),void(t.selectedItems=[])):void o["delete"](t.selectedItems).success(function(){t.selectedItems=[]}).error(function(t){r.showToast(t)})},t.toggleAllUsers=function(){t.selectedItems=t.selectedItems.length===o.all.length?[]:o.all.slice()},t.showUserModal=function(t,e){i.show({templateUrl:"assets/views/modals/edit-user.html",targetEvent:e,clickOutsideToClose:!0,controller:["$scope","users",function(e,n){e.users=n,t?(e.userModel=angular.copy(t),delete e.userModel.password,delete e.userModel.id,e.type="edit"):e.type="create",e.submit=function(){if(r.isDemo)return r.showToast("Sorry, you can't do that on demo site."),void(e.selectedItems=[]);var i="create"===e.type?"register":"updateAccountSettings";n[i](e.userModel,t?t.id:null).error(function(t){if($(".user-modal .errors").html(""),angular.isString(t))return r.showToast(t);for(var e in t)$(".user-modal .errors").append('<div class="error">'+t[e][0]+"</div>")}).success(function(t){if(n.closeModal(),"create"===e.type)r.showToast("createdUserSuccessfully",!0),n.all.push(e.userModel);else{r.showToast("updatedUserSuccessfully",!0);for(var i=0;i<n.all.length;i++)if(n.all[i].id==t.id){n.all[i]=e.userModel;break}}e.userModel={}})}}]})},t.usersAjaxInProgress=!0,o.getAll()["finally"](function(){t.usersAjaxInProgress=!1})}]),angular.module("pixie.admin").directive("edLoadAnalytics",["$rootScope","utils",function(t,e){return{restrict:"A",compile:function(){function n(){$(".charts-row").css("display","flex"),$("#embed-api-auth-container, .unauthorized-container").css("display","none")}function i(){gapi.analytics.auth.authorize({container:"embed-api-auth-container",clientid:e.getSetting("google_id")})}function r(){function e(t){var e=moment(),n=a({ids:t,dimensions:"ga:date,ga:nthDay",metrics:"ga:sessions","start-date":moment(e).subtract(1,"day").day(0).format("YYYY-MM-DD"),"end-date":moment(e).format("YYYY-MM-DD")}),i=a({ids:t,dimensions:"ga:date,ga:nthDay",metrics:"ga:sessions","start-date":moment(e).subtract(1,"day").day(0).subtract(1,"week").format("YYYY-MM-DD"),"end-date":moment(e).subtract(1,"day").day(6).subtract(1,"week").format("YYYY-MM-DD")});Promise.all([n,i]).then(function(t){var e=t[0].rows.map(function(t){return+t[2]}),n=t[1].rows.map(function(t){return+t[2]}),i=t[1].rows.map(function(t){return+t[0]});i=i.map(function(t){return moment(t,"YYYYMMDD").format("ddd")});var r={labels:i,datasets:[{label:"Last Week",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:n},{label:"This Week",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:e}]};new Chart(s("this-vs-last-week")).Line(r),l("legend-1-container",r.datasets)})}function i(t){var e=moment(),n=a({ids:t,dimensions:"ga:date,ga:nthDay",metrics:"ga:sessions","start-date":moment(e).startOf("month").format("YYYY-MM-DD"),"end-date":moment(e).endOf("month").format("YYYY-MM-DD")}),i=a({ids:t,dimensions:"ga:date,ga:nthDay",metrics:"ga:sessions","start-date":moment(e).subtract(1,"month").startOf("month").format("YYYY-MM-DD"),"end-date":moment(e).subtract(1,"month").endOf("month").format("YYYY-MM-DD")});Promise.all([n,i]).then(function(t){var e=t[0].rows.map(function(t){return+t[2]}),n=t[1].rows.map(function(t){return+t[2]}),i=new Array(31).join().split(",").map(function(t,e){return++e}),r={labels:i,datasets:[{label:"Last Month",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,1)",pointColor:"rgba(220,220,220,1)",pointStrokeColor:"#fff",data:n},{label:"This Month",fillColor:"rgba(151,187,205,0.5)",strokeColor:"rgba(151,187,205,1)",pointColor:"rgba(151,187,205,1)",pointStrokeColor:"#fff",data:e}]};new Chart(s("chart-2-container")).Line(r),l("legend-2-container",r.datasets)})}function r(t){a({ids:t,dimensions:"ga:browser",metrics:"ga:pageviews",sort:"-ga:pageviews","max-results":5}).then(function(t){var e=[],n=["#4D5360","#949FB1","#D4CCC5","#E2EAE9","#F7464A"];t.rows.forEach(function(t,i){e.push({value:+t[1],color:n[i],label:t[0]})}),new Chart(s("chart-3-container")).Doughnut(e),l("legend-3-container",e)})}function o(t){a({ids:t,dimensions:"ga:country",metrics:"ga:sessions",sort:"-ga:sessions","max-results":5}).then(function(t){var e=[],n=["#4D5360","#949FB1","#D4CCC5","#E2EAE9","#F7464A"];t.rows.forEach(function(t,i){e.push({label:t[0],value:+t[1],color:n[i]})}),new Chart(s("chart-4-container")).Doughnut(e),l("legend-4-container",e)})}function a(t){return new Promise(function(e,n){var i=new gapi.analytics.report.Data({query:t});i.once("success",function(t){e(t)}).once("error",function(t){n(t)}).execute()})}function s(t){var e=document.getElementById(t),n=document.createElement("canvas"),i=n.getContext("2d");return e.innerHTML="",n.width=e.offsetWidth,n.height=e.offsetHeight,e.appendChild(n),i}function l(t,e){var n=document.getElementById(t);n.innerHTML=e.map(function(t){var e=t.color||t.fillColor,n=t.label;return'<li><i style="background:'+e+'"></i>'+n+"</li>"}).join("")}gapi.analytics.auth.on("success",function(){n()});var c=new gapi.analytics.ext.ActiveUsers({container:"active-users-container",pollingInterval:5});c.once("success",function(){{var t;this.container.firstChild}this.on("change",function(e){var n=this.container.firstChild,i=e.delta>0?"is-increasing":"is-decreasing";n.className+=" "+i,clearTimeout(t),t=setTimeout(function(){n.className=n.className.replace(/ is-(increasing|decreasing)/g,"")},3e3)})});var u=new gapi.analytics.ext.ViewSelector2({container:"view-selector-container"}).execute().on("error",function(t){$(".error").text(t.result.error.message)});u.on("viewChange",function(t){c.set(t).execute(),e(t.ids),i(t.ids),r(t.ids),o(t.ids)}),Chart.defaults.global.animationSteps=60,Chart.defaults.global.animationEasing="easeInOutQuart",Chart.defaults.global.responsive=!0,Chart.defaults.global.maintainAspectRatio=!1,t.analyticsLoaded=!0}function o(){!function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,function(t){var n=e[a][1][t];return r(n?n:t)},u,u.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){var i=t("javascript-api-utils/lib/account-summaries");gapi.analytics.ready(function(){function t(t,e,n){t.innerHTML=e.map(function(t){var e=t.id==n?"selected ":" ";return"<option "+e+'value="'+t.id+'">'+t.name+"</option>"}).join("")}function e(t){return t.ids||t.viewId?{prop:"viewId",value:t.viewId||t.ids&&t.ids.replace(/^ga:/,"")}:t.propertyId?{prop:"propertyId",value:t.propertyId}:t.accountId?{prop:"accountId",value:t.accountId}:void 0}gapi.analytics.createComponent("ViewSelector2",{execute:function(){return this.setup_(function(){this.updateAccounts_(),this.changed_&&(this.render_(),this.onChange_())}.bind(this)),this},set:function(t){if(!!t.ids+!!t.viewId+!!t.propertyId+!!t.accountId>1)throw new Error('You cannot specify more than one of the following options: "ids", "viewId", "accountId", "propertyId"');if(t.container&&this.container)throw new Error("You cannot change containers once a view selector has been rendered on the page.");var e=this.get();return(e.ids!=t.ids||e.viewId!=t.viewId||e.propertyId!=t.propertyId||e.accountId!=t.accountId)&&(e.ids=null,e.viewId=null,e.propertyId=null,e.accountId=null),gapi.analytics.Component.prototype.set.call(this,t)},setup_:function(t){function e(){i.get().then(function(e){n.summaries=e,n.accounts=n.summaries.all(),t()},function(t){n.emit("error",t)})}var n=this;gapi.analytics.auth.isAuthorized()?e():gapi.analytics.auth.on("success",e)},updateAccounts_:function(){var t,n,i,r=this.get(),o=e(r);if(o)switch(o.prop){case"viewId":t=this.summaries.getProfile(o.value),n=this.summaries.getAccountByProfileId(o.value),i=this.summaries.getWebPropertyByProfileId(o.value);break;case"propertyId":i=this.summaries.getWebProperty(o.value),n=this.summaries.getAccountByWebPropertyId(o.value),t=i&&i.views&&i.views[0];break;case"accountId":n=this.summaries.getAccount(o.value),i=n&&n.properties&&n.properties[0],t=i&&i.views&&i.views[0]}else n=this.accounts[0],i=n&&n.properties&&n.properties[0],t=i&&i.views&&i.views[0];n||i||t?(n!=this.account||i!=this.property||t!=this.view)&&(this.changed_={account:n&&n!=this.account,property:i&&i!=this.property,view:t&&t!=this.view},this.account=n,this.properties=n.properties,this.property=i,this.views=i&&i.views,this.view=t,this.ids=t&&"ga:"+t.id):this.emit("error",new Error("You do not have access to "+o.prop.slice(0,-2)+" : "+o.value))},render_:function(){var e=this.get();this.container="string"==typeof e.container?document.getElementById(e.container):e.container,this.container.innerHTML=e.template||this.template;var n=this.container.querySelectorAll("select"),i=this.accounts,r=this.properties||[{name:"(Empty)",id:""}],o=this.views||[{name:"(Empty)",id:""}];t(n[0],i,this.account.id),t(n[1],r,this.property&&this.property.id),t(n[2],o,this.view&&this.view.id),n[0].onchange=this.onUserSelect_.bind(this,n[0],"accountId"),n[1].onchange=this.onUserSelect_.bind(this,n[1],"propertyId"),n[2].onchange=this.onUserSelect_.bind(this,n[2],"viewId")},onChange_:function(){var t={account:this.account,property:this.property,view:this.view,ids:this.view&&"ga:"+this.view.id};this.changed_&&(this.changed_.account&&this.emit("accountChange",t),this.changed_.property&&this.emit("propertyChange",t),this.changed_.view&&(this.emit("viewChange",t),this.emit("idsChange",t),this.emit("change",t.ids))),this.changed_=null},onUserSelect_:function(t,e){var n={};n[e]=t.value,this.set(n),this.execute()},template:'<div class="ViewSelector2">  <div class="ViewSelector2-item">    <label>Account</label>    <select class="FormField"></select>  </div>  <div class="ViewSelector2-item">    <label>Property</label>    <select class="FormField"></select>  </div>  <div class="ViewSelector2-item">    <label>View</label>    <select class="FormField"></select>  </div></div>'})})},{"javascript-api-utils/lib/account-summaries":3}],2:[function(t,e,n){function i(t){this.accounts_=t,this.webProperties_=[],this.profiles_=[],this.accountsById_={},this.webPropertiesById_=this.propertiesById_={},this.profilesById_=this.viewsById_={};for(var e,n=0;e=this.accounts_[n];n++)if(this.accountsById_[e.id]={self:e},e.webProperties){r(e,"webProperties","properties");for(var i,o=0;i=e.webProperties[o];o++)if(this.webProperties_.push(i),this.webPropertiesById_[i.id]={self:i,parent:e},i.profiles){r(i,"profiles","views");for(var a,s=0;a=i.profiles[s];s++)this.profiles_.push(a),this.profilesById_[a.id]={self:a,parent:i,grandParent:e}}}}function r(t,e,n){Object.defineProperty?Object.defineProperty(t,n,{get:function(){return t[e]}}):t[n]=t[e]}i.prototype.all=function(){return this.accounts_},r(i.prototype,"all","allAccounts"),i.prototype.allWebProperties=function(){return this.webProperties_},r(i.prototype,"allWebProperties","allProperties"),i.prototype.allProfiles=function(){return this.profiles_},r(i.prototype,"allProfiles","allViews"),i.prototype.get=function(t){if(!!t.accountId+!!t.webPropertyId+!!t.propertyId+!!t.profileId+!!t.viewId>1)throw new Error('get() only accepts an object with a single property: either "accountId", "webPropertyId", "propertyId", "profileId" or "viewId"');return this.getProfile(t.profileId||t.viewId)||this.getWebProperty(t.webPropertyId||t.propertyId)||this.getAccount(t.accountId)},i.prototype.getAccount=function(t){return this.accountsById_[t]&&this.accountsById_[t].self},i.prototype.getWebProperty=function(t){return this.webPropertiesById_[t]&&this.webPropertiesById_[t].self},r(i.prototype,"getWebProperty","getProperty"),i.prototype.getProfile=function(t){return this.profilesById_[t]&&this.profilesById_[t].self},r(i.prototype,"getProfile","getView"),i.prototype.getAccountByProfileId=function(t){return this.profilesById_[t]&&this.profilesById_[t].grandParent},r(i.prototype,"getAccountByProfileId","getAccountByViewId"),i.prototype.getWebPropertyByProfileId=function(t){return this.profilesById_[t]&&this.profilesById_[t].parent},r(i.prototype,"getWebPropertyByProfileId","getPropertyByViewId"),i.prototype.getAccountByWebPropertyId=function(t){return this.webPropertiesById_[t]&&this.webPropertiesById_[t].parent},r(i.prototype,"getAccountByWebPropertyId","getAccountByPropertyId"),e.exports=i},{}],3:[function(t,e,n){function i(){var t=gapi.client.request({path:a}).then(function(t){return t});return new t.constructor(function(e,n){var i=[];t.then(function r(t){var s=t.result;s.items?i=i.concat(s.items):n(new Error("You do not have any Google Analytics accounts. Go to http://google.com/analytics to sign up.")),s.startIndex+s.itemsPerPage<=s.totalResults?gapi.client.request({path:a,params:{"start-index":s.startIndex+s.itemsPerPage}}).then(r):e(new o(i))}).then(null,n)})}var r,o=t("./account-summaries"),a="/analytics/v3/management/accountSummaries";e.exports={get:function(t){return t&&(r=null),r||(r=i())}}},{"./account-summaries":2}]},{},[1])}function a(){gapi.analytics.ready(function(){gapi.analytics.createComponent("ActiveUsers",{initialize:function(){this.activeUsers=0},execute:function(){this.polling_&&this.stop(),this.render_(),gapi.analytics.auth.isAuthorized()?this.getActiveUsers_():gapi.analytics.auth.once("success",this.getActiveUsers_.bind(this))},stop:function(){clearTimeout(this.timeout_),this.polling_=!1,this.emit("stop",{activeUsers:this.activeUsers})},render_:function(){var t=this.get();this.container="string"==typeof t.container?document.getElementById(t.container):t.container,this.container.innerHTML=t.template||this.template,this.container.querySelector("b").innerHTML=this.activeUsers},getActiveUsers_:function(){var t=this.get(),e=1e3*(t.pollingInterval||5);if(isNaN(e)||5e3>e)throw new Error("Frequency must be 5 seconds or more.");this.polling_=!0,gapi.client.analytics.data.realtime.get({ids:t.ids,metrics:"rt:activeUsers"}).execute(function(t){var n=t.totalResults?+t.rows[0][0]:0,i=this.activeUsers;this.emit("success",{activeUsers:this.activeUsers}),n!=i&&(this.activeUsers=n,this.onChange_(n-i)),(this.polling_=!0)&&(this.timeout_=setTimeout(this.getActiveUsers_.bind(this),e))}.bind(this))},onChange_:function(t){var e=this.container.querySelector("b");e&&(e.innerHTML=this.activeUsers),this.emit("change",{activeUsers:this.activeUsers,delta:t}),t>0?this.emit("increase",{activeUsers:this.activeUsers,delta:t}):this.emit("decrease",{activeUsers:this.activeUsers,delta:t})},template:'<div class="ActiveUsers">Active Users: <b class="ActiveUsers-value"></b></div>'})})}t.analyticsLoaded?(a(),o(),r(),n()):(!function(t,e,n,i,r,o){i=t.gapi||(t.gapi={}),i.analytics={q:[],ready:function(t){this.q.push(t)}},r=e.createElement(n),o=e.getElementsByTagName(n)[0],r.src="https://apis.google.com/js/platform.js",o.parentNode.insertBefore(r,o),r.onload=function(){i.load("analytics")}}(window,document,"script"),gapi.analytics.ready(function(){a(),o(),i(),r()}))}}}]),angular.module("pixie.admin").directive("edScrollSpy",function(){return{restrict:"A",compile:function(t){var e=$(t.data("target")),n=$(".flex-fluid"),i=n.offset().top,r=e[0].getBoundingClientRect();r.top-30<=i&&r.bottom>i&&t.addClass("active"),t.on("click",function(){n.animate({scrollTop:e.offset().top-n.offset().top+n.scrollTop()-10},300)}),n.on("scroll",function(){var n=e[0].getBoundingClientRect();n.top-30<=i&&n.bottom>i?t.addClass("active"):t.removeClass("active")})}}}),function(){"use strict";var t=this,e=t.Chart,n=function(t){this.canvas=t.canvas,this.ctx=t;var e=function(t,e){return t["offset"+e]?t["offset"+e]:document.defaultView.getComputedStyle(t).getPropertyValue(e)},n=this.width=e(t.canvas,"Width"),r=this.height=e(t.canvas,"Height");t.canvas.width=n,t.canvas.height=r;var n=this.width=t.canvas.width,r=this.height=t.canvas.height;return this.aspectRatio=this.width/this.height,i.retinaScale(this),this};n.defaults={global:{animation:!0,animationSteps:60,animationEasing:"easeOutQuart",showScale:!0,scaleOverride:!1,scaleSteps:null,scaleStepWidth:null,scaleStartValue:null,scaleLineColor:"rgba(0,0,0,.1)",scaleLineWidth:1,scaleShowLabels:!0,scaleLabel:"<%=value%>",scaleIntegersOnly:!0,scaleBeginAtZero:!1,scaleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",scaleFontSize:12,scaleFontStyle:"normal",scaleFontColor:"#666",responsive:!1,maintainAspectRatio:!0,showTooltips:!0,customTooltips:!1,tooltipEvents:["mousemove","touchstart","touchmove","mouseout"],tooltipFillColor:"rgba(0,0,0,0.8)",tooltipFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipFontSize:14,tooltipFontStyle:"normal",tooltipFontColor:"#fff",tooltipTitleFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",tooltipTitleFontSize:14,tooltipTitleFontStyle:"bold",tooltipTitleFontColor:"#fff",tooltipYPadding:6,tooltipXPadding:6,tooltipCaretSize:8,tooltipCornerRadius:6,tooltipXOffset:10,tooltipTemplate:"<%if (label){%><%=label%>: <%}%><%= value %>",multiTooltipTemplate:"<%= value %>",multiTooltipKeyBackground:"#fff",onAnimationProgress:function(){},onAnimationComplete:function(){}}},n.types={};var i=n.helpers={},r=i.each=function(t,e,n){var i=Array.prototype.slice.call(arguments,3);if(t)if(t.length===+t.length){var r;for(r=0;r<t.length;r++)e.apply(n,[t[r],r].concat(i))}else for(var o in t)e.apply(n,[t[o],o].concat(i))},o=i.clone=function(t){var e={};return r(t,function(n,i){t.hasOwnProperty(i)&&(e[i]=n)}),e},a=i.extend=function(t){return r(Array.prototype.slice.call(arguments,1),function(e){r(e,function(n,i){e.hasOwnProperty(i)&&(t[i]=n)})}),t},s=i.merge=function(){var t=Array.prototype.slice.call(arguments,0);return t.unshift({}),a.apply(null,t)},l=i.indexOf=function(t,e){if(Array.prototype.indexOf)return t.indexOf(e);for(var n=0;n<t.length;n++)if(t[n]===e)return n;return-1},c=(i.where=function(t,e){var n=[];return i.each(t,function(t){e(t)&&n.push(t)}),n},i.findNextWhere=function(t,e,n){n||(n=-1);for(var i=n+1;i<t.length;i++){var r=t[i];if(e(r))return r}},i.findPreviousWhere=function(t,e,n){n||(n=t.length);for(var i=n-1;i>=0;i--){var r=t[i];if(e(r))return r}},i.inherits=function(t){var e=this,n=t&&t.hasOwnProperty("constructor")?t.constructor:function(){return e.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=e.prototype,n.prototype=new i,n.extend=c,t&&a(n.prototype,t),n.__super__=e.prototype,n}),u=i.noop=function(){},h=i.uid=function(){var t=0;return function(){return"chart-"+t++}}(),d=i.warn=function(t){window.console&&"function"==typeof window.console.warn&&console.warn(t)},f=i.amd="function"==typeof define&&define.amd,p=i.isNumber=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},m=i.max=function(t){return Math.max.apply(Math,t)},g=i.min=function(t){return Math.min.apply(Math,t)},v=(i.cap=function(t,e,n){if(p(e)){if(t>e)return e}else if(p(n)&&n>t)return n;return t},i.getDecimalPlaces=function(t){return t%1!==0&&p(t)?t.toString().split(".")[1].length:0}),b=i.radians=function(t){return t*(Math.PI/180)},y=(i.getAngleFromPoint=function(t,e){var n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i),o=2*Math.PI+Math.atan2(i,n);return 0>n&&0>i&&(o+=2*Math.PI),{angle:o,distance:r}},i.aliasPixel=function(t){return t%2===0?0:.5}),w=(i.splineCurve=function(t,e,n,i){var r=Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2)),o=Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2)),a=i*r/(r+o),s=i*o/(r+o);return{inner:{x:e.x-a*(n.x-t.x),y:e.y-a*(n.y-t.y)},outer:{x:e.x+s*(n.x-t.x),y:e.y+s*(n.y-t.y)}}},i.calculateOrderOfMagnitude=function(t){return Math.floor(Math.log(t)/Math.LN10)}),x=(i.calculateScaleRange=function(t,e,n,i,r){var o=2,a=Math.floor(e/(1.5*n)),s=o>=a,l=m(t),c=g(t);l===c&&(l+=.5,c>=.5&&!i?c-=.5:l+=.5);for(var u=Math.abs(l-c),h=w(u),d=Math.ceil(l/(1*Math.pow(10,h)))*Math.pow(10,h),f=i?0:Math.floor(c/(1*Math.pow(10,h)))*Math.pow(10,h),p=d-f,v=Math.pow(10,h),b=Math.round(p/v);(b>a||a>2*b)&&!s;)if(b>a)v*=2,b=Math.round(p/v),b%1!==0&&(s=!0);else if(r&&h>=0){if(v/2%1!==0)break;v/=2,b=Math.round(p/v)}else v/=2,b=Math.round(p/v);return s&&(b=o,v=p/b),{steps:b,stepValue:v,min:f,max:f+b*v}},i.template=function(t,e){function n(t,e){var n=/\W/.test(t)?new Function("obj","var p=[],print=function(){p.push.apply(p,arguments);};with(obj){p.push('"+t.replace(/[\r\t\n]/g," ").split("<%").join("	").replace(/((^|%>)[^\t]*)'/g,"$1\r").replace(/\t=(.*?)%>/g,"',$1,'").split("	").join("');").split("%>").join("p.push('").split("\r").join("\\'")+"');}return p.join('');"):i[t]=i[t];return e?n(e):n}if(t instanceof Function)return t(e);var i={};return n(t,e)}),C=(i.generateLabels=function(t,e,n,i){var o=new Array(e);return labelTemplateString&&r(o,function(e,r){o[r]=x(t,{value:n+i*(r+1)})}),o},i.easingEffects={linear:function(t){return t},easeInQuad:function(t){return t*t},easeOutQuad:function(t){return-1*t*(t-2)},easeInOutQuad:function(t){return(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1)},easeInCubic:function(t){return t*t*t},easeOutCubic:function(t){return 1*((t=t/1-1)*t*t+1)},easeInOutCubic:function(t){return(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},easeInQuart:function(t){return t*t*t*t},easeOutQuart:function(t){return-1*((t=t/1-1)*t*t*t-1)},easeInOutQuart:function(t){return(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},easeInQuint:function(t){return 1*(t/=1)*t*t*t*t},easeOutQuint:function(t){return 1*((t=t/1-1)*t*t*t*t+1)},easeInOutQuint:function(t){return(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},easeInSine:function(t){return-1*Math.cos(t/1*(Math.PI/2))+1},easeOutSine:function(t){return 1*Math.sin(t/1*(Math.PI/2))},easeInOutSine:function(t){return-.5*(Math.cos(Math.PI*t/1)-1)},easeInExpo:function(t){return 0===t?1:1*Math.pow(2,10*(t/1-1))},easeOutExpo:function(t){return 1===t?1:1*(-Math.pow(2,-10*t/1)+1)},easeInOutExpo:function(t){return 0===t?0:1===t?1:(t/=.5)<1?.5*Math.pow(2,10*(t-1)):.5*(-Math.pow(2,-10*--t)+2)},easeInCirc:function(t){return t>=1?t:-1*(Math.sqrt(1-(t/=1)*t)-1)},easeOutCirc:function(t){return 1*Math.sqrt(1-(t=t/1-1)*t)},easeInOutCirc:function(t){return(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},easeInElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),-(i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)))},easeOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:1==(t/=1)?1:(n||(n=.3),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),i*Math.pow(2,-10*t)*Math.sin(2*(1*t-e)*Math.PI/n)+1)},easeInOutElastic:function(t){var e=1.70158,n=0,i=1;return 0===t?0:2==(t/=.5)?1:(n||(n=.3*1.5),i<Math.abs(1)?(i=1,e=n/4):e=n/(2*Math.PI)*Math.asin(1/i),1>t?-.5*i*Math.pow(2,10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n):i*Math.pow(2,-10*(t-=1))*Math.sin(2*(1*t-e)*Math.PI/n)*.5+1)},easeInBack:function(t){var e=1.70158;return 1*(t/=1)*t*((e+1)*t-e)},easeOutBack:function(t){var e=1.70158;return 1*((t=t/1-1)*t*((e+1)*t+e)+1)},easeInOutBack:function(t){var e=1.70158;return(t/=.5)<1?.5*t*t*(((e*=1.525)+1)*t-e):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:function(t){return 1-C.easeOutBounce(1-t)},easeOutBounce:function(t){return(t/=1)<1/2.75?7.5625*t*t:2/2.75>t?1*(7.5625*(t-=1.5/2.75)*t+.75):2.5/2.75>t?1*(7.5625*(t-=2.25/2.75)*t+.9375):1*(7.5625*(t-=2.625/2.75)*t+.984375)},easeInOutBounce:function(t){return.5>t?.5*C.easeInBounce(2*t):.5*C.easeOutBounce(2*t-1)+.5}}),_=i.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return window.setTimeout(t,1e3/60)}}(),$=i.cancelAnimFrame=function(){return window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||window.oCancelAnimationFrame||window.msCancelAnimationFrame||function(t){return window.clearTimeout(t,1e3/60)}}(),S=(i.animationLoop=function(t,e,n,i,r,o){var a=0,s=C[n]||C.linear,l=function(){a++;var n=a/e,c=s(n);t.call(o,c,n,a),i.call(o,c,n),e>a?o.animationFrame=_(l):r.apply(o)};_(l)},i.getRelativePosition=function(t){var e,n,i=t.originalEvent||t,r=t.currentTarget||t.srcElement,o=r.getBoundingClientRect();return i.touches?(e=i.touches[0].clientX-o.left,n=i.touches[0].clientY-o.top):(e=i.clientX-o.left,n=i.clientY-o.top),{x:e,y:n}},i.addEvent=function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent?t.attachEvent("on"+e,n):t["on"+e]=n}),E=i.removeEvent=function(t,e,n){t.removeEventListener?t.removeEventListener(e,n,!1):t.detachEvent?t.detachEvent("on"+e,n):t["on"+e]=u},T=(i.bindEvents=function(t,e,n){t.events||(t.events={}),r(e,function(e){t.events[e]=function(){n.apply(t,arguments)},S(t.chart.canvas,e,t.events[e])})},i.unbindEvents=function(t,e){r(e,function(e,n){E(t.chart.canvas,n,e)})}),k=i.getMaximumWidth=function(t){var e=t.parentNode;return e.clientWidth},A=i.getMaximumHeight=function(t){var e=t.parentNode;return e.clientHeight},M=(i.getMaximumSize=i.getMaximumWidth,i.retinaScale=function(t){var e=t.ctx,n=t.canvas.width,i=t.canvas.height;window.devicePixelRatio&&(e.canvas.style.width=n+"px",e.canvas.style.height=i+"px",e.canvas.height=i*window.devicePixelRatio,e.canvas.width=n*window.devicePixelRatio,e.scale(window.devicePixelRatio,window.devicePixelRatio))}),O=i.clear=function(t){t.ctx.clearRect(0,0,t.width,t.height)},P=i.fontString=function(t,e,n){return e+" "+t+"px "+n},I=i.longestText=function(t,e,n){t.font=e;var i=0;return r(n,function(e){var n=t.measureText(e).width;i=n>i?n:i}),i},D=i.drawRoundedRectangle=function(t,e,n,i,r,o){t.beginPath(),t.moveTo(e+o,n),t.lineTo(e+i-o,n),t.quadraticCurveTo(e+i,n,e+i,n+o),t.lineTo(e+i,n+r-o),t.quadraticCurveTo(e+i,n+r,e+i-o,n+r),t.lineTo(e+o,n+r),t.quadraticCurveTo(e,n+r,e,n+r-o),t.lineTo(e,n+o),t.quadraticCurveTo(e,n,e+o,n),t.closePath()};n.instances={},n.Type=function(t,e,i){this.options=e,this.chart=i,this.id=h(),n.instances[this.id]=this,e.responsive&&this.resize(),this.initialize.call(this,t)},a(n.Type.prototype,{initialize:function(){return this},clear:function(){return O(this.chart),this},stop:function(){return $(this.animationFrame),this},resize:function(t){this.stop();var e=this.chart.canvas,n=k(this.chart.canvas),i=this.options.maintainAspectRatio?n/this.chart.aspectRatio:A(this.chart.canvas);return e.width=this.chart.width=n,e.height=this.chart.height=i,M(this.chart),"function"==typeof t&&t.apply(this,Array.prototype.slice.call(arguments,1)),this},reflow:u,render:function(t){return t&&this.reflow(),this.options.animation&&!t?i.animationLoop(this.draw,this.options.animationSteps,this.options.animationEasing,this.options.onAnimationProgress,this.options.onAnimationComplete,this):(this.draw(),
this.options.onAnimationComplete.call(this)),this},generateLegend:function(){return x(this.options.legendTemplate,this)},destroy:function(){this.clear(),T(this,this.events);var t=this.chart.canvas;t.width=this.chart.width,t.height=this.chart.height,t.style.removeProperty?(t.style.removeProperty("width"),t.style.removeProperty("height")):(t.style.removeAttribute("width"),t.style.removeAttribute("height")),delete n.instances[this.id]},showTooltip:function(t,e){"undefined"==typeof this.activeElements&&(this.activeElements=[]);var o=function(t){var e=!1;return t.length!==this.activeElements.length?e=!0:(r(t,function(t,n){t!==this.activeElements[n]&&(e=!0)},this),e)}.call(this,t);if(o||e){if(this.activeElements=t,this.draw(),this.options.customTooltips&&this.options.customTooltips(!1),t.length>0)if(this.datasets&&this.datasets.length>1){for(var a,s,c=this.datasets.length-1;c>=0&&(a=this.datasets[c].points||this.datasets[c].bars||this.datasets[c].segments,s=l(a,t[0]),-1===s);c--);var u=[],h=[],d=function(){var t,e,n,r,o,a=[],l=[],c=[];return i.each(this.datasets,function(e){t=e.points||e.bars||e.segments,t[s]&&t[s].hasValue()&&a.push(t[s])}),i.each(a,function(t){l.push(t.x),c.push(t.y),u.push(i.template(this.options.multiTooltipTemplate,t)),h.push({fill:t._saved.fillColor||t.fillColor,stroke:t._saved.strokeColor||t.strokeColor})},this),o=g(c),n=m(c),r=g(l),e=m(l),{x:r>this.chart.width/2?r:e,y:(o+n)/2}}.call(this,s);new n.MultiTooltip({x:d.x,y:d.y,xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,xOffset:this.options.tooltipXOffset,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,titleTextColor:this.options.tooltipTitleFontColor,titleFontFamily:this.options.tooltipTitleFontFamily,titleFontStyle:this.options.tooltipTitleFontStyle,titleFontSize:this.options.tooltipTitleFontSize,cornerRadius:this.options.tooltipCornerRadius,labels:u,legendColors:h,legendColorBackground:this.options.multiTooltipKeyBackground,title:t[0].label,chart:this.chart,ctx:this.chart.ctx,custom:this.options.customTooltips}).draw()}else r(t,function(t){var e=t.tooltipPosition();new n.Tooltip({x:Math.round(e.x),y:Math.round(e.y),xPadding:this.options.tooltipXPadding,yPadding:this.options.tooltipYPadding,fillColor:this.options.tooltipFillColor,textColor:this.options.tooltipFontColor,fontFamily:this.options.tooltipFontFamily,fontStyle:this.options.tooltipFontStyle,fontSize:this.options.tooltipFontSize,caretHeight:this.options.tooltipCaretSize,cornerRadius:this.options.tooltipCornerRadius,text:x(this.options.tooltipTemplate,t),chart:this.chart,custom:this.options.customTooltips}).draw()},this);return this}},toBase64Image:function(){return this.chart.canvas.toDataURL.apply(this.chart.canvas,arguments)}}),n.Type.extend=function(t){var e=this,i=function(){return e.apply(this,arguments)};if(i.prototype=o(e.prototype),a(i.prototype,t),i.extend=n.Type.extend,t.name||e.prototype.name){var r=t.name||e.prototype.name,l=n.defaults[e.prototype.name]?o(n.defaults[e.prototype.name]):{};n.defaults[r]=a(l,t.defaults),n.types[r]=i,n.prototype[r]=function(t,e){var o=s(n.defaults.global,n.defaults[r],e||{});return new i(t,o,this)}}else d("Name not provided for this chart, so it hasn't been registered");return e},n.Element=function(t){a(this,t),this.initialize.apply(this,arguments),this.save()},a(n.Element.prototype,{initialize:function(){},restore:function(t){return t?r(t,function(t){this[t]=this._saved[t]},this):a(this,this._saved),this},save:function(){return this._saved=o(this),delete this._saved._saved,this},update:function(t){return r(t,function(t,e){this._saved[e]=this[e],this[e]=t},this),this},transition:function(t,e){return r(t,function(t,n){this[n]=(t-this._saved[n])*e+this._saved[n]},this),this},tooltipPosition:function(){return{x:this.x,y:this.y}},hasValue:function(){return p(this.value)}}),n.Element.extend=c,n.Point=n.Element.extend({display:!0,inRange:function(t,e){var n=this.hitDetectionRadius+this.radius;return Math.pow(t-this.x,2)+Math.pow(e-this.y,2)<Math.pow(n,2)},draw:function(){if(this.display){var t=this.ctx;t.beginPath(),t.arc(this.x,this.y,this.radius,0,2*Math.PI),t.closePath(),t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.fillStyle=this.fillColor,t.fill(),t.stroke()}}}),n.Arc=n.Element.extend({inRange:function(t,e){var n=i.getAngleFromPoint(this,{x:t,y:e}),r=n.angle>=this.startAngle&&n.angle<=this.endAngle,o=n.distance>=this.innerRadius&&n.distance<=this.outerRadius;return r&&o},tooltipPosition:function(){var t=this.startAngle+(this.endAngle-this.startAngle)/2,e=(this.outerRadius-this.innerRadius)/2+this.innerRadius;return{x:this.x+Math.cos(t)*e,y:this.y+Math.sin(t)*e}},draw:function(t){var e=this.ctx;e.beginPath(),e.arc(this.x,this.y,this.outerRadius,this.startAngle,this.endAngle),e.arc(this.x,this.y,this.innerRadius,this.endAngle,this.startAngle,!0),e.closePath(),e.strokeStyle=this.strokeColor,e.lineWidth=this.strokeWidth,e.fillStyle=this.fillColor,e.fill(),e.lineJoin="bevel",this.showStroke&&e.stroke()}}),n.Rectangle=n.Element.extend({draw:function(){var t=this.ctx,e=this.width/2,n=this.x-e,i=this.x+e,r=this.base-(this.base-this.y),o=this.strokeWidth/2;this.showStroke&&(n+=o,i-=o,r+=o),t.beginPath(),t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.lineWidth=this.strokeWidth,t.moveTo(n,this.base),t.lineTo(n,r),t.lineTo(i,r),t.lineTo(i,this.base),t.fill(),this.showStroke&&t.stroke()},height:function(){return this.base-this.y},inRange:function(t,e){return t>=this.x-this.width/2&&t<=this.x+this.width/2&&e>=this.y&&e<=this.base}}),n.Tooltip=n.Element.extend({draw:function(){var t=this.chart.ctx;t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.xAlign="center",this.yAlign="above";var e=this.caretPadding=2,n=t.measureText(this.text).width+2*this.xPadding,i=this.fontSize+2*this.yPadding,r=i+this.caretHeight+e;this.x+n/2>this.chart.width?this.xAlign="left":this.x-n/2<0&&(this.xAlign="right"),this.y-r<0&&(this.yAlign="below");var o=this.x-n/2,a=this.y-r;if(t.fillStyle=this.fillColor,this.custom)this.custom(this);else{switch(this.yAlign){case"above":t.beginPath(),t.moveTo(this.x,this.y-e),t.lineTo(this.x+this.caretHeight,this.y-(e+this.caretHeight)),t.lineTo(this.x-this.caretHeight,this.y-(e+this.caretHeight)),t.closePath(),t.fill();break;case"below":a=this.y+e+this.caretHeight,t.beginPath(),t.moveTo(this.x,this.y+e),t.lineTo(this.x+this.caretHeight,this.y+e+this.caretHeight),t.lineTo(this.x-this.caretHeight,this.y+e+this.caretHeight),t.closePath(),t.fill()}switch(this.xAlign){case"left":o=this.x-n+(this.cornerRadius+this.caretHeight);break;case"right":o=this.x-(this.cornerRadius+this.caretHeight)}D(t,o,a,n,i,this.cornerRadius),t.fill(),t.fillStyle=this.textColor,t.textAlign="center",t.textBaseline="middle",t.fillText(this.text,o+n/2,a+i/2)}}}),n.MultiTooltip=n.Element.extend({initialize:function(){this.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.titleFont=P(this.titleFontSize,this.titleFontStyle,this.titleFontFamily),this.height=this.labels.length*this.fontSize+(this.labels.length-1)*(this.fontSize/2)+2*this.yPadding+1.5*this.titleFontSize,this.ctx.font=this.titleFont;var t=this.ctx.measureText(this.title).width,e=I(this.ctx,this.font,this.labels)+this.fontSize+3,n=m([e,t]);this.width=n+2*this.xPadding;var i=this.height/2;this.y-i<0?this.y=i:this.y+i>this.chart.height&&(this.y=this.chart.height-i),this.x>this.chart.width/2?this.x-=this.xOffset+this.width:this.x+=this.xOffset},getLineHeight:function(t){var e=this.y-this.height/2+this.yPadding,n=t-1;return 0===t?e+this.titleFontSize/2:e+(1.5*this.fontSize*n+this.fontSize/2)+1.5*this.titleFontSize},draw:function(){if(this.custom)this.custom(this);else{D(this.ctx,this.x,this.y-this.height/2,this.width,this.height,this.cornerRadius);var t=this.ctx;t.fillStyle=this.fillColor,t.fill(),t.closePath(),t.textAlign="left",t.textBaseline="middle",t.fillStyle=this.titleTextColor,t.font=this.titleFont,t.fillText(this.title,this.x+this.xPadding,this.getLineHeight(0)),t.font=this.font,i.each(this.labels,function(e,n){t.fillStyle=this.textColor,t.fillText(e,this.x+this.xPadding+this.fontSize+3,this.getLineHeight(n+1)),t.fillStyle=this.legendColorBackground,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize),t.fillStyle=this.legendColors[n].fill,t.fillRect(this.x+this.xPadding,this.getLineHeight(n+1)-this.fontSize/2,this.fontSize,this.fontSize)},this)}}}),n.Scale=n.Element.extend({initialize:function(){this.fit()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(x(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}));this.yLabelWidth=this.display&&this.showLabels?I(this.ctx,this.font,this.yLabels):0},addXLabel:function(t){this.xLabels.push(t),this.valuesCount++,this.fit()},removeXLabel:function(){this.xLabels.shift(),this.valuesCount--,this.fit()},fit:function(){this.startPoint=this.display?this.fontSize:0,this.endPoint=this.display?this.height-1.5*this.fontSize-5:this.height,this.startPoint+=this.padding,this.endPoint-=this.padding;var t,e=this.endPoint-this.startPoint;for(this.calculateYRange(e),this.buildYLabels(),this.calculateXLabelRotation();e>this.endPoint-this.startPoint;)e=this.endPoint-this.startPoint,t=this.yLabelWidth,this.calculateYRange(e),this.buildYLabels(),t<this.yLabelWidth&&this.calculateXLabelRotation()},calculateXLabelRotation:function(){this.ctx.font=this.font;var t,e,n=this.ctx.measureText(this.xLabels[0]).width,i=this.ctx.measureText(this.xLabels[this.xLabels.length-1]).width;if(this.xScalePaddingRight=i/2+3,this.xScalePaddingLeft=n/2>this.yLabelWidth+10?n/2:this.yLabelWidth+10,this.xLabelRotation=0,this.display){var r,o=I(this.ctx,this.font,this.xLabels);this.xLabelWidth=o;for(var a=Math.floor(this.calculateX(1)-this.calculateX(0))-6;this.xLabelWidth>a&&0===this.xLabelRotation||this.xLabelWidth>a&&this.xLabelRotation<=90&&this.xLabelRotation>0;)r=Math.cos(b(this.xLabelRotation)),t=r*n,e=r*i,t+this.fontSize/2>this.yLabelWidth+8&&(this.xScalePaddingLeft=t+this.fontSize/2),this.xScalePaddingRight=this.fontSize/2,this.xLabelRotation++,this.xLabelWidth=r*o;this.xLabelRotation>0&&(this.endPoint-=Math.sin(b(this.xLabelRotation))*o+3)}else this.xLabelWidth=0,this.xScalePaddingRight=this.padding,this.xScalePaddingLeft=this.padding},calculateYRange:u,drawingArea:function(){return this.startPoint-this.endPoint},calculateY:function(t){var e=this.drawingArea()/(this.min-this.max);return this.endPoint-e*(t-this.min)},calculateX:function(t){var e=(this.xLabelRotation>0,this.width-(this.xScalePaddingLeft+this.xScalePaddingRight)),n=e/Math.max(this.valuesCount-(this.offsetGridLines?0:1),1),i=n*t+this.xScalePaddingLeft;return this.offsetGridLines&&(i+=n/2),Math.round(i)},update:function(t){i.extend(this,t),this.fit()},draw:function(){var t=this.ctx,e=(this.endPoint-this.startPoint)/this.steps,n=Math.round(this.xScalePaddingLeft);this.display&&(t.fillStyle=this.textColor,t.font=this.font,r(this.yLabels,function(r,o){var a=this.endPoint-e*o,s=Math.round(a),l=this.showHorizontalLines;t.textAlign="right",t.textBaseline="middle",this.showLabels&&t.fillText(r,n-10,a),0!==o||l||(l=!0),l&&t.beginPath(),o>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),s+=i.aliasPixel(t.lineWidth),l&&(t.moveTo(n,s),t.lineTo(this.width,s),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(n-5,s),t.lineTo(n,s),t.stroke(),t.closePath()},this),r(this.xLabels,function(e,n){var i=this.calculateX(n)+y(this.lineWidth),r=this.calculateX(n-(this.offsetGridLines?.5:0))+y(this.lineWidth),o=this.xLabelRotation>0,a=this.showVerticalLines;0!==n||a||(a=!0),a&&t.beginPath(),n>0?(t.lineWidth=this.gridLineWidth,t.strokeStyle=this.gridLineColor):(t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor),a&&(t.moveTo(r,this.endPoint),t.lineTo(r,this.startPoint-3),t.stroke(),t.closePath()),t.lineWidth=this.lineWidth,t.strokeStyle=this.lineColor,t.beginPath(),t.moveTo(r,this.endPoint),t.lineTo(r,this.endPoint+5),t.stroke(),t.closePath(),t.save(),t.translate(i,o?this.endPoint+12:this.endPoint+8),t.rotate(-1*b(this.xLabelRotation)),t.font=this.font,t.textAlign=o?"right":"center",t.textBaseline=o?"middle":"top",t.fillText(e,0,0),t.restore()},this))}}),n.RadialScale=n.Element.extend({initialize:function(){this.size=g([this.height,this.width]),this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2},calculateCenterOffset:function(t){var e=this.drawingArea/(this.max-this.min);return(t-this.min)*e},update:function(){this.lineArc?this.drawingArea=this.display?this.size/2-(this.fontSize/2+this.backdropPaddingY):this.size/2:this.setScaleSize(),this.buildYLabels()},buildYLabels:function(){this.yLabels=[];for(var t=v(this.stepValue),e=0;e<=this.steps;e++)this.yLabels.push(x(this.templateString,{value:(this.min+e*this.stepValue).toFixed(t)}))},getCircumference:function(){return 2*Math.PI/this.valuesCount},setScaleSize:function(){var t,e,n,i,r,o,a,s,l,c,u,h,d=g([this.height/2-this.pointLabelFontSize-5,this.width/2]),f=this.width,m=0;for(this.ctx.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),e=0;e<this.valuesCount;e++)t=this.getPointPosition(e,d),n=this.ctx.measureText(x(this.templateString,{value:this.labels[e]})).width+5,0===e||e===this.valuesCount/2?(i=n/2,t.x+i>f&&(f=t.x+i,r=e),t.x-i<m&&(m=t.x-i,a=e)):e<this.valuesCount/2?t.x+n>f&&(f=t.x+n,r=e):e>this.valuesCount/2&&t.x-n<m&&(m=t.x-n,a=e);l=m,c=Math.ceil(f-this.width),o=this.getIndexAngle(r),s=this.getIndexAngle(a),u=c/Math.sin(o+Math.PI/2),h=l/Math.sin(s+Math.PI/2),u=p(u)?u:0,h=p(h)?h:0,this.drawingArea=d-(h+u)/2,this.setCenterPoint(h,u)},setCenterPoint:function(t,e){var n=this.width-e-this.drawingArea,i=t+this.drawingArea;this.xCenter=(i+n)/2,this.yCenter=this.height/2},getIndexAngle:function(t){var e=2*Math.PI/this.valuesCount;return t*e-Math.PI/2},getPointPosition:function(t,e){var n=this.getIndexAngle(t);return{x:Math.cos(n)*e+this.xCenter,y:Math.sin(n)*e+this.yCenter}},draw:function(){if(this.display){var t=this.ctx;if(r(this.yLabels,function(e,n){if(n>0){var i,r=n*(this.drawingArea/this.steps),o=this.yCenter-r;if(this.lineWidth>0)if(t.strokeStyle=this.lineColor,t.lineWidth=this.lineWidth,this.lineArc)t.beginPath(),t.arc(this.xCenter,this.yCenter,r,0,2*Math.PI),t.closePath(),t.stroke();else{t.beginPath();for(var a=0;a<this.valuesCount;a++)i=this.getPointPosition(a,this.calculateCenterOffset(this.min+n*this.stepValue)),0===a?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y);t.closePath(),t.stroke()}if(this.showLabels){if(t.font=P(this.fontSize,this.fontStyle,this.fontFamily),this.showLabelBackdrop){var s=t.measureText(e).width;t.fillStyle=this.backdropColor,t.fillRect(this.xCenter-s/2-this.backdropPaddingX,o-this.fontSize/2-this.backdropPaddingY,s+2*this.backdropPaddingX,this.fontSize+2*this.backdropPaddingY)}t.textAlign="center",t.textBaseline="middle",t.fillStyle=this.fontColor,t.fillText(e,this.xCenter,o)}}},this),!this.lineArc){t.lineWidth=this.angleLineWidth,t.strokeStyle=this.angleLineColor;for(var e=this.valuesCount-1;e>=0;e--){if(this.angleLineWidth>0){var n=this.getPointPosition(e,this.calculateCenterOffset(this.max));t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(n.x,n.y),t.stroke(),t.closePath()}var i=this.getPointPosition(e,this.calculateCenterOffset(this.max)+5);t.font=P(this.pointLabelFontSize,this.pointLabelFontStyle,this.pointLabelFontFamily),t.fillStyle=this.pointLabelFontColor;var o=this.labels.length,a=this.labels.length/2,s=a/2,l=s>e||e>o-s,c=e===s||e===o-s;t.textAlign=0===e?"center":e===a?"center":a>e?"left":"right",t.textBaseline=c?"middle":l?"bottom":"top",t.fillText(this.labels[e],i.x,i.y)}}}}}),i.addEvent(window,"resize",function(){var t;return function(){clearTimeout(t),t=setTimeout(function(){r(n.instances,function(t){t.options.responsive&&t.resize(t.render,!0)})},50)}}()),f?define(function(){return n}):"object"==typeof module&&module.exports&&(module.exports=n),t.Chart=n,n.noConflict=function(){return t.Chart=e,n}}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleBeginAtZero:!0,scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,barShowStroke:!0,barStrokeWidth:2,barValueSpacing:5,barDatasetSpacing:1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].fillColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Bar",defaults:i,initialize:function(t){var i=this.options;this.ScaleClass=e.Scale.extend({offsetGridLines:!0,calculateBarX:function(t,e,n){var r=this.calculateBaseWidth(),o=this.calculateX(n)-r/2,a=this.calculateBarWidth(t);return o+a*e+e*i.barDatasetSpacing+a/2},calculateBaseWidth:function(){return this.calculateX(1)-this.calculateX(0)-2*i.barValueSpacing},calculateBarWidth:function(t){var e=this.calculateBaseWidth()-(t-1)*i.barDatasetSpacing;return e/t}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getBarsAtEvent(t):[];this.eachBars(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),this.BarClass=e.Rectangle.extend({strokeWidth:this.options.barStrokeWidth,showStroke:this.options.barShowStroke,ctx:this.chart.ctx}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,bars:[]};this.datasets.push(i),n.each(e.data,function(n,r){i.bars.push(new this.BarClass({value:n,label:t.labels[r],datasetLabel:e.label,strokeColor:e.strokeColor,fillColor:e.fillColor,highlightFill:e.highlightFill||e.fillColor,highlightStroke:e.highlightStroke||e.strokeColor}))},this)},this),this.buildScale(t.labels),this.BarClass.prototype.base=this.scale.endPoint,this.eachBars(function(t,e,i){n.extend(t,{width:this.scale.calculateBarWidth(this.datasets.length),x:this.scale.calculateBarX(this.datasets.length,i,e),y:this.scale.endPoint}),t.save()},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachBars(function(t){t.save()}),this.render()},eachBars:function(t){n.each(this.datasets,function(e,i){n.each(e.bars,t,this,i)},this)},getBarsAtEvent:function(t){for(var e,i=[],r=n.getRelativePosition(t),o=function(t){i.push(t.bars[e])},a=0;a<this.datasets.length;a++)for(e=0;e<this.datasets[a].bars.length;e++)if(this.datasets[a].bars[e].inRange(r.x,r.y))return n.each(this.datasets,o),i;return i},buildScale:function(t){var e=this,i=function(){var t=[];return e.eachBars(function(e){t.push(e.value)}),t},r={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(i(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.barShowStroke?this.options.barStrokeWidth:0,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(r,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new this.ScaleClass(r)},addData:function(t,e){n.each(t,function(t,n){this.datasets[n].bars.push(new this.BarClass({value:t,label:e,x:this.scale.calculateBarX(this.datasets.length,n,this.scale.valuesCount+1),y:this.scale.endPoint,width:this.scale.calculateBarWidth(this.datasets.length),base:this.scale.endPoint,strokeColor:this.datasets[n].strokeColor,fillColor:this.datasets[n].fillColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.bars.shift()},this),this.update()},reflow:function(){n.extend(this.BarClass.prototype,{y:this.scale.endPoint,base:this.scale.endPoint});var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear(),this.chart.ctx,this.scale.draw(e),n.each(this.datasets,function(t,i){n.each(t.bars,function(t,n){t.hasValue()&&(t.base=this.scale.endPoint,t.transition({x:this.scale.calculateBarX(this.datasets.length,i,n),y:this.scale.calculateY(t.value),width:this.scale.calculateBarWidth(this.datasets.length)},e).draw())},this)},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,percentageInnerCutout:50,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Doughnut",defaults:i,initialize:function(t){this.segments=[],this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,this.SegmentArc=e.Arc.extend({ctx:this.chart.ctx,x:this.chart.width/2,y:this.chart.height/2}),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.calculateTotal(t),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({value:t.value,outerRadius:this.options.animateScale?0:this.outerRadius,innerRadius:this.options.animateScale?0:this.outerRadius/100*this.options.percentageInnerCutout,fillColor:t.color,highlightColor:t.highlight||t.color,showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,startAngle:1.5*Math.PI,circumference:this.options.animateRotate?0:this.calculateCircumference(t.value),label:t.label})),n||(this.reflow(),this.update())},calculateCircumference:function(t){return 2*Math.PI*(Math.abs(t)/this.total)},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=Math.abs(t.value)},this)},update:function(){this.calculateTotal(this.segments),n.each(this.activeElements,function(t){t.restore(["fillColor"])}),n.each(this.segments,function(t){t.save()}),this.render()},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.outerRadius=(n.min([this.chart.width,this.chart.height])-this.options.segmentStrokeWidth/2)/2,n.each(this.segments,function(t){t.update({outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout})},this)},draw:function(t){var e=t?t:1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.calculateCircumference(t.value),outerRadius:this.outerRadius,innerRadius:this.outerRadius/100*this.options.percentageInnerCutout},e),t.endAngle=t.startAngle+t.circumference,t.draw(),0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle)},this)}}),e.types.Doughnut.extend({name:"Pie",defaults:n.merge(i,{percentageInnerCutout:0})})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleShowGridLines:!0,scaleGridLineColor:"rgba(0,0,0,.05)",scaleGridLineWidth:1,scaleShowHorizontalLines:!0,scaleShowVerticalLines:!0,bezierCurve:!0,bezierCurveTension:.4,pointDot:!0,pointDotRadius:4,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"Line",defaults:i,initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx,inRange:function(t){return Math.pow(t-this.x,2)<Math.pow(this.radius+this.hitDetectionRadius,2)}}),this.datasets=[],this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(n,r){i.points.push(new this.PointClass({value:n,label:t.labels[r],datasetLabel:e.label,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this),this.buildScale(t.labels),this.eachPoints(function(t,e){n.extend(t,{x:this.scale.calculateX(e),y:this.scale.endPoint}),t.save()},this)},this),this.render()},update:function(){this.scale.update(),n.each(this.activeElements,function(t){t.restore(["fillColor","strokeColor"])}),this.eachPoints(function(t){t.save()}),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.datasets,function(t){n.each(t.points,function(t){t.inRange(i.x,i.y)&&e.push(t)})},this),e},buildScale:function(t){var i=this,r=function(){var t=[];return i.eachPoints(function(e){t.push(e.value)}),t},o={templateString:this.options.scaleLabel,height:this.chart.height,width:this.chart.width,ctx:this.chart.ctx,textColor:this.options.scaleFontColor,fontSize:this.options.scaleFontSize,fontStyle:this.options.scaleFontStyle,fontFamily:this.options.scaleFontFamily,valuesCount:t.length,beginAtZero:this.options.scaleBeginAtZero,integersOnly:this.options.scaleIntegersOnly,calculateYRange:function(t){var e=n.calculateScaleRange(r(),t,this.fontSize,this.beginAtZero,this.integersOnly);n.extend(this,e)},xLabels:t,font:n.fontString(this.options.scaleFontSize,this.options.scaleFontStyle,this.options.scaleFontFamily),lineWidth:this.options.scaleLineWidth,lineColor:this.options.scaleLineColor,showHorizontalLines:this.options.scaleShowHorizontalLines,showVerticalLines:this.options.scaleShowVerticalLines,gridLineWidth:this.options.scaleShowGridLines?this.options.scaleGridLineWidth:0,gridLineColor:this.options.scaleShowGridLines?this.options.scaleGridLineColor:"rgba(0,0,0,0)",padding:this.options.showScale?0:this.options.pointDotRadius+this.options.pointDotStrokeWidth,showLabels:this.options.scaleShowLabels,display:this.options.showScale};this.options.scaleOverride&&n.extend(o,{calculateYRange:n.noop,steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}),this.scale=new e.Scale(o)},addData:function(t,e){n.each(t,function(t,n){this.datasets[n].points.push(new this.PointClass({value:t,label:e,x:this.scale.calculateX(this.scale.valuesCount+1),y:this.scale.endPoint,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.addXLabel(e),this.update()},removeData:function(){this.scale.removeXLabel(),n.each(this.datasets,function(t){t.points.shift()},this),this.update()},reflow:function(){var t=n.extend({height:this.chart.height,width:this.chart.width});this.scale.update(t)},draw:function(t){var e=t||1;this.clear();var i=this.chart.ctx,r=function(t){return null!==t.value},o=function(t,e,i){return n.findNextWhere(e,r,i)||t},a=function(t,e,i){return n.findPreviousWhere(e,r,i)||t};this.scale.draw(e),n.each(this.datasets,function(t){var s=n.where(t.points,r);n.each(t.points,function(t,n){t.hasValue()&&t.transition({y:this.scale.calculateY(t.value),x:this.scale.calculateX(n)},e)},this),this.options.bezierCurve&&n.each(s,function(t,e){var i=e>0&&e<s.length-1?this.options.bezierCurveTension:0;t.controlPoints=n.splineCurve(a(t,s,e),t,o(t,s,e),i),t.controlPoints.outer.y>this.scale.endPoint?t.controlPoints.outer.y=this.scale.endPoint:t.controlPoints.outer.y<this.scale.startPoint&&(t.controlPoints.outer.y=this.scale.startPoint),t.controlPoints.inner.y>this.scale.endPoint?t.controlPoints.inner.y=this.scale.endPoint:t.controlPoints.inner.y<this.scale.startPoint&&(t.controlPoints.inner.y=this.scale.startPoint)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(s,function(t,e){if(0===e)i.moveTo(t.x,t.y);else if(this.options.bezierCurve){var n=a(t,s,e);i.bezierCurveTo(n.controlPoints.outer.x,n.controlPoints.outer.y,t.controlPoints.inner.x,t.controlPoints.inner.y,t.x,t.y)}else i.lineTo(t.x,t.y)},this),i.stroke(),this.options.datasetFill&&s.length>0&&(i.lineTo(s[s.length-1].x,this.scale.endPoint),i.lineTo(s[0].x,this.scale.endPoint),i.fillStyle=t.fillColor,i.closePath(),i.fill()),n.each(s,function(t){t.draw()})},this)}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers,i={scaleShowLabelBackdrop:!0,scaleBackdropColor:"rgba(255,255,255,0.75)",scaleBeginAtZero:!0,scaleBackdropPaddingY:2,scaleBackdropPaddingX:2,scaleShowLine:!0,segmentShowStroke:!0,segmentStrokeColor:"#fff",segmentStrokeWidth:2,animationSteps:100,animationEasing:"easeOutBounce",animateRotate:!0,animateScale:!1,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<segments.length; i++){%><li><span style="background-color:<%=segments[i].fillColor%>"></span><%if(segments[i].label){%><%=segments[i].label%><%}%></li><%}%></ul>'};e.Type.extend({name:"PolarArea",defaults:i,initialize:function(t){this.segments=[],this.SegmentArc=e.Arc.extend({showStroke:this.options.segmentShowStroke,strokeWidth:this.options.segmentStrokeWidth,strokeColor:this.options.segmentStrokeColor,ctx:this.chart.ctx,innerRadius:0,x:this.chart.width/2,y:this.chart.height/2}),this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,
backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,lineArc:!0,width:this.chart.width,height:this.chart.height,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,valuesCount:t.length}),this.updateScaleRange(t),this.scale.update(),n.each(t,function(t,e){this.addData(t,e,!0)},this),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getSegmentsAtEvent(t):[];n.each(this.segments,function(t){t.restore(["fillColor"])}),n.each(e,function(t){t.fillColor=t.highlightColor}),this.showTooltip(e)}),this.render()},getSegmentsAtEvent:function(t){var e=[],i=n.getRelativePosition(t);return n.each(this.segments,function(t){t.inRange(i.x,i.y)&&e.push(t)},this),e},addData:function(t,e,n){var i=e||this.segments.length;this.segments.splice(i,0,new this.SegmentArc({fillColor:t.color,highlightColor:t.highlight||t.color,label:t.label,value:t.value,outerRadius:this.options.animateScale?0:this.scale.calculateCenterOffset(t.value),circumference:this.options.animateRotate?0:this.scale.getCircumference(),startAngle:1.5*Math.PI})),n||(this.reflow(),this.update())},removeData:function(t){var e=n.isNumber(t)?t:this.segments.length-1;this.segments.splice(e,1),this.reflow(),this.update()},calculateTotal:function(t){this.total=0,n.each(t,function(t){this.total+=t.value},this),this.scale.valuesCount=this.segments.length},updateScaleRange:function(t){var e=[];n.each(t,function(t){e.push(t.value)});var i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i,{size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2})},update:function(){this.calculateTotal(this.segments),n.each(this.segments,function(t){t.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.SegmentArc.prototype,{x:this.chart.width/2,y:this.chart.height/2}),this.updateScaleRange(this.segments),this.scale.update(),n.extend(this.scale,{xCenter:this.chart.width/2,yCenter:this.chart.height/2}),n.each(this.segments,function(t){t.update({outerRadius:this.scale.calculateCenterOffset(t.value)})},this)},draw:function(t){var e=t||1;this.clear(),n.each(this.segments,function(t,n){t.transition({circumference:this.scale.getCircumference(),outerRadius:this.scale.calculateCenterOffset(t.value)},e),t.endAngle=t.startAngle+t.circumference,0===n&&(t.startAngle=1.5*Math.PI),n<this.segments.length-1&&(this.segments[n+1].startAngle=t.endAngle),t.draw()},this),this.scale.draw()}})}.call(this),function(){"use strict";var t=this,e=t.Chart,n=e.helpers;e.Type.extend({name:"Radar",defaults:{scaleShowLine:!0,angleShowLineOut:!0,scaleShowLabels:!1,scaleBeginAtZero:!0,angleLineColor:"rgba(0,0,0,.1)",angleLineWidth:1,pointLabelFontFamily:"'Arial'",pointLabelFontStyle:"normal",pointLabelFontSize:10,pointLabelFontColor:"#666",pointDot:!0,pointDotRadius:3,pointDotStrokeWidth:1,pointHitDetectionRadius:20,datasetStroke:!0,datasetStrokeWidth:2,datasetFill:!0,legendTemplate:'<ul class="<%=name.toLowerCase()%>-legend"><% for (var i=0; i<datasets.length; i++){%><li><span style="background-color:<%=datasets[i].strokeColor%>"></span><%if(datasets[i].label){%><%=datasets[i].label%><%}%></li><%}%></ul>'},initialize:function(t){this.PointClass=e.Point.extend({strokeWidth:this.options.pointDotStrokeWidth,radius:this.options.pointDotRadius,display:this.options.pointDot,hitDetectionRadius:this.options.pointHitDetectionRadius,ctx:this.chart.ctx}),this.datasets=[],this.buildScale(t),this.options.showTooltips&&n.bindEvents(this,this.options.tooltipEvents,function(t){var e="mouseout"!==t.type?this.getPointsAtEvent(t):[];this.eachPoints(function(t){t.restore(["fillColor","strokeColor"])}),n.each(e,function(t){t.fillColor=t.highlightFill,t.strokeColor=t.highlightStroke}),this.showTooltip(e)}),n.each(t.datasets,function(e){var i={label:e.label||null,fillColor:e.fillColor,strokeColor:e.strokeColor,pointColor:e.pointColor,pointStrokeColor:e.pointStrokeColor,points:[]};this.datasets.push(i),n.each(e.data,function(n,r){var o;this.scale.animation||(o=this.scale.getPointPosition(r,this.scale.calculateCenterOffset(n))),i.points.push(new this.PointClass({value:n,label:t.labels[r],datasetLabel:e.label,x:this.options.animation?this.scale.xCenter:o.x,y:this.options.animation?this.scale.yCenter:o.y,strokeColor:e.pointStrokeColor,fillColor:e.pointColor,highlightFill:e.pointHighlightFill||e.pointColor,highlightStroke:e.pointHighlightStroke||e.pointStrokeColor}))},this)},this),this.render()},eachPoints:function(t){n.each(this.datasets,function(e){n.each(e.points,t,this)},this)},getPointsAtEvent:function(t){var e=n.getRelativePosition(t),i=n.getAngleFromPoint({x:this.scale.xCenter,y:this.scale.yCenter},e),r=2*Math.PI/this.scale.valuesCount,o=Math.round((i.angle-1.5*Math.PI)/r),a=[];return(o>=this.scale.valuesCount||0>o)&&(o=0),i.distance<=this.scale.drawingArea&&n.each(this.datasets,function(t){a.push(t.points[o])}),a},buildScale:function(t){this.scale=new e.RadialScale({display:this.options.showScale,fontStyle:this.options.scaleFontStyle,fontSize:this.options.scaleFontSize,fontFamily:this.options.scaleFontFamily,fontColor:this.options.scaleFontColor,showLabels:this.options.scaleShowLabels,showLabelBackdrop:this.options.scaleShowLabelBackdrop,backdropColor:this.options.scaleBackdropColor,backdropPaddingY:this.options.scaleBackdropPaddingY,backdropPaddingX:this.options.scaleBackdropPaddingX,lineWidth:this.options.scaleShowLine?this.options.scaleLineWidth:0,lineColor:this.options.scaleLineColor,angleLineColor:this.options.angleLineColor,angleLineWidth:this.options.angleShowLineOut?this.options.angleLineWidth:0,pointLabelFontColor:this.options.pointLabelFontColor,pointLabelFontSize:this.options.pointLabelFontSize,pointLabelFontFamily:this.options.pointLabelFontFamily,pointLabelFontStyle:this.options.pointLabelFontStyle,height:this.chart.height,width:this.chart.width,xCenter:this.chart.width/2,yCenter:this.chart.height/2,ctx:this.chart.ctx,templateString:this.options.scaleLabel,labels:t.labels,valuesCount:t.datasets[0].data.length}),this.scale.setScaleSize(),this.updateScaleRange(t.datasets),this.scale.buildYLabels()},updateScaleRange:function(t){var e=function(){var e=[];return n.each(t,function(t){t.data?e=e.concat(t.data):n.each(t.points,function(t){e.push(t.value)})}),e}(),i=this.options.scaleOverride?{steps:this.options.scaleSteps,stepValue:this.options.scaleStepWidth,min:this.options.scaleStartValue,max:this.options.scaleStartValue+this.options.scaleSteps*this.options.scaleStepWidth}:n.calculateScaleRange(e,n.min([this.chart.width,this.chart.height])/2,this.options.scaleFontSize,this.options.scaleBeginAtZero,this.options.scaleIntegersOnly);n.extend(this.scale,i)},addData:function(t,e){this.scale.valuesCount++,n.each(t,function(t,n){var i=this.scale.getPointPosition(this.scale.valuesCount,this.scale.calculateCenterOffset(t));this.datasets[n].points.push(new this.PointClass({value:t,label:e,x:i.x,y:i.y,strokeColor:this.datasets[n].pointStrokeColor,fillColor:this.datasets[n].pointColor}))},this),this.scale.labels.push(e),this.reflow(),this.update()},removeData:function(){this.scale.valuesCount--,this.scale.labels.shift(),n.each(this.datasets,function(t){t.points.shift()},this),this.reflow(),this.update()},update:function(){this.eachPoints(function(t){t.save()}),this.reflow(),this.render()},reflow:function(){n.extend(this.scale,{width:this.chart.width,height:this.chart.height,size:n.min([this.chart.width,this.chart.height]),xCenter:this.chart.width/2,yCenter:this.chart.height/2}),this.updateScaleRange(this.datasets),this.scale.setScaleSize(),this.scale.buildYLabels()},draw:function(t){var e=t||1,i=this.chart.ctx;this.clear(),this.scale.draw(),n.each(this.datasets,function(t){n.each(t.points,function(t,n){t.hasValue()&&t.transition(this.scale.getPointPosition(n,this.scale.calculateCenterOffset(t.value)),e)},this),i.lineWidth=this.options.datasetStrokeWidth,i.strokeStyle=t.strokeColor,i.beginPath(),n.each(t.points,function(t,e){0===e?i.moveTo(t.x,t.y):i.lineTo(t.x,t.y)},this),i.closePath(),i.stroke(),i.fillStyle=t.fillColor,i.fill(),n.each(t.points,function(t){t.hasValue()&&t.draw()})},this)}})}.call(this),!function(t){function e(t,e){return function(){t.apply(e,arguments)}}function n(t){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],l(t,e(r,this),e(o,this))}function i(t){var e=this;return null===this._state?void this._deferreds.push(t):void c(function(){var n=e._state?t.onFulfilled:t.onRejected;if(null===n)return void(e._state?t.resolve:t.reject)(e._value);var i;try{i=n(e._value)}catch(r){return void t.reject(r)}t.resolve(i)})}function r(t){try{if(t===this)throw new TypeError("A promise cannot be resolved with itself.");if(t&&("object"==typeof t||"function"==typeof t)){var n=t.then;if("function"==typeof n)return void l(e(n,t),e(r,this),e(o,this))}this._state=!0,this._value=t,a.call(this)}catch(i){o.call(this,i)}}function o(t){this._state=!1,this._value=t,a.call(this)}function a(){for(var t=0,e=this._deferreds.length;e>t;t++)i.call(this,this._deferreds[t]);this._deferreds=null}function s(t,e,n,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.resolve=n,this.reject=i}function l(t,e,n){var i=!1;try{t(function(t){i||(i=!0,e(t))},function(t){i||(i=!0,n(t))})}catch(r){if(i)return;i=!0,n(r)}}var c=n.immediateFn||"function"==typeof setImmediate&&setImmediate||function(t){setTimeout(t,1)},u=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};n.prototype["catch"]=function(t){return this.then(null,t)},n.prototype.then=function(t,e){var r=this;return new n(function(n,o){i.call(r,new s(t,e,n,o))})},n.all=function(){var t=Array.prototype.slice.call(1===arguments.length&&u(arguments[0])?arguments[0]:arguments);return new n(function(e,n){function i(o,a){try{if(a&&("object"==typeof a||"function"==typeof a)){var s=a.then;if("function"==typeof s)return void s.call(a,function(t){i(o,t)},n)}t[o]=a,0===--r&&e(t)}catch(l){n(l)}}if(0===t.length)return e([]);for(var r=t.length,o=0;o<t.length;o++)i(o,t[o])})},n.resolve=function(t){return t&&"object"==typeof t&&t.constructor===n?t:new n(function(e){e(t)})},n.reject=function(t){return new n(function(e,n){n(t)})},n.race=function(t){return new n(function(e,n){for(var i=0,r=t.length;r>i;i++)t[i].then(e,n)})},"undefined"!=typeof module&&module.exports?module.exports=n:t.Promise||(t.Promise=n)}(this);var colorsForPicker=["#D24D57","#F22613","#D91E18","#96281B","#EF4836","#D64541","#C0392B","#CF000F","#E74C3C","#DB0A5B","#F64747","#F1A9A0","#D2527F","#E08283","#F62459","#E26A6A","#DCC6E0","#663399","#674172","#AEA8D3","#913D88","#9A12B3","#BF55EC","#BE90D4","#8E44AD","#9B59B6","#446CB3","#E4F1FE","#4183D7","#59ABE3","#81CFE0","#52B3D9","#C5EFF7","#22A7F0","#3498DB","#2C3E50","#19B5FE","#336E7B","#22313F","#6BB9F0","#1E8BC3","#3A539B","#34495E","#67809F","#2574A9","#1F3A93","#89C4F4","#4B77BE","#5C97BF","#4ECDC4","#A2DED0","#87D37C","#90C695","#26A65B","#03C9A9","#68C3A3","#65C6BB","#1BBC9B","#1BA39C","#66CC99","#36D7B7","#C8F7C5","#86E2D5","#2ECC71","#16a085","#3FC380","#019875","#03A678","#4DAF7C","#2ABB9B","#00B16A","#1E824C","#049372","#26C281","#FDE3A7","#F89406","#EB9532","#E87E04","#F4B350","#F2784B","#EB974E","#F5AB35","#D35400","#F39C12","#F9690E","#F9BF3B","#F27935","#E67E22","#ececec","#6C7A89","#D2D7D3","#EEEEEE","#BDC3C7","#ECF0F1","#95A5A6","#DADFE1","#ABB7B7","#F2F1EF","#BFBFBF","#E6E2AF","#A7A37E","#EFECCA","#046380","#002F2F","#468966","#FFF0A5","#FFB03B","#B64926","#8E2800","#1E1E20"],edGradients={1:{type:"linear",x1:-80,y1:0,x2:80,y2:0,colorStops:{0:"#ffe47b",1:"rgb(111,154,211)"}},2:{type:"linear",x1:0,y1:-120,x2:0,y2:120,colorStops:{0:"#ff4040",1:"#e6399b"}},3:{type:"linear",x1:-90,y1:-90,x2:90,y2:90,colorStops:{0:"rgb(166,111,213)",.5:"rgba(106, 72, 215, 0.5)",1:"#200772"}},4:{type:"radial",r1:100,r2:10,x1:0,y1:0,x2:0,y2:0,colorStops:{0:"#FF4F4F",1:"rgb(255, 239, 64)"}},5:{type:"radial",r1:100,r2:10,x1:0,y1:0,x2:20,y2:20,colorStops:{0:"#ffe47b",.5:"rgb(111,154,211)",1:"rgb(166,111,213)"}},6:{type:"radial",r1:50,r2:80,x1:45,y1:45,x2:52,y2:50,colorStops:{0:"rgb(155, 237, 0)",1:"rgba(0, 164, 128,0.4)"}},7:{type:"linear",x1:-90,y1:-90,x2:90,y2:90,colorStops:{0:"#9ecb2d",.5:"#72aa00",1:"#bfd255"}},8:{type:"radial",r1:100,r2:50,x1:30,y1:0,x2:0,y2:0,colorStops:{0:"#aebcbf",1:"#0a0809"}},9:{type:"linear",x1:-80,y1:0,x2:80,y2:0,colorStops:{0:"#ffffff",1:"#f6f6f6"}},10:{type:"linear",x1:0,y1:-120,x2:0,y2:120,colorStops:{0:"#fefcea",1:"#f1da36"}},11:{type:"linear",x1:-90,y1:-90,x2:90,y2:90,colorStops:{0:"rgb(166,111,213)",.5:"rgba(106, 72, 215, 0.5)",1:"#ff1a00"}},12:{type:"linear",x1:0,y1:-120,x2:0,y2:120,colorStops:{0:"#b7deed",1:"#21b4e2"}},13:{type:"linear",x1:-80,y1:100,x2:80,y2:-100,colorStops:{0:"#ffe47b",1:"rgb(111,154,211)"}}};!function(t){"use strict";var e,n=t.Uint8Array,i=t.HTMLCanvasElement,r=i&&i.prototype,o=/\s*;\s*base64\s*(?:;|$)/i,a="toDataURL",s=function(t){for(var i,r,o,a=t.length,s=new n(a/4*3|0),l=0,c=0,u=[0,0],h=0,d=0;a--;)r=t.charCodeAt(l++),i=e[r-43],255!==i&&i!==o&&(u[1]=u[0],u[0]=r,d=d<<6|i,h++,4===h&&(s[c++]=d>>>16,61!==u[1]&&(s[c++]=d>>>8),61!==u[0]&&(s[c++]=d),h=0));return s};n&&(e=new n([62,-1,-1,-1,63,52,53,54,55,56,57,58,59,60,61,-1,-1,-1,0,-1,-1,-1,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,-1,-1,-1,-1,-1,-1,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51])),i&&!r.toBlob&&(r.toBlob=function(t,e){if(e||(e="image/png"),this.mozGetAsFile)return void t(this.mozGetAsFile("canvas",e));if(this.msToBlob&&/^\s*image\/png\s*(?:$|;)/i.test(e))return void t(this.msToBlob());var i,r=Array.prototype.slice.call(arguments,1),l=this[a].apply(this,r),c=l.indexOf(","),u=l.substring(c+1),h=o.test(l.substring(0,c));Blob.fake?(i=new Blob,i.encoding=h?"base64":"URI",i.data=u,i.size=u.length):n&&(i=h?new Blob([s(u)],{type:e}):new Blob([decodeURIComponent(u)],{type:e})),t(i)},r.toBlobHD=r.toDataURLHD?function(){a="toDataURLHD";var t=this.toBlob();return a="toDataURL",t}:r.toBlob)}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content||this);var saveAs=saveAs||"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(t){"use strict";if("undefined"==typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var e=t.document,n=function(){return t.URL||t.webkitURL||t},i=e.createElementNS("http://www.w3.org/1999/xhtml","a"),r="download"in i,o=function(n){var i=e.createEvent("MouseEvents");i.initMouseEvent("click",!0,!1,t,0,0,0,0,0,!1,!1,!1,!1,0,null),n.dispatchEvent(i)},a=t.webkitRequestFileSystem,s=t.requestFileSystem||a||t.mozRequestFileSystem,l=function(e){(t.setImmediate||t.setTimeout)(function(){throw e},0)},c="application/octet-stream",u=0,h=500,d=function(e){var i=function(){"string"==typeof e?n().revokeObjectURL(e):e.remove()};t.chrome?i():setTimeout(i,h)},f=function(t,e,n){e=[].concat(e);for(var i=e.length;i--;){var r=t["on"+e[i]];if("function"==typeof r)try{r.call(t,n||t)}catch(o){l(o)}}},p=function(e,l){var h,p,m,g=this,v=e.type,b=!1,y=function(){f(g,"writestart progress write writeend".split(" "))},w=function(){if((b||!h)&&(h=n().createObjectURL(e)),p)p.location.href=h;else{var i=t.open(h,"_blank");void 0==i&&"undefined"!=typeof safari&&(t.location.href=h)}g.readyState=g.DONE,y(),d(h)},x=function(t){return function(){return g.readyState!==g.DONE?t.apply(this,arguments):void 0}},C={create:!0,exclusive:!1};return g.readyState=g.INIT,l||(l="download"),r?(h=n().createObjectURL(e),i.href=h,i.download=l,o(i),g.readyState=g.DONE,y(),void d(h)):(/^\s*(?:text\/(?:plain|xml)|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)&&(e=new Blob(["\ufeff",e],{type:e.type})),t.chrome&&v&&v!==c&&(m=e.slice||e.webkitSlice,e=m.call(e,0,e.size,c),b=!0),a&&"download"!==l&&(l+=".download"),(v===c||a)&&(p=t),s?(u+=e.size,void s(t.TEMPORARY,u,x(function(t){t.root.getDirectory("saved",C,x(function(t){var n=function(){t.getFile(l,C,x(function(t){t.createWriter(x(function(n){n.onwriteend=function(e){p.location.href=t.toURL(),g.readyState=g.DONE,f(g,"writeend",e),d(t)},n.onerror=function(){var t=n.error;t.code!==t.ABORT_ERR&&w()},"writestart progress write abort".split(" ").forEach(function(t){n["on"+t]=g["on"+t]}),n.write(e),g.abort=function(){n.abort(),g.readyState=g.DONE},g.readyState=g.WRITING}),w)}),w)};t.getFile(l,{create:!1},x(function(t){t.remove(),n()}),x(function(t){t.code===t.NOT_FOUND_ERR?n():w()}))}),w)}),w)):void w())},m=p.prototype,g=function(t,e){return new p(t,e)};return m.abort=function(){var t=this;t.readyState=t.DONE,f(t,"abort")},m.readyState=m.INIT=0,m.WRITING=1,m.DONE=2,m.error=m.onwritestart=m.onprogress=m.onwrite=m.onabort=m.onerror=m.onwriteend=null,g}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=saveAs:"undefined"!=typeof define&&null!==define&&null!=define.amd&&define([],function(){return saveAs}),function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports&&"object"==typeof module?module.exports=t:t(jQuery)}(function(t,e){"use strict";function n(e,n,i,r){for(var o=[],a=0;a<e.length;a++){var s=e[a];if(s){var l=tinycolor(s),c=l.toHsl().l<.5?"sp-thumb-el sp-thumb-dark":"sp-thumb-el sp-thumb-light";c+=tinycolor.equals(n,s)?" sp-thumb-active":"";var u=l.toString(r.preferredFormat||"rgb"),h=m?"background-color:"+l.toRgbString():"filter:"+l.toFilter();o.push('<span title="'+u+'" data-color="'+l.toRgbString()+'" class="'+c+'"><span class="sp-thumb-inner" style="'+h+';" /></span>')}else{var d="sp-clear-display";o.push(t("<div />").append(t('<span data-color="" style="background-color:transparent;" class="'+d+'"></span>').attr("title",r.noColorSelectedText)).html())}}return"<div class='sp-cf "+i+"'>"+o.join("")+"</div>"}function i(){for(var t=0;t<f.length;t++)f[t]&&f[t].hide()}function r(e,n){var i=t.extend({},d,e);return i.callbacks={move:c(i.move,n),change:c(i.change,n),show:c(i.show,n),hide:c(i.hide,n),beforeShow:c(i.beforeShow,n)},i}function o(o,s){function c(){if(Y.showPaletteOnly&&(Y.showPalette=!0),Lt.text(Y.showPaletteOnly?Y.togglePaletteMoreText:Y.togglePaletteLessText),Y.palette){ht=Y.palette.slice(0),dt=t.isArray(ht[0])?ht:[ht],ft={};for(var e=0;e<dt.length;e++)for(var n=0;n<dt[e].length;n++){var i=tinycolor(dt[e][n]).toRgbString();ft[i]=!0}}xt.toggleClass("sp-flat",q),xt.toggleClass("sp-input-disabled",!Y.showInput),xt.toggleClass("sp-alpha-enabled",Y.showAlpha),xt.toggleClass("sp-clear-enabled",Gt),xt.toggleClass("sp-buttons-disabled",!Y.showButtons),xt.toggleClass("sp-palette-buttons-disabled",!Y.togglePaletteOnly),xt.toggleClass("sp-palette-disabled",!Y.showPalette),xt.toggleClass("sp-palette-only",Y.showPaletteOnly),xt.toggleClass("sp-initial-disabled",!Y.showInitial),xt.addClass(Y.className).addClass(Y.containerClassName),R()}function d(){function e(e){return e.data&&e.data.ignore?(P(t(e.target).closest(".sp-thumb-el").data("color")),N()):(P(t(e.target).closest(".sp-thumb-el").data("color")),N(),j(!0),Y.hideAfterPaletteSelect&&M()),!1}if(p&&xt.find("*:not(input)").attr("unselectable","on"),c(),Rt&&yt.after(Ht).hide(),Gt||Dt.hide(),q)yt.after(xt).hide();else{var n="parent"===Y.appendTo?yt.parent():t(Y.appendTo);1!==n.length&&(n=t("body")),n.append(xt)}y(),Bt.bind("click.spectrum touchstart.spectrum",function(e){wt||T(),e.stopPropagation(),t(e.target).is("input")||e.preventDefault()}),(yt.is(":disabled")||Y.disabled===!0)&&z(),xt.click(l),Mt.change(E),Mt.bind("paste",function(){setTimeout(E,1)}),Mt.keydown(function(t){13==t.keyCode&&E()}),It.text(Y.cancelText),It.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),O(),M()}),Dt.attr("title",Y.clearText),Dt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Xt=!0,N(),q&&j(!0)}),Nt.text(Y.chooseText),Nt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),D()&&(j(!0),M())}),Lt.text(Y.showPaletteOnly?Y.togglePaletteMoreText:Y.togglePaletteLessText),Lt.bind("click.spectrum",function(t){t.stopPropagation(),t.preventDefault(),Y.showPaletteOnly=!Y.showPaletteOnly,Y.showPaletteOnly||q||xt.css("left","-="+(Ct.outerWidth(!0)+5)),c()}),u(kt,function(t,e,n){ut=t/rt,Xt=!1,n.shiftKey&&(ut=Math.round(10*ut)/10),N()},$,S),u(St,function(t,e){st=parseFloat(e/nt),Xt=!1,Y.showAlpha||(ut=1),N()},$,S),u(_t,function(t,e,n){if(n.shiftKey){if(!vt){var i=lt*Q,r=tt-ct*tt,o=Math.abs(t-i)>Math.abs(e-r);vt=o?"x":"y"}}else vt=null;var a=!vt||"x"===vt,s=!vt||"y"===vt;a&&(lt=parseFloat(t/Q)),s&&(ct=parseFloat((tt-e)/tt)),Xt=!1,Y.showAlpha||(ut=1),N()},$,S),zt?(P(zt),L(),qt=Yt||tinycolor(zt).format,w(zt)):L(),q&&k();var i=p?"mousedown.spectrum":"click.spectrum touchstart.spectrum";Ot.delegate(".sp-thumb-el",i,e),Pt.delegate(".sp-thumb-el:nth-child(1)",i,{ignore:!0},e)}function y(){if(X&&window.localStorage){try{var e=window.localStorage[X].split(",#");e.length>1&&(delete window.localStorage[X],t.each(e,function(t,e){w(e)}))}catch(n){}try{pt=window.localStorage[X].split(";")}catch(n){}}}function w(e){if(V){var n=tinycolor(e).toRgbString();if(!ft[n]&&-1===t.inArray(n,pt))for(pt.push(n);pt.length>mt;)pt.shift();if(X&&window.localStorage)try{window.localStorage[X]=pt.join(";")}catch(i){}}}function x(){var t=[];if(Y.showPalette)for(var e=0;e<pt.length;e++){var n=tinycolor(pt[e]).toRgbString();ft[n]||t.push(pt[e])}return t.reverse().slice(0,Y.maxSelectionSize)}function C(){var e=I(),i=t.map(dt,function(t,i){return n(t,e,"sp-palette-row sp-palette-row-"+i,Y)});y(),pt&&i.push(n(x(),e,"sp-palette-row sp-palette-row-selection",Y)),Ot.html(i.join(""))}function _(){if(Y.showInitial){var t=Ut,e=I();Pt.html(n([t,e],e,"sp-palette-row-initial",Y))}}function $(){(0>=tt||0>=Q||0>=nt)&&R(),xt.addClass(gt),vt=null,yt.trigger("dragstart.spectrum",[I()])}function S(){xt.removeClass(gt),yt.trigger("dragstop.spectrum",[I()])}function E(){var t=Mt.val();if(null!==t&&""!==t||!Gt){var e=tinycolor(t);e.isValid()?(P(e),j(!0)):Mt.addClass("sp-validation-error")}else P(null),j(!0)}function T(){J?M():k()}function k(){var e=t.Event("beforeShow.spectrum");return J?void R():(yt.trigger(e,[I()]),void(K.beforeShow(I())===!1||e.isDefaultPrevented()||(i(),J=!0,t(bt).bind("click.spectrum",A),t(window).bind("resize.spectrum",Z),Ht.addClass("sp-active"),xt.removeClass("sp-hidden"),R(),L(),Ut=I(),_(),K.show(Ut),yt.trigger("show.spectrum",[Ut]))))}function A(t){2!=t.button&&(Vt?j(!0):O(),M())}function M(){J&&!q&&(J=!1,t(bt).unbind("click.spectrum",A),t(window).unbind("resize.spectrum",Z),Ht.removeClass("sp-active"),xt.addClass("sp-hidden"),K.hide(I()),yt.trigger("hide.spectrum",[I()]))}function O(){P(Ut,!0)}function P(t,e){if(tinycolor.equals(t,I()))return void L();var n,i;!t&&Gt?Xt=!0:(Xt=!1,n=tinycolor(t),i=n.toHsv(),st=i.h%360/360,lt=i.s,ct=i.v,ut=i.a),L(),n&&n.isValid()&&!e&&(qt=Yt||n.getFormat())}function I(t){return t=t||{},Gt&&Xt?null:tinycolor.fromRatio({h:st,s:lt,v:ct,a:Math.round(100*ut)/100},{format:t.format||qt})}function D(){return!Mt.hasClass("sp-validation-error")}function N(){L(),K.move(I()),yt.trigger("move.spectrum",[I()])}function L(){Mt.removeClass("sp-validation-error"),F();var t=tinycolor.fromRatio({h:st,s:1,v:1});_t.css("background-color",t.toHexString());var e=qt;1>ut&&(0!==ut||"name"!==e)&&("hex"===e||"hex3"===e||"hex6"===e||"name"===e)&&(e="rgb");var n=I({format:e}),i="";if(Wt.removeClass("sp-clear-display"),Wt.css("background-color","transparent"),!n&&Gt)Wt.addClass("sp-clear-display");else{var r=n.toHexString(),o=n.toRgbString();if(m||1===n.alpha?Wt.css("background-color",o):(Wt.css("background-color","transparent"),Wt.css("filter",n.toFilter())),Y.showAlpha){var a=n.toRgb();a.a=0;var s=tinycolor(a).toRgbString(),l="linear-gradient(left, "+s+", "+r+")";p?Tt.css("filter",tinycolor(s).toFilter({gradientType:1},r)):(Tt.css("background","-webkit-"+l),Tt.css("background","-moz-"+l),Tt.css("background","-ms-"+l),Tt.css("background","linear-gradient(to right, "+s+", "+r+")"))}i=n.toString(e)}Y.showInput&&Mt.val(i),Y.showPalette&&C(),_()}function F(){var t=lt,e=ct;if(Gt&&Xt)At.hide(),Et.hide(),$t.hide();else{At.show(),Et.show(),$t.show();var n=t*Q,i=tt-e*tt;n=Math.max(-et,Math.min(Q-et,n-et)),i=Math.max(-et,Math.min(tt-et,i-et)),$t.css({top:i+"px",left:n+"px"});var r=ut*rt;At.css({left:r-ot/2+"px"});var o=st*nt;Et.css({top:o-at+"px"})}}function j(t){var e=I(),n="",i=!tinycolor.equals(e,Ut);e&&(n=e.toString(qt),w(e)),Ft&&yt.val(n),t&&i&&(K.change(e),yt.trigger("change",[e]))}function R(){Q=_t.width(),tt=_t.height(),et=$t.height(),it=St.width(),nt=St.height(),at=Et.height(),rt=kt.width(),ot=At.width(),q||(xt.css("position","absolute"),xt.offset(Y.offset?Y.offset:a(xt,Bt))),F(),Y.showPalette&&C(),yt.trigger("reflow.spectrum")}function H(){yt.show(),Bt.unbind("click.spectrum touchstart.spectrum"),xt.remove(),Ht.remove(),f[Kt.id]=null}function B(n,i){return n===e?t.extend({},Y):i===e?Y[n]:(Y[n]=i,void c())}function W(){wt=!1,yt.attr("disabled",!1),Bt.removeClass("sp-disabled")}function z(){M(),wt=!0,yt.attr("disabled",!0),Bt.addClass("sp-disabled")}function U(t){Y.offset=t,R()}var Y=r(s,o),q=Y.flat,V=Y.showSelectionPalette,X=Y.localStorageKey,G=Y.theme,K=Y.callbacks,Z=h(R,10),J=!1,Q=0,tt=0,et=0,nt=0,it=0,rt=0,ot=0,at=0,st=0,lt=0,ct=0,ut=1,ht=[],dt=[],ft={},pt=Y.selectionPalette.slice(0),mt=Y.maxSelectionSize,gt="sp-dragging",vt=null,bt=o.ownerDocument,yt=(bt.body,t(o)),wt=!1,xt=t(b,bt).addClass(G),Ct=xt.find(".sp-picker-container"),_t=xt.find(".sp-color"),$t=xt.find(".sp-dragger"),St=xt.find(".sp-hue"),Et=xt.find(".sp-slider"),Tt=xt.find(".sp-alpha-inner"),kt=xt.find(".sp-alpha"),At=xt.find(".sp-alpha-handle"),Mt=xt.find(".sp-input"),Ot=xt.find(".sp-palette"),Pt=xt.find(".sp-initial"),It=xt.find(".sp-cancel"),Dt=xt.find(".sp-clear"),Nt=xt.find(".sp-choose"),Lt=xt.find(".sp-palette-toggle"),Ft=yt.is("input"),jt=Ft&&g&&"color"===yt.attr("type"),Rt=Ft&&!q,Ht=Rt?t(v).addClass(G).addClass(Y.className).addClass(Y.replacerClassName):t([]),Bt=Rt?Ht:yt,Wt=Ht.find(".sp-preview-inner"),zt=Y.color||Ft&&yt.val(),Ut=!1,Yt=Y.preferredFormat,qt=Yt,Vt=!Y.showButtons||Y.clickoutFiresChange,Xt=!zt,Gt=Y.allowEmpty&&!jt;d();var Kt={show:k,hide:M,toggle:T,reflow:R,option:B,enable:W,disable:z,offset:U,set:function(t){P(t),j()},get:I,destroy:H,container:xt};return Kt.id=f.push(Kt)-1,Kt}function a(e,n){var i=0,r=e.outerWidth(),o=e.outerHeight(),a=n.outerHeight(),s=e[0].ownerDocument,l=s.documentElement,c=l.clientWidth+t(s).scrollLeft(),u=l.clientHeight+t(s).scrollTop(),h=n.offset();return h.top+=a,h.left-=Math.min(h.left,h.left+r>c&&c>r?Math.abs(h.left+r-c):0),h.top-=Math.min(h.top,h.top+o>u&&u>o?Math.abs(o+a-i):i),h}function s(){}function l(t){t.stopPropagation()}function c(t,e){var n=Array.prototype.slice,i=n.call(arguments,2);return function(){return t.apply(e,i.concat(n.call(arguments)))}}function u(e,n,i,r){function o(t){t.stopPropagation&&t.stopPropagation(),t.preventDefault&&t.preventDefault(),t.returnValue=!1}function a(t){if(u){if(p&&c.documentMode<9&&!t.button)return l();var i=t.originalEvent&&t.originalEvent.touches,r=i?i[0].pageX:t.pageX,a=i?i[0].pageY:t.pageY,s=Math.max(0,Math.min(r-h.left,f)),g=Math.max(0,Math.min(a-h.top,d));m&&o(t),n.apply(e,[s,g,t])}}function s(n){var r=n.which?3==n.which:2==n.button;r||u||i.apply(e,arguments)!==!1&&(u=!0,d=t(e).height(),f=t(e).width(),h=t(e).offset(),t(c).bind(g),t(c.body).addClass("sp-dragging"),m||a(n),o(n))}function l(){u&&(t(c).unbind(g),t(c.body).removeClass("sp-dragging"),r.apply(e,arguments)),u=!1}n=n||function(){},i=i||function(){},r=r||function(){};var c=document,u=!1,h={},d=0,f=0,m="ontouchstart"in window,g={};g.selectstart=o,g.dragstart=o,g["touchmove mousemove"]=a,g["touchend mouseup"]=l,t(e).bind("touchstart mousedown",s)}function h(t,e,n){var i;return function(){var r=this,o=arguments,a=function(){i=null,t.apply(r,o)};n&&clearTimeout(i),(n||!i)&&(i=setTimeout(a,e))}}var d={beforeShow:s,move:s,change:s,show:s,hide:s,color:!1,flat:!1,showInput:!1,allowEmpty:!1,showButtons:!0,clickoutFiresChange:!1,showInitial:!1,showPalette:!1,showPaletteOnly:!1,hideAfterPaletteSelect:!1,togglePaletteOnly:!1,showSelectionPalette:!0,localStorageKey:!1,appendTo:"body",maxSelectionSize:7,cancelText:"cancel",chooseText:"choose",togglePaletteMoreText:"more",togglePaletteLessText:"less",clearText:"Clear Color Selection",noColorSelectedText:"No Color Selected",preferredFormat:!1,className:"",containerClassName:"",replacerClassName:"",showAlpha:!1,theme:"sp-light",palette:[["#ffffff","#000000","#ff0000","#ff8000","#ffff00","#008000","#0000ff","#4b0082","#9400d3"]],selectionPalette:[],disabled:!1,offset:null},f=[],p=!!/msie/i.exec(window.navigator.userAgent),m=function(){function t(t,e){return!!~(""+t).indexOf(e)}var e=document.createElement("div"),n=e.style;return n.cssText="background-color:rgba(0,0,0,.5)",t(n.backgroundColor,"rgba")||t(n.backgroundColor,"hsla")}(),g=function(){var e=t("<input type='color' value='!' />")[0];return"color"===e.type&&"!"!==e.value}(),v=["<div class='sp-replacer'>","<div class='sp-preview'><div class='sp-preview-inner'></div></div>","<div class='sp-dd'>&#9660;</div>","</div>"].join(""),b=function(){var t="";if(p)for(var e=1;6>=e;e++)t+="<div class='sp-"+e+"'></div>";return["<div class='sp-container sp-hidden'>","<div class='sp-palette-container'>","<div class='sp-palette sp-thumb sp-cf'></div>","<div class='sp-palette-button-container sp-cf'>","<button type='button' class='sp-palette-toggle'></button>","</div>","</div>","<div class='sp-picker-container'>","<div class='sp-top sp-cf'>","<div class='sp-fill'></div>","<div class='sp-top-inner'>","<div class='sp-color'>","<div class='sp-sat'>","<div class='sp-val'>","<div class='sp-dragger'></div>","</div>","</div>","</div>","<div class='sp-clear sp-clear-display'>","</div>","<div class='sp-hue'>","<div class='sp-slider'></div>",t,"</div>","</div>","<div class='sp-alpha'><div class='sp-alpha-inner'><div class='sp-alpha-handle'></div></div></div>","</div>","<div class='sp-input-container sp-cf'>","<input class='sp-input' type='text' spellcheck='false'  />","</div>","<div class='sp-initial sp-thumb sp-cf'></div>","<div class='sp-button-container sp-cf'>","<a class='sp-cancel' href='#'></a>","<button type='button' class='sp-choose'></button>","</div>","</div>","</div>"].join("")}(),y="spectrum.id";t.fn.spectrum=function(e,n){if("string"==typeof e){var i=this,r=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=f[t(this).data(y)];if(n){var o=n[e];if(!o)throw new Error("Spectrum: no such method: '"+e+"'");"get"==e?i=n.get():"container"==e?i=n.container:"option"==e?i=n.option.apply(n,r):"destroy"==e?(n.destroy(),t(this).removeData(y)):o.apply(n,r)}}),i}return this.spectrum("destroy").each(function(){var n=t.extend({},e,t(this).data()),i=o(this,n);t(this).data(y,i.id)})},t.fn.spectrum.load=!0,t.fn.spectrum.loadOpts={},t.fn.spectrum.draggable=u,t.fn.spectrum.defaults=d,t.spectrum={},t.spectrum.localization={},t.spectrum.palettes={},t.fn.spectrum.processNativeColorInputs=function(){g||t("input[type=color]").spectrum({preferredFormat:"hex6"})},function(){function t(t){var n={r:0,g:0,b:0},r=1,a=!1,s=!1;return"string"==typeof t&&(t=P(t)),"object"==typeof t&&(t.hasOwnProperty("r")&&t.hasOwnProperty("g")&&t.hasOwnProperty("b")?(n=e(t.r,t.g,t.b),
a=!0,s="%"===String(t.r).substr(-1)?"prgb":"rgb"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("v")?(t.s=A(t.s),t.v=A(t.v),n=o(t.h,t.s,t.v),a=!0,s="hsv"):t.hasOwnProperty("h")&&t.hasOwnProperty("s")&&t.hasOwnProperty("l")&&(t.s=A(t.s),t.l=A(t.l),n=i(t.h,t.s,t.l),a=!0,s="hsl"),t.hasOwnProperty("a")&&(r=t.a)),r=C(r),{ok:a,format:t.format||s,r:j(255,R(n.r,0)),g:j(255,R(n.g,0)),b:j(255,R(n.b,0)),a:r}}function e(t,e,n){return{r:255*_(t,255),g:255*_(e,255),b:255*_(n,255)}}function n(t,e,n){t=_(t,255),e=_(e,255),n=_(n,255);var i,r,o=R(t,e,n),a=j(t,e,n),s=(o+a)/2;if(o==a)i=r=0;else{var l=o-a;switch(r=s>.5?l/(2-o-a):l/(o+a),o){case t:i=(e-n)/l+(n>e?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,l:s}}function i(t,e,n){function i(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t}var r,o,a;if(t=_(t,360),e=_(e,100),n=_(n,100),0===e)r=o=a=n;else{var s=.5>n?n*(1+e):n+e-n*e,l=2*n-s;r=i(l,s,t+1/3),o=i(l,s,t),a=i(l,s,t-1/3)}return{r:255*r,g:255*o,b:255*a}}function r(t,e,n){t=_(t,255),e=_(e,255),n=_(n,255);var i,r,o=R(t,e,n),a=j(t,e,n),s=o,l=o-a;if(r=0===o?0:l/o,o==a)i=0;else{switch(o){case t:i=(e-n)/l+(n>e?6:0);break;case e:i=(n-t)/l+2;break;case n:i=(t-e)/l+4}i/=6}return{h:i,s:r,v:s}}function o(t,e,n){t=6*_(t,360),e=_(e,100),n=_(n,100);var i=L.floor(t),r=t-i,o=n*(1-e),a=n*(1-r*e),s=n*(1-(1-r)*e),l=i%6,c=[n,a,o,o,s,n][l],u=[s,n,n,a,o,o][l],h=[o,o,s,n,n,a][l];return{r:255*c,g:255*u,b:255*h}}function a(t,e,n,i){var r=[k(F(t).toString(16)),k(F(e).toString(16)),k(F(n).toString(16))];return i&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function s(t,e,n,i){var r=[k(M(i)),k(F(t).toString(16)),k(F(e).toString(16)),k(F(n).toString(16))];return r.join("")}function l(t,e){e=0===e?0:e||10;var n=B(t).toHsl();return n.s-=e/100,n.s=$(n.s),B(n)}function c(t,e){e=0===e?0:e||10;var n=B(t).toHsl();return n.s+=e/100,n.s=$(n.s),B(n)}function u(t){return B(t).desaturate(100)}function h(t,e){e=0===e?0:e||10;var n=B(t).toHsl();return n.l+=e/100,n.l=$(n.l),B(n)}function d(t,e){e=0===e?0:e||10;var n=B(t).toRgb();return n.r=R(0,j(255,n.r-F(255*-(e/100)))),n.g=R(0,j(255,n.g-F(255*-(e/100)))),n.b=R(0,j(255,n.b-F(255*-(e/100)))),B(n)}function f(t,e){e=0===e?0:e||10;var n=B(t).toHsl();return n.l-=e/100,n.l=$(n.l),B(n)}function p(t,e){var n=B(t).toHsl(),i=(F(n.h)+e)%360;return n.h=0>i?360+i:i,B(n)}function m(t){var e=B(t).toHsl();return e.h=(e.h+180)%360,B(e)}function g(t){var e=B(t).toHsl(),n=e.h;return[B(t),B({h:(n+120)%360,s:e.s,l:e.l}),B({h:(n+240)%360,s:e.s,l:e.l})]}function v(t){var e=B(t).toHsl(),n=e.h;return[B(t),B({h:(n+90)%360,s:e.s,l:e.l}),B({h:(n+180)%360,s:e.s,l:e.l}),B({h:(n+270)%360,s:e.s,l:e.l})]}function b(t){var e=B(t).toHsl(),n=e.h;return[B(t),B({h:(n+72)%360,s:e.s,l:e.l}),B({h:(n+216)%360,s:e.s,l:e.l})]}function y(t,e,n){e=e||6,n=n||30;var i=B(t).toHsl(),r=360/n,o=[B(t)];for(i.h=(i.h-(r*e>>1)+720)%360;--e;)i.h=(i.h+r)%360,o.push(B(i));return o}function w(t,e){e=e||6;for(var n=B(t).toHsv(),i=n.h,r=n.s,o=n.v,a=[],s=1/e;e--;)a.push(B({h:i,s:r,v:o})),o=(o+s)%1;return a}function x(t){var e={};for(var n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function C(t){return t=parseFloat(t),(isNaN(t)||0>t||t>1)&&(t=1),t}function _(t,e){E(t)&&(t="100%");var n=T(t);return t=j(e,R(0,parseFloat(t))),n&&(t=parseInt(t*e,10)/100),L.abs(t-e)<1e-6?1:t%e/parseFloat(e)}function $(t){return j(1,R(0,t))}function S(t){return parseInt(t,16)}function E(t){return"string"==typeof t&&-1!=t.indexOf(".")&&1===parseFloat(t)}function T(t){return"string"==typeof t&&-1!=t.indexOf("%")}function k(t){return 1==t.length?"0"+t:""+t}function A(t){return 1>=t&&(t=100*t+"%"),t}function M(t){return Math.round(255*parseFloat(t)).toString(16)}function O(t){return S(t)/255}function P(t){t=t.replace(I,"").replace(D,"").toLowerCase();var e=!1;if(W[t])t=W[t],e=!0;else if("transparent"==t)return{r:0,g:0,b:0,a:0,format:"name"};var n;return(n=U.rgb.exec(t))?{r:n[1],g:n[2],b:n[3]}:(n=U.rgba.exec(t))?{r:n[1],g:n[2],b:n[3],a:n[4]}:(n=U.hsl.exec(t))?{h:n[1],s:n[2],l:n[3]}:(n=U.hsla.exec(t))?{h:n[1],s:n[2],l:n[3],a:n[4]}:(n=U.hsv.exec(t))?{h:n[1],s:n[2],v:n[3]}:(n=U.hsva.exec(t))?{h:n[1],s:n[2],v:n[3],a:n[4]}:(n=U.hex8.exec(t))?{a:O(n[1]),r:S(n[2]),g:S(n[3]),b:S(n[4]),format:e?"name":"hex8"}:(n=U.hex6.exec(t))?{r:S(n[1]),g:S(n[2]),b:S(n[3]),format:e?"name":"hex"}:(n=U.hex3.exec(t))?{r:S(n[1]+""+n[1]),g:S(n[2]+""+n[2]),b:S(n[3]+""+n[3]),format:e?"name":"hex"}:!1}var I=/^[\s,#]+/,D=/\s+$/,N=0,L=Math,F=L.round,j=L.min,R=L.max,H=L.random,B=function Y(e,n){if(e=e?e:"",n=n||{},e instanceof Y)return e;if(!(this instanceof Y))return new Y(e,n);var i=t(e);this._originalInput=e,this._r=i.r,this._g=i.g,this._b=i.b,this._a=i.a,this._roundA=F(100*this._a)/100,this._format=n.format||i.format,this._gradientType=n.gradientType,this._r<1&&(this._r=F(this._r)),this._g<1&&(this._g=F(this._g)),this._b<1&&(this._b=F(this._b)),this._ok=i.ok,this._tc_id=N++};B.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var t=this.toRgb();return(299*t.r+587*t.g+114*t.b)/1e3},setAlpha:function(t){return this._a=C(t),this._roundA=F(100*this._a)/100,this},toHsv:function(){var t=r(this._r,this._g,this._b);return{h:360*t.h,s:t.s,v:t.v,a:this._a}},toHsvString:function(){var t=r(this._r,this._g,this._b),e=F(360*t.h),n=F(100*t.s),i=F(100*t.v);return 1==this._a?"hsv("+e+", "+n+"%, "+i+"%)":"hsva("+e+", "+n+"%, "+i+"%, "+this._roundA+")"},toHsl:function(){var t=n(this._r,this._g,this._b);return{h:360*t.h,s:t.s,l:t.l,a:this._a}},toHslString:function(){var t=n(this._r,this._g,this._b),e=F(360*t.h),i=F(100*t.s),r=F(100*t.l);return 1==this._a?"hsl("+e+", "+i+"%, "+r+"%)":"hsla("+e+", "+i+"%, "+r+"%, "+this._roundA+")"},toHex:function(t){return a(this._r,this._g,this._b,t)},toHexString:function(t){return"#"+this.toHex(t)},toHex8:function(){return s(this._r,this._g,this._b,this._a)},toHex8String:function(){return"#"+this.toHex8()},toRgb:function(){return{r:F(this._r),g:F(this._g),b:F(this._b),a:this._a}},toRgbString:function(){return 1==this._a?"rgb("+F(this._r)+", "+F(this._g)+", "+F(this._b)+")":"rgba("+F(this._r)+", "+F(this._g)+", "+F(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:F(100*_(this._r,255))+"%",g:F(100*_(this._g,255))+"%",b:F(100*_(this._b,255))+"%",a:this._a}},toPercentageRgbString:function(){return 1==this._a?"rgb("+F(100*_(this._r,255))+"%, "+F(100*_(this._g,255))+"%, "+F(100*_(this._b,255))+"%)":"rgba("+F(100*_(this._r,255))+"%, "+F(100*_(this._g,255))+"%, "+F(100*_(this._b,255))+"%, "+this._roundA+")"},toName:function(){return 0===this._a?"transparent":this._a<1?!1:z[a(this._r,this._g,this._b,!0)]||!1},toFilter:function(t){var e="#"+s(this._r,this._g,this._b,this._a),n=e,i=this._gradientType?"GradientType = 1, ":"";if(t){var r=B(t);n=r.toHex8String()}return"progid:DXImageTransform.Microsoft.gradient("+i+"startColorstr="+e+",endColorstr="+n+")"},toString:function(t){var e=!!t;t=t||this._format;var n=!1,i=this._a<1&&this._a>=0,r=!e&&i&&("hex"===t||"hex6"===t||"hex3"===t||"name"===t);return r?"name"===t&&0===this._a?this.toName():this.toRgbString():("rgb"===t&&(n=this.toRgbString()),"prgb"===t&&(n=this.toPercentageRgbString()),("hex"===t||"hex6"===t)&&(n=this.toHexString()),"hex3"===t&&(n=this.toHexString(!0)),"hex8"===t&&(n=this.toHex8String()),"name"===t&&(n=this.toName()),"hsl"===t&&(n=this.toHslString()),"hsv"===t&&(n=this.toHsvString()),n||this.toHexString())},_applyModification:function(t,e){var n=t.apply(null,[this].concat([].slice.call(e)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(h,arguments)},brighten:function(){return this._applyModification(d,arguments)},darken:function(){return this._applyModification(f,arguments)},desaturate:function(){return this._applyModification(l,arguments)},saturate:function(){return this._applyModification(c,arguments)},greyscale:function(){return this._applyModification(u,arguments)},spin:function(){return this._applyModification(p,arguments)},_applyCombination:function(t,e){return t.apply(null,[this].concat([].slice.call(e)))},analogous:function(){return this._applyCombination(y,arguments)},complement:function(){return this._applyCombination(m,arguments)},monochromatic:function(){return this._applyCombination(w,arguments)},splitcomplement:function(){return this._applyCombination(b,arguments)},triad:function(){return this._applyCombination(g,arguments)},tetrad:function(){return this._applyCombination(v,arguments)}},B.fromRatio=function(t,e){if("object"==typeof t){var n={};for(var i in t)t.hasOwnProperty(i)&&(n[i]="a"===i?t[i]:A(t[i]));t=n}return B(t,e)},B.equals=function(t,e){return t&&e?B(t).toRgbString()==B(e).toRgbString():!1},B.random=function(){return B.fromRatio({r:H(),g:H(),b:H()})},B.mix=function(t,e,n){n=0===n?0:n||50;var i,r=B(t).toRgb(),o=B(e).toRgb(),a=n/100,s=2*a-1,l=o.a-r.a;i=s*l==-1?s:(s+l)/(1+s*l),i=(i+1)/2;var c=1-i,u={r:o.r*i+r.r*c,g:o.g*i+r.g*c,b:o.b*i+r.b*c,a:o.a*a+r.a*(1-a)};return B(u)},B.readability=function(t,e){var n=B(t),i=B(e),r=n.toRgb(),o=i.toRgb(),a=n.getBrightness(),s=i.getBrightness(),l=Math.max(r.r,o.r)-Math.min(r.r,o.r)+Math.max(r.g,o.g)-Math.min(r.g,o.g)+Math.max(r.b,o.b)-Math.min(r.b,o.b);return{brightness:Math.abs(a-s),color:l}},B.isReadable=function(t,e){var n=B.readability(t,e);return n.brightness>125&&n.color>500},B.mostReadable=function(t,e){for(var n=null,i=0,r=!1,o=0;o<e.length;o++){var a=B.readability(t,e[o]),s=a.brightness>125&&a.color>500,l=3*(a.brightness/125)+a.color/500;(s&&!r||s&&r&&l>i||!s&&!r&&l>i)&&(r=s,i=l,n=B(e[o]))}return n};var W=B.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},z=B.hexNames=x(W),U=function(){var t="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",n="(?:"+e+")|(?:"+t+")",i="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?",r="[\\s|\\(]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")[,|\\s]+("+n+")\\s*\\)?";return{rgb:new RegExp("rgb"+i),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+i),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+i),hsva:new RegExp("hsva"+r),hex3:/^([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex8:/^([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();window.tinycolor=B}(),t(function(){t.fn.spectrum.load&&t.fn.spectrum.processNativeColorInputs()})}),!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t:t(jQuery)}(function(t){function e(e){var a=e||window.event,s=l.call(arguments,1),c=0,h=0,d=0,f=0,p=0,m=0;if(e=t.event.fix(a),e.type="mousewheel","detail"in a&&(d=-1*a.detail),"wheelDelta"in a&&(d=a.wheelDelta),"wheelDeltaY"in a&&(d=a.wheelDeltaY),"wheelDeltaX"in a&&(h=-1*a.wheelDeltaX),"axis"in a&&a.axis===a.HORIZONTAL_AXIS&&(h=-1*d,d=0),c=0===d?h:d,"deltaY"in a&&(d=-1*a.deltaY,c=d),"deltaX"in a&&(h=a.deltaX,0===d&&(c=-1*h)),0!==d||0!==h){if(1===a.deltaMode){var g=t.data(this,"mousewheel-line-height");c*=g,d*=g,h*=g}else if(2===a.deltaMode){var v=t.data(this,"mousewheel-page-height");c*=v,d*=v,h*=v}if(f=Math.max(Math.abs(d),Math.abs(h)),(!o||o>f)&&(o=f,i(a,f)&&(o/=40)),i(a,f)&&(c/=40,h/=40,d/=40),c=Math[c>=1?"floor":"ceil"](c/o),h=Math[h>=1?"floor":"ceil"](h/o),d=Math[d>=1?"floor":"ceil"](d/o),u.settings.normalizeOffset&&this.getBoundingClientRect){var b=this.getBoundingClientRect();p=e.clientX-b.left,m=e.clientY-b.top}return e.deltaX=h,e.deltaY=d,e.deltaFactor=o,e.offsetX=p,e.offsetY=m,e.deltaMode=0,s.unshift(e,c,h,d),r&&clearTimeout(r),r=setTimeout(n,200),(t.event.dispatch||t.event.handle).apply(this,s)}}function n(){o=null}function i(t,e){return u.settings.adjustOldDeltas&&"mousewheel"===t.type&&e%120===0}var r,o,a=["wheel","mousewheel","DOMMouseScroll","MozMousePixelScroll"],s="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"],l=Array.prototype.slice;if(t.event.fixHooks)for(var c=a.length;c;)t.event.fixHooks[a[--c]]=t.event.mouseHooks;var u=t.event.special.mousewheel={version:"3.1.12",setup:function(){if(this.addEventListener)for(var n=s.length;n;)this.addEventListener(s[--n],e,!1);else this.onmousewheel=e;t.data(this,"mousewheel-line-height",u.getLineHeight(this)),t.data(this,"mousewheel-page-height",u.getPageHeight(this))},teardown:function(){if(this.removeEventListener)for(var n=s.length;n;)this.removeEventListener(s[--n],e,!1);else this.onmousewheel=null;t.removeData(this,"mousewheel-line-height"),t.removeData(this,"mousewheel-page-height")},getLineHeight:function(e){var n=t(e),i=n["offsetParent"in t.fn?"offsetParent":"parent"]();return i.length||(i=t("body")),parseInt(i.css("fontSize"),10)||parseInt(n.css("fontSize"),10)||16},getPageHeight:function(e){return t(e).height()},settings:{adjustOldDeltas:!0,normalizeOffset:!0}};t.fn.extend({mousewheel:function(t){return t?this.bind("mousewheel",t):this.trigger("mousewheel")},unmousewheel:function(t){return this.unbind("mousewheel",t)}})}),!function(t){"undefined"!=typeof module&&module.exports?module.exports=t:t(jQuery,window,document)}(function(t){!function(e){var n="function"==typeof define&&define.amd,i="undefined"!=typeof module&&module.exports,r="https:"==document.location.protocol?"https:":"http:",o="cdnjs.cloudflare.com/ajax/libs/jquery-mousewheel/3.1.12/jquery.mousewheel.min.js";n||(i?require("jquery-mousewheel")(t):t.event.special.mousewheel||t("head").append(decodeURI("%3Cscript src="+r+"//"+o+"%3E%3C/script%3E"))),e()}(function(){var e,n="mCustomScrollbar",i="mCS",r=".mCustomScrollbar",o={setTop:0,setLeft:0,axis:"y",scrollbarPosition:"inside",scrollInertia:950,autoDraggerLength:!0,alwaysShowScrollbar:0,snapOffset:0,mouseWheel:{enable:!0,scrollAmount:"auto",axis:"y",deltaFactor:"auto",disableOver:["select","option","keygen","datalist","textarea"]},scrollButtons:{scrollType:"stepless",scrollAmount:"auto"},keyboard:{enable:!0,scrollType:"stepless",scrollAmount:"auto"},contentTouchScroll:25,advanced:{autoScrollOnFocus:"input,textarea,select,button,datalist,keygen,a[tabindex],area,object,[contenteditable='true']",updateOnContentResize:!0,updateOnImageLoad:!0},theme:"light",callbacks:{onTotalScrollOffset:0,onTotalScrollBackOffset:0,alwaysTriggerOffsets:!0}},a=0,s={},l=window.attachEvent&&!window.addEventListener?1:0,c=!1,u=["mCSB_dragger_onDrag","mCSB_scrollTools_onDrag","mCS_img_loaded","mCS_disabled","mCS_destroyed","mCS_no_scrollbar","mCS-autoHide","mCS-dir-rtl","mCS_no_scrollbar_y","mCS_no_scrollbar_x","mCS_y_hidden","mCS_x_hidden","mCSB_draggerContainer","mCSB_buttonUp","mCSB_buttonDown","mCSB_buttonLeft","mCSB_buttonRight"],h={init:function(e){var e=t.extend(!0,{},o,e),n=d.call(this);if(e.live){var l=e.liveSelector||this.selector||r,c=t(l);if("off"===e.live)return void p(l);s[l]=setTimeout(function(){c.mCustomScrollbar(e),"once"===e.live&&c.length&&p(l)},500)}else p(l);return e.setWidth=e.set_width?e.set_width:e.setWidth,e.setHeight=e.set_height?e.set_height:e.setHeight,e.axis=e.horizontalScroll?"x":m(e.axis),e.scrollInertia=e.scrollInertia>0&&e.scrollInertia<17?17:e.scrollInertia,"object"!=typeof e.mouseWheel&&1==e.mouseWheel&&(e.mouseWheel={enable:!0,scrollAmount:"auto",axis:"y",preventDefault:!1,deltaFactor:"auto",normalizeDelta:!1,invert:!1}),e.mouseWheel.scrollAmount=e.mouseWheelPixels?e.mouseWheelPixels:e.mouseWheel.scrollAmount,e.mouseWheel.normalizeDelta=e.advanced.normalizeMouseWheelDelta?e.advanced.normalizeMouseWheelDelta:e.mouseWheel.normalizeDelta,e.scrollButtons.scrollType=g(e.scrollButtons.scrollType),f(e),t(n).each(function(){var n=t(this);if(!n.data(i)){n.data(i,{idx:++a,opt:e,scrollRatio:{y:null,x:null},overflowed:null,contentReset:{y:null,x:null},bindEvents:!1,tweenRunning:!1,sequential:{},langDir:n.css("direction"),cbOffsets:null,trigger:null});var r=n.data(i),o=r.opt,s=n.data("mcs-axis"),l=n.data("mcs-scrollbar-position"),c=n.data("mcs-theme");s&&(o.axis=s),l&&(o.scrollbarPosition=l),c&&(o.theme=c,f(o)),v.call(this),t("#mCSB_"+r.idx+"_container img:not(."+u[2]+")").addClass(u[2]),h.update.call(null,n)}})},update:function(e,n){var r=e||d.call(this);return t(r).each(function(){var e=t(this);if(e.data(i)){var r=e.data(i),o=r.opt,a=t("#mCSB_"+r.idx+"_container"),s=[t("#mCSB_"+r.idx+"_dragger_vertical"),t("#mCSB_"+r.idx+"_dragger_horizontal")];if(!a.length)return;r.tweenRunning&&V(e),e.hasClass(u[3])&&e.removeClass(u[3]),e.hasClass(u[4])&&e.removeClass(u[4]),x.call(this),y.call(this),"y"===o.axis||o.advanced.autoExpandHorizontalScroll||a.css("width",b(a.children())),r.overflowed=S.call(this),A.call(this),o.autoDraggerLength&&C.call(this),_.call(this),T.call(this);var l=[Math.abs(a[0].offsetTop),Math.abs(a[0].offsetLeft)];"x"!==o.axis&&(r.overflowed[0]?s[0].height()>s[0].parent().height()?E.call(this):(X(e,l[0].toString(),{dir:"y",dur:0,overwrite:"none"}),r.contentReset.y=null):(E.call(this),"y"===o.axis?k.call(this):"yx"===o.axis&&r.overflowed[1]&&X(e,l[1].toString(),{dir:"x",dur:0,overwrite:"none"}))),"y"!==o.axis&&(r.overflowed[1]?s[1].width()>s[1].parent().width()?E.call(this):(X(e,l[1].toString(),{dir:"x",dur:0,overwrite:"none"}),r.contentReset.x=null):(E.call(this),"x"===o.axis?k.call(this):"yx"===o.axis&&r.overflowed[0]&&X(e,l[0].toString(),{dir:"y",dur:0,overwrite:"none"}))),n&&r&&(2===n&&o.callbacks.onImageLoad&&"function"==typeof o.callbacks.onImageLoad?o.callbacks.onImageLoad.call(this):3===n&&o.callbacks.onSelectorChange&&"function"==typeof o.callbacks.onSelectorChange?o.callbacks.onSelectorChange.call(this):o.callbacks.onUpdate&&"function"==typeof o.callbacks.onUpdate&&o.callbacks.onUpdate.call(this)),Y.call(this)}})},scrollTo:function(e,n){if("undefined"!=typeof e&&null!=e){var r=d.call(this);return t(r).each(function(){var r=t(this);if(r.data(i)){var o=r.data(i),a=o.opt,s={trigger:"external",scrollInertia:a.scrollInertia,scrollEasing:"mcsEaseInOut",moveDragger:!1,timeout:60,callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},l=t.extend(!0,{},s,n),c=z.call(this,e),u=l.scrollInertia>0&&l.scrollInertia<17?17:l.scrollInertia;c[0]=U.call(this,c[0],"y"),c[1]=U.call(this,c[1],"x"),l.moveDragger&&(c[0]*=o.scrollRatio.y,c[1]*=o.scrollRatio.x),l.dur=u,setTimeout(function(){null!==c[0]&&"undefined"!=typeof c[0]&&"x"!==a.axis&&o.overflowed[0]&&(l.dir="y",l.overwrite="all",X(r,c[0].toString(),l)),null!==c[1]&&"undefined"!=typeof c[1]&&"y"!==a.axis&&o.overflowed[1]&&(l.dir="x",l.overwrite="none",X(r,c[1].toString(),l))},l.timeout)}})}},stop:function(){var e=d.call(this);return t(e).each(function(){var e=t(this);e.data(i)&&V(e)})},disable:function(e){var n=d.call(this);return t(n).each(function(){var n=t(this);n.data(i)&&(n.data(i),Y.call(this,"remove"),k.call(this),e&&E.call(this),A.call(this,!0),n.addClass(u[3]))})},destroy:function(){var e=d.call(this);return t(e).each(function(){var r=t(this);if(r.data(i)){var o=r.data(i),a=o.opt,s=t("#mCSB_"+o.idx),l=t("#mCSB_"+o.idx+"_container"),c=t(".mCSB_"+o.idx+"_scrollbar");a.live&&p(a.liveSelector||t(e).selector),Y.call(this,"remove"),k.call(this),E.call(this),r.removeData(i),J(this,"mcs"),c.remove(),l.find("img."+u[2]).removeClass(u[2]),s.replaceWith(l.contents()),r.removeClass(n+" _"+i+"_"+o.idx+" "+u[6]+" "+u[7]+" "+u[5]+" "+u[3]).addClass(u[4])}})}},d=function(){return"object"!=typeof t(this)||t(this).length<1?r:this},f=function(e){var n=["rounded","rounded-dark","rounded-dots","rounded-dots-dark"],i=["rounded-dots","rounded-dots-dark","3d","3d-dark","3d-thick","3d-thick-dark","inset","inset-dark","inset-2","inset-2-dark","inset-3","inset-3-dark"],r=["minimal","minimal-dark"],o=["minimal","minimal-dark"],a=["minimal","minimal-dark"];e.autoDraggerLength=t.inArray(e.theme,n)>-1?!1:e.autoDraggerLength,e.autoExpandScrollbar=t.inArray(e.theme,i)>-1?!1:e.autoExpandScrollbar,e.scrollButtons.enable=t.inArray(e.theme,r)>-1?!1:e.scrollButtons.enable,e.autoHideScrollbar=t.inArray(e.theme,o)>-1?!0:e.autoHideScrollbar,e.scrollbarPosition=t.inArray(e.theme,a)>-1?"outside":e.scrollbarPosition},p=function(t){s[t]&&(clearTimeout(s[t]),J(s,t))},m=function(t){return"yx"===t||"xy"===t||"auto"===t?"yx":"x"===t||"horizontal"===t?"x":"y"},g=function(t){return"stepped"===t||"pixels"===t||"step"===t||"click"===t?"stepped":"stepless"},v=function(){var e=t(this),r=e.data(i),o=r.opt,a=o.autoExpandScrollbar?" "+u[1]+"_expand":"",s=["<div id='mCSB_"+r.idx+"_scrollbar_vertical' class='mCSB_scrollTools mCSB_"+r.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_vertical"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+r.idx+"_dragger_vertical' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>","<div id='mCSB_"+r.idx+"_scrollbar_horizontal' class='mCSB_scrollTools mCSB_"+r.idx+"_scrollbar mCS-"+o.theme+" mCSB_scrollTools_horizontal"+a+"'><div class='"+u[12]+"'><div id='mCSB_"+r.idx+"_dragger_horizontal' class='mCSB_dragger' style='position:absolute;' oncontextmenu='return false;'><div class='mCSB_dragger_bar' /></div><div class='mCSB_draggerRail' /></div></div>"],l="yx"===o.axis?"mCSB_vertical_horizontal":"x"===o.axis?"mCSB_horizontal":"mCSB_vertical",c="yx"===o.axis?s[0]+s[1]:"x"===o.axis?s[1]:s[0],h="yx"===o.axis?"<div id='mCSB_"+r.idx+"_container_wrapper' class='mCSB_container_wrapper' />":"",d=o.autoHideScrollbar?" "+u[6]:"",f="x"!==o.axis&&"rtl"===r.langDir?" "+u[7]:"";o.setWidth&&e.css("width",o.setWidth),o.setHeight&&e.css("height",o.setHeight),o.setLeft="y"!==o.axis&&"rtl"===r.langDir?"989999px":o.setLeft,e.addClass(n+" _"+i+"_"+r.idx+d+f).wrapInner("<div id='mCSB_"+r.idx+"' class='mCustomScrollBox mCS-"+o.theme+" "+l+"'><div id='mCSB_"+r.idx+"_container' class='mCSB_container' style='position:relative; top:"+o.setTop+"; left:"+o.setLeft+";' dir="+r.langDir+" /></div>");var p=t("#mCSB_"+r.idx),m=t("#mCSB_"+r.idx+"_container");"y"===o.axis||o.advanced.autoExpandHorizontalScroll||m.css("width",b(m.children())),"outside"===o.scrollbarPosition?("static"===e.css("position")&&e.css("position","relative"),e.css("overflow","visible"),p.addClass("mCSB_outside").after(c)):(p.addClass("mCSB_inside").append(c),m.wrap(h)),w.call(this);var g=[t("#mCSB_"+r.idx+"_dragger_vertical"),t("#mCSB_"+r.idx+"_dragger_horizontal")];g[0].css("min-height",g[0].height()),g[1].css("min-width",g[1].width())},b=function(e){return Math.max.apply(Math,e.map(function(){return t(this).outerWidth(!0)}).get())},y=function(){var e=t(this),n=e.data(i),r=n.opt,o=t("#mCSB_"+n.idx+"_container");r.advanced.autoExpandHorizontalScroll&&"y"!==r.axis&&o.css({position:"absolute",width:"auto"}).wrap("<div class='mCSB_h_wrapper' style='position:relative; left:0; width:999999px;' />").css({width:Math.ceil(o[0].getBoundingClientRect().right+.4)-Math.floor(o[0].getBoundingClientRect().left),position:"relative"}).unwrap()},w=function(){var e=t(this),n=e.data(i),r=n.opt,o=t(".mCSB_"+n.idx+"_scrollbar:first"),a=et(r.scrollButtons.tabindex)?"tabindex='"+r.scrollButtons.tabindex+"'":"",s=["<a href='#' class='"+u[13]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[14]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[15]+"' oncontextmenu='return false;' "+a+" />","<a href='#' class='"+u[16]+"' oncontextmenu='return false;' "+a+" />"],l=["x"===r.axis?s[2]:s[0],"x"===r.axis?s[3]:s[1],s[2],s[3]];r.scrollButtons.enable&&o.prepend(l[0]).append(l[1]).next(".mCSB_scrollTools").prepend(l[2]).append(l[3])},x=function(){var e=t(this),n=e.data(i),r=t("#mCSB_"+n.idx),o=e.css("max-height")||"none",a=-1!==o.indexOf("%"),s=e.css("box-sizing");if("none"!==o){var l=a?e.parent().height()*parseInt(o)/100:parseInt(o);"border-box"===s&&(l-=e.innerHeight()-e.height()+(e.outerHeight()-e.innerHeight())),r.css("max-height",Math.round(l))}},C=function(){var e=t(this),n=e.data(i),r=t("#mCSB_"+n.idx),o=t("#mCSB_"+n.idx+"_container"),a=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")],s=[r.height()/o.outerHeight(!1),r.width()/o.outerWidth(!1)],c=[parseInt(a[0].css("min-height")),Math.round(s[0]*a[0].parent().height()),parseInt(a[1].css("min-width")),Math.round(s[1]*a[1].parent().width())],u=l&&c[1]<c[0]?c[0]:c[1],h=l&&c[3]<c[2]?c[2]:c[3];a[0].css({height:u,"max-height":a[0].parent().height()-10}).find(".mCSB_dragger_bar").css({"line-height":c[0]+"px"}),a[1].css({width:h,"max-width":a[1].parent().width()-10})},_=function(){var e=t(this),n=e.data(i),r=t("#mCSB_"+n.idx),o=t("#mCSB_"+n.idx+"_container"),a=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")],s=[o.outerHeight(!1)-r.height(),o.outerWidth(!1)-r.width()],l=[s[0]/(a[0].parent().height()-a[0].height()),s[1]/(a[1].parent().width()-a[1].width())];n.scrollRatio={y:l[0],x:l[1]}},$=function(t,e,n){var i=n?u[0]+"_expanded":"",r=t.closest(".mCSB_scrollTools");"active"===e?(t.toggleClass(u[0]+" "+i),r.toggleClass(u[1]),t[0]._draggable=t[0]._draggable?0:1):t[0]._draggable||("hide"===e?(t.removeClass(u[0]),r.removeClass(u[1])):(t.addClass(u[0]),r.addClass(u[1])))},S=function(){var e=t(this),n=e.data(i),r=t("#mCSB_"+n.idx),o=t("#mCSB_"+n.idx+"_container"),a=null==n.overflowed?o.height():o.outerHeight(!1),s=null==n.overflowed?o.width():o.outerWidth(!1);return[a>r.height(),s>r.width()]},E=function(){var e=t(this),n=e.data(i),r=n.opt,o=t("#mCSB_"+n.idx),a=t("#mCSB_"+n.idx+"_container"),s=[t("#mCSB_"+n.idx+"_dragger_vertical"),t("#mCSB_"+n.idx+"_dragger_horizontal")];if(V(e),("x"!==r.axis&&!n.overflowed[0]||"y"===r.axis&&n.overflowed[0])&&(s[0].add(a).css("top",0),X(e,"_resetY")),"y"!==r.axis&&!n.overflowed[1]||"x"===r.axis&&n.overflowed[1]){var l=dx=0;"rtl"===n.langDir&&(l=o.width()-a.outerWidth(!1),dx=Math.abs(l/n.scrollRatio.x)),a.css("left",l),s[1].css("left",dx),X(e,"_resetX")}},T=function(){function e(){a=setTimeout(function(){t.event.special.mousewheel?(clearTimeout(a),D.call(n[0])):e()},100)}var n=t(this),r=n.data(i),o=r.opt;if(!r.bindEvents){if(O.call(this),o.contentTouchScroll&&P.call(this),I.call(this),o.mouseWheel.enable){var a;e()}F.call(this),R.call(this),o.advanced.autoScrollOnFocus&&j.call(this),o.scrollButtons.enable&&H.call(this),o.keyboard.enable&&B.call(this),r.bindEvents=!0}},k=function(){var e=t(this),n=e.data(i),r=n.opt,o=i+"_"+n.idx,a=".mCSB_"+n.idx+"_scrollbar",s=t("#mCSB_"+n.idx+",#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,"+a+" ."+u[12]+",#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal,"+a+">a"),l=t("#mCSB_"+n.idx+"_container");r.advanced.releaseDraggableSelectors&&s.add(t(r.advanced.releaseDraggableSelectors)),n.bindEvents&&(t(document).unbind("."+o),s.each(function(){t(this).unbind("."+o)}),clearTimeout(e[0]._focusTimeout),J(e[0],"_focusTimeout"),clearTimeout(n.sequential.step),J(n.sequential,"step"),clearTimeout(l[0].onCompleteTimeout),J(l[0],"onCompleteTimeout"),n.bindEvents=!1)},A=function(e){var n=t(this),r=n.data(i),o=r.opt,a=t("#mCSB_"+r.idx+"_container_wrapper"),s=a.length?a:t("#mCSB_"+r.idx+"_container"),l=[t("#mCSB_"+r.idx+"_scrollbar_vertical"),t("#mCSB_"+r.idx+"_scrollbar_horizontal")],c=[l[0].find(".mCSB_dragger"),l[1].find(".mCSB_dragger")];"x"!==o.axis&&(r.overflowed[0]&&!e?(l[0].add(c[0]).add(l[0].children("a")).css("display","block"),s.removeClass(u[8]+" "+u[10])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[0].css("display","none"),s.removeClass(u[10])):(l[0].css("display","none"),s.addClass(u[10])),s.addClass(u[8]))),"y"!==o.axis&&(r.overflowed[1]&&!e?(l[1].add(c[1]).add(l[1].children("a")).css("display","block"),s.removeClass(u[9]+" "+u[11])):(o.alwaysShowScrollbar?(2!==o.alwaysShowScrollbar&&c[1].css("display","none"),s.removeClass(u[11])):(l[1].css("display","none"),s.addClass(u[11])),s.addClass(u[9]))),r.overflowed[0]||r.overflowed[1]?n.removeClass(u[5]):n.addClass(u[5])},M=function(t){var e=t.type;switch(e){case"pointerdown":case"MSPointerDown":case"pointermove":case"MSPointerMove":case"pointerup":case"MSPointerUp":return t.target.ownerDocument!==document?[t.originalEvent.screenY,t.originalEvent.screenX,!1]:[t.originalEvent.pageY,t.originalEvent.pageX,!1];case"touchstart":case"touchmove":case"touchend":var n=t.originalEvent.touches[0]||t.originalEvent.changedTouches[0],i=t.originalEvent.touches.length||t.originalEvent.changedTouches.length;return t.target.ownerDocument!==document?[n.screenY,n.screenX,i>1]:[n.pageY,n.pageX,i>1];default:return[t.pageY,t.pageX,!1]}},O=function(){function e(t){var e=p.find("iframe");if(e.length){var n=t?"auto":"none";e.css("pointer-events",n)}}function n(t,e,n,i){if(p[0].idleTimer=h.scrollInertia<233?250:0,r.attr("id")===f[1])var o="x",a=(r[0].offsetLeft-e+i)*u.scrollRatio.x;else var o="y",a=(r[0].offsetTop-t+n)*u.scrollRatio.y;X(s,a.toString(),{dir:o,drag:!0})}var r,o,a,s=t(this),u=s.data(i),h=u.opt,d=i+"_"+u.idx,f=["mCSB_"+u.idx+"_dragger_vertical","mCSB_"+u.idx+"_dragger_horizontal"],p=t("#mCSB_"+u.idx+"_container"),m=t("#"+f[0]+",#"+f[1]),g=h.advanced.releaseDraggableSelectors?m.add(t(h.advanced.releaseDraggableSelectors)):m;m.bind("mousedown."+d+" touchstart."+d+" pointerdown."+d+" MSPointerDown."+d,function(n){
if(n.stopImmediatePropagation(),n.preventDefault(),Q(n)){c=!0,l&&(document.onselectstart=function(){return!1}),e(!1),V(s),r=t(this);var i=r.offset(),u=M(n)[0]-i.top,d=M(n)[1]-i.left,f=r.height()+i.top,p=r.width()+i.left;f>u&&u>0&&p>d&&d>0&&(o=u,a=d),$(r,"active",h.autoExpandScrollbar)}}).bind("touchmove."+d,function(t){t.stopImmediatePropagation(),t.preventDefault();var e=r.offset(),i=M(t)[0]-e.top,s=M(t)[1]-e.left;n(o,a,i,s)}),t(document).bind("mousemove."+d+" pointermove."+d+" MSPointerMove."+d,function(t){if(r){var e=r.offset(),i=M(t)[0]-e.top,s=M(t)[1]-e.left;if(o===i)return;n(o,a,i,s)}}).add(g).bind("mouseup."+d+" touchend."+d+" pointerup."+d+" MSPointerUp."+d,function(){r&&($(r,"active",h.autoExpandScrollbar),r=null),c=!1,l&&(document.onselectstart=null),e(!0)})},P=function(){function n(t){if(!tt(t)||c||M(t)[2])return void(e=0);e=1,x=0,C=0;var n=k.offset();u=M(t)[0]-n.top,h=M(t)[1]-n.left,L=[M(t)[0],M(t)[1]]}function r(t){if(tt(t)&&!c&&!M(t)[2]&&(t.stopImmediatePropagation(),!C||x)){m=K();var e=T.offset(),n=M(t)[0]-e.top,i=M(t)[1]-e.left,r="mcsLinearOut";if(O.push(n),P.push(i),L[2]=Math.abs(M(t)[0]-L[0]),L[3]=Math.abs(M(t)[1]-L[1]),$.overflowed[0])var o=A[0].parent().height()-A[0].height(),a=u-n>0&&n-u>-(o*$.scrollRatio.y)&&(2*L[3]<L[2]||"yx"===S.axis);if($.overflowed[1])var s=A[1].parent().width()-A[1].width(),d=h-i>0&&i-h>-(s*$.scrollRatio.x)&&(2*L[2]<L[3]||"yx"===S.axis);a||d?(t.preventDefault(),x=1):C=1,y="yx"===S.axis?[u-n,h-i]:"x"===S.axis?[null,h-i]:[u-n,null],k[0].idleTimer=250,$.overflowed[0]&&l(y[0],I,r,"y","all",!0),$.overflowed[1]&&l(y[1],I,r,"x",D,!0)}}function o(t){if(!tt(t)||c||M(t)[2])return void(e=0);e=1,t.stopImmediatePropagation(),V(_),p=K();var n=T.offset();d=M(t)[0]-n.top,f=M(t)[1]-n.left,O=[],P=[]}function a(t){if(tt(t)&&!c&&!M(t)[2]){t.stopImmediatePropagation(),x=0,C=0,g=K();var e=T.offset(),n=M(t)[0]-e.top,i=M(t)[1]-e.left;if(!(g-m>30)){b=1e3/(g-p);var r="mcsEaseOut",o=2.5>b,a=o?[O[O.length-2],P[P.length-2]]:[0,0];v=o?[n-a[0],i-a[1]]:[n-d,i-f];var u=[Math.abs(v[0]),Math.abs(v[1])];b=o?[Math.abs(v[0]/4),Math.abs(v[1]/4)]:[b,b];var h=[Math.abs(k[0].offsetTop)-v[0]*s(u[0]/b[0],b[0]),Math.abs(k[0].offsetLeft)-v[1]*s(u[1]/b[1],b[1])];y="yx"===S.axis?[h[0],h[1]]:"x"===S.axis?[null,h[1]]:[h[0],null],w=[4*u[0]+S.scrollInertia,4*u[1]+S.scrollInertia];var _=parseInt(S.contentTouchScroll)||0;y[0]=u[0]>_?y[0]:0,y[1]=u[1]>_?y[1]:0,$.overflowed[0]&&l(y[0],w[0],r,"y",D,!1),$.overflowed[1]&&l(y[1],w[1],r,"x",D,!1)}}}function s(t,e){var n=[1.5*e,2*e,e/1.5,e/2];return t>90?e>4?n[0]:n[3]:t>60?e>3?n[3]:n[2]:t>30?e>8?n[1]:e>6?n[0]:e>4?e:n[2]:e>8?e:n[3]}function l(t,e,n,i,r,o){t&&X(_,t.toString(),{dur:e,scrollEasing:n,dir:i,overwrite:r,drag:o})}var u,h,d,f,p,m,g,v,b,y,w,x,C,_=t(this),$=_.data(i),S=$.opt,E=i+"_"+$.idx,T=t("#mCSB_"+$.idx),k=t("#mCSB_"+$.idx+"_container"),A=[t("#mCSB_"+$.idx+"_dragger_vertical"),t("#mCSB_"+$.idx+"_dragger_horizontal")],O=[],P=[],I=0,D="yx"===S.axis?"none":"all",L=[],F=k.find("iframe"),j=["touchstart."+E+" pointerdown."+E+" MSPointerDown."+E,"touchmove."+E+" pointermove."+E+" MSPointerMove."+E,"touchend."+E+" pointerup."+E+" MSPointerUp."+E];k.bind(j[0],function(t){n(t)}).bind(j[1],function(t){r(t)}),T.bind(j[0],function(t){o(t)}).bind(j[2],function(t){a(t)}),F.length&&F.each(function(){t(this).load(function(){N(this)&&t(this.contentDocument||this.contentWindow.document).bind(j[0],function(t){n(t),o(t)}).bind(j[1],function(t){r(t)}).bind(j[2],function(t){a(t)})})})},I=function(){function n(){return window.getSelection?window.getSelection().toString():document.selection&&"Control"!=document.selection.type?document.selection.createRange().text:0}function r(t,e,n){u.type=n&&o?"stepped":"stepless",u.scrollAmount=10,W(a,t,e,"mcsLinearOut",n?60:null)}var o,a=t(this),s=a.data(i),l=s.opt,u=s.sequential,h=i+"_"+s.idx,d=t("#mCSB_"+s.idx+"_container"),f=d.parent();d.bind("mousedown."+h,function(){e||o||(o=1,c=!0)}).add(document).bind("mousemove."+h,function(t){if(!e&&o&&n()){var i=d.offset(),a=M(t)[0]-i.top+d[0].offsetTop,c=M(t)[1]-i.left+d[0].offsetLeft;a>0&&a<f.height()&&c>0&&c<f.width()?u.step&&r("off",null,"stepped"):("x"!==l.axis&&s.overflowed[0]&&(0>a?r("on",38):a>f.height()&&r("on",40)),"y"!==l.axis&&s.overflowed[1]&&(0>c?r("on",37):c>f.width()&&r("on",39)))}}).bind("mouseup."+h,function(){e||(o&&(o=0,r("off",null)),c=!1)})},D=function(){function e(e,i){if(V(n),!L(n,e.target)){var a="auto"!==o.mouseWheel.deltaFactor?parseInt(o.mouseWheel.deltaFactor):l&&e.deltaFactor<100?100:e.deltaFactor||100;if("x"===o.axis||"x"===o.mouseWheel.axis)var u="x",h=[Math.round(a*r.scrollRatio.x),parseInt(o.mouseWheel.scrollAmount)],d="auto"!==o.mouseWheel.scrollAmount?h[1]:h[0]>=s.width()?.9*s.width():h[0],f=Math.abs(t("#mCSB_"+r.idx+"_container")[0].offsetLeft),p=c[1][0].offsetLeft,m=c[1].parent().width()-c[1].width(),g=e.deltaX||e.deltaY||i;else var u="y",h=[Math.round(a*r.scrollRatio.y),parseInt(o.mouseWheel.scrollAmount)],d="auto"!==o.mouseWheel.scrollAmount?h[1]:h[0]>=s.height()?.9*s.height():h[0],f=Math.abs(t("#mCSB_"+r.idx+"_container")[0].offsetTop),p=c[0][0].offsetTop,m=c[0].parent().height()-c[0].height(),g=e.deltaY||i;"y"===u&&!r.overflowed[0]||"x"===u&&!r.overflowed[1]||(o.mouseWheel.invert&&(g=-g),o.mouseWheel.normalizeDelta&&(g=0>g?-1:1),(g>0&&0!==p||0>g&&p!==m||o.mouseWheel.preventDefault)&&(e.stopImmediatePropagation(),e.preventDefault()),X(n,(f-g*d).toString(),{dir:u}))}}var n=t(this),r=n.data(i),o=r.opt,a=i+"_"+r.idx,s=t("#mCSB_"+r.idx),c=[t("#mCSB_"+r.idx+"_dragger_vertical"),t("#mCSB_"+r.idx+"_dragger_horizontal")],u=t("#mCSB_"+r.idx+"_container").find("iframe");r&&(u.length&&u.each(function(){t(this).load(function(){N(this)&&t(this.contentDocument||this.contentWindow.document).bind("mousewheel."+a,function(t,n){e(t,n)})})}),s.bind("mousewheel."+a,function(t,n){e(t,n)}))},N=function(t){var e=null;try{var n=t.contentDocument||t.contentWindow.document;e=n.body.innerHTML}catch(i){}return null!==e},L=function(e,n){var r=n.nodeName.toLowerCase(),o=e.data(i).opt.mouseWheel.disableOver,a=["select","textarea"];return t.inArray(r,o)>-1&&!(t.inArray(r,a)>-1&&!t(n).is(":focus"))},F=function(){var e=t(this),n=e.data(i),r=i+"_"+n.idx,o=t("#mCSB_"+n.idx+"_container"),a=o.parent(),s=t(".mCSB_"+n.idx+"_scrollbar ."+u[12]);s.bind("touchstart."+r+" pointerdown."+r+" MSPointerDown."+r,function(){c=!0}).bind("touchend."+r+" pointerup."+r+" MSPointerUp."+r,function(){c=!1}).bind("click."+r,function(i){if(t(i.target).hasClass(u[12])||t(i.target).hasClass("mCSB_draggerRail")){V(e);var r=t(this),s=r.find(".mCSB_dragger");if(r.parent(".mCSB_scrollTools_horizontal").length>0){if(!n.overflowed[1])return;var l="x",c=i.pageX>s.offset().left?-1:1,h=Math.abs(o[0].offsetLeft)-.9*c*a.width()}else{if(!n.overflowed[0])return;var l="y",c=i.pageY>s.offset().top?-1:1,h=Math.abs(o[0].offsetTop)-.9*c*a.height()}X(e,h.toString(),{dir:l,scrollEasing:"mcsEaseInOut"})}})},j=function(){var e=t(this),n=e.data(i),r=n.opt,o=i+"_"+n.idx,a=t("#mCSB_"+n.idx+"_container"),s=a.parent();a.bind("focusin."+o,function(){var n=t(document.activeElement),i=a.find(".mCustomScrollBox").length,o=0;n.is(r.advanced.autoScrollOnFocus)&&(V(e),clearTimeout(e[0]._focusTimeout),e[0]._focusTimer=i?(o+17)*i:0,e[0]._focusTimeout=setTimeout(function(){var t=[nt(n)[0],nt(n)[1]],i=[a[0].offsetTop,a[0].offsetLeft],l=[i[0]+t[0]>=0&&i[0]+t[0]<s.height()-n.outerHeight(!1),i[1]+t[1]>=0&&i[0]+t[1]<s.width()-n.outerWidth(!1)],c="yx"!==r.axis||l[0]||l[1]?"all":"none";"x"===r.axis||l[0]||X(e,t[0].toString(),{dir:"y",scrollEasing:"mcsEaseInOut",overwrite:c,dur:o}),"y"===r.axis||l[1]||X(e,t[1].toString(),{dir:"x",scrollEasing:"mcsEaseInOut",overwrite:c,dur:o})},e[0]._focusTimer))})},R=function(){var e=t(this),n=e.data(i),r=i+"_"+n.idx,o=t("#mCSB_"+n.idx+"_container").parent();o.bind("scroll."+r,function(){(0!==o.scrollTop()||0!==o.scrollLeft())&&t(".mCSB_"+n.idx+"_scrollbar").css("visibility","hidden")})},H=function(){var e=t(this),n=e.data(i),r=n.opt,o=n.sequential,a=i+"_"+n.idx,s=".mCSB_"+n.idx+"_scrollbar",l=t(s+">a");l.bind("mousedown."+a+" touchstart."+a+" pointerdown."+a+" MSPointerDown."+a+" mouseup."+a+" touchend."+a+" pointerup."+a+" MSPointerUp."+a+" mouseout."+a+" pointerout."+a+" MSPointerOut."+a+" click."+a,function(i){function a(t,n){o.scrollAmount=r.snapAmount||r.scrollButtons.scrollAmount,W(e,t,n)}if(i.preventDefault(),Q(i)){var s=t(this).attr("class");switch(o.type=r.scrollButtons.scrollType,i.type){case"mousedown":case"touchstart":case"pointerdown":case"MSPointerDown":if("stepped"===o.type)return;c=!0,n.tweenRunning=!1,a("on",s);break;case"mouseup":case"touchend":case"pointerup":case"MSPointerUp":case"mouseout":case"pointerout":case"MSPointerOut":if("stepped"===o.type)return;c=!1,o.dir&&a("off",s);break;case"click":if("stepped"!==o.type||n.tweenRunning)return;a("on",s)}}})},B=function(){function e(e){function i(t,e){a.type=o.keyboard.scrollType,a.scrollAmount=o.snapAmount||o.keyboard.scrollAmount,"stepped"===a.type&&r.tweenRunning||W(n,t,e)}switch(e.type){case"blur":r.tweenRunning&&a.dir&&i("off",null);break;case"keydown":case"keyup":var s=e.keyCode?e.keyCode:e.which,l="on";if("x"!==o.axis&&(38===s||40===s)||"y"!==o.axis&&(37===s||39===s)){if((38===s||40===s)&&!r.overflowed[0]||(37===s||39===s)&&!r.overflowed[1])return;"keyup"===e.type&&(l="off"),t(document.activeElement).is(h)||(e.preventDefault(),e.stopImmediatePropagation(),i(l,s))}else if(33===s||34===s){if((r.overflowed[0]||r.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type){V(n);var d=34===s?-1:1;if("x"===o.axis||"yx"===o.axis&&r.overflowed[1]&&!r.overflowed[0])var f="x",p=Math.abs(c[0].offsetLeft)-.9*d*u.width();else var f="y",p=Math.abs(c[0].offsetTop)-.9*d*u.height();X(n,p.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}else if((35===s||36===s)&&!t(document.activeElement).is(h)&&((r.overflowed[0]||r.overflowed[1])&&(e.preventDefault(),e.stopImmediatePropagation()),"keyup"===e.type)){if("x"===o.axis||"yx"===o.axis&&r.overflowed[1]&&!r.overflowed[0])var f="x",p=35===s?Math.abs(u.width()-c.outerWidth(!1)):0;else var f="y",p=35===s?Math.abs(u.height()-c.outerHeight(!1)):0;X(n,p.toString(),{dir:f,scrollEasing:"mcsEaseInOut"})}}}var n=t(this),r=n.data(i),o=r.opt,a=r.sequential,s=i+"_"+r.idx,l=t("#mCSB_"+r.idx),c=t("#mCSB_"+r.idx+"_container"),u=c.parent(),h="input,textarea,select,datalist,keygen,[contenteditable='true']",d=c.find("iframe"),f=["blur."+s+" keydown."+s+" keyup."+s];d.length&&d.each(function(){t(this).load(function(){N(this)&&t(this.contentDocument||this.contentWindow.document).bind(f[0],function(t){e(t)})})}),l.attr("tabindex","0").bind(f[0],function(t){e(t)})},W=function(e,n,r,o,a){function s(t){var n="stepped"!==d.type,i=a?a:t?n?m/1.5:g:1e3/60,r=t?n?7.5:40:2.5,l=[Math.abs(f[0].offsetTop),Math.abs(f[0].offsetLeft)],u=[c.scrollRatio.y>10?10:c.scrollRatio.y,c.scrollRatio.x>10?10:c.scrollRatio.x],h="x"===d.dir[0]?l[1]+d.dir[1]*u[1]*r:l[0]+d.dir[1]*u[0]*r,p="x"===d.dir[0]?l[1]+d.dir[1]*parseInt(d.scrollAmount):l[0]+d.dir[1]*parseInt(d.scrollAmount),v="auto"!==d.scrollAmount?p:h,b=o?o:t?n?"mcsLinearOut":"mcsEaseInOut":"mcsLinear",y=t?!0:!1;return t&&17>i&&(v="x"===d.dir[0]?l[1]:l[0]),X(e,v.toString(),{dir:d.dir[0],scrollEasing:b,dur:i,onComplete:y}),t?void(d.dir=!1):(clearTimeout(d.step),void(d.step=setTimeout(function(){s()},i)))}function l(){clearTimeout(d.step),J(d,"step"),V(e)}var c=e.data(i),h=c.opt,d=c.sequential,f=t("#mCSB_"+c.idx+"_container"),p="stepped"===d.type?!0:!1,m=h.scrollInertia<26?26:h.scrollInertia,g=h.scrollInertia<1?17:h.scrollInertia;switch(n){case"on":if(d.dir=[r===u[16]||r===u[15]||39===r||37===r?"x":"y",r===u[13]||r===u[15]||38===r||37===r?-1:1],V(e),et(r)&&"stepped"===d.type)return;s(p);break;case"off":l(),(p||c.tweenRunning&&d.dir)&&s(!0)}},z=function(e){var n=t(this).data(i).opt,r=[];return"function"==typeof e&&(e=e()),e instanceof Array?r=e.length>1?[e[0],e[1]]:"x"===n.axis?[null,e[0]]:[e[0],null]:(r[0]=e.y?e.y:e.x||"x"===n.axis?null:e,r[1]=e.x?e.x:e.y||"y"===n.axis?null:e),"function"==typeof r[0]&&(r[0]=r[0]()),"function"==typeof r[1]&&(r[1]=r[1]()),r},U=function(e,n){if(null!=e&&"undefined"!=typeof e){var r=t(this),o=r.data(i),a=o.opt,s=t("#mCSB_"+o.idx+"_container"),l=s.parent(),c=typeof e;n||(n="x"===a.axis?"x":"y");var u="x"===n?s.outerWidth(!1):s.outerHeight(!1),d="x"===n?s[0].offsetLeft:s[0].offsetTop,f="x"===n?"left":"top";switch(c){case"function":return e();case"object":var p=e.jquery?e:t(e);if(!p.length)return;return"x"===n?nt(p)[1]:nt(p)[0];case"string":case"number":if(et(e))return Math.abs(e);if(-1!==e.indexOf("%"))return Math.abs(u*parseInt(e)/100);if(-1!==e.indexOf("-="))return Math.abs(d-parseInt(e.split("-=")[1]));if(-1!==e.indexOf("+=")){var m=d+parseInt(e.split("+=")[1]);return m>=0?0:Math.abs(m)}if(-1!==e.indexOf("px")&&et(e.split("px")[0]))return Math.abs(e.split("px")[0]);if("top"===e||"left"===e)return 0;if("bottom"===e)return Math.abs(l.height()-s.outerHeight(!1));if("right"===e)return Math.abs(l.width()-s.outerWidth(!1));if("first"===e||"last"===e){var p=s.find(":"+e);return"x"===n?nt(p)[1]:nt(p)[0]}return t(e).length?"x"===n?nt(t(e))[1]:nt(t(e))[0]:(s.css(f,e),void h.update.call(null,r[0]))}}},Y=function(e){function n(){clearTimeout(f[0].autoUpdate),f[0].autoUpdate=setTimeout(function(){return d.advanced.updateOnSelectorChange&&(p=a(),p!==w)?(s(3),void(w=p)):(d.advanced.updateOnContentResize&&(m=[f.outerHeight(!1),f.outerWidth(!1),v.height(),v.width(),y()[0],y()[1]],(m[0]!==x[0]||m[1]!==x[1]||m[2]!==x[2]||m[3]!==x[3]||m[4]!==x[4]||m[5]!==x[5])&&(s(m[0]!==x[0]||m[1]!==x[1]),x=m)),d.advanced.updateOnImageLoad&&(g=r(),g!==C&&(f.find("img").each(function(){o(this)}),C=g)),void((d.advanced.updateOnSelectorChange||d.advanced.updateOnContentResize||d.advanced.updateOnImageLoad)&&n()))},60)}function r(){var t=0;return d.advanced.updateOnImageLoad&&(t=f.find("img").length),t}function o(e){function n(t,e){return function(){return e.apply(t,arguments)}}function i(){this.onload=null,t(e).addClass(u[2]),s(2)}if(t(e).hasClass(u[2]))return void s();var r=new Image;r.onload=n(r,i),r.src=e.src}function a(){d.advanced.updateOnSelectorChange===!0&&(d.advanced.updateOnSelectorChange="*");var e=0,n=f.find(d.advanced.updateOnSelectorChange);return d.advanced.updateOnSelectorChange&&n.length>0&&n.each(function(){e+=t(this).height()+t(this).width()}),e}function s(t){clearTimeout(f[0].autoUpdate),h.update.call(null,l[0],t)}var l=t(this),c=l.data(i),d=c.opt,f=t("#mCSB_"+c.idx+"_container");if(e)return clearTimeout(f[0].autoUpdate),void J(f[0],"autoUpdate");var p,m,g,v=f.parent(),b=[t("#mCSB_"+c.idx+"_scrollbar_vertical"),t("#mCSB_"+c.idx+"_scrollbar_horizontal")],y=function(){return[b[0].is(":visible")?b[0].outerHeight(!0):0,b[1].is(":visible")?b[1].outerWidth(!0):0]},w=a(),x=[f.outerHeight(!1),f.outerWidth(!1),v.height(),v.width(),y()[0],y()[1]],C=r();n()},q=function(t,e,n){return Math.round(t/e)*e-n},V=function(e){var n=e.data(i),r=t("#mCSB_"+n.idx+"_container,#mCSB_"+n.idx+"_container_wrapper,#mCSB_"+n.idx+"_dragger_vertical,#mCSB_"+n.idx+"_dragger_horizontal");r.each(function(){Z.call(this)})},X=function(e,n,r){function o(t){return l&&c.callbacks[t]&&"function"==typeof c.callbacks[t]}function a(){return[c.callbacks.alwaysTriggerOffsets||y>=w[0]+C,c.callbacks.alwaysTriggerOffsets||-_>=y]}function s(){var t=[f[0].offsetTop,f[0].offsetLeft],n=[v[0].offsetTop,v[0].offsetLeft],i=[f.outerHeight(!1),f.outerWidth(!1)],o=[d.height(),d.width()];e[0].mcs={content:f,top:t[0],left:t[1],draggerTop:n[0],draggerLeft:n[1],topPct:Math.round(100*Math.abs(t[0])/(Math.abs(i[0])-o[0])),leftPct:Math.round(100*Math.abs(t[1])/(Math.abs(i[1])-o[1])),direction:r.dir}}var l=e.data(i),c=l.opt,u={trigger:"internal",dir:"y",scrollEasing:"mcsEaseOut",drag:!1,dur:c.scrollInertia,overwrite:"all",callbacks:!0,onStart:!0,onUpdate:!0,onComplete:!0},r=t.extend(u,r),h=[r.dur,r.drag?0:r.dur],d=t("#mCSB_"+l.idx),f=t("#mCSB_"+l.idx+"_container"),p=f.parent(),m=c.callbacks.onTotalScrollOffset?z.call(e,c.callbacks.onTotalScrollOffset):[0,0],g=c.callbacks.onTotalScrollBackOffset?z.call(e,c.callbacks.onTotalScrollBackOffset):[0,0];if(l.trigger=r.trigger,(0!==p.scrollTop()||0!==p.scrollLeft())&&(t(".mCSB_"+l.idx+"_scrollbar").css("visibility","visible"),p.scrollTop(0).scrollLeft(0)),"_resetY"!==n||l.contentReset.y||(o("onOverflowYNone")&&c.callbacks.onOverflowYNone.call(e[0]),l.contentReset.y=1),"_resetX"!==n||l.contentReset.x||(o("onOverflowXNone")&&c.callbacks.onOverflowXNone.call(e[0]),l.contentReset.x=1),"_resetY"!==n&&"_resetX"!==n){switch(!l.contentReset.y&&e[0].mcs||!l.overflowed[0]||(o("onOverflowY")&&c.callbacks.onOverflowY.call(e[0]),l.contentReset.x=null),!l.contentReset.x&&e[0].mcs||!l.overflowed[1]||(o("onOverflowX")&&c.callbacks.onOverflowX.call(e[0]),l.contentReset.x=null),c.snapAmount&&(n=q(n,c.snapAmount,c.snapOffset)),r.dir){case"x":var v=t("#mCSB_"+l.idx+"_dragger_horizontal"),b="left",y=f[0].offsetLeft,w=[d.width()-f.outerWidth(!1),v.parent().width()-v.width()],x=[n,0===n?0:n/l.scrollRatio.x],C=m[1],_=g[1],S=C>0?C/l.scrollRatio.x:0,E=_>0?_/l.scrollRatio.x:0;break;case"y":var v=t("#mCSB_"+l.idx+"_dragger_vertical"),b="top",y=f[0].offsetTop,w=[d.height()-f.outerHeight(!1),v.parent().height()-v.height()],x=[n,0===n?0:n/l.scrollRatio.y],C=m[0],_=g[0],S=C>0?C/l.scrollRatio.y:0,E=_>0?_/l.scrollRatio.y:0}x[1]<0||0===x[0]&&0===x[1]?x=[0,0]:x[1]>=w[1]?x=[w[0],w[1]]:x[0]=-x[0],e[0].mcs||(s(),o("onInit")&&c.callbacks.onInit.call(e[0])),clearTimeout(f[0].onCompleteTimeout),(l.tweenRunning||!(0===y&&x[0]>=0||y===w[0]&&x[0]<=w[0]))&&(G(v[0],b,Math.round(x[1]),h[1],r.scrollEasing),G(f[0],b,Math.round(x[0]),h[0],r.scrollEasing,r.overwrite,{onStart:function(){r.callbacks&&r.onStart&&!l.tweenRunning&&(o("onScrollStart")&&(s(),c.callbacks.onScrollStart.call(e[0])),l.tweenRunning=!0,$(v),l.cbOffsets=a())},onUpdate:function(){r.callbacks&&r.onUpdate&&o("whileScrolling")&&(s(),c.callbacks.whileScrolling.call(e[0]))},onComplete:function(){if(r.callbacks&&r.onComplete){"yx"===c.axis&&clearTimeout(f[0].onCompleteTimeout);var t=f[0].idleTimer||0;f[0].onCompleteTimeout=setTimeout(function(){o("onScroll")&&(s(),c.callbacks.onScroll.call(e[0])),o("onTotalScroll")&&x[1]>=w[1]-S&&l.cbOffsets[0]&&(s(),c.callbacks.onTotalScroll.call(e[0])),o("onTotalScrollBack")&&x[1]<=E&&l.cbOffsets[1]&&(s(),c.callbacks.onTotalScrollBack.call(e[0])),l.tweenRunning=!1,f[0].idleTimer=0,$(v,"hide")},t)}}}))}},G=function(t,e,n,i,r,o,a){function s(){x.stop||(b||p.call(),b=K()-v,l(),b>=x.time&&(x.time=b>x.time?b+d-(b-x.time):b+d-1,x.time<b+1&&(x.time=b+1)),x.time<i?x.id=f(s):g.call())}function l(){i>0?(x.currVal=h(x.time,y,C,i,r),w[e]=Math.round(x.currVal)+"px"):w[e]=n+"px",m.call()}function c(){d=1e3/60,x.time=b+d,f=window.requestAnimationFrame?window.requestAnimationFrame:function(t){return l(),setTimeout(t,.01)},x.id=f(s)}function u(){null!=x.id&&(window.requestAnimationFrame?window.cancelAnimationFrame(x.id):clearTimeout(x.id),x.id=null)}function h(t,e,n,i,r){switch(r){case"linear":case"mcsLinear":return n*t/i+e;case"mcsLinearOut":return t/=i,t--,n*Math.sqrt(1-t*t)+e;case"easeInOutSmooth":return t/=i/2,1>t?n/2*t*t+e:(t--,-n/2*(t*(t-2)-1)+e);case"easeInOutStrong":return t/=i/2,1>t?n/2*Math.pow(2,10*(t-1))+e:(t--,n/2*(-Math.pow(2,-10*t)+2)+e);case"easeInOut":case"mcsEaseInOut":return t/=i/2,1>t?n/2*t*t*t+e:(t-=2,n/2*(t*t*t+2)+e);case"easeOutSmooth":return t/=i,t--,-n*(t*t*t*t-1)+e;case"easeOutStrong":return n*(-Math.pow(2,-10*t/i)+1)+e;case"easeOut":case"mcsEaseOut":default:var o=(t/=i)*t,a=o*t;return e+n*(.499999999999997*a*o+-2.5*o*o+5.5*a+-6.5*o+4*t)}}t._mTween||(t._mTween={top:{},left:{}});var d,f,a=a||{},p=a.onStart||function(){},m=a.onUpdate||function(){},g=a.onComplete||function(){},v=K(),b=0,y=t.offsetTop,w=t.style,x=t._mTween[e];"left"===e&&(y=t.offsetLeft);var C=n-y;x.stop=0,"none"!==o&&u(),c()},K=function(){return window.performance&&window.performance.now?window.performance.now():window.performance&&window.performance.webkitNow?window.performance.webkitNow():Date.now?Date.now():(new Date).getTime()},Z=function(){var t=this;t._mTween||(t._mTween={top:{},left:{}});for(var e=["top","left"],n=0;n<e.length;n++){var i=e[n];t._mTween[i].id&&(window.requestAnimationFrame?window.cancelAnimationFrame(t._mTween[i].id):clearTimeout(t._mTween[i].id),t._mTween[i].id=null,t._mTween[i].stop=1)}},J=function(t,e){try{delete t[e]}catch(n){t[e]=null}},Q=function(t){return!(t.which&&1!==t.which)},tt=function(t){var e=t.originalEvent.pointerType;return!(e&&"touch"!==e&&2!==e)},et=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},nt=function(t){var e=t.parents(".mCSB_container");return[t.offset().top-e.offset().top,t.offset().left-e.offset().left]};t.fn[n]=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):h.init.apply(this,arguments)},t[n]=function(e){return h[e]?h[e].apply(this,Array.prototype.slice.call(arguments,1)):"object"!=typeof e&&e?void t.error("Method "+e+" does not exist"):h.init.apply(this,arguments)},t[n].defaults=o,window[n]=!0,t(window).load(function(){t(r)[n](),t.extend(t.expr[":"],{mcsInView:t.expr[":"].mcsInView||function(e){var n,i,r=t(e),o=r.parents(".mCSB_container");return o.length?(n=o.parent(),i=[o[0].offsetTop,o[0].offsetLeft],i[0]+nt(r)[0]>=0&&i[0]+nt(r)[0]<n.height()-r.outerHeight(!1)&&i[1]+nt(r)[1]>=0&&i[1]+nt(r)[1]<n.width()-r.outerWidth(!1)):void 0},mcsOverflow:t.expr[":"].mcsOverflow||function(e){var n=t(e).data(i);return n?n.overflowed[0]||n.overflowed[1]:void 0}})})})});var fabric=fabric||{version:"1.5.0"};"undefined"!=typeof exports&&(exports.fabric=fabric),"undefined"!=typeof document&&"undefined"!=typeof window?(fabric.document=document,fabric.window=window,window.fabric=fabric):(fabric.document=require("jsdom").jsdom("<!DOCTYPE html><html><head></head><body></body></html>"),fabric.window=fabric.document.createWindow?fabric.document.createWindow():fabric.document.parentWindow),fabric.isTouchSupported="ontouchstart"in fabric.document.documentElement,fabric.isLikelyNode="undefined"!=typeof Buffer&&"undefined"==typeof window,fabric.SHARED_ATTRIBUTES=["display","transform","fill","fill-opacity","fill-rule","opacity","stroke","stroke-dasharray","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke-width"],fabric.DPI=96,fabric.reNum="(?:[-+]?(?:\\d+|\\d*\\.\\d+)(?:e[-+]?\\d+)?)",function(){function t(t,e){this.__eventListeners[t]&&(e?fabric.util.removeFromArray(this.__eventListeners[t],e):this.__eventListeners[t].length=0)}function e(t,e){if(this.__eventListeners||(this.__eventListeners={}),1===arguments.length)for(var n in t)this.on(n,t[n]);else this.__eventListeners[t]||(this.__eventListeners[t]=[]),this.__eventListeners[t].push(e);return this}function n(e,n){if(this.__eventListeners){if(0===arguments.length)this.__eventListeners={};else if(1===arguments.length&&"object"==typeof arguments[0])for(var i in e)t.call(this,i,e[i]);else t.call(this,e,n);return this}}function i(t,e){if(this.__eventListeners){var n=this.__eventListeners[t];if(n){for(var i=0,r=n.length;r>i;i++)n[i].call(this,e||{});return this}}}fabric.Observable={observe:e,stopObserving:n,fire:i,on:e,off:n,trigger:i}}(),fabric.Collection={add:function(){this._objects.push.apply(this._objects,arguments);for(var t=0,e=arguments.length;e>t;t++)this._onObjectAdded(arguments[t]);return this.renderOnAddRemove&&this.renderAll(),this},insertAt:function(t,e,n){var i=this.getObjects();return n?i[e]=t:i.splice(e,0,t),this._onObjectAdded(t),this.renderOnAddRemove&&this.renderAll(),this},remove:function(){for(var t,e=this.getObjects(),n=0,i=arguments.length;i>n;n++)t=e.indexOf(arguments[n]),-1!==t&&(e.splice(t,1),this._onObjectRemoved(arguments[n]));return this.renderOnAddRemove&&this.renderAll(),this},forEachObject:function(t,e){for(var n=this.getObjects(),i=n.length;i--;)t.call(e,n[i],i,n);return this},getObjects:function(t){return"undefined"==typeof t?this._objects:this._objects.filter(function(e){return e.type===t})},item:function(t){return this.getObjects()[t]},isEmpty:function(){return 0===this.getObjects().length},size:function(){return this.getObjects().length},contains:function(t){return this.getObjects().indexOf(t)>-1},complexity:function(){return this.getObjects().reduce(function(t,e){return t+=e.complexity?e.complexity():0},0)}},function(t){var e=Math.sqrt,n=Math.atan2,i=Math.PI/180;fabric.util={removeFromArray:function(t,e){var n=t.indexOf(e);return-1!==n&&t.splice(n,1),t},getRandomInt:function(t,e){return Math.floor(Math.random()*(e-t+1))+t},degreesToRadians:function(t){return t*i},radiansToDegrees:function(t){return t/i},rotatePoint:function(t,e,n){var i=Math.sin(n),r=Math.cos(n);t.subtractEquals(e);var o=t.x*r-t.y*i,a=t.x*i+t.y*r;return new fabric.Point(o,a).addEquals(e)},transformPoint:function(t,e,n){return n?new fabric.Point(e[0]*t.x+e[2]*t.y,e[1]*t.x+e[3]*t.y):new fabric.Point(e[0]*t.x+e[2]*t.y+e[4],e[1]*t.x+e[3]*t.y+e[5])},invertTransform:function(t){var e=t.slice(),n=1/(t[0]*t[3]-t[1]*t[2]);e=[n*t[3],-n*t[1],-n*t[2],n*t[0],0,0];var i=fabric.util.transformPoint({x:t[4],y:t[5]},e);return e[4]=-i.x,e[5]=-i.y,e},toFixed:function(t,e){return parseFloat(Number(t).toFixed(e))},parseUnit:function(t,e){var n=/\D{0,2}$/.exec(t),i=parseFloat(t);switch(e||(e=fabric.Text.DEFAULT_SVG_FONT_SIZE),n[0]){case"mm":return i*fabric.DPI/25.4;case"cm":return i*fabric.DPI/2.54;case"in":return i*fabric.DPI;case"pt":return i*fabric.DPI/72;case"pc":return i*fabric.DPI/72*12;case"em":return i*e;default:return i}},falseFunction:function(){return!1},getKlass:function(t,e){return t=fabric.util.string.camelize(t.charAt(0).toUpperCase()+t.slice(1)),fabric.util.resolveNamespace(e)[t]},resolveNamespace:function(e){if(!e)return fabric;for(var n=e.split("."),i=n.length,r=t||fabric.window,o=0;i>o;++o)r=r[n[o]];return r},loadImage:function(t,e,n,i){if(!t)return void(e&&e.call(n,t));var r=fabric.util.createImage();r.onload=function(){e&&e.call(n,r),r=r.onload=r.onerror=null},r.onerror=function(){fabric.log("Error loading "+r.src),e&&e.call(n,null,!0),r=r.onload=r.onerror=null},0!==t.indexOf("data")&&"undefined"!=typeof i&&(r.crossOrigin=i),r.src=t},enlivenObjects:function(t,e,n,i){function r(){++a===s&&e&&e(o)}t=t||[];var o=[],a=0,s=t.length;return s?void t.forEach(function(t,e){if(!t||!t.type)return void r();var a=fabric.util.getKlass(t.type,n);a.async?a.fromObject(t,function(n,a){a||(o[e]=n,i&&i(t,o[e])),r()}):(o[e]=a.fromObject(t),i&&i(t,o[e]),r())}):void(e&&e(o))},groupSVGElements:function(t,e,n){var i;return i=new fabric.PathGroup(t,e),"undefined"!=typeof n&&i.setSourcePath(n),i},populateWithProperties:function(t,e,n){if(n&&"[object Array]"===Object.prototype.toString.call(n))for(var i=0,r=n.length;r>i;i++)n[i]in t&&(e[n[i]]=t[n[i]])},drawDashedLine:function(t,i,r,o,a,s){var l=o-i,c=a-r,u=e(l*l+c*c),h=n(c,l),d=s.length,f=0,p=!0;for(t.save(),t.translate(i,r),t.moveTo(0,0),t.rotate(h),i=0;u>i;)i+=s[f++%d],i>u&&(i=u),t[p?"lineTo":"moveTo"](i,0),p=!p;t.restore()},createCanvasElement:function(t){return t||(t=fabric.document.createElement("canvas")),t.getContext||"undefined"==typeof G_vmlCanvasManager||G_vmlCanvasManager.initElement(t),t},createImage:function(){return fabric.isLikelyNode?new(require("canvas").Image):fabric.document.createElement("img")},createAccessors:function(t){for(var e=t.prototype,n=e.stateProperties.length;n--;){var i=e.stateProperties[n],r=i.charAt(0).toUpperCase()+i.slice(1),o="set"+r,a="get"+r;e[a]||(e[a]=function(t){return new Function('return this.get("'+t+'")')}(i)),e[o]||(e[o]=function(t){return new Function("value",'return this.set("'+t+'", value)')}(i))}},clipContext:function(t,e){e.save(),e.beginPath(),t.clipTo(e),e.clip()},multiplyTransformMatrices:function(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]},getFunctionBody:function(t){return(String(t).match(/function[^{]*\{([\s\S]*)\}/)||{})[1]},isTransparent:function(t,e,n,i){i>0&&(e>i?e-=i:e=0,n>i?n-=i:n=0);for(var r=!0,o=t.getImageData(e,n,2*i||1,2*i||1),a=3,s=o.data.length;s>a;a+=4){var l=o.data[a];if(r=0>=l,r===!1)break}return o=null,r}}}("undefined"!=typeof exports?exports:this),function(){function t(t,i,o,a,l,c,u){var h=s.call(arguments);if(r[h])return r[h];var d=Math.PI,f=u*d/180,p=Math.sin(f),m=Math.cos(f),g=0,v=0;o=Math.abs(o),a=Math.abs(a);var b=-m*t*.5-p*i*.5,y=-m*i*.5+p*t*.5,w=o*o,x=a*a,C=y*y,_=b*b,$=w*x-w*C-x*_,S=0;if(0>$){var E=Math.sqrt(1-$/(w*x));o*=E,a*=E}else S=(l===c?-1:1)*Math.sqrt($/(w*C+x*_));var T=S*o*y/a,k=-S*a*b/o,A=m*T-p*k+.5*t,M=p*T+m*k+.5*i,O=n(1,0,(b-T)/o,(y-k)/a),P=n((b-T)/o,(y-k)/a,(-b-T)/o,(-y-k)/a);0===c&&P>0?P-=2*d:1===c&&0>P&&(P+=2*d);for(var I=Math.ceil(Math.abs(P/d*2)),D=[],N=P/I,L=8/3*Math.sin(N/4)*Math.sin(N/4)/Math.sin(N/2),F=O+N,j=0;I>j;j++)D[j]=e(O,F,m,p,o,a,A,M,L,g,v),g=D[j][4],v=D[j][5],O=F,F+=N;return r[h]=D,D}function e(t,e,n,i,r,a,l,c,u,h,d){var f=s.call(arguments);if(o[f])return o[f];var p=Math.cos(t),m=Math.sin(t),g=Math.cos(e),v=Math.sin(e),b=n*r*g-i*a*v+l,y=i*r*g+n*a*v+c,w=h+u*(-n*r*m-i*a*p),x=d+u*(-i*r*m+n*a*p),C=b+u*(n*r*v+i*a*g),_=y+u*(i*r*v-n*a*g);return o[f]=[w,x,C,_,b,y],o[f]}function n(t,e,n,i){var r=Math.atan2(e,t),o=Math.atan2(i,n);return o>=r?o-r:2*Math.PI-(r-o)}function i(t,e,n,i,r,o,l,c){var u=s.call(arguments);if(a[u])return a[u];var h,d,f,p,m,g,v,b,y=Math.sqrt,w=Math.min,x=Math.max,C=Math.abs,_=[],$=[[],[]];d=6*t-12*n+6*r,h=-3*t+9*n-9*r+3*l,f=3*n-3*t;for(var S=0;2>S;++S)if(S>0&&(d=6*e-12*i+6*o,h=-3*e+9*i-9*o+3*c,f=3*i-3*e),C(h)<1e-12){if(C(d)<1e-12)continue;p=-f/d,p>0&&1>p&&_.push(p)}else v=d*d-4*f*h,0>v||(b=y(v),m=(-d+b)/(2*h),m>0&&1>m&&_.push(m),g=(-d-b)/(2*h),g>0&&1>g&&_.push(g));for(var E,T,k,A=_.length,M=A;A--;)p=_[A],k=1-p,E=k*k*k*t+3*k*k*p*n+3*k*p*p*r+p*p*p*l,$[0][A]=E,T=k*k*k*e+3*k*k*p*i+3*k*p*p*o+p*p*p*c,$[1][A]=T;$[0][M]=t,$[1][M]=e,$[0][M+1]=l,$[1][M+1]=c;var O=[{x:w.apply(null,$[0]),y:w.apply(null,$[1])},{x:x.apply(null,$[0]),y:x.apply(null,$[1])}];return a[u]=O,O}var r={},o={},a={},s=Array.prototype.join;fabric.util.drawArc=function(e,n,i,r){for(var o=r[0],a=r[1],s=r[2],l=r[3],c=r[4],u=r[5],h=r[6],d=[[],[],[],[]],f=t(u-n,h-i,o,a,l,c,s),p=0,m=f.length;m>p;p++)d[p][0]=f[p][0]+n,d[p][1]=f[p][1]+i,d[p][2]=f[p][2]+n,d[p][3]=f[p][3]+i,d[p][4]=f[p][4]+n,d[p][5]=f[p][5]+i,e.bezierCurveTo.apply(e,d[p])},fabric.util.getBoundsOfArc=function(e,n,r,o,a,s,l,c,u){for(var h=0,d=0,f=[],p=[],m=t(c-e,u-n,r,o,s,l,a),g=[[],[]],v=0,b=m.length;b>v;v++)f=i(h,d,m[v][0],m[v][1],m[v][2],m[v][3],m[v][4],m[v][5]),g[0].x=f[0].x+e,g[0].y=f[0].y+n,g[1].x=f[1].x+e,g[1].y=f[1].y+n,p.push(g[0]),p.push(g[1]),h=m[v][4],d=m[v][5];return p},fabric.util.getBoundsOfCurve=i}(),function(){function t(t,e){for(var n=r.call(arguments,2),i=[],o=0,a=t.length;a>o;o++)i[o]=n.length?t[o][e].apply(t[o],n):t[o][e].call(t[o]);return i}function e(t,e){return i(t,e,function(t,e){return t>=e})}function n(t,e){return i(t,e,function(t,e){return e>t})}function i(t,e,n){if(t&&0!==t.length){var i=t.length-1,r=e?t[i][e]:t[i];if(e)for(;i--;)n(t[i][e],r)&&(r=t[i][e]);else for(;i--;)n(t[i],r)&&(r=t[i]);return r}}var r=Array.prototype.slice;Array.prototype.indexOf||(Array.prototype.indexOf=function(t){if(void 0===this||null===this)throw new TypeError;var e=Object(this),n=e.length>>>0;if(0===n)return-1;var i=0;if(arguments.length>0&&(i=Number(arguments[1]),i!==i?i=0:0!==i&&i!==Number.POSITIVE_INFINITY&&i!==Number.NEGATIVE_INFINITY&&(i=(i>0||-1)*Math.floor(Math.abs(i)))),i>=n)return-1;for(var r=i>=0?i:Math.max(n-Math.abs(i),0);n>r;r++)if(r in e&&e[r]===t)return r;return-1}),Array.prototype.forEach||(Array.prototype.forEach=function(t,e){for(var n=0,i=this.length>>>0;i>n;n++)n in this&&t.call(e,this[n],n,this)}),Array.prototype.map||(Array.prototype.map=function(t,e){for(var n=[],i=0,r=this.length>>>0;r>i;i++)i in this&&(n[i]=t.call(e,this[i],i,this));return n}),Array.prototype.every||(Array.prototype.every=function(t,e){for(var n=0,i=this.length>>>0;i>n;n++)if(n in this&&!t.call(e,this[n],n,this))return!1;

return!0}),Array.prototype.some||(Array.prototype.some=function(t,e){for(var n=0,i=this.length>>>0;i>n;n++)if(n in this&&t.call(e,this[n],n,this))return!0;return!1}),Array.prototype.filter||(Array.prototype.filter=function(t,e){for(var n,i=[],r=0,o=this.length>>>0;o>r;r++)r in this&&(n=this[r],t.call(e,n,r,this)&&i.push(n));return i}),Array.prototype.reduce||(Array.prototype.reduce=function(t){var e,n=this.length>>>0,i=0;if(arguments.length>1)e=arguments[1];else for(;;){if(i in this){e=this[i++];break}if(++i>=n)throw new TypeError}for(;n>i;i++)i in this&&(e=t.call(null,e,this[i],i,this));return e}),fabric.util.array={invoke:t,min:n,max:e}}(),function(){function t(t,e){for(var n in e)t[n]=e[n];return t}function e(e){return t({},e)}fabric.util.object={extend:t,clone:e}}(),function(){function t(t){return t.replace(/-+(.)?/g,function(t,e){return e?e.toUpperCase():""})}function e(t,e){return t.charAt(0).toUpperCase()+(e?t.slice(1):t.slice(1).toLowerCase())}function n(t){return t.replace(/&/g,"&amp;").replace(/"/g,"&quot;").replace(/'/g,"&apos;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^[\s\xA0]+/,"").replace(/[\s\xA0]+$/,"")}),fabric.util.string={camelize:t,capitalize:e,escapeXml:n}}(),function(){var t=Array.prototype.slice,e=Function.prototype.apply,n=function(){};Function.prototype.bind||(Function.prototype.bind=function(i){var r,o=this,a=t.call(arguments,1);return r=a.length?function(){return e.call(o,this instanceof n?this:i,a.concat(t.call(arguments)))}:function(){return e.call(o,this instanceof n?this:i,arguments)},n.prototype=this.prototype,r.prototype=new n,r})}(),function(){function t(){}function e(t){var e=this.constructor.superclass.prototype[t];return arguments.length>1?e.apply(this,i.call(arguments,1)):e.call(this)}function n(){function n(){this.initialize.apply(this,arguments)}var o=null,s=i.call(arguments,0);"function"==typeof s[0]&&(o=s.shift()),n.superclass=o,n.subclasses=[],o&&(t.prototype=o.prototype,n.prototype=new t,o.subclasses.push(n));for(var l=0,c=s.length;c>l;l++)a(n,s[l],o);return n.prototype.initialize||(n.prototype.initialize=r),n.prototype.constructor=n,n.prototype.callSuper=e,n}var i=Array.prototype.slice,r=function(){},o=function(){for(var t in{toString:1})if("toString"===t)return!1;return!0}(),a=function(t,e,n){for(var i in e)t.prototype[i]=i in t.prototype&&"function"==typeof t.prototype[i]&&(e[i]+"").indexOf("callSuper")>-1?function(t){return function(){var i=this.constructor.superclass;this.constructor.superclass=n;var r=e[t].apply(this,arguments);return this.constructor.superclass=i,"initialize"!==t?r:void 0}}(i):e[i],o&&(e.toString!==Object.prototype.toString&&(t.prototype.toString=e.toString),e.valueOf!==Object.prototype.valueOf&&(t.prototype.valueOf=e.valueOf))};fabric.util.createClass=n}(),function(){function t(t){var e,n,i=Array.prototype.slice.call(arguments,1),r=i.length;for(n=0;r>n;n++)if(e=typeof t[i[n]],!/^(?:function|object|unknown)$/.test(e))return!1;return!0}function e(t,e){return{handler:e,wrappedHandler:n(t,e)}}function n(t,e){return function(n){e.call(a(t),n||fabric.window.event)}}function i(t,e){return function(n){if(m[t]&&m[t][e])for(var i=m[t][e],r=0,o=i.length;o>r;r++)i[r].call(this,n||fabric.window.event)}}function r(t,e){t||(t=fabric.window.event);var n=t.target||(typeof t.srcElement!==l?t.srcElement:null),i=fabric.util.getScrollLeftTop(n,e);return{x:g(t)+i.left,y:v(t)+i.top}}function o(t,e,n){var i="touchend"===t.type?"changedTouches":"touches";return t[i]&&t[i][0]?t[i][0][e]-(t[i][0][e]-t[i][0][n])||t[n]:t[n]}var a,s,l="unknown",c=function(){var t=0;return function(e){return e.__uniqueID||(e.__uniqueID="uniqueID__"+t++)}}();!function(){var t={};a=function(e){return t[e]},s=function(e,n){t[e]=n}}();var u,h,d=t(fabric.document.documentElement,"addEventListener","removeEventListener")&&t(fabric.window,"addEventListener","removeEventListener"),f=t(fabric.document.documentElement,"attachEvent","detachEvent")&&t(fabric.window,"attachEvent","detachEvent"),p={},m={};d?(u=function(t,e,n){t.addEventListener(e,n,!1)},h=function(t,e,n){t.removeEventListener(e,n,!1)}):f?(u=function(t,n,i){var r=c(t);s(r,t),p[r]||(p[r]={}),p[r][n]||(p[r][n]=[]);var o=e(r,i);p[r][n].push(o),t.attachEvent("on"+n,o.wrappedHandler)},h=function(t,e,n){var i,r=c(t);if(p[r]&&p[r][e])for(var o=0,a=p[r][e].length;a>o;o++)i=p[r][e][o],i&&i.handler===n&&(t.detachEvent("on"+e,i.wrappedHandler),p[r][e][o]=null)}):(u=function(t,e,n){var r=c(t);if(m[r]||(m[r]={}),!m[r][e]){m[r][e]=[];var o=t["on"+e];o&&m[r][e].push(o),t["on"+e]=i(r,e)}m[r][e].push(n)},h=function(t,e,n){var i=c(t);if(m[i]&&m[i][e])for(var r=m[i][e],o=0,a=r.length;a>o;o++)r[o]===n&&r.splice(o,1)}),fabric.util.addListener=u,fabric.util.removeListener=h;var g=function(t){return typeof t.clientX!==l?t.clientX:0},v=function(t){return typeof t.clientY!==l?t.clientY:0};fabric.isTouchSupported&&(g=function(t){return o(t,"pageX","clientX")},v=function(t){return o(t,"pageY","clientY")}),fabric.util.getPointer=r,fabric.util.object.extend(fabric.util,fabric.Observable)}(),function(){function t(t,e){var n=t.style;if(!n)return t;if("string"==typeof e)return t.style.cssText+=";"+e,e.indexOf("opacity")>-1?o(t,e.match(/opacity:\s*(\d?\.?\d*)/)[1]):t;for(var i in e)if("opacity"===i)o(t,e[i]);else{var r="float"===i||"cssFloat"===i?"undefined"==typeof n.styleFloat?"cssFloat":"styleFloat":i;n[r]=e[i]}return t}var e=fabric.document.createElement("div"),n="string"==typeof e.style.opacity,i="string"==typeof e.style.filter,r=/alpha\s*\(\s*opacity\s*=\s*([^\)]+)\)/,o=function(t){return t};n?o=function(t,e){return t.style.opacity=e,t}:i&&(o=function(t,e){var n=t.style;return t.currentStyle&&!t.currentStyle.hasLayout&&(n.zoom=1),r.test(n.filter)?(e=e>=.9999?"":"alpha(opacity="+100*e+")",n.filter=n.filter.replace(r,e)):n.filter+=" alpha(opacity="+100*e+")",t}),fabric.util.setStyle=t}(),function(){function t(t){return"string"==typeof t?fabric.document.getElementById(t):t}function e(t,e){var n=fabric.document.createElement(t);for(var i in e)"class"===i?n.className=e[i]:"for"===i?n.htmlFor=e[i]:n.setAttribute(i,e[i]);return n}function n(t,e){t&&-1===(" "+t.className+" ").indexOf(" "+e+" ")&&(t.className+=(t.className?" ":"")+e)}function i(t,n,i){return"string"==typeof n&&(n=e(n,i)),t.parentNode&&t.parentNode.replaceChild(n,t),n.appendChild(t),n}function r(t,e){var n,i,r=0,o=0,a=fabric.document.documentElement,s=fabric.document.body||{scrollLeft:0,scrollTop:0};for(i=t;t&&t.parentNode&&!n;)t=t.parentNode,1===t.nodeType&&"fixed"===fabric.util.getElementStyle(t,"position")&&(n=t),1===t.nodeType&&i!==e&&"absolute"===fabric.util.getElementStyle(t,"position")?(r=0,o=0):t===fabric.document?(r=s.scrollLeft||a.scrollLeft||0,o=s.scrollTop||a.scrollTop||0):(r+=t.scrollLeft||0,o+=t.scrollTop||0);return{left:r,top:o}}function o(t){var e,n,i=t&&t.ownerDocument,r={left:0,top:0},o={left:0,top:0},a={borderLeftWidth:"left",borderTopWidth:"top",paddingLeft:"left",paddingTop:"top"};if(!i)return{left:0,top:0};for(var s in a)o[a[s]]+=parseInt(u(t,s),10)||0;return e=i.documentElement,"undefined"!=typeof t.getBoundingClientRect&&(r=t.getBoundingClientRect()),n=fabric.util.getScrollLeftTop(t,null),{left:r.left+n.left-(e.clientLeft||0)+o.left,top:r.top+n.top-(e.clientTop||0)+o.top}}var a,s=Array.prototype.slice,l=function(t){return s.call(t,0)};try{a=l(fabric.document.childNodes)instanceof Array}catch(c){}a||(l=function(t){for(var e=new Array(t.length),n=t.length;n--;)e[n]=t[n];return e});var u;u=fabric.document.defaultView&&fabric.document.defaultView.getComputedStyle?function(t,e){var n=fabric.document.defaultView.getComputedStyle(t,null);return n?n[e]:void 0}:function(t,e){var n=t.style[e];return!n&&t.currentStyle&&(n=t.currentStyle[e]),n},function(){function t(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=fabric.util.falseFunction),i?t.style[i]="none":"string"==typeof t.unselectable&&(t.unselectable="on"),t}function e(t){return"undefined"!=typeof t.onselectstart&&(t.onselectstart=null),i?t.style[i]="":"string"==typeof t.unselectable&&(t.unselectable=""),t}var n=fabric.document.documentElement.style,i="userSelect"in n?"userSelect":"MozUserSelect"in n?"MozUserSelect":"WebkitUserSelect"in n?"WebkitUserSelect":"KhtmlUserSelect"in n?"KhtmlUserSelect":"";fabric.util.makeElementUnselectable=t,fabric.util.makeElementSelectable=e}(),function(){function t(t,e){var n=fabric.document.getElementsByTagName("head")[0],i=fabric.document.createElement("script"),r=!0;i.onload=i.onreadystatechange=function(t){if(r){if("string"==typeof this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState)return;r=!1,e(t||fabric.window.event),i=i.onload=i.onreadystatechange=null}},i.src=t,n.appendChild(i)}fabric.util.getScript=t}(),fabric.util.getById=t,fabric.util.toArray=l,fabric.util.makeElement=e,fabric.util.addClass=n,fabric.util.wrapElement=i,fabric.util.getScrollLeftTop=r,fabric.util.getElementOffset=o,fabric.util.getElementStyle=u}(),function(){function t(t,e){return t+(/\?/.test(t)?"&":"?")+e}function e(){}function n(n,r){r||(r={});var o,a=r.method?r.method.toUpperCase():"GET",s=r.onComplete||function(){},l=i();return l.onreadystatechange=function(){4===l.readyState&&(s(l),l.onreadystatechange=e)},"GET"===a&&(o=null,"string"==typeof r.parameters&&(n=t(n,r.parameters))),l.open(a,n,!0),("POST"===a||"PUT"===a)&&l.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),l.send(o),l}var i=function(){for(var t=[function(){return new ActiveXObject("Microsoft.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP")},function(){return new ActiveXObject("Msxml2.XMLHTTP.3.0")},function(){return new XMLHttpRequest}],e=t.length;e--;)try{var n=t[e]();if(n)return t[e]}catch(i){}}();fabric.util.request=n}(),fabric.log=function(){},fabric.warn=function(){},"undefined"!=typeof console&&["log","warn"].forEach(function(t){"undefined"!=typeof console[t]&&"function"==typeof console[t].apply&&(fabric[t]=function(){return console[t].apply(console,arguments)})}),function(){function t(t){e(function(n){t||(t={});var i,r=n||+new Date,o=t.duration||500,a=r+o,s=t.onChange||function(){},l=t.abort||function(){return!1},c=t.easing||function(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e},u="startValue"in t?t.startValue:0,h="endValue"in t?t.endValue:100,d=t.byValue||h-u;t.onStart&&t.onStart(),function f(n){i=n||+new Date;var h=i>a?o:i-r;return l()?void(t.onComplete&&t.onComplete()):(s(c(h,u,d,o)),i>a?void(t.onComplete&&t.onComplete()):void e(f))}(r)})}function e(){return n.apply(fabric.window,arguments)}var n=fabric.window.requestAnimationFrame||fabric.window.webkitRequestAnimationFrame||fabric.window.mozRequestAnimationFrame||fabric.window.oRequestAnimationFrame||fabric.window.msRequestAnimationFrame||function(t){fabric.window.setTimeout(t,1e3/60)};fabric.util.animate=t,fabric.util.requestAnimFrame=e}(),function(){function t(t,e,n,i){return t<Math.abs(e)?(t=e,i=n/4):i=n/(2*Math.PI)*Math.asin(e/t),{a:t,c:e,p:n,s:i}}function e(t,e,n){return t.a*Math.pow(2,10*(e-=1))*Math.sin(2*(e*n-t.s)*Math.PI/t.p)}function n(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}function i(t,e,n,i){return t/=i/2,1>t?n/2*t*t*t+e:n/2*((t-=2)*t*t+2)+e}function r(t,e,n,i){return n*(t/=i)*t*t*t+e}function o(t,e,n,i){return-n*((t=t/i-1)*t*t*t-1)+e}function a(t,e,n,i){return t/=i/2,1>t?n/2*t*t*t*t+e:-n/2*((t-=2)*t*t*t-2)+e}function s(t,e,n,i){return n*(t/=i)*t*t*t*t+e}function l(t,e,n,i){return n*((t=t/i-1)*t*t*t*t+1)+e}function c(t,e,n,i){return t/=i/2,1>t?n/2*t*t*t*t*t+e:n/2*((t-=2)*t*t*t*t+2)+e}function u(t,e,n,i){return-n*Math.cos(t/i*(Math.PI/2))+n+e}function h(t,e,n,i){return n*Math.sin(t/i*(Math.PI/2))+e}function d(t,e,n,i){return-n/2*(Math.cos(Math.PI*t/i)-1)+e}function f(t,e,n,i){return 0===t?e:n*Math.pow(2,10*(t/i-1))+e}function p(t,e,n,i){return t===i?e+n:n*(-Math.pow(2,-10*t/i)+1)+e}function m(t,e,n,i){return 0===t?e:t===i?e+n:(t/=i/2,1>t?n/2*Math.pow(2,10*(t-1))+e:n/2*(-Math.pow(2,-10*--t)+2)+e)}function g(t,e,n,i){return-n*(Math.sqrt(1-(t/=i)*t)-1)+e}function v(t,e,n,i){return n*Math.sqrt(1-(t=t/i-1)*t)+e}function b(t,e,n,i){return t/=i/2,1>t?-n/2*(Math.sqrt(1-t*t)-1)+e:n/2*(Math.sqrt(1-(t-=2)*t)+1)+e}function y(n,i,r,o){var a=1.70158,s=0,l=r;if(0===n)return i;if(n/=o,1===n)return i+r;s||(s=.3*o);var c=t(l,r,s,a);return-e(c,n,o)+i}function w(e,n,i,r){var o=1.70158,a=0,s=i;if(0===e)return n;if(e/=r,1===e)return n+i;a||(a=.3*r);var l=t(s,i,a,o);return l.a*Math.pow(2,-10*e)*Math.sin(2*(e*r-l.s)*Math.PI/l.p)+l.c+n}function x(n,i,r,o){var a=1.70158,s=0,l=r;if(0===n)return i;if(n/=o/2,2===n)return i+r;s||(s=.3*o*1.5);var c=t(l,r,s,a);return 1>n?-.5*e(c,n,o)+i:c.a*Math.pow(2,-10*(n-=1))*Math.sin(2*(n*o-c.s)*Math.PI/c.p)*.5+c.c+i}function C(t,e,n,i,r){return void 0===r&&(r=1.70158),n*(t/=i)*t*((r+1)*t-r)+e}function _(t,e,n,i,r){return void 0===r&&(r=1.70158),n*((t=t/i-1)*t*((r+1)*t+r)+1)+e}function $(t,e,n,i,r){return void 0===r&&(r=1.70158),t/=i/2,1>t?n/2*t*t*(((r*=1.525)+1)*t-r)+e:n/2*((t-=2)*t*(((r*=1.525)+1)*t+r)+2)+e}function S(t,e,n,i){return n-E(i-t,0,n,i)+e}function E(t,e,n,i){return(t/=i)<1/2.75?7.5625*n*t*t+e:2/2.75>t?n*(7.5625*(t-=1.5/2.75)*t+.75)+e:2.5/2.75>t?n*(7.5625*(t-=2.25/2.75)*t+.9375)+e:n*(7.5625*(t-=2.625/2.75)*t+.984375)+e}function T(t,e,n,i){return i/2>t?.5*S(2*t,0,n,i)+e:.5*E(2*t-i,0,n,i)+.5*n+e}fabric.util.ease={easeInQuad:function(t,e,n,i){return n*(t/=i)*t+e},easeOutQuad:function(t,e,n,i){return-n*(t/=i)*(t-2)+e},easeInOutQuad:function(t,e,n,i){return t/=i/2,1>t?n/2*t*t+e:-n/2*(--t*(t-2)-1)+e},easeInCubic:function(t,e,n,i){return n*(t/=i)*t*t+e},easeOutCubic:n,easeInOutCubic:i,easeInQuart:r,easeOutQuart:o,easeInOutQuart:a,easeInQuint:s,easeOutQuint:l,easeInOutQuint:c,easeInSine:u,easeOutSine:h,easeInOutSine:d,easeInExpo:f,easeOutExpo:p,easeInOutExpo:m,easeInCirc:g,easeOutCirc:v,easeInOutCirc:b,easeInElastic:y,easeOutElastic:w,easeInOutElastic:x,easeInBack:C,easeOutBack:_,easeInOutBack:$,easeInBounce:S,easeOutBounce:E,easeInOutBounce:T}}(),function(t){"use strict";function e(t){return t in C?C[t]:t}function n(t,e,n,i){var r,o="[object Array]"===Object.prototype.toString.call(e);return"fill"!==t&&"stroke"!==t||"none"!==e?"strokeDashArray"===t?e=e.replace(/,/g," ").split(/\s+/).map(function(t){return parseFloat(t)}):"transformMatrix"===t?e=n&&n.transformMatrix?x(n.transformMatrix,m.parseTransformAttribute(e)):m.parseTransformAttribute(e):"visible"===t?(e="none"===e||"hidden"===e?!1:!0,n&&n.visible===!1&&(e=!1)):"originX"===t?e="start"===e?"left":"end"===e?"right":"center":r=o?e.map(w):w(e,i):e="",!o&&isNaN(r)?e:r}function i(t){for(var e in _)if(t[e]&&"undefined"!=typeof t[_[e]]&&0!==t[e].indexOf("url(")){var n=new m.Color(t[e]);t[e]=n.setAlpha(y(n.getAlpha()*t[_[e]],2)).toRgba()}return t}function r(t,i){var r,o;t.replace(/;$/,"").split(";").forEach(function(t){var a=t.split(":");r=e(a[0].trim().toLowerCase()),o=n(r,a[1].trim()),i[r]=o})}function o(t,i){var r,o;for(var a in t)"undefined"!=typeof t[a]&&(r=e(a.toLowerCase()),o=n(r,t[a]),i[r]=o)}function a(t,e){var n={};for(var i in m.cssRules[e])if(s(t,i.split(" ")))for(var r in m.cssRules[e][i])n[r]=m.cssRules[e][i][r];return n}function s(t,e){var n,i=!0;return n=c(t,e.pop()),n&&e.length&&(i=l(t,e)),n&&i&&0===e.length}function l(t,e){for(var n,i=!0;t.parentNode&&1===t.parentNode.nodeType&&e.length;)i&&(n=e.pop()),t=t.parentNode,i=c(t,n);return 0===e.length}function c(t,e){var n,i=t.nodeName,r=t.getAttribute("class"),o=t.getAttribute("id");if(n=new RegExp("^"+i,"i"),e=e.replace(n,""),o&&e.length&&(n=new RegExp("#"+o+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")),r&&e.length){r=r.split(" ");for(var a=r.length;a--;)n=new RegExp("\\."+r[a]+"(?![a-zA-Z\\-]+)","i"),e=e.replace(n,"")}return 0===e.length}function u(t,e){var n;if(t.getElementById&&(n=t.getElementById(e)),n)return n;var i,r,o,a=t.getElementsByTagName("*");for(r=0;r<a.length;r++)if(i=a[r],o===i.getAttribute("id"))return i}function h(t){for(var e=t.getElementsByTagName("use"),n=0;e.length&&n<e.length;){for(var i,r=e[n],o=r.getAttribute("xlink:href").substr(1),a=r.getAttribute("x")||0,s=r.getAttribute("y")||0,l=u(t,o).cloneNode(!0),c=(l.getAttribute("transform")||"")+" translate("+a+", "+s+")",h=e.length,d=0,f=r.attributes,p=f.length;p>d;d++){var m=f.item(d);"x"!==m.nodeName&&"y"!==m.nodeName&&"xlink:href"!==m.nodeName&&("transform"===m.nodeName?c=m.nodeValue+" "+c:l.setAttribute(m.nodeName,m.nodeValue))}l.setAttribute("transform",c),l.setAttribute("instantiated_by_use","1"),l.removeAttribute("id"),i=r.parentNode,i.replaceChild(l,r),e.length===h&&n++}}function d(t,e,n){var i,r,o,a,s=t.getAttribute("viewBox"),l=1,c=1,u=0,h=0;if(s&&(s=s.match($))&&(u=-parseFloat(s[1]),h=-parseFloat(s[2]),i=parseFloat(s[3]),r=parseFloat(s[4]),e&&e!==i&&(l=e/i),n&&n!==r&&(c=n/r),c=l=l>c?c:l,1!==l||1!==c||0!==u||0!==h)){if(o=" matrix("+l+" 0 0 "+c+" "+u*l+" "+h*c+") ","svg"===t.tagName){for(a=t.ownerDocument.createElement("g");null!=t.firstChild;)a.appendChild(t.firstChild);t.appendChild(a)}else a=t,o=a.getAttribute("transform")+o;a.setAttribute("transform",o)}}function f(t){var e=t.objects,n=t.options;return e=e.map(function(t){return m[v(t.type)].fromObject(t)}),{objects:e,options:n}}function p(t,e,n){e[n]&&e[n].toSVG&&t.push('<pattern x="0" y="0" id="',n,'Pattern" ','width="',e[n].source.width,'" height="',e[n].source.height,'" patternUnits="userSpaceOnUse">','<image x="0" y="0" ','width="',e[n].source.width,'" height="',e[n].source.height,'" xlink:href="',e[n].source.src,'"></image></pattern>')}var m=t.fabric||(t.fabric={}),g=m.util.object.extend,v=m.util.string.capitalize,b=m.util.object.clone,y=m.util.toFixed,w=m.util.parseUnit,x=m.util.multiplyTransformMatrices,C={cx:"left",x:"left",r:"radius",cy:"top",y:"top",display:"visible",visibility:"visible",transform:"transformMatrix","fill-opacity":"fillOpacity","fill-rule":"fillRule","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","stroke-dasharray":"strokeDashArray","stroke-linecap":"strokeLineCap","stroke-linejoin":"strokeLineJoin","stroke-miterlimit":"strokeMiterLimit","stroke-opacity":"strokeOpacity","stroke-width":"strokeWidth","text-decoration":"textDecoration","text-anchor":"originX"},_={stroke:"strokeOpacity",fill:"fillOpacity"};m.cssRules={},m.gradientDefs={},m.parseTransformAttribute=function(){function t(t,e){var n=e[0];t[0]=Math.cos(n),t[1]=Math.sin(n),t[2]=-Math.sin(n),t[3]=Math.cos(n)}function e(t,e){var n=e[0],i=2===e.length?e[1]:e[0];t[0]=n,t[3]=i}function n(t,e){t[2]=Math.tan(m.util.degreesToRadians(e[0]))}function i(t,e){t[1]=Math.tan(m.util.degreesToRadians(e[0]))}function r(t,e){t[4]=e[0],2===e.length&&(t[5]=e[1])}var o=[1,0,0,1,0,0],a=m.reNum,s="(?:\\s+,?\\s*|,\\s*)",l="(?:(skewX)\\s*\\(\\s*("+a+")\\s*\\))",c="(?:(skewY)\\s*\\(\\s*("+a+")\\s*\\))",u="(?:(rotate)\\s*\\(\\s*("+a+")(?:"+s+"("+a+")"+s+"("+a+"))?\\s*\\))",h="(?:(scale)\\s*\\(\\s*("+a+")(?:"+s+"("+a+"))?\\s*\\))",d="(?:(translate)\\s*\\(\\s*("+a+")(?:"+s+"("+a+"))?\\s*\\))",f="(?:(matrix)\\s*\\(\\s*("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")"+s+"("+a+")\\s*\\))",p="(?:"+f+"|"+d+"|"+h+"|"+u+"|"+l+"|"+c+")",g="(?:"+p+"(?:"+s+p+")*)",v="^\\s*(?:"+g+"?)\\s*$",b=new RegExp(v),y=new RegExp(p,"g");return function(a){var s=o.concat(),l=[];if(!a||a&&!b.test(a))return s;a.replace(y,function(a){var c=new RegExp(p).exec(a).filter(function(t){return""!==t&&null!=t}),u=c[1],h=c.slice(2).map(parseFloat);switch(u){case"translate":r(s,h);break;case"rotate":h[0]=m.util.degreesToRadians(h[0]),t(s,h);break;case"scale":e(s,h);break;case"skewX":n(s,h);break;case"skewY":i(s,h);break;case"matrix":s=h}l.push(s.concat()),s=o.concat()});for(var c=l[0];l.length>1;)l.shift(),c=m.util.multiplyTransformMatrices(c,l[0]);return c}}();var $=new RegExp("^\\s*("+m.reNum+"+)\\s*,?\\s*("+m.reNum+"+)\\s*,?\\s*("+m.reNum+"+)\\s*,?\\s*("+m.reNum+"+)\\s*$");m.parseSVGDocument=function(){function t(t,e){for(;t&&(t=t.parentNode);)if(e.test(t.nodeName)&&!t.getAttribute("instantiated_by_use"))return!0;return!1}var e=/^(path|circle|polygon|polyline|ellipse|rect|line|image|text)$/,n=/^(symbol|image|marker|pattern|view)$/;return function(i,r,o){if(i){h(i);var a,s,l=new Date,c=m.Object.__uid++,u=!1;if(i.getAttribute("width")&&"100%"!==i.getAttribute("width")&&(a=w(i.getAttribute("width"))),i.getAttribute("height")&&"100%"!==i.getAttribute("height")&&(s=w(i.getAttribute("height"))),!a||!s){var f=i.getAttribute("viewBox");f&&(f=f.match($))?(a=parseFloat(f[3]),s=parseFloat(f[4])):u=!0}d(i,a,s);var p=m.util.toArray(i.getElementsByTagName("*"));if(0===p.length&&m.isLikelyNode){p=i.selectNodes('//*[name(.)!="svg"]');for(var g=[],v=0,y=p.length;y>v;v++)g[v]=p[v];p=g}var x=p.filter(function(i){return n.test(i.tagName)&&d(i,0,0),e.test(i.tagName)&&!t(i,/^(?:pattern|defs|symbol|metadata)$/)});if(!x||x&&!x.length)return void(r&&r([],{}));var C={width:a,height:s,svgUid:c,toBeParsed:u};m.gradientDefs[c]=m.getGradientDefs(i),m.cssRules[c]=m.getCSSRules(i),m.parseElements(x,function(t){m.documentParsingTime=new Date-l,r&&r(t,C)},b(C),o)}}}();var S={has:function(t,e){e(!1)},get:function(){},set:function(){}},E=new RegExp("(normal|italic)?\\s*(normal|small-caps)?\\s*(normal|bold|bolder|lighter|100|200|300|400|500|600|700|800|900)?\\s*("+m.reNum+"(?:px|cm|mm|em|pt|pc|in)*)(?:\\/(normal|"+m.reNum+"))?\\s+(.*)");g(m,{parseFontDeclaration:function(t,e){var n=t.match(E);if(n){var i=n[1],r=n[3],o=n[4],a=n[5],s=n[6];i&&(e.fontStyle=i),r&&(e.fontWeight=isNaN(parseFloat(r))?r:parseFloat(r)),o&&(e.fontSize=w(o)),s&&(e.fontFamily=s),a&&(e.lineHeight="normal"===a?1:a)}},getGradientDefs:function(t){var e,n,i,r,o=t.getElementsByTagName("linearGradient"),a=t.getElementsByTagName("radialGradient"),s=0,l=[],c={},u={};for(l.length=o.length+a.length,n=o.length;n--;)l[s++]=o[n];for(n=a.length;n--;)l[s++]=a[n];for(;s--;)e=l[s],r=e.getAttribute("xlink:href"),i=e.getAttribute("id"),r&&(u[i]=r.substr(1)),c[i]=e;for(i in u){var h=c[u[i]].cloneNode(!0);for(e=c[i];h.firstChild;)e.appendChild(h.firstChild)}return c},parseAttributes:function(t,r,o){if(t){var s,l,c={};"undefined"==typeof o&&(o=t.getAttribute("svgUid")),t.parentNode&&/^symbol|[g|a]$/i.test(t.parentNode.nodeName)&&(c=m.parseAttributes(t.parentNode,r,o)),l=c&&c.fontSize||t.getAttribute("font-size")||m.Text.DEFAULT_SVG_FONT_SIZE;var u=r.reduce(function(i,r){return s=t.getAttribute(r),s&&(r=e(r),s=n(r,s,c,l),i[r]=s),i},{});return u=g(u,g(a(t,o),m.parseStyleAttribute(t))),u.font&&m.parseFontDeclaration(u.font,u),i(g(c,u))}},parseElements:function(t,e,n,i){new m.ElementsParser(t,e,n,i).parse()},parseStyleAttribute:function(t){var e={},n=t.getAttribute("style");return n?("string"==typeof n?r(n,e):o(n,e),e):e},parsePointsAttribute:function(t){if(!t)return null;t=t.replace(/,/g," ").trim(),t=t.split(/\s+/);var e,n,i=[];for(e=0,n=t.length;n>e;e+=2)i.push({x:parseFloat(t[e]),y:parseFloat(t[e+1])});return i},getCSSRules:function(t){for(var i,r=t.getElementsByTagName("style"),o={},a=0,s=r.length;s>a;a++){var l=r[a].textContent;l=l.replace(/\/\*[\s\S]*?\*\//g,""),""!==l.trim()&&(i=l.match(/[^{]*\{[\s\S]*?\}/g),i=i.map(function(t){return t.trim()}),i.forEach(function(t){for(var i=t.match(/([\s\S]*?)\s*\{([^}]*)\}/),r={},a=i[2].trim(),s=a.replace(/;$/,"").split(/\s*;\s*/),l=0,c=s.length;c>l;l++){var u=s[l].split(/\s*:\s*/),h=e(u[0]),d=n(h,u[1],u[0]);r[h]=d}t=i[1],t.split(",").forEach(function(t){t=t.replace(/^svg/i,"").trim(),""!==t&&(o[t]=m.util.object.clone(r))})}))}return o},loadSVGFromURL:function(t,e,n){function i(i){var r=i.responseXML;r&&!r.documentElement&&m.window.ActiveXObject&&i.responseText&&(r=new ActiveXObject("Microsoft.XMLDOM"),r.async="false",r.loadXML(i.responseText.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,""))),r&&r.documentElement&&m.parseSVGDocument(r.documentElement,function(n,i){S.set(t,{objects:m.util.array.invoke(n,"toObject"),options:i}),e(n,i)},n)}t=t.replace(/^\n\s*/,"").trim(),S.has(t,function(n){n?S.get(t,function(t){var n=f(t);e(n.objects,n.options)}):new m.util.request(t,{method:"get",onComplete:i})})},loadSVGFromString:function(t,e,n){t=t.trim();var i;if("undefined"!=typeof DOMParser){var r=new DOMParser;r&&r.parseFromString&&(i=r.parseFromString(t,"text/xml"))}else m.window.ActiveXObject&&(i=new ActiveXObject("Microsoft.XMLDOM"),i.async="false",i.loadXML(t.replace(/<!DOCTYPE[\s\S]*?(\[[\s\S]*\])*?>/i,"")));m.parseSVGDocument(i.documentElement,function(t,n){e(t,n)},n)},createSVGFontFacesMarkup:function(t){for(var e="",n=0,i=t.length;i>n;n++)"text"===t[n].type&&t[n].path&&(e+=["@font-face {","font-family: ",t[n].fontFamily,"; ","src: url('",t[n].path,"')","}"].join(""));return e&&(e=['<style type="text/css">',"<![CDATA[",e,"]]>","</style>"].join("")),e},createSVGRefElementsMarkup:function(t){var e=[];return p(e,t,"backgroundColor"),p(e,t,"overlayColor"),e.join("")}})}("undefined"!=typeof exports?exports:this),fabric.ElementsParser=function(t,e,n,i){this.elements=t,this.callback=e,this.options=n,this.reviver=i,this.svgUid=n&&n.svgUid||0},fabric.ElementsParser.prototype.parse=function(){this.instances=new Array(this.elements.length),this.numElements=this.elements.length,this.createObjects()},fabric.ElementsParser.prototype.createObjects=function(){for(var t=0,e=this.elements.length;e>t;t++)this.elements[t].setAttribute("svgUid",this.svgUid),function(t,e){setTimeout(function(){t.createObject(t.elements[e],e)},0)}(this,t)},fabric.ElementsParser.prototype.createObject=function(t,e){var n=fabric[fabric.util.string.capitalize(t.tagName)];if(n&&n.fromElement)try{this._createObject(n,t,e)}catch(i){fabric.log(i)}else this.checkIfDone()},fabric.ElementsParser.prototype._createObject=function(t,e,n){if(t.async)t.fromElement(e,this.createCallback(n,e),this.options);else{var i=t.fromElement(e,this.options);this.resolveGradient(i,"fill"),this.resolveGradient(i,"stroke"),this.reviver&&this.reviver(e,i),this.instances[n]=i,this.checkIfDone()}},fabric.ElementsParser.prototype.createCallback=function(t,e){var n=this;return function(i){n.resolveGradient(i,"fill"),n.resolveGradient(i,"stroke"),n.reviver&&n.reviver(e,i),n.instances[t]=i,n.checkIfDone()}},fabric.ElementsParser.prototype.resolveGradient=function(t,e){var n=t.get(e);if(/^url\(/.test(n)){var i=n.slice(5,n.length-1);fabric.gradientDefs[this.svgUid][i]&&t.set(e,fabric.Gradient.fromElement(fabric.gradientDefs[this.svgUid][i],t))}},fabric.ElementsParser.prototype.checkIfDone=function(){0===--this.numElements&&(this.instances=this.instances.filter(function(t){return null!=t}),this.callback(this.instances))},function(t){"use strict";function e(t,e){this.x=t,this.y=e}var n=t.fabric||(t.fabric={});return n.Point?void n.warn("fabric.Point is already defined"):(n.Point=e,void(e.prototype={constructor:e,add:function(t){return new e(this.x+t.x,this.y+t.y)},addEquals:function(t){return this.x+=t.x,this.y+=t.y,this},scalarAdd:function(t){return new e(this.x+t,this.y+t)},scalarAddEquals:function(t){return this.x+=t,this.y+=t,this},subtract:function(t){return new e(this.x-t.x,this.y-t.y)},subtractEquals:function(t){return this.x-=t.x,this.y-=t.y,this},scalarSubtract:function(t){return new e(this.x-t,this.y-t)},scalarSubtractEquals:function(t){return this.x-=t,this.y-=t,this},multiply:function(t){return new e(this.x*t,this.y*t)},multiplyEquals:function(t){return this.x*=t,this.y*=t,this},divide:function(t){return new e(this.x/t,this.y/t)},divideEquals:function(t){return this.x/=t,this.y/=t,this},eq:function(t){return this.x===t.x&&this.y===t.y},lt:function(t){return this.x<t.x&&this.y<t.y},lte:function(t){return this.x<=t.x&&this.y<=t.y},gt:function(t){return this.x>t.x&&this.y>t.y},gte:function(t){return this.x>=t.x&&this.y>=t.y},lerp:function(t,n){return new e(this.x+(t.x-this.x)*n,this.y+(t.y-this.y)*n)},distanceFrom:function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},midPointFrom:function(t){return new e(this.x+(t.x-this.x)/2,this.y+(t.y-this.y)/2)},min:function(t){return new e(Math.min(this.x,t.x),Math.min(this.y,t.y))},max:function(t){return new e(Math.max(this.x,t.x),Math.max(this.y,t.y))},toString:function(){return this.x+","+this.y},setXY:function(t,e){this.x=t,this.y=e},setFromPoint:function(t){this.x=t.x,this.y=t.y},swap:function(t){var e=this.x,n=this.y;this.x=t.x,this.y=t.y,t.x=e,t.y=n}}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){this.status=t,this.points=[]}var n=t.fabric||(t.fabric={});return n.Intersection?void n.warn("fabric.Intersection is already defined"):(n.Intersection=e,n.Intersection.prototype={appendPoint:function(t){this.points.push(t)},appendPoints:function(t){this.points=this.points.concat(t)}},n.Intersection.intersectLineLine=function(t,i,r,o){var a,s=(o.x-r.x)*(t.y-r.y)-(o.y-r.y)*(t.x-r.x),l=(i.x-t.x)*(t.y-r.y)-(i.y-t.y)*(t.x-r.x),c=(o.y-r.y)*(i.x-t.x)-(o.x-r.x)*(i.y-t.y);if(0!==c){var u=s/c,h=l/c;u>=0&&1>=u&&h>=0&&1>=h?(a=new e("Intersection"),a.points.push(new n.Point(t.x+u*(i.x-t.x),t.y+u*(i.y-t.y)))):a=new e}else a=new e(0===s||0===l?"Coincident":"Parallel");return a},n.Intersection.intersectLinePolygon=function(t,n,i){for(var r=new e,o=i.length,a=0;o>a;a++){var s=i[a],l=i[(a+1)%o],c=e.intersectLineLine(t,n,s,l);r.appendPoints(c.points)}return r.points.length>0&&(r.status="Intersection"),r},n.Intersection.intersectPolygonPolygon=function(t,n){for(var i=new e,r=t.length,o=0;r>o;o++){var a=t[o],s=t[(o+1)%r],l=e.intersectLinePolygon(a,s,n);i.appendPoints(l.points)}return i.points.length>0&&(i.status="Intersection"),i},void(n.Intersection.intersectPolygonRectangle=function(t,i,r){var o=i.min(r),a=i.max(r),s=new n.Point(a.x,o.y),l=new n.Point(o.x,a.y),c=e.intersectLinePolygon(o,s,t),u=e.intersectLinePolygon(s,a,t),h=e.intersectLinePolygon(a,l,t),d=e.intersectLinePolygon(l,o,t),f=new e;return f.appendPoints(c.points),f.appendPoints(u.points),f.appendPoints(h.points),f.appendPoints(d.points),f.points.length>0&&(f.status="Intersection"),f}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){t?this._tryParsingColor(t):this.setSource([0,0,0,1])}function n(t,e,n){return 0>n&&(n+=1),n>1&&(n-=1),1/6>n?t+6*(e-t)*n:.5>n?e:2/3>n?t+(e-t)*(2/3-n)*6:t}var i=t.fabric||(t.fabric={});return i.Color?void i.warn("fabric.Color is already defined."):(i.Color=e,i.Color.prototype={_tryParsingColor:function(t){var n;return t in e.colorNameMap&&(t=e.colorNameMap[t]),"transparent"===t?void this.setSource([255,255,255,0]):(n=e.sourceFromHex(t),n||(n=e.sourceFromRgb(t)),n||(n=e.sourceFromHsl(t)),void(n&&this.setSource(n)))},_rgbToHsl:function(t,e,n){t/=255,e/=255,n/=255;var r,o,a,s=i.util.array.max([t,e,n]),l=i.util.array.min([t,e,n]);if(a=(s+l)/2,s===l)r=o=0;else{var c=s-l;switch(o=a>.5?c/(2-s-l):c/(s+l),s){case t:r=(e-n)/c+(n>e?6:0);break;case e:r=(n-t)/c+2;break;case n:r=(t-e)/c+4}r/=6}return[Math.round(360*r),Math.round(100*o),Math.round(100*a)]},getSource:function(){return this._source},setSource:function(t){this._source=t},toRgb:function(){var t=this.getSource();return"rgb("+t[0]+","+t[1]+","+t[2]+")"},toRgba:function(){var t=this.getSource();return"rgba("+t[0]+","+t[1]+","+t[2]+","+t[3]+")"},toHsl:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsl("+e[0]+","+e[1]+"%,"+e[2]+"%)"},toHsla:function(){var t=this.getSource(),e=this._rgbToHsl(t[0],t[1],t[2]);return"hsla("+e[0]+","+e[1]+"%,"+e[2]+"%,"+t[3]+")"},toHex:function(){var t,e,n,i=this.getSource();return t=i[0].toString(16),t=1===t.length?"0"+t:t,e=i[1].toString(16),e=1===e.length?"0"+e:e,n=i[2].toString(16),n=1===n.length?"0"+n:n,t.toUpperCase()+e.toUpperCase()+n.toUpperCase()},getAlpha:function(){return this.getSource()[3]},setAlpha:function(t){var e=this.getSource();return e[3]=t,this.setSource(e),this},toGrayscale:function(){var t=this.getSource(),e=parseInt((.3*t[0]+.59*t[1]+.11*t[2]).toFixed(0),10),n=t[3];return this.setSource([e,e,e,n]),this},toBlackWhite:function(t){var e=this.getSource(),n=(.3*e[0]+.59*e[1]+.11*e[2]).toFixed(0),i=e[3];return t=t||127,n=Number(n)<Number(t)?0:255,this.setSource([n,n,n,i]),this},overlayWith:function(t){
t instanceof e||(t=new e(t));for(var n=[],i=this.getAlpha(),r=.5,o=this.getSource(),a=t.getSource(),s=0;3>s;s++)n.push(Math.round(o[s]*(1-r)+a[s]*r));return n[3]=i,this.setSource(n),this}},i.Color.reRGBa=/^rgba?\(\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*,\s*(\d{1,3}(?:\.\d+)?\%?)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,i.Color.reHSLa=/^hsla?\(\s*(\d{1,3})\s*,\s*(\d{1,3}\%)\s*,\s*(\d{1,3}\%)\s*(?:\s*,\s*(\d+(?:\.\d+)?)\s*)?\)$/,i.Color.reHex=/^#?([0-9a-f]{6}|[0-9a-f]{3})$/i,i.Color.colorNameMap={aqua:"#00FFFF",black:"#000000",blue:"#0000FF",fuchsia:"#FF00FF",gray:"#808080",green:"#008000",lime:"#00FF00",maroon:"#800000",navy:"#000080",olive:"#808000",orange:"#FFA500",purple:"#800080",red:"#FF0000",silver:"#C0C0C0",teal:"#008080",white:"#FFFFFF",yellow:"#FFFF00"},i.Color.fromRgb=function(t){return e.fromSource(e.sourceFromRgb(t))},i.Color.sourceFromRgb=function(t){var n=t.match(e.reRGBa);if(n){var i=parseInt(n[1],10)/(/%$/.test(n[1])?100:1)*(/%$/.test(n[1])?255:1),r=parseInt(n[2],10)/(/%$/.test(n[2])?100:1)*(/%$/.test(n[2])?255:1),o=parseInt(n[3],10)/(/%$/.test(n[3])?100:1)*(/%$/.test(n[3])?255:1);return[parseInt(i,10),parseInt(r,10),parseInt(o,10),n[4]?parseFloat(n[4]):1]}},i.Color.fromRgba=e.fromRgb,i.Color.fromHsl=function(t){return e.fromSource(e.sourceFromHsl(t))},i.Color.sourceFromHsl=function(t){var i=t.match(e.reHSLa);if(i){var r,o,a,s=(parseFloat(i[1])%360+360)%360/360,l=parseFloat(i[2])/(/%$/.test(i[2])?100:1),c=parseFloat(i[3])/(/%$/.test(i[3])?100:1);if(0===l)r=o=a=c;else{var u=.5>=c?c*(l+1):c+l-c*l,h=2*c-u;r=n(h,u,s+1/3),o=n(h,u,s),a=n(h,u,s-1/3)}return[Math.round(255*r),Math.round(255*o),Math.round(255*a),i[4]?parseFloat(i[4]):1]}},i.Color.fromHsla=e.fromHsl,i.Color.fromHex=function(t){return e.fromSource(e.sourceFromHex(t))},i.Color.sourceFromHex=function(t){if(t.match(e.reHex)){var n=t.slice(t.indexOf("#")+1),i=3===n.length,r=i?n.charAt(0)+n.charAt(0):n.substring(0,2),o=i?n.charAt(1)+n.charAt(1):n.substring(2,4),a=i?n.charAt(2)+n.charAt(2):n.substring(4,6);return[parseInt(r,16),parseInt(o,16),parseInt(a,16),1]}},void(i.Color.fromSource=function(t){var n=new e;return n.setSource(t),n}))}("undefined"!=typeof exports?exports:this),function(){function t(t){var e,n,i,r=t.getAttribute("style"),o=t.getAttribute("offset");if(o=parseFloat(o)/(/%$/.test(o)?100:1),o=0>o?0:o>1?1:o,r){var a=r.split(/\s*;\s*/);""===a[a.length-1]&&a.pop();for(var s=a.length;s--;){var l=a[s].split(/\s*:\s*/),c=l[0].trim(),u=l[1].trim();"stop-color"===c?e=u:"stop-opacity"===c&&(i=u)}}return e||(e=t.getAttribute("stop-color")||"rgb(0,0,0)"),i||(i=t.getAttribute("stop-opacity")),e=new fabric.Color(e),n=e.getAlpha(),i=isNaN(parseFloat(i))?1:parseFloat(i),i*=n,{offset:o,color:e.toRgb(),opacity:i}}function e(t){return{x1:t.getAttribute("x1")||0,y1:t.getAttribute("y1")||0,x2:t.getAttribute("x2")||"100%",y2:t.getAttribute("y2")||0}}function n(t){return{x1:t.getAttribute("fx")||t.getAttribute("cx")||"50%",y1:t.getAttribute("fy")||t.getAttribute("cy")||"50%",r1:0,x2:t.getAttribute("cx")||"50%",y2:t.getAttribute("cy")||"50%",r2:t.getAttribute("r")||"50%"}}function i(t,e,n){var i,r=0,o=1,a="";for(var s in e)i=parseFloat(e[s],10),o="string"==typeof e[s]&&/^\d+%$/.test(e[s])?.01:1,"x1"===s||"x2"===s||"r2"===s?(o*="objectBoundingBox"===n?t.width:1,r="objectBoundingBox"===n?t.left||0:0):("y1"===s||"y2"===s)&&(o*="objectBoundingBox"===n?t.height:1,r="objectBoundingBox"===n?t.top||0:0),e[s]=i*o+r;if("ellipse"===t.type&&null!==e.r2&&"objectBoundingBox"===n&&t.rx!==t.ry){var l=t.ry/t.rx;a=" scale(1, "+l+")",e.y1&&(e.y1/=l),e.y2&&(e.y2/=l)}return a}fabric.Gradient=fabric.util.createClass({offsetX:0,offsetY:0,initialize:function(t){t||(t={});var e={};this.id=fabric.Object.__uid++,this.type=t.type||"linear",e={x1:t.coords.x1||0,y1:t.coords.y1||0,x2:t.coords.x2||0,y2:t.coords.y2||0},"radial"===this.type&&(e.r1=t.coords.r1||0,e.r2=t.coords.r2||0),this.coords=e,this.colorStops=t.colorStops.slice(),t.gradientTransform&&(this.gradientTransform=t.gradientTransform),this.offsetX=t.offsetX||this.offsetX,this.offsetY=t.offsetY||this.offsetY},addColorStop:function(t){for(var e in t){var n=new fabric.Color(t[e]);this.colorStops.push({offset:e,color:n.toRgb(),opacity:n.getAlpha()})}return this},toObject:function(){return{type:this.type,coords:this.coords,colorStops:this.colorStops,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e,n,i=fabric.util.object.clone(this.coords);if(this.colorStops.sort(function(t,e){return t.offset-e.offset}),!t.group||"path-group"!==t.group.type)for(var r in i)"x1"===r||"x2"===r||"r2"===r?i[r]+=this.offsetX-t.width/2:("y1"===r||"y2"===r)&&(i[r]+=this.offsetY-t.height/2);n='id="SVGID_'+this.id+'" gradientUnits="userSpaceOnUse"',this.gradientTransform&&(n+=' gradientTransform="matrix('+this.gradientTransform.join(" ")+')" '),"linear"===this.type?e=["<linearGradient ",n,' x1="',i.x1,'" y1="',i.y1,'" x2="',i.x2,'" y2="',i.y2,'">\n']:"radial"===this.type&&(e=["<radialGradient ",n,' cx="',i.x2,'" cy="',i.y2,'" r="',i.r2,'" fx="',i.x1,'" fy="',i.y1,'">\n']);for(var o=0;o<this.colorStops.length;o++)e.push("<stop ",'offset="',100*this.colorStops[o].offset+"%",'" style="stop-color:',this.colorStops[o].color,null!=this.colorStops[o].opacity?";stop-opacity: "+this.colorStops[o].opacity:";",'"/>\n');return e.push("linear"===this.type?"</linearGradient>\n":"</radialGradient>\n"),e.join("")},toLive:function(t,e){var n,i,r=fabric.util.object.clone(this.coords);if(this.type){if(e.group&&"path-group"===e.group.type)for(i in r)"x1"===i||"x2"===i?r[i]+=-this.offsetX+e.width/2:("y1"===i||"y2"===i)&&(r[i]+=-this.offsetY+e.height/2);"linear"===this.type?n=t.createLinearGradient(r.x1,r.y1,r.x2,r.y2):"radial"===this.type&&(n=t.createRadialGradient(r.x1,r.y1,r.r1,r.x2,r.y2,r.r2));for(var o=0,a=this.colorStops.length;a>o;o++){var s=this.colorStops[o].color,l=this.colorStops[o].opacity,c=this.colorStops[o].offset;"undefined"!=typeof l&&(s=new fabric.Color(s).setAlpha(l).toRgba()),n.addColorStop(parseFloat(c),s)}return n}}}),fabric.util.object.extend(fabric.Gradient,{fromElement:function(r,o){var a,s=r.getElementsByTagName("stop"),l="linearGradient"===r.nodeName?"linear":"radial",c=r.getAttribute("gradientUnits")||"objectBoundingBox",u=r.getAttribute("gradientTransform"),h=[],d={};"linear"===l?d=e(r):"radial"===l&&(d=n(r));for(var f=s.length;f--;)h.push(t(s[f]));a=i(o,d,c);var p=new fabric.Gradient({type:l,coords:d,colorStops:h,offsetX:-o.left,offsetY:-o.top});return(u||""!==a)&&(p.gradientTransform=fabric.parseTransformAttribute((u||"")+a)),p},forObject:function(t,e){return e||(e={}),i(t,e.coords,"userSpaceOnUse"),new fabric.Gradient(e)}})}(),fabric.Pattern=fabric.util.createClass({repeat:"repeat",offsetX:0,offsetY:0,initialize:function(t){if(t||(t={}),this.id=fabric.Object.__uid++,t.source)if("string"==typeof t.source)if("undefined"!=typeof fabric.util.getFunctionBody(t.source))this.source=new Function(fabric.util.getFunctionBody(t.source));else{var e=this;this.source=fabric.util.createImage(),fabric.util.loadImage(t.source,function(t){e.source=t})}else this.source=t.source;t.repeat&&(this.repeat=t.repeat),t.offsetX&&(this.offsetX=t.offsetX),t.offsetY&&(this.offsetY=t.offsetY)},toObject:function(){var t;return"function"==typeof this.source?t=String(this.source):"string"==typeof this.source.src&&(t=this.source.src),{source:t,repeat:this.repeat,offsetX:this.offsetX,offsetY:this.offsetY}},toSVG:function(t){var e="function"==typeof this.source?this.source():this.source,n=e.width/t.getWidth(),i=e.height/t.getHeight(),r=this.offsetX/t.getWidth(),o=this.offsetY/t.getHeight(),a="";return("repeat-x"===this.repeat||"no-repeat"===this.repeat)&&(i=1),("repeat-y"===this.repeat||"no-repeat"===this.repeat)&&(n=1),e.src?a=e.src:e.toDataURL&&(a=e.toDataURL()),'<pattern id="SVGID_'+this.id+'" x="'+r+'" y="'+o+'" width="'+n+'" height="'+i+'">\n<image x="0" y="0" width="'+e.width+'" height="'+e.height+'" xlink:href="'+a+'"></image>\n</pattern>\n'},toLive:function(t){var e="function"==typeof this.source?this.source():this.source;if(!e)return"";if("undefined"!=typeof e.src){if(!e.complete)return"";if(0===e.naturalWidth||0===e.naturalHeight)return""}return t.createPattern(e,this.repeat)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.toFixed;return e.Shadow?void e.warn("fabric.Shadow is already defined."):(e.Shadow=e.util.createClass({color:"rgb(0,0,0)",blur:0,offsetX:0,offsetY:0,affectStroke:!1,includeDefaultValues:!0,initialize:function(t){"string"==typeof t&&(t=this._parseShadow(t));for(var n in t)this[n]=t[n];this.id=e.Object.__uid++},_parseShadow:function(t){var n=t.trim(),i=e.Shadow.reOffsetsAndBlur.exec(n)||[],r=n.replace(e.Shadow.reOffsetsAndBlur,"")||"rgb(0,0,0)";return{color:r.trim(),offsetX:parseInt(i[1],10)||0,offsetY:parseInt(i[2],10)||0,blur:parseInt(i[3],10)||0}},toString:function(){return[this.offsetX,this.offsetY,this.blur,this.color].join("px ")},toSVG:function(t){var e="SourceAlpha",i=40,r=40;return!t||t.fill!==this.color&&t.stroke!==this.color||(e="SourceGraphic"),t.width&&t.height&&(i=100*n(Math.abs(this.offsetX/t.getWidth()),2)+20,r=100*n(Math.abs(this.offsetY/t.getHeight()),2)+20),'<filter id="SVGID_'+this.id+'" y="-'+r+'%" height="'+(100+2*r)+'%" x="-'+i+'%" width="'+(100+2*i)+'%" >\n	<feGaussianBlur in="'+e+'" stdDeviation="'+n(this.blur?this.blur/2:0,3)+'" result="blurOut"></feGaussianBlur>\n	<feColorMatrix result="matrixOut" in="blurOut" type="matrix" values="1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 0.30 0" ></feColorMatrix >\n	<feOffset dx="'+this.offsetX+'" dy="'+this.offsetY+'"></feOffset>\n	<feMerge>\n		<feMergeNode></feMergeNode>\n		<feMergeNode in="SourceGraphic"></feMergeNode>\n	</feMerge>\n</filter>\n'},toObject:function(){if(this.includeDefaultValues)return{color:this.color,blur:this.blur,offsetX:this.offsetX,offsetY:this.offsetY};var t={},n=e.Shadow.prototype;return this.color!==n.color&&(t.color=this.color),this.blur!==n.blur&&(t.blur=this.blur),this.offsetX!==n.offsetX&&(t.offsetX=this.offsetX),this.offsetY!==n.offsetY&&(t.offsetY=this.offsetY),t}}),void(e.Shadow.reOffsetsAndBlur=/(?:\s|^)(-?\d+(?:px)?(?:\s?|$))?(-?\d+(?:px)?(?:\s?|$))?(\d+(?:px)?)?(?:\s?|$)(?:$|\s)/))}("undefined"!=typeof exports?exports:this),function(){"use strict";if(fabric.StaticCanvas)return void fabric.warn("fabric.StaticCanvas is already defined.");var t=fabric.util.object.extend,e=fabric.util.getElementOffset,n=fabric.util.removeFromArray,i=new Error("Could not initialize `canvas` element");fabric.StaticCanvas=fabric.util.createClass({initialize:function(t,e){e||(e={}),this._initStatic(t,e),fabric.StaticCanvas.activeInstance=this},backgroundColor:"",backgroundImage:null,overlayColor:"",overlayImage:null,includeDefaultValues:!0,stateful:!0,renderOnAddRemove:!0,clipTo:null,controlsAboveOverlay:!1,allowTouchScrolling:!1,imageSmoothingEnabled:!0,preserveObjectStacking:!1,viewportTransform:[1,0,0,1,0,0],onBeforeScaleRotate:function(){},_initStatic:function(t,e){this._objects=[],this._createLowerCanvas(t),this._initOptions(e),this._setImageSmoothing(),e.overlayImage&&this.setOverlayImage(e.overlayImage,this.renderAll.bind(this)),e.backgroundImage&&this.setBackgroundImage(e.backgroundImage,this.renderAll.bind(this)),e.backgroundColor&&this.setBackgroundColor(e.backgroundColor,this.renderAll.bind(this)),e.overlayColor&&this.setOverlayColor(e.overlayColor,this.renderAll.bind(this)),this.calcOffset()},calcOffset:function(){return this._offset=e(this.lowerCanvasEl),this},setOverlayImage:function(t,e,n){return this.__setBgOverlayImage("overlayImage",t,e,n)},setBackgroundImage:function(t,e,n){return this.__setBgOverlayImage("backgroundImage",t,e,n)},setOverlayColor:function(t,e){return this.__setBgOverlayColor("overlayColor",t,e)},setBackgroundColor:function(t,e){return this.__setBgOverlayColor("backgroundColor",t,e)},_setImageSmoothing:function(){var t=this.getContext();t.imageSmoothingEnabled=this.imageSmoothingEnabled,t.webkitImageSmoothingEnabled=this.imageSmoothingEnabled,t.mozImageSmoothingEnabled=this.imageSmoothingEnabled,t.msImageSmoothingEnabled=this.imageSmoothingEnabled,t.oImageSmoothingEnabled=this.imageSmoothingEnabled},__setBgOverlayImage:function(t,e,n,i){return"string"==typeof e?fabric.util.loadImage(e,function(e){this[t]=new fabric.Image(e,i),n&&n()},this,i&&i.crossOrigin):(i&&e.setOptions(i),this[t]=e,n&&n()),this},__setBgOverlayColor:function(t,e,n){if(e&&e.source){var i=this;fabric.util.loadImage(e.source,function(r){i[t]=new fabric.Pattern({source:r,repeat:e.repeat,offsetX:e.offsetX,offsetY:e.offsetY}),n&&n()})}else this[t]=e,n&&n();return this},_createCanvasElement:function(){var t=fabric.document.createElement("canvas");if(t.style||(t.style={}),!t)throw i;return this._initCanvasElement(t),t},_initCanvasElement:function(t){if(fabric.util.createCanvasElement(t),"undefined"==typeof t.getContext)throw i},_initOptions:function(t){for(var e in t)this[e]=t[e];this.width=this.width||parseInt(this.lowerCanvasEl.width,10)||0,this.height=this.height||parseInt(this.lowerCanvasEl.height,10)||0,this.lowerCanvasEl.style&&(this.lowerCanvasEl.width=this.width,this.lowerCanvasEl.height=this.height,this.lowerCanvasEl.style.width=this.width+"px",this.lowerCanvasEl.style.height=this.height+"px",this.viewportTransform=this.viewportTransform.slice())},_createLowerCanvas:function(t){this.lowerCanvasEl=fabric.util.getById(t)||this._createCanvasElement(),this._initCanvasElement(this.lowerCanvasEl),fabric.util.addClass(this.lowerCanvasEl,"lower-canvas"),this.interactive&&this._applyCanvasStyle(this.lowerCanvasEl),this.contextContainer=this.lowerCanvasEl.getContext("2d")},getWidth:function(){return this.width},getHeight:function(){return this.height},setWidth:function(t,e){return this.setDimensions({width:t},e)},setHeight:function(t,e){return this.setDimensions({height:t},e)},setDimensions:function(t,e){var n;e=e||{};for(var i in t)n=t[i],e.cssOnly||(this._setBackstoreDimension(i,t[i]),n+="px"),e.backstoreOnly||this._setCssDimension(i,n);return e.cssOnly||this.renderAll(),this.calcOffset(),this},_setBackstoreDimension:function(t,e){return this.lowerCanvasEl[t]=e,this.upperCanvasEl&&(this.upperCanvasEl[t]=e),this.cacheCanvasEl&&(this.cacheCanvasEl[t]=e),this[t]=e,this},_setCssDimension:function(t,e){return this.lowerCanvasEl.style[t]=e,this.upperCanvasEl&&(this.upperCanvasEl.style[t]=e),this.wrapperEl&&(this.wrapperEl.style[t]=e),this},getZoom:function(){return Math.sqrt(this.viewportTransform[0]*this.viewportTransform[3])},setViewportTransform:function(t){var e=this.getActiveGroup();this.viewportTransform=t,this.renderAll();for(var n=0,i=this._objects.length;i>n;n++)this._objects[n].setCoords();return e&&e.setCoords(),this},zoomToPoint:function(t,e){var n=t;t=fabric.util.transformPoint(t,fabric.util.invertTransform(this.viewportTransform)),this.viewportTransform[0]=e,this.viewportTransform[3]=e;var i=fabric.util.transformPoint(t,this.viewportTransform);this.viewportTransform[4]+=n.x-i.x,this.viewportTransform[5]+=n.y-i.y,this.renderAll();for(var r=0,o=this._objects.length;o>r;r++)this._objects[r].setCoords();return this},setZoom:function(t){return this.zoomToPoint(new fabric.Point(0,0),t),this},absolutePan:function(t){this.viewportTransform[4]=-t.x,this.viewportTransform[5]=-t.y,this.renderAll();for(var e=0,n=this._objects.length;n>e;e++)this._objects[e].setCoords();return this},relativePan:function(t){return this.absolutePan(new fabric.Point(-t.x-this.viewportTransform[4],-t.y-this.viewportTransform[5]))},getElement:function(){return this.lowerCanvasEl},getActiveObject:function(){return null},getActiveGroup:function(){return null},_draw:function(t,e){if(e){t.save();var n=this.viewportTransform;t.transform(n[0],n[1],n[2],n[3],n[4],n[5]),this._shouldRenderObject(e)&&e.render(t),t.restore(),this.controlsAboveOverlay||e._renderControls(t)}},_shouldRenderObject:function(t){return t?t!==this.getActiveGroup()||!this.preserveObjectStacking:!1},_onObjectAdded:function(t){this.stateful&&t.setupState(),t._set("canvas",this),t.setCoords(),this.fire("object:added",{target:t}),t.fire("added")},_onObjectRemoved:function(t){this.getActiveObject()===t&&(this.fire("before:selection:cleared",{target:t}),this._discardActiveObject(),this.fire("selection:cleared")),this.fire("object:removed",{target:t}),t.fire("removed")},clearContext:function(t){return t.clearRect(0,0,this.width,this.height),this},getContext:function(){return this.contextContainer},clear:function(){return this._objects.length=0,this.discardActiveGroup&&this.discardActiveGroup(),this.discardActiveObject&&this.discardActiveObject(),this.clearContext(this.contextContainer),this.contextTop&&this.clearContext(this.contextTop),this.fire("canvas:cleared"),this.renderAll(),this},renderAll:function(t){var e=this[t===!0&&this.interactive?"contextTop":"contextContainer"],n=this.getActiveGroup();return this.contextTop&&this.selection&&!this._groupSelector&&this.clearContext(this.contextTop),t||this.clearContext(e),this.fire("before:render"),this.clipTo&&fabric.util.clipContext(this,e),this._renderBackground(e),this._renderObjects(e,n),this._renderActiveGroup(e,n),this.clipTo&&e.restore(),this._renderOverlay(e),this.controlsAboveOverlay&&this.interactive&&this.drawControls(e),this.fire("after:render"),this},_renderObjects:function(t,e){var n,i;if(!e||this.preserveObjectStacking)for(n=0,i=this._objects.length;i>n;++n)this._draw(t,this._objects[n]);else for(n=0,i=this._objects.length;i>n;++n)this._objects[n]&&!e.contains(this._objects[n])&&this._draw(t,this._objects[n])},_renderActiveGroup:function(t,e){if(e){var n=[];this.forEachObject(function(t){e.contains(t)&&n.push(t)}),e._set("_objects",n.reverse()),this._draw(t,e)}},_renderBackground:function(t){this.backgroundColor&&(t.fillStyle=this.backgroundColor.toLive?this.backgroundColor.toLive(t):this.backgroundColor,t.fillRect(this.backgroundColor.offsetX||0,this.backgroundColor.offsetY||0,this.width,this.height)),this.backgroundImage&&this._draw(t,this.backgroundImage)},_renderOverlay:function(t){this.overlayColor&&(t.fillStyle=this.overlayColor.toLive?this.overlayColor.toLive(t):this.overlayColor,t.fillRect(this.overlayColor.offsetX||0,this.overlayColor.offsetY||0,this.width,this.height)),this.overlayImage&&this._draw(t,this.overlayImage)},renderTop:function(){var t=this.contextTop||this.contextContainer;this.clearContext(t),this.selection&&this._groupSelector&&this._drawSelection();var e=this.getActiveGroup();return e&&e.render(t),this._renderOverlay(t),this.fire("after:render"),this},getCenter:function(){return{top:this.getHeight()/2,left:this.getWidth()/2}},centerObjectH:function(t){return this._centerObject(t,new fabric.Point(this.getCenter().left,t.getCenterPoint().y)),this.renderAll(),this},centerObjectV:function(t){return this._centerObject(t,new fabric.Point(t.getCenterPoint().x,this.getCenter().top)),this.renderAll(),this},centerObject:function(t){var e=this.getCenter();return this._centerObject(t,new fabric.Point(e.left,e.top)),this.renderAll(),this},_centerObject:function(t,e){return t.setPositionByOrigin(e,"center","center"),this},toDatalessJSON:function(t){return this.toDatalessObject(t)},toObject:function(t){return this._toObjectMethod("toObject",t)},toDatalessObject:function(t){return this._toObjectMethod("toDatalessObject",t)},_toObjectMethod:function(e,n){var i={objects:this._toObjects(e,n)};return t(i,this.__serializeBgOverlay()),fabric.util.populateWithProperties(this,i,n),i},_toObjects:function(t,e){return this.getObjects().map(function(n){return this._toObject(n,t,e)},this)},_toObject:function(t,e,n){var i;this.includeDefaultValues||(i=t.includeDefaultValues,t.includeDefaultValues=!1);var r=this._realizeGroupTransformOnObject(t),o=t[e](n);return this.includeDefaultValues||(t.includeDefaultValues=i),this._unwindGroupTransformOnObject(t,r),o},_realizeGroupTransformOnObject:function(t){var e=["angle","flipX","flipY","height","left","scaleX","scaleY","top","width"];if(t.group&&t.group===this.getActiveGroup()){var n={};return e.forEach(function(e){n[e]=t[e]}),this.getActiveGroup().realizeTransform(t),n}return null},_unwindGroupTransformOnObject:function(t,e){e&&t.set(e)},__serializeBgOverlay:function(){var t={background:this.backgroundColor&&this.backgroundColor.toObject?this.backgroundColor.toObject():this.backgroundColor};return this.overlayColor&&(t.overlay=this.overlayColor.toObject?this.overlayColor.toObject():this.overlayColor),this.backgroundImage&&(t.backgroundImage=this.backgroundImage.toObject()),this.overlayImage&&(t.overlayImage=this.overlayImage.toObject()),t},svgViewportTransformation:!0,toSVG:function(t,e){t||(t={});var n=[];return this._setSVGPreamble(n,t),this._setSVGHeader(n,t),this._setSVGBgOverlayColor(n,"backgroundColor"),this._setSVGBgOverlayImage(n,"backgroundImage"),this._setSVGObjects(n,e),this._setSVGBgOverlayColor(n,"overlayColor"),this._setSVGBgOverlayImage(n,"overlayImage"),n.push("</svg>"),n.join("")},_setSVGPreamble:function(t,e){e.suppressPreamble||t.push('<?xml version="1.0" encoding="',e.encoding||"UTF-8",'" standalone="no" ?>','<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" ','"http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\n')},_setSVGHeader:function(t,e){var n,i,r;e.viewBox?(n=e.viewBox.width,i=e.viewBox.height):(n=this.width,i=this.height,this.svgViewportTransformation||(r=this.viewportTransform,n/=r[0],i/=r[3])),t.push("<svg ",'xmlns="http://www.w3.org/2000/svg" ','xmlns:xlink="http://www.w3.org/1999/xlink" ','version="1.1" ','width="',n,'" ','height="',i,'" ',this.backgroundColor&&!this.backgroundColor.toLive?'style="background-color: '+this.backgroundColor+'" ':null,e.viewBox?'viewBox="'+e.viewBox.x+" "+e.viewBox.y+" "+e.viewBox.width+" "+e.viewBox.height+'" ':null,'xml:space="preserve">',"<desc>Created with Fabric.js ",fabric.version,"</desc>","<defs>",fabric.createSVGFontFacesMarkup(this.getObjects()),fabric.createSVGRefElementsMarkup(this),"</defs>")},_setSVGObjects:function(t,e){for(var n=0,i=this.getObjects(),r=i.length;r>n;n++){var o=i[n],a=this._realizeGroupTransformOnObject(o);t.push(o.toSVG(e)),this._unwindGroupTransformOnObject(o,a)}},_setSVGBgOverlayImage:function(t,e){this[e]&&this[e].toSVG&&t.push(this[e].toSVG())},_setSVGBgOverlayColor:function(t,e){this[e]&&this[e].source?t.push('<rect x="',this[e].offsetX,'" y="',this[e].offsetY,'" ','width="',"repeat-y"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.width:this.width,'" height="',"repeat-x"===this[e].repeat||"no-repeat"===this[e].repeat?this[e].source.height:this.height,'" fill="url(#'+e+'Pattern)"',"></rect>"):this[e]&&"overlayColor"===e&&t.push('<rect x="0" y="0" ','width="',this.width,'" height="',this.height,'" fill="',this[e],'"',"></rect>")},sendToBack:function(t){return n(this._objects,t),this._objects.unshift(t),this.renderAll&&this.renderAll()},bringToFront:function(t){return n(this._objects,t),this._objects.push(t),this.renderAll&&this.renderAll()},sendBackwards:function(t,e){var i=this._objects.indexOf(t);if(0!==i){var r=this._findNewLowerIndex(t,i,e);n(this._objects,t),this._objects.splice(r,0,t),this.renderAll&&this.renderAll()}return this},_findNewLowerIndex:function(t,e,n){var i;if(n){i=e;for(var r=e-1;r>=0;--r){var o=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(o){i=r;break}}}else i=e-1;return i},bringForward:function(t,e){var i=this._objects.indexOf(t);if(i!==this._objects.length-1){var r=this._findNewUpperIndex(t,i,e);n(this._objects,t),this._objects.splice(r,0,t),this.renderAll&&this.renderAll()}return this},_findNewUpperIndex:function(t,e,n){var i;if(n){i=e;for(var r=e+1;r<this._objects.length;++r){var o=t.intersectsWithObject(this._objects[r])||t.isContainedWithinObject(this._objects[r])||this._objects[r].isContainedWithinObject(t);if(o){i=r;break}}}else i=e+1;return i},moveTo:function(t,e){return n(this._objects,t),this._objects.splice(e,0,t),this.renderAll&&this.renderAll()},dispose:function(){return this.clear(),this.interactive&&this.removeListeners(),this},toString:function(){return"#<fabric.Canvas ("+this.complexity()+"): { objects: "+this.getObjects().length+" }>"}}),t(fabric.StaticCanvas.prototype,fabric.Observable),t(fabric.StaticCanvas.prototype,fabric.Collection),t(fabric.StaticCanvas.prototype,fabric.DataURLExporter),t(fabric.StaticCanvas,{EMPTY_JSON:'{"objects": [], "background": "white"}',supports:function(t){var e=fabric.util.createCanvasElement();if(!e||!e.getContext)return null;var n=e.getContext("2d");if(!n)return null;switch(t){case"getImageData":return"undefined"!=typeof n.getImageData;case"setLineDash":return"undefined"!=typeof n.setLineDash;case"toDataURL":return"undefined"!=typeof e.toDataURL;case"toDataURLWithQuality":try{return e.toDataURL("image/jpeg",0),!0}catch(i){}return!1;default:return null}}}),fabric.StaticCanvas.prototype.toJSON=fabric.StaticCanvas.prototype.toObject}(),fabric.BaseBrush=fabric.util.createClass({color:"rgb(0, 0, 0)",width:1,shadow:null,strokeLineCap:"round",strokeLineJoin:"round",strokeDashArray:null,setShadow:function(t){return this.shadow=new fabric.Shadow(t),this},_setBrushStyles:function(){var t=this.canvas.contextTop;t.strokeStyle=this.color,t.lineWidth=this.width,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,this.strokeDashArray&&fabric.StaticCanvas.supports("setLineDash")&&t.setLineDash(this.strokeDashArray)},_setShadow:function(){if(this.shadow){var t=this.canvas.contextTop;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur,t.shadowOffsetX=this.shadow.offsetX,t.shadowOffsetY=this.shadow.offsetY}},_resetShadow:function(){var t=this.canvas.contextTop;t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0}}),function(){fabric.PencilBrush=fabric.util.createClass(fabric.BaseBrush,{initialize:function(t){this.canvas=t,this._points=[]},onMouseDown:function(t){this._prepareForDrawing(t),this._captureDrawingPath(t),this._render()},onMouseMove:function(t){this._captureDrawingPath(t),this.canvas.clearContext(this.canvas.contextTop),this._render()},onMouseUp:function(){this._finalizeAndAddPath()},_prepareForDrawing:function(t){var e=new fabric.Point(t.x,t.y);this._reset(),this._addPoint(e),this.canvas.contextTop.moveTo(e.x,e.y)},_addPoint:function(t){this._points.push(t)},_reset:function(){this._points.length=0,this._setBrushStyles(),this._setShadow()},_captureDrawingPath:function(t){var e=new fabric.Point(t.x,t.y);this._addPoint(e)},_render:function(){var t=this.canvas.contextTop,e=this.canvas.viewportTransform,n=this._points[0],i=this._points[1];t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]),t.beginPath(),2===this._points.length&&n.x===i.x&&n.y===i.y&&(n.x-=.5,i.x+=.5),t.moveTo(n.x,n.y);for(var r=1,o=this._points.length;o>r;r++){var a=n.midPointFrom(i);t.quadraticCurveTo(n.x,n.y,a.x,a.y),n=this._points[r],i=this._points[r+1]}t.lineTo(n.x,n.y),t.stroke(),t.restore()},convertPointsToSVGPath:function(t){var e=[],n=new fabric.Point(t[0].x,t[0].y),i=new fabric.Point(t[1].x,t[1].y);e.push("M ",t[0].x," ",t[0].y," ");for(var r=1,o=t.length;o>r;r++){var a=n.midPointFrom(i);e.push("Q ",n.x," ",n.y," ",a.x," ",a.y," "),n=new fabric.Point(t[r].x,t[r].y),r+1<t.length&&(i=new fabric.Point(t[r+1].x,t[r+1].y))}return e.push("L ",n.x," ",n.y," "),e},createPath:function(t){var e=new fabric.Path(t,{fill:null,stroke:this.color,strokeWidth:this.width,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeDashArray:this.strokeDashArray,originX:"center",originY:"center"});return this.shadow&&(this.shadow.affectStroke=!0,e.setShadow(this.shadow)),e},_finalizeAndAddPath:function(){var t=this.canvas.contextTop;t.closePath();var e=this.convertPointsToSVGPath(this._points).join("");if("M 0 0 Q 0 0 0 0 L 0 0"===e)return void this.canvas.renderAll();var n=this.createPath(e);this.canvas.add(n),n.setCoords(),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderAll(),this.canvas.fire("path:created",{path:n})}})}(),fabric.CircleBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,initialize:function(t){this.canvas=t,this.points=[]},drawDot:function(t){var e=this.addPoint(t),n=this.canvas.contextTop,i=this.canvas.viewportTransform;n.save(),n.transform(i[0],i[1],i[2],i[3],i[4],i[5]),n.fillStyle=e.fill,n.beginPath(),n.arc(e.x,e.y,e.radius,0,2*Math.PI,!1),n.closePath(),n.fill(),n.restore()},onMouseDown:function(t){this.points.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.drawDot(t)},onMouseMove:function(t){this.drawDot(t)},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.points.length;i>n;n++){var r=this.points[n],o=new fabric.Circle({radius:r.radius,left:r.x,top:r.y,originX:"center",originY:"center",fill:r.fill});this.shadow&&o.setShadow(this.shadow),e.push(o)}var a=new fabric.Group(e,{originX:"center",originY:"center"});a.canvas=this.canvas,this.canvas.add(a),this.canvas.fire("path:created",{path:a}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},addPoint:function(t){var e=new fabric.Point(t.x,t.y),n=fabric.util.getRandomInt(Math.max(0,this.width-20),this.width+20)/2,i=new fabric.Color(this.color).setAlpha(fabric.util.getRandomInt(0,100)/100).toRgba();return e.radius=n,e.fill=i,this.points.push(e),e}}),fabric.SprayBrush=fabric.util.createClass(fabric.BaseBrush,{width:10,density:20,dotWidth:1,dotWidthVariance:1,randomOpacity:!1,optimizeOverlapping:!0,initialize:function(t){this.canvas=t,this.sprayChunks=[]},onMouseDown:function(t){this.sprayChunks.length=0,this.canvas.clearContext(this.canvas.contextTop),this._setShadow(),this.addSprayChunk(t),this.render()},onMouseMove:function(t){this.addSprayChunk(t),this.render()},onMouseUp:function(){var t=this.canvas.renderOnAddRemove;this.canvas.renderOnAddRemove=!1;for(var e=[],n=0,i=this.sprayChunks.length;i>n;n++)for(var r=this.sprayChunks[n],o=0,a=r.length;a>o;o++){var s=new fabric.Rect({width:r[o].width,height:r[o].width,left:r[o].x+1,top:r[o].y+1,originX:"center",originY:"center",fill:this.color});this.shadow&&s.setShadow(this.shadow),e.push(s)}this.optimizeOverlapping&&(e=this._getOptimizedRects(e));var l=new fabric.Group(e,{originX:"center",originY:"center"});l.canvas=this.canvas,this.canvas.add(l),this.canvas.fire("path:created",{path:l}),this.canvas.clearContext(this.canvas.contextTop),this._resetShadow(),this.canvas.renderOnAddRemove=t,this.canvas.renderAll()},_getOptimizedRects:function(t){for(var e,n={},i=0,r=t.length;r>i;i++)e=t[i].left+""+t[i].top,n[e]||(n[e]=t[i]);var o=[];for(e in n)o.push(n[e]);return o},render:function(){var t=this.canvas.contextTop;t.fillStyle=this.color;var e=this.canvas.viewportTransform;t.save(),t.transform(e[0],e[1],e[2],e[3],e[4],e[5]);for(var n=0,i=this.sprayChunkPoints.length;i>n;n++){var r=this.sprayChunkPoints[n];"undefined"!=typeof r.opacity&&(t.globalAlpha=r.opacity),t.fillRect(r.x,r.y,r.width,r.width)}t.restore()},addSprayChunk:function(t){this.sprayChunkPoints=[];for(var e,n,i,r=this.width/2,o=0;o<this.density;o++){e=fabric.util.getRandomInt(t.x-r,t.x+r),n=fabric.util.getRandomInt(t.y-r,t.y+r),i=this.dotWidthVariance?fabric.util.getRandomInt(Math.max(1,this.dotWidth-this.dotWidthVariance),this.dotWidth+this.dotWidthVariance):this.dotWidth;var a=new fabric.Point(e,n);a.width=i,this.randomOpacity&&(a.opacity=fabric.util.getRandomInt(0,100)/100),this.sprayChunkPoints.push(a)}this.sprayChunks.push(this.sprayChunkPoints)}}),fabric.PatternBrush=fabric.util.createClass(fabric.PencilBrush,{getPatternSrc:function(){var t=20,e=5,n=fabric.document.createElement("canvas"),i=n.getContext("2d");return n.width=n.height=t+e,i.fillStyle=this.color,i.beginPath(),i.arc(t/2,t/2,t/2,0,2*Math.PI,!1),i.closePath(),i.fill(),n},getPatternSrcFunction:function(){return String(this.getPatternSrc).replace("this.color",'"'+this.color+'"')},getPattern:function(){return this.canvas.contextTop.createPattern(this.source||this.getPatternSrc(),"repeat");

},_setBrushStyles:function(){this.callSuper("_setBrushStyles"),this.canvas.contextTop.strokeStyle=this.getPattern()},createPath:function(t){var e=this.callSuper("createPath",t);return e.stroke=new fabric.Pattern({source:this.source||this.getPatternSrcFunction()}),e}}),function(){var t=fabric.util.getPointer,e=fabric.util.degreesToRadians,n=fabric.util.radiansToDegrees,i=Math.atan2,r=Math.abs,o=.5;fabric.Canvas=fabric.util.createClass(fabric.StaticCanvas,{initialize:function(t,e){e||(e={}),this._initStatic(t,e),this._initInteractive(),this._createCacheCanvas(),fabric.Canvas.activeInstance=this},uniScaleTransform:!1,centeredScaling:!1,centeredRotation:!1,interactive:!0,selection:!0,selectionColor:"rgba(100, 100, 255, 0.3)",selectionDashArray:[],selectionBorderColor:"rgba(255, 255, 255, 0.3)",selectionLineWidth:1,hoverCursor:"move",moveCursor:"move",defaultCursor:"default",freeDrawingCursor:"crosshair",rotationCursor:"crosshair",containerClass:"canvas-container",perPixelTargetFind:!1,targetFindTolerance:0,skipTargetFind:!1,isDrawingMode:!1,_initInteractive:function(){this._currentTransform=null,this._groupSelector=null,this._initWrapperElement(),this._createUpperCanvas(),this._initEventListeners(),this.freeDrawingBrush=fabric.PencilBrush&&new fabric.PencilBrush(this),this.calcOffset()},_resetCurrentTransform:function(t){var e=this._currentTransform;e.target.set({scaleX:e.original.scaleX,scaleY:e.original.scaleY,left:e.original.left,top:e.original.top}),this._shouldCenterTransform(t,e.target)?"rotate"===e.action?this._setOriginToCenter(e.target):("center"!==e.originX&&(e.mouseXSign="right"===e.originX?-1:1),"center"!==e.originY&&(e.mouseYSign="bottom"===e.originY?-1:1),e.originX="center",e.originY="center"):(e.originX=e.original.originX,e.originY=e.original.originY)},containsPoint:function(t,e){var n=this.getPointer(t,!0),i=this._normalizePointer(e,n);return e.containsPoint(i)||e._findTargetCorner(n)},_normalizePointer:function(t,e){var n,i=this.getActiveGroup(),r=e.x,o=e.y,a=i&&"group"!==t.type&&i.contains(t);return a&&(n=new fabric.Point(i.left,i.top),n=fabric.util.transformPoint(n,this.viewportTransform,!0),r-=n.x,o-=n.y),{x:r,y:o}},isTargetTransparent:function(t,e,n){var i=t.hasBorders,r=t.transparentCorners;t.hasBorders=t.transparentCorners=!1,this._draw(this.contextCache,t),t.hasBorders=i,t.transparentCorners=r;var o=fabric.util.isTransparent(this.contextCache,e,n,this.targetFindTolerance);return this.clearContext(this.contextCache),o},_shouldClearSelection:function(t,e){var n=this.getActiveGroup(),i=this.getActiveObject();return!e||e&&n&&!n.contains(e)&&n!==e&&!t.shiftKey||e&&!e.evented||e&&!e.selectable&&i&&i!==e},_shouldCenterTransform:function(t,e){if(e){var n,i=this._currentTransform;return"scale"===i.action||"scaleX"===i.action||"scaleY"===i.action?n=this.centeredScaling||e.centeredScaling:"rotate"===i.action&&(n=this.centeredRotation||e.centeredRotation),n?!t.altKey:t.altKey}},_getOriginFromCorner:function(t,e){var n={x:t.originX,y:t.originY};return"ml"===e||"tl"===e||"bl"===e?n.x="right":("mr"===e||"tr"===e||"br"===e)&&(n.x="left"),"tl"===e||"mt"===e||"tr"===e?n.y="bottom":("bl"===e||"mb"===e||"br"===e)&&(n.y="top"),n},_getActionFromCorner:function(t,e){var n="drag";return e&&(n="ml"===e||"mr"===e?"scaleX":"mt"===e||"mb"===e?"scaleY":"mtr"===e?"rotate":"scale"),n},_setupCurrentTransform:function(t,n){if(n){var i=this.getPointer(t),r=n._findTargetCorner(this.getPointer(t,!0)),o=this._getActionFromCorner(n,r),a=this._getOriginFromCorner(n,r);this._currentTransform={target:n,action:o,scaleX:n.scaleX,scaleY:n.scaleY,offsetX:i.x-n.left,offsetY:i.y-n.top,originX:a.x,originY:a.y,ex:i.x,ey:i.y,left:n.left,top:n.top,theta:e(n.angle),width:n.width*n.scaleX,mouseXSign:1,mouseYSign:1},this._currentTransform.original={left:n.left,top:n.top,scaleX:n.scaleX,scaleY:n.scaleY,originX:a.x,originY:a.y},this._resetCurrentTransform(t)}},_translateObject:function(t,e){var n=this._currentTransform.target;n.get("lockMovementX")||n.set("left",t-this._currentTransform.offsetX),n.get("lockMovementY")||n.set("top",e-this._currentTransform.offsetY)},_scaleObject:function(t,e,n){var i=this._currentTransform,r=i.target,o=r.get("lockScalingX"),a=r.get("lockScalingY"),s=r.get("lockScalingFlip");if(!o||!a){var l=r.translateToOriginPoint(r.getCenterPoint(),i.originX,i.originY),c=r.toLocalPoint(new fabric.Point(t,e),i.originX,i.originY);this._setLocalMouse(c,i),this._setObjectScale(c,i,o,a,n,s),r.setPositionByOrigin(l,i.originX,i.originY)}},_setObjectScale:function(t,e,n,i,r,o){var a=e.target,s=!1,l=!1,c="line"===a.type&&0===a.width,u="line"===a.type&&0===a.height,h=u?0:a.strokeWidth,d=c?0:a.strokeWidth;e.newScaleX=t.x/(a.width+h),e.newScaleY=t.y/(a.height+d),o&&e.newScaleX<=0&&e.newScaleX<a.scaleX&&(s=!0),o&&e.newScaleY<=0&&e.newScaleY<a.scaleY&&(l=!0),"equally"!==r||n||i?r?"x"!==r||a.get("lockUniScaling")?"y"!==r||a.get("lockUniScaling")||l||i||a.set("scaleY",e.newScaleY):s||n||a.set("scaleX",e.newScaleX):(s||n||a.set("scaleX",e.newScaleX),l||i||a.set("scaleY",e.newScaleY)):s||l||this._scaleObjectEqually(t,a,e),s||l||this._flipObject(e,r)},_scaleObjectEqually:function(t,e,n){var i=t.y+t.x,r="line"===e.type&&0===e.width,o="line"===e.type&&0===e.height,a=o?0:e.strokeWidth,s=r?0:e.strokeWidth,l=(e.height+s)*n.original.scaleY+(e.width+a)*n.original.scaleX;n.newScaleX=n.original.scaleX*i/l,n.newScaleY=n.original.scaleY*i/l,e.set("scaleX",n.newScaleX),e.set("scaleY",n.newScaleY)},_flipObject:function(t,e){t.newScaleX<0&&"y"!==e&&("left"===t.originX?t.originX="right":"right"===t.originX&&(t.originX="left")),t.newScaleY<0&&"x"!==e&&("top"===t.originY?t.originY="bottom":"bottom"===t.originY&&(t.originY="top"))},_setLocalMouse:function(t,e){var n=e.target;"right"===e.originX?t.x*=-1:"center"===e.originX&&(t.x*=2*e.mouseXSign,t.x<0&&(e.mouseXSign=-e.mouseXSign)),"bottom"===e.originY?t.y*=-1:"center"===e.originY&&(t.y*=2*e.mouseYSign,t.y<0&&(e.mouseYSign=-e.mouseYSign)),r(t.x)>n.padding?t.x<0?t.x+=n.padding:t.x-=n.padding:t.x=0,r(t.y)>n.padding?t.y<0?t.y+=n.padding:t.y-=n.padding:t.y=0},_rotateObject:function(t,e){var r=this._currentTransform;if(!r.target.get("lockRotation")){var o=i(r.ey-r.top,r.ex-r.left),a=i(e-r.top,t-r.left),s=n(a-o+r.theta);0>s&&(s=360+s),r.target.angle=s%360}},setCursor:function(t){this.upperCanvasEl.style.cursor=t},_resetObjectTransform:function(t){t.scaleX=1,t.scaleY=1,t.setAngle(0)},_drawSelection:function(){var t=this.contextTop,e=this._groupSelector,n=e.left,i=e.top,a=r(n),s=r(i);if(t.fillStyle=this.selectionColor,t.fillRect(e.ex-(n>0?0:-n),e.ey-(i>0?0:-i),a,s),t.lineWidth=this.selectionLineWidth,t.strokeStyle=this.selectionBorderColor,this.selectionDashArray.length>1){var l=e.ex+o-(n>0?0:a),c=e.ey+o-(i>0?0:s);t.beginPath(),fabric.util.drawDashedLine(t,l,c,l+a,c,this.selectionDashArray),fabric.util.drawDashedLine(t,l,c+s-1,l+a,c+s-1,this.selectionDashArray),fabric.util.drawDashedLine(t,l,c,l,c+s,this.selectionDashArray),fabric.util.drawDashedLine(t,l+a-1,c,l+a-1,c+s,this.selectionDashArray),t.closePath(),t.stroke()}else t.strokeRect(e.ex+o-(n>0?0:a),e.ey+o-(i>0?0:s),a,s)},_isLastRenderedObject:function(t){return this.controlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay&&this.lastRenderedObjectWithControlsAboveOverlay.visible&&this.containsPoint(t,this.lastRenderedObjectWithControlsAboveOverlay)&&this.lastRenderedObjectWithControlsAboveOverlay._findTargetCorner(this.getPointer(t,!0))},findTarget:function(t,e){if(!this.skipTargetFind){if(this._isLastRenderedObject(t))return this.lastRenderedObjectWithControlsAboveOverlay;var n=this.getActiveGroup();if(n&&!e&&this.containsPoint(t,n))return n;var i=this._searchPossibleTargets(t);return this._fireOverOutEvents(i,t),i}},_fireOverOutEvents:function(t,e){t?this._hoveredTarget!==t&&(this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout")),this.fire("mouse:over",{target:t,e:e}),t.fire("mouseover"),this._hoveredTarget=t):this._hoveredTarget&&(this.fire("mouse:out",{target:this._hoveredTarget,e:e}),this._hoveredTarget.fire("mouseout"),this._hoveredTarget=null)},_checkTarget:function(t,e,n){if(e&&e.visible&&e.evented&&this.containsPoint(t,e)){if(!this.perPixelTargetFind&&!e.perPixelTargetFind||e.isEditing)return!0;var i=this.isTargetTransparent(e,n.x,n.y);if(!i)return!0}},_searchPossibleTargets:function(t){for(var e,n=this.getPointer(t,!0),i=this._objects.length;i--;)if(!this._objects[i].group&&this._checkTarget(t,this._objects[i],n)){this.relatedTarget=this._objects[i],e=this._objects[i];break}return e},getPointer:function(e,n,i){i||(i=this.upperCanvasEl);var r,o=t(e,i),a=i.getBoundingClientRect(),s=a.width||0,l=a.height||0;return s&&l||("top"in a&&"bottom"in a&&(l=Math.abs(a.top-a.bottom)),"right"in a&&"left"in a&&(s=Math.abs(a.right-a.left))),this.calcOffset(),o.x=o.x-this._offset.left,o.y=o.y-this._offset.top,n||(o=fabric.util.transformPoint(o,fabric.util.invertTransform(this.viewportTransform))),r=0===s||0===l?{width:1,height:1}:{width:i.width/s,height:i.height/l},{x:o.x*r.width,y:o.y*r.height}},_createUpperCanvas:function(){var t=this.lowerCanvasEl.className.replace(/\s*lower-canvas\s*/,"");this.upperCanvasEl=this._createCanvasElement(),fabric.util.addClass(this.upperCanvasEl,"upper-canvas "+t),this.wrapperEl.appendChild(this.upperCanvasEl),this._copyCanvasStyle(this.lowerCanvasEl,this.upperCanvasEl),this._applyCanvasStyle(this.upperCanvasEl),this.contextTop=this.upperCanvasEl.getContext("2d")},_createCacheCanvas:function(){this.cacheCanvasEl=this._createCanvasElement(),this.cacheCanvasEl.setAttribute("width",this.width),this.cacheCanvasEl.setAttribute("height",this.height),this.contextCache=this.cacheCanvasEl.getContext("2d")},_initWrapperElement:function(){this.wrapperEl=fabric.util.wrapElement(this.lowerCanvasEl,"div",{"class":this.containerClass}),fabric.util.setStyle(this.wrapperEl,{width:this.getWidth()+"px",height:this.getHeight()+"px",position:"relative"}),fabric.util.makeElementUnselectable(this.wrapperEl)},_applyCanvasStyle:function(t){var e=this.getWidth()||t.width,n=this.getHeight()||t.height;fabric.util.setStyle(t,{position:"absolute",width:e+"px",height:n+"px",left:0,top:0}),t.width=e,t.height=n,fabric.util.makeElementUnselectable(t)},_copyCanvasStyle:function(t,e){e.style.cssText=t.style.cssText},getSelectionContext:function(){return this.contextTop},getSelectionElement:function(){return this.upperCanvasEl},_setActiveObject:function(t){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=t,t.set("active",!0)},setActiveObject:function(t,e){return this._setActiveObject(t),this.renderAll(),this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e}),this},getActiveObject:function(){return this._activeObject},_discardActiveObject:function(){this._activeObject&&this._activeObject.set("active",!1),this._activeObject=null},discardActiveObject:function(t){return this._discardActiveObject(),this.renderAll(),this.fire("selection:cleared",{e:t}),this},_setActiveGroup:function(t){this._activeGroup=t,t&&t.set("active",!0)},setActiveGroup:function(t,e){return this._setActiveGroup(t),t&&(this.fire("object:selected",{target:t,e:e}),t.fire("selected",{e:e})),this},getActiveGroup:function(){return this._activeGroup},_discardActiveGroup:function(){var t=this.getActiveGroup();t&&t.destroy(),this.setActiveGroup(null)},discardActiveGroup:function(t){return this._discardActiveGroup(),this.fire("selection:cleared",{e:t}),this},deactivateAll:function(){for(var t=this.getObjects(),e=0,n=t.length;n>e;e++)t[e].set("active",!1);return this._discardActiveGroup(),this._discardActiveObject(),this},deactivateAllWithDispatch:function(t){var e=this.getActiveGroup()||this.getActiveObject();return e&&this.fire("before:selection:cleared",{target:e,e:t}),this.deactivateAll(),e&&this.fire("selection:cleared",{e:t}),this},drawControls:function(t){var e=this.getActiveGroup();e?this._drawGroupControls(t,e):this._drawObjectsControls(t)},_drawGroupControls:function(t,e){e._renderControls(t)},_drawObjectsControls:function(t){for(var e=0,n=this._objects.length;n>e;++e)this._objects[e]&&this._objects[e].active&&(this._objects[e]._renderControls(t),this.lastRenderedObjectWithControlsAboveOverlay=this._objects[e])}});for(var a in fabric.StaticCanvas)"prototype"!==a&&(fabric.Canvas[a]=fabric.StaticCanvas[a]);fabric.isTouchSupported&&(fabric.Canvas.prototype._setCursorFromEvent=function(){}),fabric.Element=fabric.Canvas}(),function(){var t={mt:0,tr:1,mr:2,br:3,mb:4,bl:5,ml:6,tl:7},e=fabric.util.addListener,n=fabric.util.removeListener;fabric.util.object.extend(fabric.Canvas.prototype,{cursorMap:["n-resize","ne-resize","e-resize","se-resize","s-resize","sw-resize","w-resize","nw-resize"],_initEventListeners:function(){this._bindEvents(),e(fabric.window,"resize",this._onResize),e(this.upperCanvasEl,"mousedown",this._onMouseDown),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"mousewheel",this._onMouseWheel),e(this.upperCanvasEl,"touchstart",this._onMouseDown),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"add"in eventjs&&(eventjs.add(this.upperCanvasEl,"gesture",this._onGesture),eventjs.add(this.upperCanvasEl,"drag",this._onDrag),eventjs.add(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.add(this.upperCanvasEl,"shake",this._onShake),eventjs.add(this.upperCanvasEl,"longpress",this._onLongPress))},_bindEvents:function(){this._onMouseDown=this._onMouseDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this._onMouseUp=this._onMouseUp.bind(this),this._onResize=this._onResize.bind(this),this._onGesture=this._onGesture.bind(this),this._onDrag=this._onDrag.bind(this),this._onShake=this._onShake.bind(this),this._onLongPress=this._onLongPress.bind(this),this._onOrientationChange=this._onOrientationChange.bind(this),this._onMouseWheel=this._onMouseWheel.bind(this)},removeListeners:function(){n(fabric.window,"resize",this._onResize),n(this.upperCanvasEl,"mousedown",this._onMouseDown),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"mousewheel",this._onMouseWheel),n(this.upperCanvasEl,"touchstart",this._onMouseDown),n(this.upperCanvasEl,"touchmove",this._onMouseMove),"undefined"!=typeof eventjs&&"remove"in eventjs&&(eventjs.remove(this.upperCanvasEl,"gesture",this._onGesture),eventjs.remove(this.upperCanvasEl,"drag",this._onDrag),eventjs.remove(this.upperCanvasEl,"orientation",this._onOrientationChange),eventjs.remove(this.upperCanvasEl,"shake",this._onShake),eventjs.remove(this.upperCanvasEl,"longpress",this._onLongPress))},_onGesture:function(t,e){this.__onTransformGesture&&this.__onTransformGesture(t,e)},_onDrag:function(t,e){this.__onDrag&&this.__onDrag(t,e)},_onMouseWheel:function(t,e){this.__onMouseWheel&&this.__onMouseWheel(t,e)},_onOrientationChange:function(t,e){this.__onOrientationChange&&this.__onOrientationChange(t,e)},_onShake:function(t,e){this.__onShake&&this.__onShake(t,e)},_onLongPress:function(t,e){this.__onLongPress&&this.__onLongPress(t,e)},_onMouseDown:function(t){this.__onMouseDown(t),e(fabric.document,"touchend",this._onMouseUp),e(fabric.document,"touchmove",this._onMouseMove),n(this.upperCanvasEl,"mousemove",this._onMouseMove),n(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchstart"===t.type?n(this.upperCanvasEl,"mousedown",this._onMouseDown):(e(fabric.document,"mouseup",this._onMouseUp),e(fabric.document,"mousemove",this._onMouseMove))},_onMouseUp:function(t){if(this.__onMouseUp(t),n(fabric.document,"mouseup",this._onMouseUp),n(fabric.document,"touchend",this._onMouseUp),n(fabric.document,"mousemove",this._onMouseMove),n(fabric.document,"touchmove",this._onMouseMove),e(this.upperCanvasEl,"mousemove",this._onMouseMove),e(this.upperCanvasEl,"touchmove",this._onMouseMove),"touchend"===t.type){var i=this;setTimeout(function(){e(i.upperCanvasEl,"mousedown",i._onMouseDown)},400)}},_onMouseMove:function(t){!this.allowTouchScrolling&&t.preventDefault&&t.preventDefault(),this.__onMouseMove(t)},_onResize:function(){this.calcOffset()},_shouldRender:function(t,e){var n=this.getActiveGroup()||this.getActiveObject();return!!(t&&(t.isMoving||t!==n)||!t&&n||!t&&!n&&!this._groupSelector||e&&this._previousPointer&&this.selection&&(e.x!==this._previousPointer.x||e.y!==this._previousPointer.y))},__onMouseUp:function(t){var e;if(this.isDrawingMode&&this._isCurrentlyDrawing)return void this._onMouseUpInDrawingMode(t);this._currentTransform?(this._finalizeCurrentTransform(),e=this._currentTransform.target):e=this.findTarget(t,!0);var n=this._shouldRender(e,this.getPointer(t));this._maybeGroupObjects(t),e&&(e.isMoving=!1),n&&this.renderAll(),this._handleCursorAndEvent(t,e)},_handleCursorAndEvent:function(t,e){this._setCursorFromEvent(t,e);var n=this;setTimeout(function(){n._setCursorFromEvent(t,e)},50),this.fire("mouse:up",{target:e,e:t}),e&&e.fire("mouseup",{e:t})},_finalizeCurrentTransform:function(){var t=this._currentTransform,e=t.target;e._scaling&&(e._scaling=!1),e.setCoords(),this.stateful&&e.hasStateChanged()&&(this.fire("object:modified",{target:e}),e.fire("modified")),this._restoreOriginXY(e)},_restoreOriginXY:function(t){if(this._previousOriginX&&this._previousOriginY){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null}},_onMouseDownInDrawingMode:function(t){this._isCurrentlyDrawing=!0,this.discardActiveObject(t).renderAll(),this.clipTo&&fabric.util.clipContext(this,this.contextTop);var e=fabric.util.invertTransform(this.viewportTransform),n=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseDown(n),this.fire("mouse:down",{e:t});var i=this.findTarget(t);"undefined"!=typeof i&&i.fire("mousedown",{e:t,target:i})},_onMouseMoveInDrawingMode:function(t){if(this._isCurrentlyDrawing){var e=fabric.util.invertTransform(this.viewportTransform),n=fabric.util.transformPoint(this.getPointer(t,!0),e);this.freeDrawingBrush.onMouseMove(n)}this.setCursor(this.freeDrawingCursor),this.fire("mouse:move",{e:t});var i=this.findTarget(t);"undefined"!=typeof i&&i.fire("mousemove",{e:t,target:i})},_onMouseUpInDrawingMode:function(t){this._isCurrentlyDrawing=!1,this.clipTo&&this.contextTop.restore(),this.freeDrawingBrush.onMouseUp(),this.fire("mouse:up",{e:t});var e=this.findTarget(t);"undefined"!=typeof e&&e.fire("mouseup",{e:t,target:e})},__onMouseDown:function(t){var e="which"in t?1===t.which:1===t.button;if(e||fabric.isTouchSupported){if(this.isDrawingMode)return void this._onMouseDownInDrawingMode(t);if(!this._currentTransform){var n=this.findTarget(t),i=this.getPointer(t,!0);this._previousPointer=i;var r=this._shouldRender(n,i),o=this._shouldGroup(t,n);this._shouldClearSelection(t,n)?this._clearSelection(t,n,i):o&&(this._handleGrouping(t,n),n=this.getActiveGroup()),n&&n.selectable&&!o&&(this._beforeTransform(t,n),this._setupCurrentTransform(t,n)),r&&this.renderAll(),this.fire("mouse:down",{target:n,e:t}),n&&n.fire("mousedown",{e:t})}}},_beforeTransform:function(t,e){this.stateful&&e.saveState(),e._findTargetCorner(this.getPointer(t))&&this.onBeforeScaleRotate(e),e!==this.getActiveGroup()&&e!==this.getActiveObject()&&(this.deactivateAll(),this.setActiveObject(e,t))},_clearSelection:function(t,e,n){this.deactivateAllWithDispatch(t),e&&e.selectable?this.setActiveObject(e,t):this.selection&&(this._groupSelector={ex:n.x,ey:n.y,top:0,left:0})},_setOriginToCenter:function(t){this._previousOriginX=this._currentTransform.target.originX,this._previousOriginY=this._currentTransform.target.originY;var e=t.getCenterPoint();t.originX="center",t.originY="center",t.left=e.x,t.top=e.y,this._currentTransform.left=t.left,this._currentTransform.top=t.top},_setCenterToOrigin:function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),this._previousOriginX,this._previousOriginY);t.originX=this._previousOriginX,t.originY=this._previousOriginY,t.left=e.x,t.top=e.y,this._previousOriginX=null,this._previousOriginY=null},__onMouseMove:function(t){var e,n;if(this.isDrawingMode)return void this._onMouseMoveInDrawingMode(t);if(!("undefined"!=typeof t.touches&&t.touches.length>1)){var i=this._groupSelector;i?(n=this.getPointer(t,!0),i.left=n.x-i.ex,i.top=n.y-i.ey,this.renderTop()):this._currentTransform?this._transformObject(t):(e=this.findTarget(t),!e||e&&!e.selectable?this.setCursor(this.defaultCursor):this._setCursorFromEvent(t,e)),this.fire("mouse:move",{target:e,e:t}),e&&e.fire("mousemove",{e:t})}},_transformObject:function(t){var e=this.getPointer(t),n=this._currentTransform;n.reset=!1,n.target.isMoving=!0,this._beforeScaleTransform(t,n),this._performTransformAction(t,n,e),this.renderAll()},_performTransformAction:function(t,e,n){var i=n.x,r=n.y,o=e.target,a=e.action;"rotate"===a?(this._rotateObject(i,r),this._fire("rotating",o,t)):"scale"===a?(this._onScale(t,e,i,r),this._fire("scaling",o,t)):"scaleX"===a?(this._scaleObject(i,r,"x"),this._fire("scaling",o,t)):"scaleY"===a?(this._scaleObject(i,r,"y"),this._fire("scaling",o,t)):(this._translateObject(i,r),this._fire("moving",o,t),this.setCursor(this.moveCursor))},_fire:function(t,e,n){this.fire("object:"+t,{target:e,e:n}),e.fire(t,{e:n})},_beforeScaleTransform:function(t,e){if("scale"===e.action||"scaleX"===e.action||"scaleY"===e.action){var n=this._shouldCenterTransform(t,e.target);(n&&("center"!==e.originX||"center"!==e.originY)||!n&&"center"===e.originX&&"center"===e.originY)&&(this._resetCurrentTransform(t),e.reset=!0)}},_onScale:function(t,e,n,i){!t.shiftKey&&!this.uniScaleTransform||e.target.get("lockUniScaling")?(e.reset||"scale"!==e.currentAction||this._resetCurrentTransform(t,e.target),e.currentAction="scaleEqually",this._scaleObject(n,i,"equally")):(e.currentAction="scale",this._scaleObject(n,i))},_setCursorFromEvent:function(t,e){if(!e||!e.selectable)return this.setCursor(this.defaultCursor),!1;var n=this.getActiveGroup(),i=e._findTargetCorner&&(!n||!n.contains(e))&&e._findTargetCorner(this.getPointer(t,!0));return i?this._setCornerCursor(i,e):this.setCursor(e.hoverCursor||this.hoverCursor),!0},_setCornerCursor:function(e,n){if(e in t)this.setCursor(this._getRotatedCornerCursor(e,n));else{if("mtr"!==e||!n.hasRotatingPoint)return this.setCursor(this.defaultCursor),!1;this.setCursor(this.rotationCursor)}},_getRotatedCornerCursor:function(e,n){var i=Math.round(n.getAngle()%360/45);return 0>i&&(i+=8),i+=t[e],i%=8,this.cursorMap[i]}})}(),function(){var t=Math.min,e=Math.max;fabric.util.object.extend(fabric.Canvas.prototype,{_shouldGroup:function(t,e){var n=this.getActiveObject();return t.shiftKey&&(this.getActiveGroup()||n&&n!==e)&&this.selection},_handleGrouping:function(t,e){(e!==this.getActiveGroup()||(e=this.findTarget(t,!0),e&&!e.isType("group")))&&(this.getActiveGroup()?this._updateActiveGroup(e,t):this._createActiveGroup(e,t),this._activeGroup&&this._activeGroup.saveCoords())},_updateActiveGroup:function(t,e){var n=this.getActiveGroup();if(n.contains(t)){if(n.removeWithUpdate(t),this._resetObjectTransform(n),t.set("active",!1),1===n.size())return this.discardActiveGroup(e),void this.setActiveObject(n.item(0))}else n.addWithUpdate(t),this._resetObjectTransform(n);this.fire("selection:created",{target:n,e:e}),n.set("active",!0)},_createActiveGroup:function(t,e){if(this._activeObject&&t!==this._activeObject){var n=this._createGroup(t);n.addWithUpdate(),this.setActiveGroup(n),this._activeObject=null,this.fire("selection:created",{target:n,e:e})}t.set("active",!0)},_createGroup:function(t){var e=this.getObjects(),n=e.indexOf(this._activeObject)<e.indexOf(t),i=n?[this._activeObject,t]:[t,this._activeObject];return new fabric.Group(i,{canvas:this})},_groupSelectedObjects:function(t){var e=this._collectObjects();1===e.length?this.setActiveObject(e[0],t):e.length>1&&(e=new fabric.Group(e.reverse(),{canvas:this}),e.addWithUpdate(),this.setActiveGroup(e,t),e.saveCoords(),this.fire("selection:created",{target:e}),this.renderAll())},_collectObjects:function(){for(var n,i=[],r=this._groupSelector.ex,o=this._groupSelector.ey,a=r+this._groupSelector.left,s=o+this._groupSelector.top,l=new fabric.Point(t(r,a),t(o,s)),c=new fabric.Point(e(r,a),e(o,s)),u=r===a&&o===s,h=this._objects.length;h--&&(n=this._objects[h],!(n&&n.selectable&&n.visible&&(n.intersectsWithRect(l,c)||n.isContainedWithinRect(l,c)||n.containsPoint(l)||n.containsPoint(c))&&(n.set("active",!0),i.push(n),u))););return i},_maybeGroupObjects:function(t){this.selection&&this._groupSelector&&this._groupSelectedObjects(t);var e=this.getActiveGroup();e&&(e.setObjectsCoords().setCoords(),e.isMoving=!1,this.setCursor(this.defaultCursor)),this._groupSelector=null,this._currentTransform=null}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{toDataURL:function(t){t||(t={});var e=t.format||"png",n=t.quality||1,i=t.multiplier||1,r={left:t.left,top:t.top,width:t.width,height:t.height};return 1!==i?this.__toDataURLWithMultiplier(e,n,r,i):this.__toDataURL(e,n,r)},__toDataURL:function(t,e,n){this.renderAll(!0);var i=this.upperCanvasEl||this.lowerCanvasEl,r=this.__getCroppedCanvas(i,n);"jpg"===t&&(t="jpeg");var o=fabric.StaticCanvas.supports("toDataURLWithQuality")?(r||i).toDataURL("image/"+t,e):(r||i).toDataURL("image/"+t);return this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),r&&(r=null),o},__getCroppedCanvas:function(t,e){var n,i,r="left"in e||"top"in e||"width"in e||"height"in e;return r&&(n=fabric.util.createCanvasElement(),i=n.getContext("2d"),n.width=e.width||this.width,n.height=e.height||this.height,i.drawImage(t,-e.left||0,-e.top||0)),n},__toDataURLWithMultiplier:function(t,e,n,i){var r=this.getWidth(),o=this.getHeight(),a=r*i,s=o*i,l=this.getActiveObject(),c=this.getActiveGroup(),u=this.contextTop||this.contextContainer;i>1&&this.setWidth(a).setHeight(s),u.scale(i,i),n.left&&(n.left*=i),n.top&&(n.top*=i),n.width?n.width*=i:1>i&&(n.width=a),n.height?n.height*=i:1>i&&(n.height=s),c?this._tempRemoveBordersControlsFromGroup(c):l&&this.deactivateAll&&this.deactivateAll(),this.renderAll(!0);var h=this.__toDataURL(t,e,n);return this.width=r,this.height=o,u.scale(1/i,1/i),this.setWidth(r).setHeight(o),c?this._restoreBordersControlsOnGroup(c):l&&this.setActiveObject&&this.setActiveObject(l),this.contextTop&&this.clearContext(this.contextTop),this.renderAll(),h},toDataURLWithMultiplier:function(t,e,n){return this.toDataURL({format:t,multiplier:e,quality:n})},_tempRemoveBordersControlsFromGroup:function(t){t.origHasControls=t.hasControls,t.origBorderColor=t.borderColor,t.hasControls=!0,t.borderColor="rgba(0,0,0,0)",t.forEachObject(function(t){t.origBorderColor=t.borderColor,t.borderColor="rgba(0,0,0,0)"})},_restoreBordersControlsOnGroup:function(t){t.hideControls=t.origHideControls,t.borderColor=t.origBorderColor,t.forEachObject(function(t){t.borderColor=t.origBorderColor,delete t.origBorderColor})}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{loadFromDatalessJSON:function(t,e,n){return this.loadFromJSON(t,e,n)},loadFromJSON:function(t,e,n){if(t){var i="string"==typeof t?JSON.parse(t):t;this.clear();var r=this;return this._enlivenObjects(i.objects,function(){r._setBgOverlay(i,e)},n),this}},_setBgOverlay:function(t,e){var n=this,i={backgroundColor:!1,overlayColor:!1,backgroundImage:!1,overlayImage:!1};if(!(t.backgroundImage||t.overlayImage||t.background||t.overlay))return void(e&&e());var r=function(){i.backgroundImage&&i.overlayImage&&i.backgroundColor&&i.overlayColor&&(n.renderAll(),e&&e())};this.__setBgOverlay("backgroundImage",t.backgroundImage,i,r),this.__setBgOverlay("overlayImage",t.overlayImage,i,r),this.__setBgOverlay("backgroundColor",t.background,i,r),this.__setBgOverlay("overlayColor",t.overlay,i,r),r()},__setBgOverlay:function(t,e,n,i){var r=this;return e?void("backgroundImage"===t||"overlayImage"===t?fabric.Image.fromObject(e,function(e){r[t]=e,n[t]=!0,i&&i()}):this["set"+fabric.util.string.capitalize(t,!0)](e,function(){n[t]=!0,i&&i()})):void(n[t]=!0)},_enlivenObjects:function(t,e,n){var i=this;if(!t||0===t.length)return void(e&&e());var r=this.renderOnAddRemove;this.renderOnAddRemove=!1,fabric.util.enlivenObjects(t,function(t){t.forEach(function(t,e){i.insertAt(t,e,!0)}),i.renderOnAddRemove=r,e&&e()},null,n)},_toDataURL:function(t,e){this.clone(function(n){e(n.toDataURL(t))})},_toDataURLWithMultiplier:function(t,e,n){this.clone(function(i){n(i.toDataURLWithMultiplier(t,e))})},clone:function(t,e){var n=JSON.stringify(this.toJSON(e));this.cloneWithoutData(function(e){e.loadFromJSON(n,function(){t&&t(e)})})},cloneWithoutData:function(t){var e=fabric.document.createElement("canvas");e.width=this.getWidth(),e.height=this.getHeight();var n=new fabric.Canvas(e);n.clipTo=this.clipTo,this.backgroundImage?(n.setBackgroundImage(this.backgroundImage.src,function(){n.renderAll(),t&&t(n)}),n.backgroundImageOpacity=this.backgroundImageOpacity,n.backgroundImageStretch=this.backgroundImageStretch):t&&t(n)}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.toFixed,r=e.util.string.capitalize,o=e.util.degreesToRadians,a=e.StaticCanvas.supports("setLineDash");e.Object||(e.Object=e.util.createClass({type:"object",originX:"left",originY:"top",top:0,left:0,width:0,height:0,scaleX:1,scaleY:1,flipX:!1,flipY:!1,opacity:1,angle:0,cornerSize:12,transparentCorners:!0,hoverCursor:null,padding:0,borderColor:"rgba(102,153,255,0.75)",cornerColor:"rgba(102,153,255,0.5)",centeredScaling:!1,centeredRotation:!0,fill:"rgb(0,0,0)",fillRule:"nonzero",globalCompositeOperation:"source-over",backgroundColor:"",stroke:null,strokeWidth:1,strokeDashArray:null,strokeLineCap:"butt",strokeLineJoin:"miter",strokeMiterLimit:10,shadow:null,borderOpacityWhenMoving:.4,borderScaleFactor:1,transformMatrix:null,minScaleLimit:.01,selectable:!0,evented:!0,visible:!0,hasControls:!0,hasBorders:!0,hasRotatingPoint:!0,rotatingPointOffset:40,perPixelTargetFind:!1,includeDefaultValues:!0,clipTo:null,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,lockScalingFlip:!1,stateProperties:"top left width height scaleX scaleY flipX flipY originX originY transformMatrix stroke strokeWidth strokeDashArray strokeLineCap strokeLineJoin strokeMiterLimit angle opacity fill fillRule globalCompositeOperation shadow clipTo visible backgroundColor".split(" "),initialize:function(t){t&&this.setOptions(t)},_initGradient:function(t){!t.fill||!t.fill.colorStops||t.fill instanceof e.Gradient||this.set("fill",new e.Gradient(t.fill)),!t.stroke||!t.stroke.colorStops||t.stroke instanceof e.Gradient||this.set("stroke",new e.Gradient(t.stroke))},_initPattern:function(t){!t.fill||!t.fill.source||t.fill instanceof e.Pattern||this.set("fill",new e.Pattern(t.fill)),!t.stroke||!t.stroke.source||t.stroke instanceof e.Pattern||this.set("stroke",new e.Pattern(t.stroke))},_initClipping:function(t){if(t.clipTo&&"string"==typeof t.clipTo){var n=e.util.getFunctionBody(t.clipTo);"undefined"!=typeof n&&(this.clipTo=new Function("ctx",n))}},setOptions:function(t){for(var e in t)this.set(e,t[e]);this._initGradient(t),this._initPattern(t),this._initClipping(t)},transform:function(t,e){this.group&&this.canvas.preserveObjectStacking&&this.group===this.canvas._activeGroup&&this.group.transform(t);var n=e?this._getLeftTopCoords():this.getCenterPoint();t.translate(n.x,n.y),t.rotate(o(this.angle)),t.scale(this.scaleX*(this.flipX?-1:1),this.scaleY*(this.flipY?-1:1))},toObject:function(t){var n=e.Object.NUM_FRACTION_DIGITS,r={type:this.type,originX:this.originX,originY:this.originY,left:i(this.left,n),top:i(this.top,n),width:i(this.width,n),height:i(this.height,n),fill:this.fill&&this.fill.toObject?this.fill.toObject():this.fill,stroke:this.stroke&&this.stroke.toObject?this.stroke.toObject():this.stroke,strokeWidth:i(this.strokeWidth,n),strokeDashArray:this.strokeDashArray,strokeLineCap:this.strokeLineCap,strokeLineJoin:this.strokeLineJoin,strokeMiterLimit:i(this.strokeMiterLimit,n),
scaleX:i(this.scaleX,n),scaleY:i(this.scaleY,n),angle:i(this.getAngle(),n),flipX:this.flipX,flipY:this.flipY,opacity:i(this.opacity,n),shadow:this.shadow&&this.shadow.toObject?this.shadow.toObject():this.shadow,visible:this.visible,clipTo:this.clipTo&&String(this.clipTo),backgroundColor:this.backgroundColor,fillRule:this.fillRule,globalCompositeOperation:this.globalCompositeOperation};return this.includeDefaultValues||(r=this._removeDefaultValues(r)),e.util.populateWithProperties(this,r,t),r},toDatalessObject:function(t){return this.toObject(t)},_removeDefaultValues:function(t){var n=e.util.getKlass(t.type).prototype,i=n.stateProperties;return i.forEach(function(e){t[e]===n[e]&&delete t[e]}),t},toString:function(){return"#<fabric."+r(this.type)+">"},get:function(t){return this[t]},_setObject:function(t){for(var e in t)this._set(e,t[e])},set:function(t,e){return"object"==typeof t?this._setObject(t):"function"==typeof e&&"clipTo"!==t?this._set(t,e(this.get(t))):this._set(t,e),this},_set:function(t,n){var r="scaleX"===t||"scaleY"===t;return r&&(n=this._constrainScale(n)),"scaleX"===t&&0>n?(this.flipX=!this.flipX,n*=-1):"scaleY"===t&&0>n?(this.flipY=!this.flipY,n*=-1):"width"===t||"height"===t?this.minScaleLimit=i(Math.min(.1,1/Math.max(this.width,this.height)),2):"shadow"!==t||!n||n instanceof e.Shadow||(n=new e.Shadow(n)),this[t]=n,this},toggle:function(t){var e=this.get(t);return"boolean"==typeof e&&this.set(t,!e),this},setSourcePath:function(t){return this.sourcePath=t,this},getViewportTransform:function(){return this.canvas&&this.canvas.viewportTransform?this.canvas.viewportTransform:[1,0,0,1,0,0]},render:function(t,n){0===this.width&&0===this.height||!this.visible||(t.save(),this._setupCompositeOperation(t),n||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this._setOpacity(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),this._render(t,n),this.clipTo&&t.restore(),t.restore())},_setOpacity:function(t){this.group&&this.group._setOpacity(t),t.globalAlpha*=this.opacity},_setStrokeStyles:function(t){this.stroke&&(t.lineWidth=this.strokeWidth,t.lineCap=this.strokeLineCap,t.lineJoin=this.strokeLineJoin,t.miterLimit=this.strokeMiterLimit,t.strokeStyle=this.stroke.toLive?this.stroke.toLive(t,this):this.stroke)},_setFillStyles:function(t){this.fill&&(t.fillStyle=this.fill.toLive?this.fill.toLive(t,this):this.fill)},_renderControls:function(t,n){if(this.active&&!n){var i=this.getViewportTransform();t.save();var r;this.group&&(r=e.util.transformPoint(this.group.getCenterPoint(),i),t.translate(r.x,r.y),t.rotate(o(this.group.angle))),r=e.util.transformPoint(this.getCenterPoint(),i,null!=this.group),this.group&&(r.x*=this.group.scaleX,r.y*=this.group.scaleY),t.translate(r.x,r.y),t.rotate(o(this.angle)),this.drawBorders(t),this.drawControls(t),t.restore()}},_setShadow:function(t){if(this.shadow){var e=this.canvas&&this.canvas.viewportTransform[0]||1,n=this.canvas&&this.canvas.viewportTransform[3]||1;t.shadowColor=this.shadow.color,t.shadowBlur=this.shadow.blur*(e+n)*(this.scaleX+this.scaleY)/4,t.shadowOffsetX=this.shadow.offsetX*e*this.scaleX,t.shadowOffsetY=this.shadow.offsetY*n*this.scaleY}},_removeShadow:function(t){this.shadow&&(t.shadowColor="",t.shadowBlur=t.shadowOffsetX=t.shadowOffsetY=0)},_renderFill:function(t){if(this.fill){if(t.save(),this.fill.gradientTransform){var e=this.fill.gradientTransform;t.transform.apply(t,e)}this.fill.toLive&&t.translate(-this.width/2+this.fill.offsetX||0,-this.height/2+this.fill.offsetY||0),"evenodd"===this.fillRule?t.fill("evenodd"):t.fill(),t.restore()}},_renderStroke:function(t){if(this.stroke&&0!==this.strokeWidth){if(this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeDashArray)1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),a?(t.setLineDash(this.strokeDashArray),this._stroke&&this._stroke(t)):this._renderDashedStroke&&this._renderDashedStroke(t),t.stroke();else{if(this.stroke.gradientTransform){var e=this.stroke.gradientTransform;t.transform.apply(t,e)}this._stroke?this._stroke(t):t.stroke()}t.restore()}},clone:function(t,n){return this.constructor.fromObject?this.constructor.fromObject(this.toObject(n),t):new e.Object(this.toObject(n))},cloneAsImage:function(t){var n=this.toDataURL();return e.util.loadImage(n,function(n){t&&t(new e.Image(n))}),this},toDataURL:function(t){t||(t={});var n=e.util.createCanvasElement(),i=this.getBoundingRect();n.width=i.width,n.height=i.height,e.util.wrapElement(n,"div");var r=new e.StaticCanvas(n);"jpg"===t.format&&(t.format="jpeg"),"jpeg"===t.format&&(r.backgroundColor="#fff");var o={active:this.get("active"),left:this.getLeft(),top:this.getTop()};this.set("active",!1),this.setPositionByOrigin(new e.Point(n.width/2,n.height/2),"center","center");var a=this.canvas;r.add(this);var s=r.toDataURL(t);return this.set(o).setCoords(),this.canvas=a,r.dispose(),r=null,s},isType:function(t){return this.type===t},complexity:function(){return 0},toJSON:function(t){return this.toObject(t)},setGradient:function(t,n){n||(n={});var i={colorStops:[]};i.type=n.type||(n.r1||n.r2?"radial":"linear"),i.coords={x1:n.x1,y1:n.y1,x2:n.x2,y2:n.y2},(n.r1||n.r2)&&(i.coords.r1=n.r1,i.coords.r2=n.r2);for(var r in n.colorStops){var o=new e.Color(n.colorStops[r]);i.colorStops.push({offset:r,color:o.toRgb(),opacity:o.getAlpha()})}return this.set(t,e.Gradient.forObject(this,i))},setPatternFill:function(t){return this.set("fill",new e.Pattern(t))},setShadow:function(t){return this.set("shadow",t?new e.Shadow(t):null)},setColor:function(t){return this.set("fill",t),this},setAngle:function(t){var e=("center"!==this.originX||"center"!==this.originY)&&this.centeredRotation;return e&&this._setOriginToCenter(),this.set("angle",t),e&&this._resetOrigin(),this},centerH:function(){return this.canvas.centerObjectH(this),this},centerV:function(){return this.canvas.centerObjectV(this),this},center:function(){return this.canvas.centerObject(this),this},remove:function(){return this.canvas.remove(this),this},getLocalPointer:function(t,e){e=e||this.canvas.getPointer(t);var n=this.translateToOriginPoint(this.getCenterPoint(),"left","top");return{x:e.x-n.x,y:e.y-n.y}},_setupCompositeOperation:function(t){this.globalCompositeOperation&&(t.globalCompositeOperation=this.globalCompositeOperation)}}),e.util.createAccessors(e.Object),e.Object.prototype.rotate=e.Object.prototype.setAngle,n(e.Object.prototype,e.Observable),e.Object.NUM_FRACTION_DIGITS=2,e.Object.__uid=0)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{translateToCenterPoint:function(e,n,i){var r=e.x,o=e.y;return"left"===n?r=e.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===n&&(r=e.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2),"top"===i?o=e.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===i&&(o=e.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,t(this.angle))},translateToOriginPoint:function(e,n,i){var r=e.x,o=e.y;return"left"===n?r=e.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===n&&(r=e.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2),"top"===i?o=e.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===i&&(o=e.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2),fabric.util.rotatePoint(new fabric.Point(r,o),e,t(this.angle))},getCenterPoint:function(){var t=new fabric.Point(this.left,this.top);return this.translateToCenterPoint(t,this.originX,this.originY)},getPointByOrigin:function(t,e){var n=this.getCenterPoint();return this.translateToOriginPoint(n,t,e)},toLocalPoint:function(e,n,i){var r,o,a=this.getCenterPoint();return n&&i?(r="left"===n?a.x-(this.getWidth()+this.strokeWidth*this.scaleX)/2:"right"===n?a.x+(this.getWidth()+this.strokeWidth*this.scaleX)/2:a.x,o="top"===i?a.y-(this.getHeight()+this.strokeWidth*this.scaleY)/2:"bottom"===i?a.y+(this.getHeight()+this.strokeWidth*this.scaleY)/2:a.y):(r=this.left,o=this.top),fabric.util.rotatePoint(new fabric.Point(e.x,e.y),a,-t(this.angle)).subtractEquals(new fabric.Point(r,o))},setPositionByOrigin:function(t,e,n){var i=this.translateToCenterPoint(t,e,n),r=this.translateToOriginPoint(i,this.originX,this.originY);this.set("left",r.x),this.set("top",r.y)},adjustPosition:function(e){var n=t(this.angle),i=this.getWidth()/2,r=Math.cos(n)*i,o=Math.sin(n)*i,a=this.getWidth(),s=Math.cos(n)*a,l=Math.sin(n)*a;"center"===this.originX&&"left"===e||"right"===this.originX&&"center"===e?(this.left-=r,this.top-=o):"left"===this.originX&&"center"===e||"center"===this.originX&&"right"===e?(this.left+=r,this.top+=o):"left"===this.originX&&"right"===e?(this.left+=s,this.top+=l):"right"===this.originX&&"left"===e&&(this.left-=s,this.top-=l),this.setCoords(),this.originX=e},_setOriginToCenter:function(){this._originalOriginX=this.originX,this._originalOriginY=this.originY;var t=this.getCenterPoint();this.originX="center",this.originY="center",this.left=t.x,this.top=t.y},_resetOrigin:function(){var t=this.translateToOriginPoint(this.getCenterPoint(),this._originalOriginX,this._originalOriginY);this.originX=this._originalOriginX,this.originY=this._originalOriginY,this.left=t.x,this.top=t.y,this._originalOriginX=null,this._originalOriginY=null},_getLeftTopCoords:function(){return this.translateToOriginPoint(this.getCenterPoint(),"left","top")}})}(),function(){var t=fabric.util.degreesToRadians;fabric.util.object.extend(fabric.Object.prototype,{oCoords:null,intersectsWithRect:function(t,e){var n=this.oCoords,i=new fabric.Point(n.tl.x,n.tl.y),r=new fabric.Point(n.tr.x,n.tr.y),o=new fabric.Point(n.bl.x,n.bl.y),a=new fabric.Point(n.br.x,n.br.y),s=fabric.Intersection.intersectPolygonRectangle([i,r,a,o],t,e);return"Intersection"===s.status},intersectsWithObject:function(t){function e(t){return{tl:new fabric.Point(t.tl.x,t.tl.y),tr:new fabric.Point(t.tr.x,t.tr.y),bl:new fabric.Point(t.bl.x,t.bl.y),br:new fabric.Point(t.br.x,t.br.y)}}var n=e(this.oCoords),i=e(t.oCoords),r=fabric.Intersection.intersectPolygonPolygon([n.tl,n.tr,n.br,n.bl],[i.tl,i.tr,i.br,i.bl]);return"Intersection"===r.status},isContainedWithinObject:function(t){var e=t.getBoundingRect(),n=new fabric.Point(e.left,e.top),i=new fabric.Point(e.left+e.width,e.top+e.height);return this.isContainedWithinRect(n,i)},isContainedWithinRect:function(t,e){var n=this.getBoundingRect();return n.left>=t.x&&n.left+n.width<=e.x&&n.top>=t.y&&n.top+n.height<=e.y},containsPoint:function(t){var e=this._getImageLines(this.oCoords),n=this._findCrossPoints(t,e);return 0!==n&&n%2===1},_getImageLines:function(t){return{topline:{o:t.tl,d:t.tr},rightline:{o:t.tr,d:t.br},bottomline:{o:t.br,d:t.bl},leftline:{o:t.bl,d:t.tl}}},_findCrossPoints:function(t,e){var n,i,r,o,a,s,l,c=0;for(var u in e)if(l=e[u],!(l.o.y<t.y&&l.d.y<t.y||l.o.y>=t.y&&l.d.y>=t.y||(l.o.x===l.d.x&&l.o.x>=t.x?(a=l.o.x,s=t.y):(n=0,i=(l.d.y-l.o.y)/(l.d.x-l.o.x),r=t.y-n*t.x,o=l.o.y-i*l.o.x,a=-(r-o)/(n-i),s=r+n*a),a>=t.x&&(c+=1),2!==c)))break;return c},getBoundingRectWidth:function(){return this.getBoundingRect().width},getBoundingRectHeight:function(){return this.getBoundingRect().height},getBoundingRect:function(){this.oCoords||this.setCoords();var t=[this.oCoords.tl.x,this.oCoords.tr.x,this.oCoords.br.x,this.oCoords.bl.x],e=fabric.util.array.min(t),n=fabric.util.array.max(t),i=Math.abs(e-n),r=[this.oCoords.tl.y,this.oCoords.tr.y,this.oCoords.br.y,this.oCoords.bl.y],o=fabric.util.array.min(r),a=fabric.util.array.max(r),s=Math.abs(o-a);return{left:e,top:o,width:i,height:s}},getWidth:function(){return this.width*this.scaleX},getHeight:function(){return this.height*this.scaleY},_constrainScale:function(t){return Math.abs(t)<this.minScaleLimit?0>t?-this.minScaleLimit:this.minScaleLimit:t},scale:function(t){return t=this._constrainScale(t),0>t&&(this.flipX=!this.flipX,this.flipY=!this.flipY,t*=-1),this.scaleX=t,this.scaleY=t,this.setCoords(),this},scaleToWidth:function(t){var e=this.getBoundingRectWidth()/this.getWidth();return this.scale(t/this.width/e)},scaleToHeight:function(t){var e=this.getBoundingRectHeight()/this.getHeight();return this.scale(t/this.height/e)},setCoords:function(){var e=t(this.angle),n=this.getViewportTransform(),i=function(t){return fabric.util.transformPoint(t,n)},r=this._calculateCurrentDimensions(!1),o=r.x,a=r.y;0>o&&(o=Math.abs(o));var s=Math.sqrt(Math.pow(o/2,2)+Math.pow(a/2,2)),l=Math.atan(isFinite(a/o)?a/o:0),c=Math.cos(l+e)*s,u=Math.sin(l+e)*s,h=Math.sin(e),d=Math.cos(e),f=this.getCenterPoint(),p=new fabric.Point(o,a),m=new fabric.Point(f.x-c,f.y-u),g=new fabric.Point(m.x+p.x*d,m.y+p.x*h),v=i(new fabric.Point(m.x-p.y*h,m.y+p.y*d)),b=i(new fabric.Point(g.x-p.y*h,g.y+p.y*d)),y=i(m),w=i(g),x=new fabric.Point((y.x+v.x)/2,(y.y+v.y)/2),C=new fabric.Point((w.x+y.x)/2,(w.y+y.y)/2),_=new fabric.Point((b.x+w.x)/2,(b.y+w.y)/2),$=new fabric.Point((b.x+v.x)/2,(b.y+v.y)/2),S=new fabric.Point(C.x+h*this.rotatingPointOffset,C.y-d*this.rotatingPointOffset);return this.oCoords={tl:y,tr:w,br:b,bl:v,ml:x,mt:C,mr:_,mb:$,mtr:S},this._setCornerCoords&&this._setCornerCoords(),this}})}(),fabric.util.object.extend(fabric.Object.prototype,{sendToBack:function(){return this.group?fabric.StaticCanvas.prototype.sendToBack.call(this.group,this):this.canvas.sendToBack(this),this},bringToFront:function(){return this.group?fabric.StaticCanvas.prototype.bringToFront.call(this.group,this):this.canvas.bringToFront(this),this},sendBackwards:function(t){return this.group?fabric.StaticCanvas.prototype.sendBackwards.call(this.group,this,t):this.canvas.sendBackwards(this,t),this},bringForward:function(t){return this.group?fabric.StaticCanvas.prototype.bringForward.call(this.group,this,t):this.canvas.bringForward(this,t),this},moveTo:function(t){return this.group?fabric.StaticCanvas.prototype.moveTo.call(this.group,this,t):this.canvas.moveTo(this,t),this}}),fabric.util.object.extend(fabric.Object.prototype,{getSvgStyles:function(){var t=this.fill?this.fill.toLive?"url(#SVGID_"+this.fill.id+")":this.fill:"none",e=this.fillRule,n=this.stroke?this.stroke.toLive?"url(#SVGID_"+this.stroke.id+")":this.stroke:"none",i=this.strokeWidth?this.strokeWidth:"0",r=this.strokeDashArray?this.strokeDashArray.join(" "):"",o=this.strokeLineCap?this.strokeLineCap:"butt",a=this.strokeLineJoin?this.strokeLineJoin:"miter",s=this.strokeMiterLimit?this.strokeMiterLimit:"4",l="undefined"!=typeof this.opacity?this.opacity:"1",c=this.visible?"":" visibility: hidden;",u=this.shadow?"filter: url(#SVGID_"+this.shadow.id+");":"";return["stroke: ",n,"; ","stroke-width: ",i,"; ","stroke-dasharray: ",r,"; ","stroke-linecap: ",o,"; ","stroke-linejoin: ",a,"; ","stroke-miterlimit: ",s,"; ","fill: ",t,"; ","fill-rule: ",e,"; ","opacity: ",l,";",u,c].join("")},getSvgTransform:function(){if(this.group&&"path-group"===this.group.type)return"";var t=fabric.util.toFixed,e=this.getAngle(),n=!this.canvas||this.canvas.svgViewportTransformation?this.getViewportTransform():[1,0,0,1,0,0],i=fabric.util.transformPoint(this.getCenterPoint(),n),r=fabric.Object.NUM_FRACTION_DIGITS,o="path-group"===this.type?"":"translate("+t(i.x,r)+" "+t(i.y,r)+")",a=0!==e?" rotate("+t(e,r)+")":"",s=1===this.scaleX&&1===this.scaleY&&1===n[0]&&1===n[3]?"":" scale("+t(this.scaleX*n[0],r)+" "+t(this.scaleY*n[3],r)+")",l="path-group"===this.type?this.width*n[0]:0,c=this.flipX?" matrix(-1 0 0 1 "+l+" 0) ":"",u="path-group"===this.type?this.height*n[3]:0,h=this.flipY?" matrix(1 0 0 -1 0 "+u+")":"";return[o,a,s,c,h].join("")},getSvgTransformMatrix:function(){return this.transformMatrix?" matrix("+this.transformMatrix.join(" ")+") ":""},_createBaseSVGMarkup:function(){var t=[];return this.fill&&this.fill.toLive&&t.push(this.fill.toSVG(this,!1)),this.stroke&&this.stroke.toLive&&t.push(this.stroke.toSVG(this,!1)),this.shadow&&t.push(this.shadow.toSVG(this)),t}}),fabric.util.object.extend(fabric.Object.prototype,{hasStateChanged:function(){return this.stateProperties.some(function(t){return this.get(t)!==this.originalState[t]},this)},saveState:function(t){return this.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),t&&t.stateProperties&&t.stateProperties.forEach(function(t){this.originalState[t]=this.get(t)},this),this},setupState:function(){return this.originalState={},this.saveState(),this}}),function(){var t=fabric.util.degreesToRadians,e=function(){return"undefined"!=typeof G_vmlCanvasManager};fabric.util.object.extend(fabric.Object.prototype,{_controlsVisibility:null,_findTargetCorner:function(t){if(!this.hasControls||!this.active)return!1;var e,n,i=t.x,r=t.y;for(var o in this.oCoords)if(this.isControlVisible(o)&&("mtr"!==o||this.hasRotatingPoint)&&(!this.get("lockUniScaling")||"mt"!==o&&"mr"!==o&&"mb"!==o&&"ml"!==o)&&(n=this._getImageLines(this.oCoords[o].corner),e=this._findCrossPoints({x:i,y:r},n),0!==e&&e%2===1))return this.__corner=o,o;return!1},_setCornerCoords:function(){var e,n,i=this.oCoords,r=t(45-this.angle),o=Math.sqrt(2*Math.pow(this.cornerSize,2))/2,a=o*Math.cos(r),s=o*Math.sin(r);for(var l in i)e=i[l].x,n=i[l].y,i[l].corner={tl:{x:e-s,y:n-a},tr:{x:e+a,y:n-s},bl:{x:e-a,y:n+s},br:{x:e+s,y:n+a}}},_calculateCurrentDimensions:function(t){var e=this.getViewportTransform(),n=this.strokeWidth,i=this.width,r=this.height,o="round"===this.strokeLineCap||"square"===this.strokeLineCap,a="line"===this.type&&0===this.width,s="line"===this.type&&0===this.height,l=a||s,c=o&&s||!l,u=o&&a||!l;return a?i=n:s&&(r=n),c&&(i+=0>i?-n:n),u&&(r+=0>r?-n:n),i=i*this.scaleX+2*this.padding,r=r*this.scaleY+2*this.padding,t?fabric.util.transformPoint(new fabric.Point(i,r),e,!0):{x:i,y:r}},drawBorders:function(t){if(!this.hasBorders)return this;t.save(),t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=this.borderColor,t.lineWidth=1/this.borderScaleFactor;var e=this._calculateCurrentDimensions(!0),n=e.x,i=e.y;if(this.group&&(n*=this.group.scaleX,i*=this.group.scaleY),t.strokeRect(~~-(n/2)-.5,~~-(i/2)-.5,~~n+1,~~i+1),this.hasRotatingPoint&&this.isControlVisible("mtr")&&!this.get("lockRotation")&&this.hasControls){var r=-i/2;t.beginPath(),t.moveTo(0,r),t.lineTo(0,r-this.rotatingPointOffset),t.closePath(),t.stroke()}return t.restore(),this},drawControls:function(t){if(!this.hasControls)return this;var e=this._calculateCurrentDimensions(!0),n=e.x,i=e.y,r=-(n/2),o=-(i/2),a=this.cornerSize/2,s=this.transparentCorners?"strokeRect":"fillRect";return t.save(),t.lineWidth=1,t.globalAlpha=this.isMoving?this.borderOpacityWhenMoving:1,t.strokeStyle=t.fillStyle=this.cornerColor,this._drawControl("tl",t,s,r-a,o-a),this._drawControl("tr",t,s,r+n-a,o-a),this._drawControl("bl",t,s,r-a,o+i-a),this._drawControl("br",t,s,r+n-a,o+i-a),this.get("lockUniScaling")||(this._drawControl("mt",t,s,r+n/2-a,o-a),this._drawControl("mb",t,s,r+n/2-a,o+i-a),this._drawControl("mr",t,s,r+n-a,o+i/2-a),this._drawControl("ml",t,s,r-a,o+i/2-a)),this.hasRotatingPoint&&this._drawControl("mtr",t,s,r+n/2-a,o-this.rotatingPointOffset-a),t.restore(),this},_drawControl:function(t,n,i,r,o){if(this.isControlVisible(t)){var a=this.cornerSize;e()||this.transparentCorners||n.clearRect(r,o,a,a),n[i](r,o,a,a)}},isControlVisible:function(t){return this._getControlsVisibility()[t]},setControlVisible:function(t,e){return this._getControlsVisibility()[t]=e,this},setControlsVisibility:function(t){t||(t={});for(var e in t)this.setControlVisible(e,t[e]);return this},_getControlsVisibility:function(){return this._controlsVisibility||(this._controlsVisibility={tl:!0,tr:!0,br:!0,bl:!0,ml:!0,mt:!0,mr:!0,mb:!0,mtr:!0}),this._controlsVisibility}})}(),fabric.util.object.extend(fabric.StaticCanvas.prototype,{FX_DURATION:500,fxCenterObjectH:function(t,e){e=e||{};var n=function(){},i=e.onComplete||n,r=e.onChange||n,o=this;return fabric.util.animate({startValue:t.get("left"),endValue:this.getCenter().left,duration:this.FX_DURATION,onChange:function(e){t.set("left",e),o.renderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxCenterObjectV:function(t,e){e=e||{};var n=function(){},i=e.onComplete||n,r=e.onChange||n,o=this;return fabric.util.animate({startValue:t.get("top"),endValue:this.getCenter().top,duration:this.FX_DURATION,onChange:function(e){t.set("top",e),o.renderAll(),r()},onComplete:function(){t.setCoords(),i()}}),this},fxRemove:function(t,e){e=e||{};var n=function(){},i=e.onComplete||n,r=e.onChange||n,o=this;return fabric.util.animate({startValue:t.get("opacity"),endValue:0,duration:this.FX_DURATION,onStart:function(){t.set("active",!1)},onChange:function(e){t.set("opacity",e),o.renderAll(),r()},onComplete:function(){o.remove(t),i()}}),this}}),fabric.util.object.extend(fabric.Object.prototype,{animate:function(){if(arguments[0]&&"object"==typeof arguments[0]){var t,e,n=[];for(t in arguments[0])n.push(t);for(var i=0,r=n.length;r>i;i++)t=n[i],e=i!==r-1,this._animate(t,arguments[0][t],arguments[1],e)}else this._animate.apply(this,arguments);return this},_animate:function(t,e,n,i){var r,o=this;e=e.toString(),n=n?fabric.util.object.clone(n):{},~t.indexOf(".")&&(r=t.split("."));var a=r?this.get(r[0])[r[1]]:this.get(t);"from"in n||(n.from=a),e=~e.indexOf("=")?a+parseFloat(e.replace("=","")):parseFloat(e),fabric.util.animate({startValue:n.from,endValue:e,byValue:n.by,easing:n.easing,duration:n.duration,abort:n.abort&&function(){return n.abort.call(o)},onChange:function(e){r?o[r[0]][r[1]]=e:o.set(t,e),i||n.onChange&&n.onChange()},onComplete:function(){i||(o.setCoords(),n.onComplete&&n.onComplete())}})}}),function(t){"use strict";function e(t,e){var n=t.origin,i=t.axis1,r=t.axis2,o=t.dimension,a=e.nearest,s=e.center,l=e.farthest;return function(){switch(this.get(n)){case a:return Math.min(this.get(i),this.get(r));case s:return Math.min(this.get(i),this.get(r))+.5*this.get(o);case l:return Math.max(this.get(i),this.get(r))}}}var n=t.fabric||(t.fabric={}),i=n.util.object.extend,r={x1:1,x2:1,y1:1,y2:1},o=n.StaticCanvas.supports("setLineDash");return n.Line?void n.warn("fabric.Line is already defined"):(n.Line=n.util.createClass(n.Object,{type:"line",x1:0,y1:0,x2:0,y2:0,initialize:function(t,e){e=e||{},t||(t=[0,0,0,0]),this.callSuper("initialize",e),this.set("x1",t[0]),this.set("y1",t[1]),this.set("x2",t[2]),this.set("y2",t[3]),this._setWidthHeight(e)},_setWidthHeight:function(t){t||(t={}),this.width=Math.abs(this.x2-this.x1),this.height=Math.abs(this.y2-this.y1),this.left="left"in t?t.left:this._getLeftToOriginX(),this.top="top"in t?t.top:this._getTopToOriginY()},_set:function(t,e){return this.callSuper("_set",t,e),"undefined"!=typeof r[t]&&this._setWidthHeight(),this},_getLeftToOriginX:e({origin:"originX",axis1:"x1",axis2:"x2",dimension:"width"},{nearest:"left",center:"center",farthest:"right"}),_getTopToOriginY:e({origin:"originY",axis1:"y1",axis2:"y2",dimension:"height"},{nearest:"top",center:"center",farthest:"bottom"}),_render:function(t,e){if(t.beginPath(),e){var n=this.getCenterPoint();t.translate(n.x-this.strokeWidth/2,n.y-this.strokeWidth/2)}if(!this.strokeDashArray||this.strokeDashArray&&o){var i=this.calcLinePoints();t.moveTo(i.x1,i.y1),t.lineTo(i.x2,i.y2)}t.lineWidth=this.strokeWidth;var r=t.strokeStyle;t.strokeStyle=this.stroke||t.fillStyle,this.stroke&&this._renderStroke(t),t.strokeStyle=r},_renderDashedStroke:function(t){var e=this.calcLinePoints();t.beginPath(),n.util.drawDashedLine(t,e.x1,e.y1,e.x2,e.y2,this.strokeDashArray),t.closePath()},toObject:function(t){return i(this.callSuper("toObject",t),this.calcLinePoints())},calcLinePoints:function(){var t=this.x1<=this.x2?-1:1,e=this.y1<=this.y2?-1:1,n=t*this.width*.5,i=e*this.height*.5,r=t*this.width*-.5,o=e*this.height*-.5;return{x1:n,x2:r,y1:i,y2:o}},toSVG:function(t){var e=this._createBaseSVGMarkup(),n={x1:this.x1,x2:this.x2,y1:this.y1,y2:this.y2};return this.group&&"path-group"===this.group.type||(n=this.calcLinePoints()),e.push("<line ",'x1="',n.x1,'" y1="',n.y1,'" x2="',n.x2,'" y2="',n.y2,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),n.Line.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("x1 y1 x2 y2".split(" ")),n.Line.fromElement=function(t,e){var r=n.parseAttributes(t,n.Line.ATTRIBUTE_NAMES),o=[r.x1||0,r.y1||0,r.x2||0,r.y2||0];return new n.Line(o,i(r,e))},void(n.Line.fromObject=function(t){var e=[t.x1,t.y1,t.x2,t.y2];return new n.Line(e,t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";function e(t){return"radius"in t&&t.radius>=0}var n=t.fabric||(t.fabric={}),i=Math.PI,r=n.util.object.extend;return n.Circle?void n.warn("fabric.Circle is already defined."):(n.Circle=n.util.createClass(n.Object,{type:"circle",radius:0,startAngle:0,endAngle:2*i,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("radius",t.radius||0),this.startAngle=t.startAngle||this.startAngle,this.endAngle=t.endAngle||this.endAngle},_set:function(t,e){return this.callSuper("_set",t,e),"radius"===t&&this.setRadius(e),this},toObject:function(t){return r(this.callSuper("toObject",t),{radius:this.get("radius"),startAngle:this.startAngle,endAngle:this.endAngle})},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=0,r=0,o=(this.endAngle-this.startAngle)%(2*i);if(0===o)this.group&&"path-group"===this.group.type&&(n=this.left+this.radius,r=this.top+this.radius),e.push("<circle ",'cx="'+n+'" cy="'+r+'" ','r="',this.radius,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n');else{var a=Math.cos(this.startAngle)*this.radius,s=Math.sin(this.startAngle)*this.radius,l=Math.cos(this.endAngle)*this.radius,c=Math.sin(this.endAngle)*this.radius,u=o>i?"1":"0";e.push('<path d="M '+a+" "+s," A "+this.radius+" "+this.radius," 0 ",+u+" 1"," "+l+" "+c,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n')}return t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.arc(e?this.left+this.radius:0,e?this.top+this.radius:0,this.radius,this.startAngle,this.endAngle,!1),this._renderFill(t),this._renderStroke(t)},getRadiusX:function(){return this.get("radius")*this.get("scaleX")},getRadiusY:function(){return this.get("radius")*this.get("scaleY")},setRadius:function(t){this.radius=t,this.set("width",2*t).set("height",2*t)},complexity:function(){return 1}}),n.Circle.ATTRIBUTE_NAMES=n.SHARED_ATTRIBUTES.concat("cx cy r".split(" ")),n.Circle.fromElement=function(t,i){i||(i={});var o=n.parseAttributes(t,n.Circle.ATTRIBUTE_NAMES);if(!e(o))throw new Error("value of `r` attribute is required and can not be negative");o.left=o.left||0,o.top=o.top||0;var a=new n.Circle(r(o,i));return a.left-=a.radius,a.top-=a.radius,a},void(n.Circle.fromObject=function(t){return new n.Circle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Triangle?void e.warn("fabric.Triangle is already defined"):(e.Triangle=e.util.createClass(e.Object,{type:"triangle",initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("width",t.width||100).set("height",t.height||100)},_render:function(t){var e=this.width/2,n=this.height/2;t.beginPath(),t.moveTo(-e,n),t.lineTo(0,-n),t.lineTo(e,n),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var n=this.width/2,i=this.height/2;t.beginPath(),e.util.drawDashedLine(t,-n,i,0,-i,this.strokeDashArray),e.util.drawDashedLine(t,0,-i,n,i,this.strokeDashArray),e.util.drawDashedLine(t,n,i,-n,i,this.strokeDashArray),t.closePath()},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=this.width/2,i=this.height/2,r=[-n+" "+i,"0 "+-i,n+" "+i].join(",");return e.push("<polygon ",'points="',r,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),'"/>'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),void(e.Triangle.fromObject=function(t){return new e.Triangle(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=2*Math.PI,i=e.util.object.extend;return e.Ellipse?void e.warn("fabric.Ellipse is already defined."):(e.Ellipse=e.util.createClass(e.Object,{type:"ellipse",rx:0,ry:0,initialize:function(t){t=t||{},this.callSuper("initialize",t),this.set("rx",t.rx||0),this.set("ry",t.ry||0)},_set:function(t,e){switch(this.callSuper("_set",t,e),t){case"rx":this.rx=e,this.set("width",2*e);break;case"ry":this.ry=e,this.set("height",2*e)}return this},getRx:function(){return this.get("rx")*this.get("scaleX")},getRy:function(){return this.get("ry")*this.get("scaleY")},toObject:function(t){return i(this.callSuper("toObject",t),{rx:this.get("rx"),ry:this.get("ry")})},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=0,i=0;return this.group&&"path-group"===this.group.type&&(n=this.left+this.rx,i=this.top+this.ry),e.push("<ellipse ",'cx="',n,'" cy="',i,'" ','rx="',this.rx,'" ry="',this.ry,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},_render:function(t,e){t.beginPath(),t.save(),t.transform(1,0,0,this.ry/this.rx,0,0),t.arc(e?this.left+this.rx:0,e?(this.top+this.ry)*this.rx/this.ry:0,this.rx,0,n,!1),t.restore(),this._renderFill(t),this._renderStroke(t)},complexity:function(){return 1}}),e.Ellipse.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("cx cy rx ry".split(" ")),e.Ellipse.fromElement=function(t,n){n||(n={});var r=e.parseAttributes(t,e.Ellipse.ATTRIBUTE_NAMES);r.left=r.left||0,r.top=r.top||0;var o=new e.Ellipse(i(r,n));return o.top-=o.ry,o.left-=o.rx,o},void(e.Ellipse.fromObject=function(t){return new e.Ellipse(t)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;if(e.Rect)return void console.warn("fabric.Rect is already defined");var i=e.Object.prototype.stateProperties.concat();i.push("rx","ry","x","y"),e.Rect=e.util.createClass(e.Object,{stateProperties:i,type:"rect",rx:0,ry:0,strokeDashArray:null,initialize:function(t){t=t||{},this.callSuper("initialize",t),this._initRxRy()},_initRxRy:function(){this.rx&&!this.ry?this.ry=this.rx:this.ry&&!this.rx&&(this.rx=this.ry)},_render:function(t,e){if(1===this.width&&1===this.height)return void t.fillRect(0,0,1,1);var n=this.rx?Math.min(this.rx,this.width/2):0,i=this.ry?Math.min(this.ry,this.height/2):0,r=this.width,o=this.height,a=e?this.left:-this.width/2,s=e?this.top:-this.height/2,l=0!==n||0!==i,c=.4477152502;t.beginPath(),t.moveTo(a+n,s),t.lineTo(a+r-n,s),l&&t.bezierCurveTo(a+r-c*n,s,a+r,s+c*i,a+r,s+i),t.lineTo(a+r,s+o-i),l&&t.bezierCurveTo(a+r,s+o-c*i,a+r-c*n,s+o,a+r-n,s+o),t.lineTo(a+n,s+o),l&&t.bezierCurveTo(a+c*n,s+o,a,s+o-c*i,a,s+o-i),t.lineTo(a,s+i),l&&t.bezierCurveTo(a,s+c*i,a+c*n,s,a+n,s),t.closePath(),this._renderFill(t),this._renderStroke(t)},_renderDashedStroke:function(t){var n=-this.width/2,i=-this.height/2,r=this.width,o=this.height;t.beginPath(),e.util.drawDashedLine(t,n,i,n+r,i,this.strokeDashArray),e.util.drawDashedLine(t,n+r,i,n+r,i+o,this.strokeDashArray),e.util.drawDashedLine(t,n+r,i+o,n,i+o,this.strokeDashArray),e.util.drawDashedLine(t,n,i+o,n,i,this.strokeDashArray),t.closePath()},toObject:function(t){var e=n(this.callSuper("toObject",t),{rx:this.get("rx")||0,ry:this.get("ry")||0});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=this.left,i=this.top;return this.group&&"path-group"===this.group.type||(n=-this.width/2,i=-this.height/2),e.push("<rect ",'x="',n,'" y="',i,'" rx="',this.get("rx"),'" ry="',this.get("ry"),'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'"/>\n'),t?t(e.join("")):e.join("")},complexity:function(){return 1}}),e.Rect.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y rx ry width height".split(" ")),e.Rect.fromElement=function(t,i){if(!t)return null;i=i||{};var r=e.parseAttributes(t,e.Rect.ATTRIBUTE_NAMES);

r.left=r.left||0,r.top=r.top||0;var o=new e.Rect(n(i?e.util.object.clone(i):{},r));return o.visible=o.width>0&&o.height>0,o},e.Rect.fromObject=function(t){return new e.Rect(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});return e.Polyline?void e.warn("fabric.Polyline is already defined"):(e.Polyline=e.util.createClass(e.Object,{type:"polyline",points:null,minX:0,minY:0,initialize:function(t,n){return e.Polygon.prototype.initialize.call(this,t,n)},_calcDimensions:function(){return e.Polygon.prototype._calcDimensions.call(this)},_applyPointOffset:function(){return e.Polygon.prototype._applyPointOffset.call(this)},toObject:function(t){return e.Polygon.prototype.toObject.call(this,t)},toSVG:function(t){return e.Polygon.prototype.toSVG.call(this,t)},_render:function(t){e.Polygon.prototype.commonRender.call(this,t)&&(this._renderFill(t),this._renderStroke(t))},_renderDashedStroke:function(t){var n,i;t.beginPath();for(var r=0,o=this.points.length;o>r;r++)n=this.points[r],i=this.points[r+1]||n,e.util.drawDashedLine(t,n.x,n.y,i.x,i.y,this.strokeDashArray)},complexity:function(){return this.get("points").length}}),e.Polyline.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polyline.fromElement=function(t,n){if(!t)return null;n||(n={});var i=e.parsePointsAttribute(t.getAttribute("points")),r=e.parseAttributes(t,e.Polyline.ATTRIBUTE_NAMES);return new e.Polyline(i,e.util.object.extend(r,n))},void(e.Polyline.fromObject=function(t){var n=t.points;return new e.Polyline(n,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,o=e.util.toFixed;return e.Polygon?void e.warn("fabric.Polygon is already defined"):(e.Polygon=e.util.createClass(e.Object,{type:"polygon",points:null,minX:0,minY:0,initialize:function(t,e){e=e||{},this.points=t||[],this.callSuper("initialize",e),this._calcDimensions(),"top"in e||(this.top=this.minY),"left"in e||(this.left=this.minX)},_calcDimensions:function(){var t=this.points,e=i(t,"x"),n=i(t,"y"),o=r(t,"x"),a=r(t,"y");this.width=o-e||0,this.height=a-n||0,this.minX=e||0,this.minY=n||0},_applyPointOffset:function(){this.points.forEach(function(t){t.x-=this.minX+this.width/2,t.y-=this.minY+this.height/2},this)},toObject:function(t){return n(this.callSuper("toObject",t),{points:this.points.concat()})},toSVG:function(t){for(var e=[],n=this._createBaseSVGMarkup(),i=0,r=this.points.length;r>i;i++)e.push(o(this.points[i].x,2),",",o(this.points[i].y,2)," ");return n.push("<",this.type," ",'points="',e.join(""),'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform()," ",this.getSvgTransformMatrix(),'"/>\n'),t?t(n.join("")):n.join("")},_render:function(t){this.commonRender(t)&&(this._renderFill(t),(this.stroke||this.strokeDashArray)&&(t.closePath(),this._renderStroke(t)))},commonRender:function(t){var e,n=this.points.length;if(!n||isNaN(this.points[n-1].y))return!1;t.beginPath(),this._applyPointOffset&&(this.group&&"path-group"===this.group.type||this._applyPointOffset(),this._applyPointOffset=null),t.moveTo(this.points[0].x,this.points[0].y);for(var i=0;n>i;i++)e=this.points[i],t.lineTo(e.x,e.y);return!0},_renderDashedStroke:function(t){e.Polyline.prototype._renderDashedStroke.call(this,t),t.closePath()},complexity:function(){return this.points.length}}),e.Polygon.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(),e.Polygon.fromElement=function(t,i){if(!t)return null;i||(i={});var r=e.parsePointsAttribute(t.getAttribute("points")),o=e.parseAttributes(t,e.Polygon.ATTRIBUTE_NAMES);return new e.Polygon(r,n(o,i))},void(e.Polygon.fromObject=function(t){return new e.Polygon(t.points,t,!0)}))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.array.min,i=e.util.array.max,r=e.util.object.extend,o=Object.prototype.toString,a=e.util.drawArc,s={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},l={m:"l",M:"L"};return e.Path?void e.warn("fabric.Path is already defined"):(e.Path=e.util.createClass(e.Object,{type:"path",path:null,minX:0,minY:0,initialize:function(t,e){if(e=e||{},this.setOptions(e),!t)throw new Error("`path` argument is required");var n="[object Array]"===o.call(t);this.path=n?t:t.match&&t.match(/[mzlhvcsqta][^mzlhvcsqta]*/gi),this.path&&(n||(this.path=this._parsePath()),this._setPositionDimensions(e),e.sourcePath&&this.setSourcePath(e.sourcePath))},_setPositionDimensions:function(t){var e=this._parseDimensions();this.minX=e.left,this.minY=e.top,this.width=e.width,this.height=e.height,"undefined"==typeof t.left&&(this.left=e.left+("center"===this.originX?this.width/2:"right"===this.originX?this.width:0)),"undefined"==typeof t.top&&(this.top=e.top+("center"===this.originY?this.height/2:"bottom"===this.originY?this.height:0)),this.pathOffset=this.pathOffset||{x:this.minX+this.width/2,y:this.minY+this.height/2}},_render:function(t){var e,n,i,r=null,o=0,s=0,l=0,c=0,u=0,h=0,d=-this.pathOffset.x,f=-this.pathOffset.y;this.group&&"path-group"===this.group.type&&(d=0,f=0),t.beginPath();for(var p=0,m=this.path.length;m>p;++p){switch(e=this.path[p],e[0]){case"l":l+=e[1],c+=e[2],t.lineTo(l+d,c+f);break;case"L":l=e[1],c=e[2],t.lineTo(l+d,c+f);break;case"h":l+=e[1],t.lineTo(l+d,c+f);break;case"H":l=e[1],t.lineTo(l+d,c+f);break;case"v":c+=e[1],t.lineTo(l+d,c+f);break;case"V":c=e[1],t.lineTo(l+d,c+f);break;case"m":l+=e[1],c+=e[2],o=l,s=c,t.moveTo(l+d,c+f);break;case"M":l=e[1],c=e[2],o=l,s=c,t.moveTo(l+d,c+f);break;case"c":n=l+e[5],i=c+e[6],u=l+e[3],h=c+e[4],t.bezierCurveTo(l+e[1]+d,c+e[2]+f,u+d,h+f,n+d,i+f),l=n,c=i;break;case"C":l=e[5],c=e[6],u=e[3],h=e[4],t.bezierCurveTo(e[1]+d,e[2]+f,u+d,h+f,l+d,c+f);break;case"s":n=l+e[3],i=c+e[4],null===r[0].match(/[CcSs]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.bezierCurveTo(u+d,h+f,l+e[1]+d,c+e[2]+f,n+d,i+f),u=l+e[1],h=c+e[2],l=n,c=i;break;case"S":n=e[3],i=e[4],null===r[0].match(/[CcSs]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.bezierCurveTo(u+d,h+f,e[1]+d,e[2]+f,n+d,i+f),l=n,c=i,u=e[1],h=e[2];break;case"q":n=l+e[3],i=c+e[4],u=l+e[1],h=c+e[2],t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case"Q":n=e[3],i=e[4],t.quadraticCurveTo(e[1]+d,e[2]+f,n+d,i+f),l=n,c=i,u=e[1],h=e[2];break;case"t":n=l+e[1],i=c+e[2],null===r[0].match(/[QqTt]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case"T":n=e[1],i=e[2],null===r[0].match(/[QqTt]/)?(u=l,h=c):(u=2*l-u,h=2*c-h),t.quadraticCurveTo(u+d,h+f,n+d,i+f),l=n,c=i;break;case"a":a(t,l+d,c+f,[e[1],e[2],e[3],e[4],e[5],e[6]+l+d,e[7]+c+f]),l+=e[6],c+=e[7];break;case"A":a(t,l+d,c+f,[e[1],e[2],e[3],e[4],e[5],e[6]+d,e[7]+f]),l=e[6],c=e[7];break;case"z":case"Z":l=o,c=s,t.closePath()}r=e}this._renderFill(t),this._renderStroke(t)},toString:function(){return"#<fabric.Path ("+this.complexity()+'): { "top": '+this.top+', "left": '+this.left+" }>"},toObject:function(t){var e=r(this.callSuper("toObject",t),{path:this.path.map(function(t){return t.slice()}),pathOffset:this.pathOffset});return this.sourcePath&&(e.sourcePath=this.sourcePath),this.transformMatrix&&(e.transformMatrix=this.transformMatrix),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.path=this.sourcePath),delete e.sourcePath,e},toSVG:function(t){for(var e=[],n=this._createBaseSVGMarkup(),i="",r=0,o=this.path.length;o>r;r++)e.push(this.path[r].join(" "));var a=e.join(" ");return this.group&&"path-group"===this.group.type||(i=" translate("+-this.pathOffset.x+", "+-this.pathOffset.y+") "),n.push("<path ",'d="',a,'" style="',this.getSvgStyles(),'" transform="',this.getSvgTransform(),i,this.getSvgTransformMatrix(),'" stroke-linecap="round" ',"/>\n"),t?t(n.join("")):n.join("")},complexity:function(){return this.path.length},_parsePath:function(){for(var t,e,n,i,r,o=[],a=[],c=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,u=0,h=this.path.length;h>u;u++){for(t=this.path[u],i=t.slice(1).trim(),a.length=0;n=c.exec(i);)a.push(n[0]);r=[t.charAt(0)];for(var d=0,f=a.length;f>d;d++)e=parseFloat(a[d]),isNaN(e)||r.push(e);var p=r[0],m=s[p.toLowerCase()],g=l[p]||p;if(r.length-1>m)for(var v=1,b=r.length;b>v;v+=m)o.push([p].concat(r.slice(v,v+m))),p=g;else o.push(r)}return o},_parseDimensions:function(){for(var t,r,o,a,s=[],l=[],c=null,u=0,h=0,d=0,f=0,p=0,m=0,g=0,v=this.path.length;v>g;++g){switch(t=this.path[g],t[0]){case"l":d+=t[1],f+=t[2],a=[];break;case"L":d=t[1],f=t[2],a=[];break;case"h":d+=t[1],a=[];break;case"H":d=t[1],a=[];break;case"v":f+=t[1],a=[];break;case"V":f=t[1],a=[];break;case"m":d+=t[1],f+=t[2],u=d,h=f,a=[];break;case"M":d=t[1],f=t[2],u=d,h=f,a=[];break;case"c":r=d+t[5],o=f+t[6],p=d+t[3],m=f+t[4],a=e.util.getBoundsOfCurve(d,f,d+t[1],f+t[2],p,m,r,o),d=r,f=o;break;case"C":d=t[5],f=t[6],p=t[3],m=t[4],a=e.util.getBoundsOfCurve(d,f,t[1],t[2],p,m,d,f);break;case"s":r=d+t[3],o=f+t[4],null===c[0].match(/[CcSs]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),a=e.util.getBoundsOfCurve(d,f,p,m,d+t[1],f+t[2],r,o),p=d+t[1],m=f+t[2],d=r,f=o;break;case"S":r=t[3],o=t[4],null===c[0].match(/[CcSs]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),a=e.util.getBoundsOfCurve(d,f,p,m,t[1],t[2],r,o),d=r,f=o,p=t[1],m=t[2];break;case"q":r=d+t[3],o=f+t[4],p=d+t[1],m=f+t[2],a=e.util.getBoundsOfCurve(d,f,p,m,p,m,r,o),d=r,f=o;break;case"Q":p=t[1],m=t[2],a=e.util.getBoundsOfCurve(d,f,p,m,p,m,t[3],t[4]),d=t[3],f=t[4];break;case"t":r=d+t[1],o=f+t[2],null===c[0].match(/[QqTt]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),a=e.util.getBoundsOfCurve(d,f,p,m,p,m,r,o),d=r,f=o;break;case"T":r=t[1],o=t[2],null===c[0].match(/[QqTt]/)?(p=d,m=f):(p=2*d-p,m=2*f-m),a=e.util.getBoundsOfCurve(d,f,p,m,p,m,r,o),d=r,f=o;break;case"a":a=e.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6]+d,t[7]+f),d+=t[6],f+=t[7];break;case"A":a=e.util.getBoundsOfArc(d,f,t[1],t[2],t[3],t[4],t[5],t[6],t[7]),d=t[6],f=t[7];break;case"z":case"Z":d=u,f=h}c=t,a.forEach(function(t){s.push(t.x),l.push(t.y)}),s.push(d),l.push(f)}var b=n(s),y=n(l),w=i(s),x=i(l),C=w-b,_=x-y,$={left:b,top:y,width:C,height:_};return $}}),e.Path.fromObject=function(t,n){"string"==typeof t.path?e.loadSVGFromURL(t.path,function(i){var r=i[0],o=t.path;delete t.path,e.util.object.extend(r,t),r.setSourcePath(o),n(r)}):n(new e.Path(t.path,t))},e.Path.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat(["d"]),e.Path.fromElement=function(t,n,i){var o=e.parseAttributes(t,e.Path.ATTRIBUTE_NAMES);n&&n(new e.Path(o.d,r(o,i)))},void(e.Path.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.invoke,r=e.Object.prototype.toObject;return e.PathGroup?void e.warn("fabric.PathGroup is already defined"):(e.PathGroup=e.util.createClass(e.Path,{type:"path-group",fill:"",initialize:function(t,e){e=e||{},this.paths=t||[];for(var n=this.paths.length;n--;)this.paths[n].group=this;e.toBeParsed&&(this.parseDimensionsFromPaths(e),delete e.toBeParsed),this.setOptions(e),this.setCoords(),e.sourcePath&&this.setSourcePath(e.sourcePath)},parseDimensionsFromPaths:function(t){for(var n,i,r,o,a,s=[],l=[],c=this.transformMatrix,u=this.paths.length;u--;){r=this.paths[u],o=r.height+r.strokeWidth,a=r.width+r.strokeWidth,n=[{x:r.left,y:r.top},{x:r.left+a,y:r.top},{x:r.left,y:r.top+o},{x:r.left+a,y:r.top+o}];for(var h=0;h<n.length;h++)i=n[h],c&&(i=e.util.transformPoint(i,c,!1)),s.push(i.x),l.push(i.y)}t.width=Math.max.apply(null,s),t.height=Math.max.apply(null,l)},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this._setShadow(t),this.clipTo&&e.util.clipContext(this,t),t.translate(-this.width/2,-this.height/2);for(var n=0,i=this.paths.length;i>n;++n)this.paths[n].render(t,!0);this.clipTo&&t.restore(),t.restore()}},_set:function(t,e){if("fill"===t&&e&&this.isSameColor())for(var n=this.paths.length;n--;)this.paths[n]._set(t,e);return this.callSuper("_set",t,e)},toObject:function(t){var e=n(r.call(this,t),{paths:i(this.getObjects(),"toObject",t)});return this.sourcePath&&(e.sourcePath=this.sourcePath),e},toDatalessObject:function(t){var e=this.toObject(t);return this.sourcePath&&(e.paths=this.sourcePath),e},toSVG:function(t){for(var e=this.getObjects(),n=this.getPointByOrigin("left","top"),i="translate("+n.x+" "+n.y+")",r=["<g ",'style="',this.getSvgStyles(),'" ','transform="',this.getSvgTransformMatrix(),i,this.getSvgTransform(),'" ',">\n"],o=0,a=e.length;a>o;o++)r.push(e[o].toSVG(t));return r.push("</g>\n"),t?t(r.join("")):r.join("")},toString:function(){return"#<fabric.PathGroup ("+this.complexity()+"): { top: "+this.top+", left: "+this.left+" }>"},isSameColor:function(){var t=(this.getObjects()[0].get("fill")||"").toLowerCase();return this.getObjects().every(function(e){return(e.get("fill")||"").toLowerCase()===t})},complexity:function(){return this.paths.reduce(function(t,e){return t+(e&&e.complexity?e.complexity():0)},0)},getObjects:function(){return this.paths}}),e.PathGroup.fromObject=function(t,n){"string"==typeof t.paths?e.loadSVGFromURL(t.paths,function(i){var r=t.paths;delete t.paths;var o=e.util.groupSVGElements(i,t,r);n(o)}):e.util.enlivenObjects(t.paths,function(i){delete t.paths,n(new e.PathGroup(i,t))})},void(e.PathGroup.async=!0))}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.array.min,r=e.util.array.max,o=e.util.array.invoke;if(!e.Group){var a={lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0};e.Group=e.util.createClass(e.Object,e.Collection,{type:"group",strokeWidth:0,initialize:function(t,e){e=e||{},this._objects=t||[];for(var n=this._objects.length;n--;)this._objects[n].group=this;this.originalState={},e.originX&&(this.originX=e.originX),e.originY&&(this.originY=e.originY),this._calcBounds(),this._updateObjectsCoords(),this.callSuper("initialize",e),this.setCoords(),this.saveCoords()},_updateObjectsCoords:function(){this.forEachObject(this._updateObjectCoords,this)},_updateObjectCoords:function(t){var e=t.getLeft(),n=t.getTop(),i=this.getCenterPoint();t.set({originalLeft:e,originalTop:n,left:e-i.x,top:n-i.y}),t.setCoords(),t.__origHasControls=t.hasControls,t.hasControls=!1},toString:function(){return"#<fabric.Group: ("+this.complexity()+")>"},addWithUpdate:function(t){return this._restoreObjectsState(),t&&(this._objects.push(t),t.group=this,t._set("canvas",this.canvas)),this.forEachObject(this._setObjectActive,this),this._calcBounds(),this._updateObjectsCoords(),this},_setObjectActive:function(t){t.set("active",!0),t.group=this},removeWithUpdate:function(t){return this._moveFlippedObject(t),this._restoreObjectsState(),this.forEachObject(this._setObjectActive,this),this.remove(t),this._calcBounds(),this._updateObjectsCoords(),this},_onObjectAdded:function(t){t.group=this,t._set("canvas",this.canvas)},_onObjectRemoved:function(t){delete t.group,t.set("active",!1)},delegatedProperties:{fill:!0,opacity:!0,fontFamily:!0,fontWeight:!0,fontSize:!0,fontStyle:!0,lineHeight:!0,textDecoration:!0,textAlign:!0,backgroundColor:!0},_set:function(t,e){if(t in this.delegatedProperties||"canvas"===t)for(var n=this._objects.length;n--;)this._objects[n].set(t,e);this.callSuper("_set",t,e)},toObject:function(t){return n(this.callSuper("toObject",t),{objects:o(this._objects,"toObject",t)})},render:function(t){if(this.visible){t.save(),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.transform(t),this.clipTo&&e.util.clipContext(this,t);for(var n=0,i=this._objects.length;i>n;n++)this._renderObject(this._objects[n],t);this.clipTo&&t.restore(),t.restore()}},_renderControls:function(t,e){this.callSuper("_renderControls",t,e);for(var n=0,i=this._objects.length;i>n;n++)this._objects[n]._renderControls(t)},_renderObject:function(t,e){if(t.visible){var n=t.hasRotatingPoint;t.hasRotatingPoint=!1,t.render(e),t.hasRotatingPoint=n}},_restoreObjectsState:function(){return this._objects.forEach(this._restoreObjectState,this),this},realizeTransform:function(t){return this._moveFlippedObject(t),this._setObjectPosition(t),t},_moveFlippedObject:function(t){var e=t.get("originX"),n=t.get("originY"),i=t.getCenterPoint();t.set({originX:"center",originY:"center",left:i.x,top:i.y}),this._toggleFlipping(t);var r=t.getPointByOrigin(e,n);return t.set({originX:e,originY:n,left:r.x,top:r.y}),this},_toggleFlipping:function(t){this.flipX&&(t.toggle("flipX"),t.set("left",-t.get("left")),t.setAngle(-t.getAngle())),this.flipY&&(t.toggle("flipY"),t.set("top",-t.get("top")),t.setAngle(-t.getAngle()))},_restoreObjectState:function(t){return this._setObjectPosition(t),t.setCoords(),t.hasControls=t.__origHasControls,delete t.__origHasControls,t.set("active",!1),t.setCoords(),delete t.group,this},_setObjectPosition:function(t){var e=this.getCenterPoint(),n=this._getRotatedLeftTop(t);t.set({angle:t.getAngle()+this.getAngle(),left:e.x+n.left,top:e.y+n.top,scaleX:t.get("scaleX")*this.get("scaleX"),scaleY:t.get("scaleY")*this.get("scaleY")})},_getRotatedLeftTop:function(t){var e=this.getAngle()*(Math.PI/180);return{left:-Math.sin(e)*t.getTop()*this.get("scaleY")+Math.cos(e)*t.getLeft()*this.get("scaleX"),top:Math.cos(e)*t.getTop()*this.get("scaleY")+Math.sin(e)*t.getLeft()*this.get("scaleX")}},destroy:function(){return this._objects.forEach(this._moveFlippedObject,this),this._restoreObjectsState()},saveCoords:function(){return this._originalLeft=this.get("left"),this._originalTop=this.get("top"),this},hasMoved:function(){return this._originalLeft!==this.get("left")||this._originalTop!==this.get("top")},setObjectsCoords:function(){return this.forEachObject(function(t){t.setCoords()}),this},_calcBounds:function(t){for(var e,n,i=[],r=[],o=["tr","br","bl","tl"],a=0,s=this._objects.length;s>a;++a){e=this._objects[a],e.setCoords();for(var l=0;l<o.length;l++)n=o[l],i.push(e.oCoords[n].x),r.push(e.oCoords[n].y)}this.set(this._getBounds(i,r,t))},_getBounds:function(t,n,o){var a=e.util.invertTransform(this.getViewportTransform()),s=e.util.transformPoint(new e.Point(i(t),i(n)),a),l=e.util.transformPoint(new e.Point(r(t),r(n)),a),c={width:l.x-s.x||0,height:l.y-s.y||0};return o||(c.left=s.x||0,c.top=s.y||0,"center"===this.originX&&(c.left+=c.width/2),"right"===this.originX&&(c.left+=c.width),"center"===this.originY&&(c.top+=c.height/2),"bottom"===this.originY&&(c.top+=c.height)),c},toSVG:function(t){for(var e=["<g ",'transform="',this.getSvgTransform(),'">\n'],n=0,i=this._objects.length;i>n;n++)e.push(this._objects[n].toSVG(t));return e.push("</g>\n"),t?t(e.join("")):e.join("")},get:function(t){if(t in a){if(this[t])return this[t];for(var e=0,n=this._objects.length;n>e;e++)if(this._objects[e][t])return!0;return!1}return t in this.delegatedProperties?this._objects[0]&&this._objects[0].get(t):this[t]}}),e.Group.fromObject=function(t,n){e.util.enlivenObjects(t.objects,function(i){delete t.objects,n&&n(new e.Group(i,t))})},e.Group.async=!0}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=fabric.util.object.extend;return t.fabric||(t.fabric={}),t.fabric.Image?void fabric.warn("fabric.Image is already defined."):(fabric.Image=fabric.util.createClass(fabric.Object,{type:"image",crossOrigin:"",alignX:"none",alignY:"none",meetOrSlice:"meet",_lastScaleX:1,_lastScaleY:1,initialize:function(t,e){e||(e={}),this.filters=[],this.resizeFilters=[],this.callSuper("initialize",e),this._initElement(t,e)},getElement:function(){return this._element},setElement:function(t,e,n){return this._element=t,this._originalElement=t,this._initConfig(n),0!==this.filters.length?this.applyFilters(e):e&&e(),this},setCrossOrigin:function(t){return this.crossOrigin=t,this._element.crossOrigin=t,this},getOriginalSize:function(){var t=this.getElement();return{width:t.width,height:t.height}},_stroke:function(t){t.save(),this._setStrokeStyles(t),t.beginPath(),t.strokeRect(-this.width/2,-this.height/2,this.width,this.height),t.closePath(),t.restore()},_renderDashedStroke:function(t){var e=-this.width/2,n=-this.height/2,i=this.width,r=this.height;t.save(),this._setStrokeStyles(t),t.beginPath(),fabric.util.drawDashedLine(t,e,n,e+i,n,this.strokeDashArray),fabric.util.drawDashedLine(t,e+i,n,e+i,n+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e+i,n+r,e,n+r,this.strokeDashArray),fabric.util.drawDashedLine(t,e,n+r,e,n,this.strokeDashArray),t.closePath(),t.restore()},toObject:function(t){var n=e(this.callSuper("toObject",t),{src:this._originalElement.src||this._originalElement._src,filters:this.filters.map(function(t){return t&&t.toObject()}),crossOrigin:this.crossOrigin,alignX:this.alignX,alignY:this.alignY,meetOrSlice:this.meetOrSlice});return this.resizeFilters.length>0&&(n.resizeFilters=this.resizeFilters.map(function(t){return t&&t.toObject()})),n},toSVG:function(t){var e=[],n=-this.width/2,i=-this.height/2,r="none";if(this.group&&"path-group"===this.group.type&&(n=this.left,i=this.top),"none"!==this.alignX&&"none"!==this.alignY&&(r="x"+this.alignX+"Y"+this.alignY+" "+this.meetOrSlice),e.push('<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n','<image xlink:href="',this.getSvgSrc(),'" x="',n,'" y="',i,'" style="',this.getSvgStyles(),'" width="',this.width,'" height="',this.height,'" preserveAspectRatio="',r,'"',"></image>\n"),this.stroke||this.strokeDashArray){var o=this.fill;this.fill=null,e.push("<rect ",'x="',n,'" y="',i,'" width="',this.width,'" height="',this.height,'" style="',this.getSvgStyles(),'"/>\n'),this.fill=o}return e.push("</g>\n"),t?t(e.join("")):e.join("")},getSrc:function(){return this.getElement()?this.getElement().src||this.getElement()._src:void 0},setSrc:function(t,e,n){fabric.util.loadImage(t,function(t){return this.setElement(t,e,n)},this,n&&n.crossOrigin)},toString:function(){return'#<fabric.Image: { src: "'+this.getSrc()+'" }>'},clone:function(t,e){this.constructor.fromObject(this.toObject(e),t)},applyFilters:function(t,e,n,i){if(e=e||this.filters,n=n||this._originalElement){var r=n,o=fabric.util.createCanvasElement(),a=fabric.util.createImage(),s=this;return o.width=r.width,o.height=r.height,o.getContext("2d").drawImage(r,0,0,r.width,r.height),0===e.length?(this._element=n,t&&t(),o):(e.forEach(function(t){t&&t.applyTo(o,t.scaleX||s.scaleX,t.scaleY||s.scaleY),!i&&t&&"Resize"===t.type&&(s.width*=t.scaleX,s.height*=t.scaleY)}),a.width=o.width,a.height=o.height,fabric.isLikelyNode?(a.src=o.toBuffer(void 0,fabric.Image.pngCompression),s._element=a,!i&&(s._filteredEl=a),t&&t()):(a.onload=function(){s._element=a,!i&&(s._filteredEl=a),t&&t(),a.onload=o=r=null},a.src=o.toDataURL("image/png")),o)}},_render:function(t,e){var n,i,r,o=this._findMargins();n=e?this.left:-this.width/2,i=e?this.top:-this.height/2,"slice"===this.meetOrSlice&&(t.beginPath(),t.rect(n,i,this.width,this.height),t.clip()),this.isMoving===!1&&this.resizeFilters.length&&this._needsResize()?(this._lastScaleX=this.scaleX,this._lastScaleY=this.scaleY,r=this.applyFilters(null,this.resizeFilters,this._filteredEl||this._originalElement,!0)):r=this._element,r&&t.drawImage(r,n+o.marginX,i+o.marginY,o.width,o.height),this._renderStroke(t)},_needsResize:function(){return this.scaleX!==this._lastScaleX||this.scaleY!==this._lastScaleY},_findMargins:function(){var t,e,n=this.width,i=this.height,r=0,o=0;return("none"!==this.alignX||"none"!==this.alignY)&&(t=[this.width/this._element.width,this.height/this._element.height],e="meet"===this.meetOrSlice?Math.min.apply(null,t):Math.max.apply(null,t),n=this._element.width*e,i=this._element.height*e,"Mid"===this.alignX&&(r=(this.width-n)/2),"Max"===this.alignX&&(r=this.width-n),"Mid"===this.alignY&&(o=(this.height-i)/2),"Max"===this.alignY&&(o=this.height-i)),{width:n,height:i,marginX:r,marginY:o}},_resetWidthHeight:function(){var t=this.getElement();this.set("width",t.width),this.set("height",t.height)},_initElement:function(t){this.setElement(fabric.util.getById(t)),fabric.util.addClass(this.getElement(),fabric.Image.CSS_CANVAS)},_initConfig:function(t){t||(t={}),this.setOptions(t),this._setWidthHeight(t),this._element&&this.crossOrigin&&(this._element.crossOrigin=this.crossOrigin)},_initFilters:function(t,e){t&&t.length?fabric.util.enlivenObjects(t,function(t){e&&e(t)},"fabric.Image.filters"):e&&e()},_setWidthHeight:function(t){this.width="width"in t?t.width:this.getElement()?this.getElement().width||0:0,this.height="height"in t?t.height:this.getElement()?this.getElement().height||0:0},complexity:function(){return 1}}),fabric.Image.CSS_CANVAS="canvas-img",fabric.Image.prototype.getSvgSrc=fabric.Image.prototype.getSrc,fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(n){fabric.Image.prototype._initFilters.call(t,t.filters,function(i){t.filters=i||[],fabric.Image.prototype._initFilters.call(t,t.resizeFilters,function(i){t.resizeFilters=i||[];var r=new fabric.Image(n,t);e&&e(r)})})},null,t.crossOrigin)},fabric.Image.fromURL=function(t,e,n){fabric.util.loadImage(t,function(t){e&&e(new fabric.Image(t,n))},null,n&&n.crossOrigin)},fabric.Image.ATTRIBUTE_NAMES=fabric.SHARED_ATTRIBUTES.concat("x y width height preserveAspectRatio xlink:href".split(" ")),fabric.Image.fromElement=function(t,n,i){var r,o,a,s=fabric.parseAttributes(t,fabric.Image.ATTRIBUTE_NAMES),l="xMidYMid",c="meet";s.preserveAspectRatio&&(a=s.preserveAspectRatio.split(" ")),a&&a.length&&(c=a.pop(),"meet"!==c&&"slice"!==c?(l=c,c="meet"):a.length&&(l=a.pop())),r="none"!==l?l.slice(1,4):"none",o="none"!==l?l.slice(5,8):"none",s.alignX=r,s.alignY=o,s.meetOrSlice=c,fabric.Image.fromURL(s["xlink:href"],n,e(i?fabric.util.object.clone(i):{},s))},fabric.Image.async=!0,void(fabric.Image.pngCompression=1))}("undefined"!=typeof exports?exports:this),fabric.util.object.extend(fabric.Object.prototype,{_getAngleValueForStraighten:function(){var t=this.getAngle()%360;return t>0?90*Math.round((t-1)/90):90*Math.round(t/90)},straighten:function(){return this.setAngle(this._getAngleValueForStraighten()),this},fxStraighten:function(t){t=t||{};var e=function(){},n=t.onComplete||e,i=t.onChange||e,r=this;return fabric.util.animate({startValue:this.get("angle"),endValue:this._getAngleValueForStraighten(),duration:this.FX_DURATION,onChange:function(t){r.setAngle(t),i()},onComplete:function(){r.setCoords(),n()},onStart:function(){r.set("active",!1)}}),this}}),fabric.util.object.extend(fabric.StaticCanvas.prototype,{straightenObject:function(t){return t.straighten(),this.renderAll(),this},fxStraightenObject:function(t){return t.fxStraighten({onChange:this.renderAll.bind(this)}),this}}),fabric.Image.filters=fabric.Image.filters||{},fabric.Image.filters.BaseFilter=fabric.util.createClass({type:"BaseFilter",initialize:function(t){t&&this.setOptions(t)},setOptions:function(t){for(var e in t)this[e]=t[e]},toObject:function(){return{type:this.type}},toJSON:function(){return this.toObject()}}),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Brightness=e.util.createClass(e.Image.filters.BaseFilter,{type:"Brightness",initialize:function(t){t=t||{},this.brightness=t.brightness||0},applyTo:function(t){for(var e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),i=n.data,r=this.brightness,o=0,a=i.length;a>o;o+=4)i[o]+=r,i[o+1]+=r,i[o+2]+=r;e.putImageData(n,0,0)},toObject:function(){return n(this.callSuper("toObject"),{brightness:this.brightness})}}),e.Image.filters.Brightness.fromObject=function(t){return new e.Image.filters.Brightness(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Convolute=e.util.createClass(e.Image.filters.BaseFilter,{type:"Convolute",initialize:function(t){t=t||{},this.opaque=t.opaque,this.matrix=t.matrix||[0,0,0,0,1,0,0,0,0];var n=e.util.createCanvasElement();this.tmpCtx=n.getContext("2d")},_createImageData:function(t,e){return this.tmpCtx.createImageData(t,e)},applyTo:function(t){for(var e=this.matrix,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),r=Math.round(Math.sqrt(e.length)),o=Math.floor(r/2),a=i.data,s=i.width,l=i.height,c=s,u=l,h=this._createImageData(c,u),d=h.data,f=this.opaque?1:0,p=0;u>p;p++)for(var m=0;c>m;m++){for(var g=p,v=m,b=4*(p*c+m),y=0,w=0,x=0,C=0,_=0;r>_;_++)for(var $=0;r>$;$++){var S=g+_-o,E=v+$-o;if(!(0>S||S>l||0>E||E>s)){var T=4*(S*s+E),k=e[_*r+$];y+=a[T]*k,w+=a[T+1]*k,x+=a[T+2]*k,C+=a[T+3]*k}}d[b]=y,d[b+1]=w,d[b+2]=x,d[b+3]=C+f*(255-C)}n.putImageData(h,0,0)},toObject:function(){return n(this.callSuper("toObject"),{opaque:this.opaque,matrix:this.matrix})}}),e.Image.filters.Convolute.fromObject=function(t){return new e.Image.filters.Convolute(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.GradientTransparency=e.util.createClass(e.Image.filters.BaseFilter,{type:"GradientTransparency",initialize:function(t){t=t||{},this.threshold=t.threshold||100},applyTo:function(t){for(var e=t.getContext("2d"),n=e.getImageData(0,0,t.width,t.height),i=n.data,r=this.threshold,o=i.length,a=0,s=i.length;s>a;a+=4)i[a+3]=r+255*(o-a)/o;e.putImageData(n,0,0)},toObject:function(){return n(this.callSuper("toObject"),{threshold:this.threshold})}}),e.Image.filters.GradientTransparency.fromObject=function(t){return new e.Image.filters.GradientTransparency(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Grayscale=e.util.createClass(e.Image.filters.BaseFilter,{type:"Grayscale",applyTo:function(t){for(var e,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),r=i.data,o=i.width*i.height*4,a=0;o>a;)e=(r[a]+r[a+1]+r[a+2])/3,r[a]=e,r[a+1]=e,r[a+2]=e,a+=4;n.putImageData(i,0,0)}}),e.Image.filters.Grayscale.fromObject=function(){return new e.Image.filters.Grayscale}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Invert=e.util.createClass(e.Image.filters.BaseFilter,{type:"Invert",applyTo:function(t){var e,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),r=i.data,o=r.length;for(e=0;o>e;e+=4)r[e]=255-r[e],r[e+1]=255-r[e+1],r[e+2]=255-r[e+2];n.putImageData(i,0,0)}}),e.Image.filters.Invert.fromObject=function(){return new e.Image.filters.Invert}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Mask=e.util.createClass(e.Image.filters.BaseFilter,{type:"Mask",initialize:function(t){t=t||{},this.mask=t.mask,this.channel=[0,1,2,3].indexOf(t.channel)>-1?t.channel:0},applyTo:function(t){if(this.mask){var n,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),o=r.data,a=this.mask.getElement(),s=e.util.createCanvasElement(),l=this.channel,c=r.width*r.height*4;s.width=a.width,s.height=a.height,s.getContext("2d").drawImage(a,0,0,a.width,a.height);var u=s.getContext("2d").getImageData(0,0,a.width,a.height),h=u.data;for(n=0;c>n;n+=4)o[n+3]=h[n+l];i.putImageData(r,0,0)}},toObject:function(){return n(this.callSuper("toObject"),{mask:this.mask.toObject(),channel:this.channel})}}),e.Image.filters.Mask.fromObject=function(t,n){e.util.loadImage(t.mask.src,function(i){t.mask=new e.Image(i,t.mask),n&&n(new e.Image.filters.Mask(t))})},e.Image.filters.Mask.async=!0}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Noise=e.util.createClass(e.Image.filters.BaseFilter,{type:"Noise",initialize:function(t){t=t||{},this.noise=t.noise||0},applyTo:function(t){for(var e,n=t.getContext("2d"),i=n.getImageData(0,0,t.width,t.height),r=i.data,o=this.noise,a=0,s=r.length;s>a;a+=4)e=(.5-Math.random())*o,r[a]+=e,r[a+1]+=e,r[a+2]+=e;n.putImageData(i,0,0)},toObject:function(){return n(this.callSuper("toObject"),{noise:this.noise})}}),e.Image.filters.Noise.fromObject=function(t){return new e.Image.filters.Noise(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Pixelate=e.util.createClass(e.Image.filters.BaseFilter,{type:"Pixelate",initialize:function(t){
t=t||{},this.blocksize=t.blocksize||4},applyTo:function(t){var e,n,i,r,o,a,s,l=t.getContext("2d"),c=l.getImageData(0,0,t.width,t.height),u=c.data,h=c.height,d=c.width;for(n=0;h>n;n+=this.blocksize)for(i=0;d>i;i+=this.blocksize){e=4*n*d+4*i,r=u[e],o=u[e+1],a=u[e+2],s=u[e+3];for(var f=n,p=n+this.blocksize;p>f;f++)for(var m=i,g=i+this.blocksize;g>m;m++)e=4*f*d+4*m,u[e]=r,u[e+1]=o,u[e+2]=a,u[e+3]=s}l.putImageData(c,0,0)},toObject:function(){return n(this.callSuper("toObject"),{blocksize:this.blocksize})}}),e.Image.filters.Pixelate.fromObject=function(t){return new e.Image.filters.Pixelate(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.RemoveWhite=e.util.createClass(e.Image.filters.BaseFilter,{type:"RemoveWhite",initialize:function(t){t=t||{},this.threshold=t.threshold||30,this.distance=t.distance||20},applyTo:function(t){for(var e,n,i,r=t.getContext("2d"),o=r.getImageData(0,0,t.width,t.height),a=o.data,s=this.threshold,l=this.distance,c=255-s,u=Math.abs,h=0,d=a.length;d>h;h+=4)e=a[h],n=a[h+1],i=a[h+2],e>c&&n>c&&i>c&&u(e-n)<l&&u(e-i)<l&&u(n-i)<l&&(a[h+3]=1);r.putImageData(o,0,0)},toObject:function(){return n(this.callSuper("toObject"),{threshold:this.threshold,distance:this.distance})}}),e.Image.filters.RemoveWhite.fromObject=function(t){return new e.Image.filters.RemoveWhite(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia",applyTo:function(t){var e,n,i=t.getContext("2d"),r=i.getImageData(0,0,t.width,t.height),o=r.data,a=o.length;for(e=0;a>e;e+=4)n=.3*o[e]+.59*o[e+1]+.11*o[e+2],o[e]=n+100,o[e+1]=n+50,o[e+2]=n+255;i.putImageData(r,0,0)}}),e.Image.filters.Sepia.fromObject=function(){return new e.Image.filters.Sepia}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={});e.Image.filters.Sepia2=e.util.createClass(e.Image.filters.BaseFilter,{type:"Sepia2",applyTo:function(t){var e,n,i,r,o=t.getContext("2d"),a=o.getImageData(0,0,t.width,t.height),s=a.data,l=s.length;for(e=0;l>e;e+=4)n=s[e],i=s[e+1],r=s[e+2],s[e]=(.393*n+.769*i+.189*r)/1.351,s[e+1]=(.349*n+.686*i+.168*r)/1.203,s[e+2]=(.272*n+.534*i+.131*r)/2.14;o.putImageData(a,0,0)}}),e.Image.filters.Sepia2.fromObject=function(){return new e.Image.filters.Sepia2}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Tint=e.util.createClass(e.Image.filters.BaseFilter,{type:"Tint",initialize:function(t){t=t||{},this.color=t.color||"#000000",this.opacity="undefined"!=typeof t.opacity?t.opacity:new e.Color(this.color).getAlpha()},applyTo:function(t){var n,i,r,o,a,s,l,c,u,h=t.getContext("2d"),d=h.getImageData(0,0,t.width,t.height),f=d.data,p=f.length;for(u=new e.Color(this.color).getSource(),i=u[0]*this.opacity,r=u[1]*this.opacity,o=u[2]*this.opacity,c=1-this.opacity,n=0;p>n;n+=4)a=f[n],s=f[n+1],l=f[n+2],f[n]=i+a*c,f[n+1]=r+s*c,f[n+2]=o+l*c;h.putImageData(d,0,0)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color,opacity:this.opacity})}}),e.Image.filters.Tint.fromObject=function(t){return new e.Image.filters.Tint(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend;e.Image.filters.Multiply=e.util.createClass(e.Image.filters.BaseFilter,{type:"Multiply",initialize:function(t){t=t||{},this.color=t.color||"#000000"},applyTo:function(t){var n,i,r=t.getContext("2d"),o=r.getImageData(0,0,t.width,t.height),a=o.data,s=a.length;for(i=new e.Color(this.color).getSource(),n=0;s>n;n+=4)a[n]*=i[0]/255,a[n+1]*=i[1]/255,a[n+2]*=i[2]/255;r.putImageData(o,0,0)},toObject:function(){return n(this.callSuper("toObject"),{color:this.color})}}),e.Image.filters.Multiply.fromObject=function(t){return new e.Image.filters.Multiply(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric;e.Image.filters.Blend=e.util.createClass({type:"Blend",initialize:function(t){t=t||{},this.color=t.color||"#000",this.image=t.image||!1,this.mode=t.mode||"multiply",this.alpha=t.alpha||1},applyTo:function(t){var n,i,r,o,a,s,l,c,u,h,d=t.getContext("2d"),f=d.getImageData(0,0,t.width,t.height),p=f.data,m=!1;if(this.image){m=!0;var g=e.util.createCanvasElement();g.width=this.image.width,g.height=this.image.height;var v=new e.StaticCanvas(g);v.add(this.image);var b=v.getContext("2d");h=b.getImageData(0,0,v.width,v.height).data}else h=new e.Color(this.color).getSource(),n=h[0]*this.alpha,i=h[1]*this.alpha,r=h[2]*this.alpha;for(var y=0,w=p.length;w>y;y+=4)switch(o=p[y],a=p[y+1],s=p[y+2],m&&(n=h[y]*this.alpha,i=h[y+1]*this.alpha,r=h[y+2]*this.alpha),this.mode){case"multiply":p[y]=o*n/255,p[y+1]=a*i/255,p[y+2]=s*r/255;break;case"screen":p[y]=1-(1-o)*(1-n),p[y+1]=1-(1-a)*(1-i),p[y+2]=1-(1-s)*(1-r);break;case"add":p[y]=Math.min(255,o+n),p[y+1]=Math.min(255,a+i),p[y+2]=Math.min(255,s+r);break;case"diff":case"difference":p[y]=Math.abs(o-n),p[y+1]=Math.abs(a-i),p[y+2]=Math.abs(s-r);break;case"subtract":l=o-n,c=a-i,u=s-r,p[y]=0>l?0:l,p[y+1]=0>c?0:c,p[y+2]=0>u?0:u;break;case"darken":p[y]=Math.min(o,n),p[y+1]=Math.min(a,i),p[y+2]=Math.min(s,r);break;case"lighten":p[y]=Math.max(o,n),p[y+1]=Math.max(a,i),p[y+2]=Math.max(s,r)}d.putImageData(f,0,0)},toObject:function(){return{color:this.color,image:this.image,mode:this.mode,alpha:this.alpha}}}),e.Image.filters.Blend.fromObject=function(t){return new e.Image.filters.Blend(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=Math.pow,i=Math.floor,r=Math.sqrt,o=Math.abs,a=Math.max,s=Math.round,l=Math.sin,c=Math.ceil;e.Image.filters.Resize=e.util.createClass(e.Image.filters.BaseFilter,{type:"Resize",resizeType:"hermite",scaleX:0,scaleY:0,lanczosLobes:3,applyTo:function(t,e,n){this.rcpScaleX=1/e,this.rcpScaleY=1/n;var i,r=t.width,o=t.height,a=s(r*e),l=s(o*n);"sliceHack"===this.resizeType&&(i=this.sliceByTwo(t,r,o,a,l)),"hermite"===this.resizeType&&(i=this.hermiteFastResize(t,r,o,a,l)),"bilinear"===this.resizeType&&(i=this.bilinearFiltering(t,r,o,a,l)),"lanczos"===this.resizeType&&(i=this.lanczosResize(t,r,o,a,l)),t.width=a,t.height=l,t.getContext("2d").putImageData(i,0,0)},sliceByTwo:function(t,n,r,o,s){var l,c=t.getContext("2d"),u=.5,h=.5,d=1,f=1,p=!1,m=!1,g=n,v=r,b=e.util.createCanvasElement(),y=b.getContext("2d");for(o=i(o),s=i(s),b.width=a(o,n),b.height=a(s,r),o>n&&(u=2,d=-1),s>r&&(h=2,f=-1),l=c.getImageData(0,0,n,r),t.width=a(o,n),t.height=a(s,r),c.putImageData(l,0,0);!p||!m;)n=g,r=v,o*d<i(g*u*d)?g=i(g*u):(g=o,p=!0),s*f<i(v*h*f)?v=i(v*h):(v=s,m=!0),l=c.getImageData(0,0,n,r),y.putImageData(l,0,0),c.clearRect(0,0,g,v),c.drawImage(b,0,0,n,r,0,0,g,v);return c.getImageData(0,0,o,s)},lanczosResize:function(t,e,a,s,u){function h(t){return function(e){if(e>t)return 0;if(e*=Math.PI,o(e)<1e-16)return 1;var n=e/t;return l(e)*l(n)/e/n}}function d(t){var l,c,h,f,p,k,A,M,O,P,I;for(E.x=(t+.5)*y,T.x=i(E.x),l=0;u>l;l++){for(E.y=(l+.5)*w,T.y=i(E.y),p=0,k=0,A=0,M=0,O=0,c=T.x-_;c<=T.x+_;c++)if(!(0>c||c>=e)){P=i(1e3*o(c-E.x)),S[P]||(S[P]={});for(var D=T.y-$;D<=T.y+$;D++)0>D||D>=a||(I=i(1e3*o(D-E.y)),S[P][I]||(S[P][I]=b(r(n(P*x,2)+n(I*C,2))/1e3)),h=S[P][I],h>0&&(f=4*(D*e+c),p+=h,k+=h*g[f],A+=h*g[f+1],M+=h*g[f+2],O+=h*g[f+3]))}f=4*(l*s+t),v[f]=k/p,v[f+1]=A/p,v[f+2]=M/p,v[f+3]=O/p}return++t<s?d(t):m}var f=t.getContext("2d"),p=f.getImageData(0,0,e,a),m=f.getImageData(0,0,s,u),g=p.data,v=m.data,b=h(this.lanczosLobes),y=this.rcpScaleX,w=this.rcpScaleY,x=2/this.rcpScaleX,C=2/this.rcpScaleY,_=c(y*this.lanczosLobes/2),$=c(w*this.lanczosLobes/2),S={},E={},T={};return d(0)},bilinearFiltering:function(t,e,n,r,o){var a,s,l,c,u,h,d,f,p,m,g,v,b,y=0,w=this.rcpScaleX,x=this.rcpScaleY,C=t.getContext("2d"),_=4*(e-1),$=C.getImageData(0,0,e,n),S=$.data,E=C.getImageData(0,0,r,o),T=E.data;for(d=0;o>d;d++)for(f=0;r>f;f++)for(u=i(w*f),h=i(x*d),p=w*f-u,m=x*d-h,b=4*(h*e+u),g=0;4>g;g++)a=S[b+g],s=S[b+4+g],l=S[b+_+g],c=S[b+_+4+g],v=a*(1-p)*(1-m)+s*p*(1-m)+l*m*(1-p)+c*p*m,T[y++]=v;return E},hermiteFastResize:function(t,e,n,a,s){for(var l=this.rcpScaleX,u=this.rcpScaleY,h=c(l/2),d=c(u/2),f=t.getContext("2d"),p=f.getImageData(0,0,e,n),m=p.data,g=f.getImageData(0,0,a,s),v=g.data,b=0;s>b;b++)for(var y=0;a>y;y++){for(var w=4*(y+b*a),x=0,C=0,_=0,$=0,S=0,E=0,T=0,k=(b+.5)*u,A=i(b*u);(b+1)*u>A;A++)for(var M=o(k-(A+.5))/d,O=(y+.5)*l,P=M*M,I=i(y*l);(y+1)*l>I;I++){var D=o(O-(I+.5))/h,N=r(P+D*D);N>1&&-1>N||(x=2*N*N*N-3*N*N+1,x>0&&(D=4*(I+A*e),T+=x*m[D+3],_+=x,m[D+3]<255&&(x=x*m[D+3]/250),$+=x*m[D],S+=x*m[D+1],E+=x*m[D+2],C+=x))}v[w]=$/C,v[w+1]=S/C,v[w+2]=E/C,v[w+3]=T/_}return g},toObject:function(){return{type:this.type,scaleX:this.scaleX,scaleY:this.scaleY,resizeType:this.resizeType,lanczosLobes:this.lanczosLobes}}}),e.Image.filters.Resize.fromObject=function(t){return new e.Image.filters.Resize(t)}}("undefined"!=typeof exports?exports:this),function(t){"use strict";var e=t.fabric||(t.fabric={}),n=e.util.object.extend,i=e.util.object.clone,r=e.util.toFixed,o=e.StaticCanvas.supports("setLineDash"),a=e.Object.NUM_FRACTION_DIGITS;if(e.Text)return void e.warn("fabric.Text is already defined");var s=e.Object.prototype.stateProperties.concat();s.push("fontFamily","fontWeight","fontSize","text","textDecoration","textAlign","fontStyle","lineHeight","textBackgroundColor"),e.Text=e.util.createClass(e.Object,{_dimensionAffectingProps:{fontSize:!0,fontWeight:!0,fontFamily:!0,fontStyle:!0,lineHeight:!0,stroke:!0,strokeWidth:!0,text:!0,textAlign:!0},_reNewline:/\r?\n/,type:"text",fontSize:40,fontWeight:"normal",fontFamily:"Times New Roman",textDecoration:"",textAlign:"left",fontStyle:"",lineHeight:1.16,textBackgroundColor:"",stateProperties:s,stroke:null,shadow:null,_fontSizeFraction:.25,_fontSizeMult:1.13,initialize:function(t,e){e=e||{},this.text=t,this.__skipDimension=!0,this.setOptions(e),this.__skipDimension=!1,this._initDimensions()},_initDimensions:function(t){if(!this.__skipDimension){t||(t=e.util.createCanvasElement().getContext("2d"),this._setTextStyles(t)),this._textLines=this.text.split(this._reNewline),this._clearCache();var n=this.textAlign;this.textAlign="left",this.width=this._getTextWidth(t),this.textAlign=n,this.height=this._getTextHeight(t)}},toString:function(){return"#<fabric.Text ("+this.complexity()+'): { "text": "'+this.text+'", "fontFamily": "'+this.fontFamily+'" }>'},_render:function(t){this.clipTo&&e.util.clipContext(this,t),this._renderTextBackground(t),this._renderText(t),this._renderTextDecoration(t),this.clipTo&&t.restore()},_renderText:function(t){t.save(),this._translateForTextAlign(t),this._setOpacity(t),this._setShadow(t),this._setupCompositeOperation(t),this._renderTextFill(t),this._renderTextStroke(t),t.restore()},_translateForTextAlign:function(t){"left"!==this.textAlign&&"justify"!==this.textAlign&&t.translate("center"===this.textAlign?this.width/2:this.width,0)},_setTextStyles:function(t){t.textBaseline="alphabetic",this.skipTextAlign||(t.textAlign=this.textAlign),t.font=this._getFontDeclaration()},_getTextHeight:function(){return this._textLines.length*this._getHeightOfLine()},_getTextWidth:function(t){for(var e=this._getLineWidth(t,0),n=1,i=this._textLines.length;i>n;n++){var r=this._getLineWidth(t,n);r>e&&(e=r)}return e},_renderChars:function(t,e,n,i,r){var o=t.slice(0,-4);if(this[o].toLive){var a=-this.width/2+this[o].offsetX||0,s=-this.height/2+this[o].offsetY||0;e.save(),e.translate(a,s),i-=a,r-=s}console.log(e.strokeStyle),e[t](n,i,r),this[o].toLive&&e.restore()},_renderTextLine:function(t,e,n,i,r,o){if(r-=this.fontSize*this._fontSizeFraction,"justify"!==this.textAlign)return void this._renderChars(t,e,n,i,r,o);var a=this._getLineWidth(e,o),s=this.width;if(s>=a)for(var l=n.split(/\s+/),c=this._getWidthOfWords(e,n,o),u=s-c,h=l.length-1,d=u/h,f=0,p=0,m=l.length;m>p;p++)this._renderChars(t,e,l[p],i+f,r,o),f+=e.measureText(l[p]).width+d;else this._renderChars(t,e,n,i,r,o)},_getWidthOfWords:function(t,e){return t.measureText(e.replace(/\s+/g,"")).width},_getLeftOffset:function(){return-this.width/2},_getTopOffset:function(){return-this.height/2},_renderTextFill:function(t){if(this.fill||this._skipFillStrokeCheck)for(var e=0,n=0,i=this._textLines.length;i>n;n++){var r=this._getHeightOfLine(t,n),o=r/this.lineHeight;this._renderTextLine("fillText",t,this._textLines[n],this._getLeftOffset(),this._getTopOffset()+e+o,n),e+=r}},_renderTextStroke:function(t){if(this.stroke&&0!==this.strokeWidth||this._skipFillStrokeCheck){var e=0;this.shadow&&!this.shadow.affectStroke&&this._removeShadow(t),t.save(),this.strokeDashArray&&(1&this.strokeDashArray.length&&this.strokeDashArray.push.apply(this.strokeDashArray,this.strokeDashArray),o&&t.setLineDash(this.strokeDashArray)),t.beginPath();for(var n=0,i=this._textLines.length;i>n;n++){var r=this._getHeightOfLine(t,n),a=r/this.lineHeight;this._renderTextLine("strokeText",t,this._textLines[n],this._getLeftOffset(),this._getTopOffset()+e+a,n),e+=r}t.closePath(),t.restore()}},_getHeightOfLine:function(){return this.fontSize*this._fontSizeMult*this.lineHeight},_renderTextBackground:function(t){this._renderTextBoxBackground(t),this._renderTextLinesBackground(t)},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},_renderTextLinesBackground:function(t){var e=0,n=this._getHeightOfLine();if(this.textBackgroundColor){t.save(),t.fillStyle=this.textBackgroundColor;for(var i=0,r=this._textLines.length;r>i;i++){if(""!==this._textLines[i]){var o=this._getLineWidth(t,i),a=this._getLineLeftOffset(o);t.fillRect(this._getLeftOffset()+a,this._getTopOffset()+e,o,this.fontSize*this._fontSizeMult)}e+=n}t.restore()}},_getLineLeftOffset:function(t){return"center"===this.textAlign?(this.width-t)/2:"right"===this.textAlign?this.width-t:0},_clearCache:function(){this.__lineWidths=[],this.__lineHeights=[],this.__lineOffsets=[]},_shouldClearCache:function(){var t=!1;for(var e in this._dimensionAffectingProps)this["__"+e]!==this[e]&&(this["__"+e]=this[e],t=!0);return t},_getLineWidth:function(t,e){return this.__lineWidths[e]?this.__lineWidths[e]:(this.__lineWidths[e]=t.measureText(this._textLines[e]).width,this.__lineWidths[e])},_renderTextDecoration:function(t){function e(e){var r,o,a,s,l=0;for(r=0,o=i._textLines.length;o>r;r++){var c=i._getLineWidth(t,r),u=i._getLineLeftOffset(c),h=i._getHeightOfLine(t,r);for(a=0,s=e.length;s>a;a++)t.fillRect(i._getLeftOffset()+u,l+(i._fontSizeMult-1+e[a])*i.fontSize-n,c,i.fontSize/15);l+=h}}if(this.textDecoration){var n=this.height/2,i=this,r=[];this.textDecoration.indexOf("underline")>-1&&r.push(.85),this.textDecoration.indexOf("line-through")>-1&&r.push(.43),this.textDecoration.indexOf("overline")>-1&&r.push(-.12),r.length>0&&e(r)}},_getFontDeclaration:function(){return[e.isLikelyNode?this.fontWeight:this.fontStyle,e.isLikelyNode?this.fontStyle:this.fontWeight,this.fontSize+"px",e.isLikelyNode?'"'+this.fontFamily+'"':this.fontFamily].join(" ")},render:function(t,e){this.visible&&(t.save(),this._setTextStyles(t),this._shouldClearCache()&&this._initDimensions(t),e||this.transform(t),this._setStrokeStyles(t),this._setFillStyles(t),this.transformMatrix&&t.transform.apply(t,this.transformMatrix),this.group&&"path-group"===this.group.type&&t.translate(this.left,this.top),this._render(t),t.restore())},toObject:function(t){var e=n(this.callSuper("toObject",t),{text:this.text,fontSize:this.fontSize,fontWeight:this.fontWeight,fontFamily:this.fontFamily,fontStyle:this.fontStyle,lineHeight:this.lineHeight,textDecoration:this.textDecoration,textAlign:this.textAlign,textBackgroundColor:this.textBackgroundColor});return this.includeDefaultValues||this._removeDefaultValues(e),e},toSVG:function(t){var e=this._createBaseSVGMarkup(),n=this._getSVGLeftTopOffsets(this.ctx),i=this._getSVGTextAndBg(n.textTop,n.textLeft);return this._wrapSVGTextAndBg(e,i),t?t(e.join("")):e.join("")},_getSVGLeftTopOffsets:function(t){var e=this._getHeightOfLine(t,0),n=-this.width/2,i=0;return{textLeft:n+(this.group&&"path-group"===this.group.type?this.left:0),textTop:i+(this.group&&"path-group"===this.group.type?-this.top:0),lineTop:e}},_wrapSVGTextAndBg:function(t,e){t.push('	<g transform="',this.getSvgTransform(),this.getSvgTransformMatrix(),'">\n',e.textBgRects.join(""),"		<text ",this.fontFamily?'font-family="'+this.fontFamily.replace(/"/g,"'")+'" ':"",this.fontSize?'font-size="'+this.fontSize+'" ':"",this.fontStyle?'font-style="'+this.fontStyle+'" ':"",this.fontWeight?'font-weight="'+this.fontWeight+'" ':"",this.textDecoration?'text-decoration="'+this.textDecoration+'" ':"",'style="',this.getSvgStyles(),'" >',e.textSpans.join(""),"</text>\n","	</g>\n")},_getSVGTextAndBg:function(t,e){var n=[],i=[],r=0;this._setSVGBg(i);for(var o=0,a=this._textLines.length;a>o;o++)this.textBackgroundColor&&this._setSVGTextLineBg(i,o,e,t,r),this._setSVGTextLineText(o,n,r,e,t,i),r+=this._getHeightOfLine(this.ctx,o);return{textSpans:n,textBgRects:i}},_setSVGTextLineText:function(t,n,i,o,s){var l=this.fontSize*(this._fontSizeMult-this._fontSizeFraction)-s+i-this.height/2;n.push('<tspan x="',r(o+this._getLineLeftOffset(this.__lineWidths[t]),a),'" ','y="',r(l,a),'" ',this._getFillAttributes(this.fill),">",e.util.string.escapeXml(this._textLines[t]),"</tspan>")},_setSVGTextLineBg:function(t,e,n,i,o){t.push("		<rect ",this._getFillAttributes(this.textBackgroundColor),' x="',r(n+this._getLineLeftOffset(this.__lineWidths[e]),a),'" y="',r(o-this.height/2,a),'" width="',r(this.__lineWidths[e],a),'" height="',r(this._getHeightOfLine(this.ctx,e)/this.lineHeight,a),'"></rect>\n')},_setSVGBg:function(t){this.backgroundColor&&t.push("		<rect ",this._getFillAttributes(this.backgroundColor),' x="',r(-this.width/2,a),'" y="',r(-this.height/2,a),'" width="',r(this.width,a),'" height="',r(this.height,a),'"></rect>\n')},_getFillAttributes:function(t){var n=t&&"string"==typeof t?new e.Color(t):"";return n&&n.getSource()&&1!==n.getAlpha()?'opacity="'+n.getAlpha()+'" fill="'+n.setAlpha(1).toRgb()+'"':'fill="'+t+'"'},_set:function(t,e){this.callSuper("_set",t,e),t in this._dimensionAffectingProps&&(this._initDimensions(),this.setCoords())},complexity:function(){return 1}}),e.Text.ATTRIBUTE_NAMES=e.SHARED_ATTRIBUTES.concat("x y dx dy font-family font-style font-weight font-size text-decoration text-anchor".split(" ")),e.Text.DEFAULT_SVG_FONT_SIZE=16,e.Text.fromElement=function(t,n){if(!t)return null;var i=e.parseAttributes(t,e.Text.ATTRIBUTE_NAMES);n=e.util.object.extend(n?e.util.object.clone(n):{},i),n.top=n.top||0,n.left=n.left||0,"dx"in i&&(n.left+=i.dx),"dy"in i&&(n.top+=i.dy),"fontSize"in n||(n.fontSize=e.Text.DEFAULT_SVG_FONT_SIZE),n.originX||(n.originX="left");var r=t.textContent.replace(/^\s+|\s+$|\n+/g,"").replace(/\s+/g," "),o=new e.Text(r,n),a=0;return"left"===o.originX&&(a=o.getWidth()/2),"right"===o.originX&&(a=-o.getWidth()/2),o.set({left:o.getLeft()+a,top:o.getTop()-o.getHeight()/2+o.fontSize*(.18+o._fontSizeFraction)}),o},e.Text.fromObject=function(t){return new e.Text(t.text,i(t))},e.util.createAccessors(e.Text)}("undefined"!=typeof exports?exports:this),function(){var t=fabric.util.object.clone;fabric.IText=fabric.util.createClass(fabric.Text,fabric.Observable,{type:"i-text",selectionStart:0,selectionEnd:0,selectionColor:"rgba(17,119,255,0.3)",isEditing:!1,editable:!0,editingBorderColor:"rgba(102,153,255,0.25)",cursorWidth:2,cursorColor:"#333",cursorDelay:1e3,cursorDuration:600,styles:null,caching:!0,_skipFillStrokeCheck:!1,_reSpace:/\s|\n/,_currentCursorOpacity:0,_selectionDirection:null,_abortCursorAnimation:!1,_charWidthsCache:{},initialize:function(t,e){this.styles=e?e.styles||{}:{},this.callSuper("initialize",t,e),this.initBehavior()},_clearCache:function(){this.callSuper("_clearCache"),this.__maxFontHeights=[],this.__widthOfSpace=[]},isEmptyStyles:function(){if(!this.styles)return!0;var t=this.styles;for(var e in t)for(var n in t[e])for(var i in t[e][n])return!1;return!0},setSelectionStart:function(t){t=Math.max(t,0),this.selectionStart!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionStart=t),this._updateTextarea()},setSelectionEnd:function(t){t=Math.min(t,this.text.length),this.selectionEnd!==t&&(this.fire("selection:changed"),this.canvas&&this.canvas.fire("text:selection:changed",{target:this}),this.selectionEnd=t),this._updateTextarea()},getSelectionStyles:function(t,e){if(2===arguments.length){for(var n=[],i=t;e>i;i++)n.push(this.getSelectionStyles(i));return n}var r=this.get2DCursorLocation(t);return this.styles[r.lineIndex]?this.styles[r.lineIndex][r.charIndex]||{}:{}},setSelectionStyles:function(t){if(this.selectionStart===this.selectionEnd)this._extendStyles(this.selectionStart,t);else for(var e=this.selectionStart;e<this.selectionEnd;e++)this._extendStyles(e,t);return this._clearCache(),this},_extendStyles:function(t,e){var n=this.get2DCursorLocation(t);this.styles[n.lineIndex]||(this.styles[n.lineIndex]={}),this.styles[n.lineIndex][n.charIndex]||(this.styles[n.lineIndex][n.charIndex]={}),fabric.util.object.extend(this.styles[n.lineIndex][n.charIndex],e)},_render:function(t){this.callSuper("_render",t),this.ctx=t,this.isEditing&&this.renderCursorOrSelection()},renderCursorOrSelection:function(){if(this.active){var t,e,n=this.text.split("");this.canvas.contextTop?(e=this.canvas.contextTop,e.save(),e.transform.apply(e,this.canvas.viewportTransform),this.transform(e),this.transformMatrix&&e.transform.apply(e,this.transformMatrix)):(e=this.ctx,e.save()),this.selectionStart===this.selectionEnd?(t=this._getCursorBoundaries(n,"cursor"),this.renderCursor(t,e)):(t=this._getCursorBoundaries(n,"selection"),this.renderSelection(n,t,e)),e.restore()}},get2DCursorLocation:function(t){"undefined"==typeof t&&(t=this.selectionStart);for(var e=this._textLines.length,n=0;e>n;n++){if(t<=this._textLines[n].length)return{lineIndex:n,charIndex:t};t-=this._textLines[n].length+1}return{lineIndex:n-1,charIndex:this._textLines[n-1].length<t?this._textLines[n-1].length:t}},getCurrentCharStyle:function(t,e){var n=this.styles[t]&&this.styles[t][0===e?0:e-1];return{fontSize:n&&n.fontSize||this.fontSize,fill:n&&n.fill||this.fill,textBackgroundColor:n&&n.textBackgroundColor||this.textBackgroundColor,textDecoration:n&&n.textDecoration||this.textDecoration,fontFamily:n&&n.fontFamily||this.fontFamily,fontWeight:n&&n.fontWeight||this.fontWeight,fontStyle:n&&n.fontStyle||this.fontStyle,stroke:n&&n.stroke||this.stroke,strokeWidth:n&&n.strokeWidth||this.strokeWidth}},getCurrentCharFontSize:function(t,e){return this.styles[t]&&this.styles[t][0===e?0:e-1]&&this.styles[t][0===e?0:e-1].fontSize||this.fontSize},getCurrentCharColor:function(t,e){return this.styles[t]&&this.styles[t][0===e?0:e-1]&&this.styles[t][0===e?0:e-1].fill||this.cursorColor},_getCursorBoundaries:function(t,e){var n=Math.round(this._getLeftOffset()),i=this._getTopOffset(),r=this._getCursorBoundariesOffsets(t,e);return{left:n,top:i,leftOffset:r.left+r.lineLeft,topOffset:r.top}},_getCursorBoundariesOffsets:function(t,e){for(var n=0,i=0,r=0,o=0,a=0,s=0;s<this.selectionStart;s++)"\n"===t[s]?(a=0,o+=this._getHeightOfLine(this.ctx,i),i++,r=0):(a+=this._getWidthOfChar(this.ctx,t[s],i,r),r++),n=this._getCachedLineOffset(i);return"cursor"===e&&(o+=(1-this._fontSizeFraction)*this._getHeightOfLine(this.ctx,i)/this.lineHeight-this.getCurrentCharFontSize(i,r)*(1-this._fontSizeFraction)),{top:o,left:a,lineLeft:n}},_getCachedLineOffset:function(t){var e=this._getLineWidth(this.ctx,t);return this.__lineOffsets[t]||(this.__lineOffsets[t]=this._getLineLeftOffset(e))},renderCursor:function(t,e){var n=this.get2DCursorLocation(),i=n.lineIndex,r=n.charIndex,o=this.getCurrentCharFontSize(i,r),a=0===i&&0===r?this._getCachedLineOffset(i):t.leftOffset;e.fillStyle=this.getCurrentCharColor(i,r),e.globalAlpha=this.__isMousedown?1:this._currentCursorOpacity,e.fillRect(t.left+a,t.top+t.topOffset,this.cursorWidth/this.scaleX,o)},renderSelection:function(t,e,n){n.fillStyle=this.selectionColor;for(var i=this.get2DCursorLocation(this.selectionStart),r=this.get2DCursorLocation(this.selectionEnd),o=i.lineIndex,a=r.lineIndex,s=o;a>=s;s++){var l=this._getCachedLineOffset(s)||0,c=this._getHeightOfLine(this.ctx,s),u=0,h=this._textLines[s];if(s===o)for(var d=0,f=h.length;f>d;d++)d>=i.charIndex&&(s!==a||d<r.charIndex)&&(u+=this._getWidthOfChar(n,h[d],s,d)),d<i.charIndex&&(l+=this._getWidthOfChar(n,h[d],s,d));else if(s>o&&a>s)u+=this._getLineWidth(n,s)||5;else if(s===a)for(var p=0,m=r.charIndex;m>p;p++)u+=this._getWidthOfChar(n,h[p],s,p);n.fillRect(e.left+l,e.top+e.topOffset,u,c),e.topOffset+=c}},_renderChars:function(t,e,n,i,r,o){if(this.isEmptyStyles())return this._renderCharsFast(t,e,n,i,r);this.skipTextAlign=!0,i-="center"===this.textAlign?this.width/2:"right"===this.textAlign?this.width:0;var a,s=this._getHeightOfLine(e,o),l=this._getCachedLineOffset(o),c="";i+=l||0,e.save(),r-=s/this.lineHeight*this._fontSizeFraction;for(var u=0,h=n.length;h>=u;u++){a=a||this.getCurrentCharStyle(o,u);var d=this.getCurrentCharStyle(o,u+1);(this._hasStyleChanged(a,d)||u===h)&&(this._renderChar(t,e,o,u-1,c,i,r,s),c="",a=d),c+=n[u]}e.restore()},_renderCharsFast:function(t,e,n,i,r){this.skipTextAlign=!1,"fillText"===t&&this.fill&&this.callSuper("_renderChars",t,e,n,i,r),"strokeText"===t&&(this.stroke&&this.strokeWidth>0||this.skipFillStrokeCheck)&&this.callSuper("_renderChars",t,e,n,i,r)},_renderChar:function(t,e,n,i,r,o,a,s){var l,c,u,h=this._fontSizeFraction*s/this.lineHeight;if(this.styles&&this.styles[n]&&(l=this.styles[n][i])){var d=l.stroke||this.stroke,f=l.fill||this.fill;e.save(),c=this._applyCharStylesGetWidth(e,r,n,i,l),u=this._getHeightOfChar(e,r,n,i),f&&e.fillText(r,o,a),d&&e.strokeText(r,o,a),this._renderCharDecoration(e,l,o,a,h,c,u),e.restore(),e.translate(c,0)}else"strokeText"===t&&this.stroke&&e[t](r,o,a),"fillText"===t&&this.fill&&e[t](r,o,a),c=this._applyCharStylesGetWidth(e,r,n,i),this._renderCharDecoration(e,null,o,a,h,c,this.fontSize),e.translate(e.measureText(r).width,0)},_hasStyleChanged:function(t,e){return t.fill!==e.fill||t.fontSize!==e.fontSize||t.textBackgroundColor!==e.textBackgroundColor||t.textDecoration!==e.textDecoration||t.fontFamily!==e.fontFamily||t.fontWeight!==e.fontWeight||t.fontStyle!==e.fontStyle||t.stroke!==e.stroke||t.strokeWidth!==e.strokeWidth},_renderCharDecoration:function(t,e,n,i,r,o,a){var s=e?e.textDecoration||this.textDecoration:this.textDecoration;s&&(s.indexOf("underline")>-1&&t.fillRect(n,i+a/10,o,a/15),s.indexOf("line-through")>-1&&t.fillRect(n,i-a*(this._fontSizeFraction+this._fontSizeMult-1)+a/15,o,a/15),s.indexOf("overline")>-1&&t.fillRect(n,i-(this._fontSizeMult-this._fontSizeFraction)*a,o,a/15))},_renderTextLine:function(t,e,n,i,r,o){this.isEmptyStyles()||(r+=this.fontSize*(this._fontSizeFraction+.03)),this.callSuper("_renderTextLine",t,e,n,i,r,o)},_renderTextDecoration:function(t){return this.isEmptyStyles()?this.callSuper("_renderTextDecoration",t):void 0},_renderTextLinesBackground:function(t){if(this.textBackgroundColor||this.styles){t.save(),this.textBackgroundColor&&(t.fillStyle=this.textBackgroundColor);for(var e=0,n=0,i=this._textLines.length;i>n;n++){var r=this._getHeightOfLine(t,n);if(""!==this._textLines[n]){var o=this._getLineWidth(t,n),a=this._getCachedLineOffset(n);if(this.textBackgroundColor&&(t.fillStyle=this.textBackgroundColor,t.fillRect(this._getLeftOffset()+a,this._getTopOffset()+e,o,r/this.lineHeight)),this.styles[n])for(var s=0,l=this._textLines[n].length;l>s;s++)if(this.styles[n]&&this.styles[n][s]&&this.styles[n][s].textBackgroundColor){var c=this._textLines[n][s];t.fillStyle=this.styles[n][s].textBackgroundColor,t.fillRect(this._getLeftOffset()+a+this._getWidthOfCharsAt(t,n,s),this._getTopOffset()+e,this._getWidthOfChar(t,c,n,s)+1,r/this.lineHeight)}e+=r}else e+=r}t.restore()}},_getCacheProp:function(t,e){return t+e.fontFamily+e.fontSize+e.fontWeight+e.fontStyle+e.shadow},_applyCharStylesGetWidth:function(e,n,i,r,o){var a=o||this.styles[i]&&this.styles[i][r];a=a?t(a):{},this._applyFontStyles(a);var s=this._getCacheProp(n,a);if(this.isEmptyStyles()&&this._charWidthsCache[s]&&this.caching)return this._charWidthsCache[s];"string"==typeof a.shadow&&(a.shadow=new fabric.Shadow(a.shadow));var l=a.fill||this.fill;return e.fillStyle=l.toLive?l.toLive(e,this):l,a.stroke&&(e.strokeStyle=a.stroke&&a.stroke.toLive?a.stroke.toLive(e,this):a.stroke),e.lineWidth=a.strokeWidth||this.strokeWidth,e.font=this._getFontDeclaration.call(a),this._setShadow.call(a,e),this.caching?(this._charWidthsCache[s]||(this._charWidthsCache[s]=e.measureText(n).width),this._charWidthsCache[s]):e.measureText(n).width},_applyFontStyles:function(t){t.fontFamily||(t.fontFamily=this.fontFamily),t.fontSize||(t.fontSize=this.fontSize),t.fontWeight||(t.fontWeight=this.fontWeight),t.fontStyle||(t.fontStyle=this.fontStyle)},_getStyleDeclaration:function(e,n){return this.styles[e]&&this.styles[e][n]?t(this.styles[e][n]):{}},_getWidthOfChar:function(t,e,n,i){if("justify"===this.textAlign&&/\s/.test(e))return this._getWidthOfSpace(t,n);var r=this._getStyleDeclaration(n,i);this._applyFontStyles(r);var o=this._getCacheProp(e,r);if(this._charWidthsCache[o]&&this.caching)return this._charWidthsCache[o];if(t){t.save();var a=this._applyCharStylesGetWidth(t,e,n,i);return t.restore(),a}},_getHeightOfChar:function(t,e,n,i){return this.styles[n]&&this.styles[n][i]?this.styles[n][i].fontSize||this.fontSize:this.fontSize},_getHeightOfCharAt:function(t,e,n){var i=this._textLines[e][n];return this._getHeightOfChar(t,i,e,n)},_getWidthOfCharsAt:function(t,e,n){var i,r,o=0;for(i=0;n>i;i++)r=this._textLines[e][i],o+=this._getWidthOfChar(t,r,e,i);return o},_getLineWidth:function(t,e){return this.__lineWidths[e]?this.__lineWidths[e]:(this.__lineWidths[e]=this._getWidthOfCharsAt(t,e,this._textLines[e].length),this.__lineWidths[e])},_getWidthOfSpace:function(t,e){if(this.__widthOfSpace[e])return this.__widthOfSpace[e];var n=this._textLines[e],i=this._getWidthOfWords(t,n,e),r=this.width-i,o=n.length-n.replace(/\s+/g,"").length,a=r/o;return this.__widthOfSpace[e]=a,a},_getWidthOfWords:function(t,e,n){for(var i=0,r=0;r<e.length;r++){var o=e[r];o.match(/\s/)||(i+=this._getWidthOfChar(t,o,n,r))}return i},_getHeightOfLine:function(t,e){if(this.__lineHeights[e])return this.__lineHeights[e];for(var n=this._textLines[e],i=this._getHeightOfChar(t,n[0],e,0),r=1,o=n.length;o>r;r++){var a=this._getHeightOfChar(t,n[r],e,r);a>i&&(i=a)}return this.__maxFontHeights[e]=i,this.__lineHeights[e]=i*this.lineHeight*this._fontSizeMult,this.__lineHeights[e]},_getTextHeight:function(t){for(var e=0,n=0,i=this._textLines.length;i>n;n++)e+=this._getHeightOfLine(t,n);return e},_renderTextBoxBackground:function(t){this.backgroundColor&&(t.save(),t.fillStyle=this.backgroundColor,t.fillRect(this._getLeftOffset(),this._getTopOffset(),this.width,this.height),t.restore())},toObject:function(e){return fabric.util.object.extend(this.callSuper("toObject",e),{styles:t(this.styles)})}}),fabric.IText.fromObject=function(e){return new fabric.IText(e.text,t(e))}}(),function(){var t=fabric.util.object.clone;fabric.util.object.extend(fabric.IText.prototype,{initBehavior:function(){this.initAddedHandler(),this.initRemovedHandler(),this.initCursorSelectionHandlers(),this.initDoubleClickSimulation()},initSelectedHandler:function(){this.on("selected",function(){var t=this;setTimeout(function(){t.selected=!0},100)})},initAddedHandler:function(){var t=this;this.on("added",function(){this.canvas&&!this.canvas._hasITextHandlers&&(this.canvas._hasITextHandlers=!0,this._initCanvasHandlers()),t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],t.canvas._iTextInstances.push(t))})},initRemovedHandler:function(){var t=this;this.on("removed",function(){t.canvas&&(t.canvas._iTextInstances=t.canvas._iTextInstances||[],fabric.util.removeFromArray(t.canvas._iTextInstances,t));

})},_initCanvasHandlers:function(){var t=this;this.canvas.on("selection:cleared",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)}),this.canvas.on("mouse:up",function(){t.canvas._iTextInstances&&t.canvas._iTextInstances.forEach(function(t){t.__isMousedown=!1})}),this.canvas.on("object:selected",function(){fabric.IText.prototype.exitEditingOnOthers(t.canvas)})},_tick:function(){this._currentTickState=this._animateCursor(this,1,this.cursorDuration,"_onTickComplete")},_animateCursor:function(t,e,n,i){var r;return r={isAborted:!1,abort:function(){this.isAborted=!0}},t.animate("_currentCursorOpacity",e,{duration:n,onComplete:function(){r.isAborted||t[i]()},onChange:function(){t.canvas&&(t.canvas.clearContext(t.canvas.contextTop||t.ctx),t.renderCursorOrSelection())},abort:function(){return r.isAborted}}),r},_onTickComplete:function(){var t=this;this._cursorTimeout1&&clearTimeout(this._cursorTimeout1),this._cursorTimeout1=setTimeout(function(){t._currentTickCompleteState=t._animateCursor(t,0,this.cursorDuration/2,"_tick")},100)},initDelayedCursor:function(t){var e=this,n=t?0:this.cursorDelay;this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),this._currentCursorOpacity=1,this.canvas&&(this.canvas.clearContext(this.canvas.contextTop||this.ctx),this.renderCursorOrSelection()),this._cursorTimeout2&&clearTimeout(this._cursorTimeout2),this._cursorTimeout2=setTimeout(function(){e._tick()},n)},abortCursorAnimation:function(){this._currentTickState&&this._currentTickState.abort(),this._currentTickCompleteState&&this._currentTickCompleteState.abort(),clearTimeout(this._cursorTimeout1),clearTimeout(this._cursorTimeout2),this._currentCursorOpacity=0,this.canvas&&this.canvas.clearContext(this.canvas.contextTop||this.ctx)},selectAll:function(){this.setSelectionStart(0),this.setSelectionEnd(this.text.length)},getSelectedText:function(){return this.text.slice(this.selectionStart,this.selectionEnd)},findWordBoundaryLeft:function(t){var e=0,n=t-1;if(this._reSpace.test(this.text.charAt(n)))for(;this._reSpace.test(this.text.charAt(n));)e++,n--;for(;/\S/.test(this.text.charAt(n))&&n>-1;)e++,n--;return t-e},findWordBoundaryRight:function(t){var e=0,n=t;if(this._reSpace.test(this.text.charAt(n)))for(;this._reSpace.test(this.text.charAt(n));)e++,n++;for(;/\S/.test(this.text.charAt(n))&&n<this.text.length;)e++,n++;return t+e},findLineBoundaryLeft:function(t){for(var e=0,n=t-1;!/\n/.test(this.text.charAt(n))&&n>-1;)e++,n--;return t-e},findLineBoundaryRight:function(t){for(var e=0,n=t;!/\n/.test(this.text.charAt(n))&&n<this.text.length;)e++,n++;return t+e},getNumNewLinesInSelectedText:function(){for(var t=this.getSelectedText(),e=0,n=0,i=t.length;i>n;n++)"\n"===t[n]&&e++;return e},searchWordBoundary:function(t,e){for(var n=this._reSpace.test(this.text.charAt(t))?t-1:t,i=this.text.charAt(n),r=/[ \n\.,;!\?\-]/;!r.test(i)&&n>0&&n<this.text.length;)n+=e,i=this.text.charAt(n);return r.test(i)&&"\n"!==i&&(n+=1===e?0:1),n},selectWord:function(t){var e=this.searchWordBoundary(t,-1),n=this.searchWordBoundary(t,1);this.setSelectionStart(e),this.setSelectionEnd(n)},selectLine:function(t){var e=this.findLineBoundaryLeft(t),n=this.findLineBoundaryRight(t);this.setSelectionStart(e),this.setSelectionEnd(n)},enterEditing:function(){return!this.isEditing&&this.editable?(this.canvas&&this.exitEditingOnOthers(this.canvas),this.isEditing=!0,this.initHiddenTextarea(),this.hiddenTextarea.focus(),this._updateTextarea(),this._saveEditingProps(),this._setEditingProps(),this._tick(),this.fire("editing:entered"),this.canvas?(this.canvas.renderAll(),this.canvas.fire("text:editing:entered",{target:this}),this.initMouseMoveHandler(),this):this):void 0},exitEditingOnOthers:function(t){t._iTextInstances&&t._iTextInstances.forEach(function(t){t.selected=!1,t.isEditing&&t.exitEditing()})},initMouseMoveHandler:function(){var t=this;this.canvas.on("mouse:move",function(e){if(t.__isMousedown&&t.isEditing){var n=t.getSelectionStartFromPointer(e.e);n>=t.__selectionStartOnMouseDown?(t.setSelectionStart(t.__selectionStartOnMouseDown),t.setSelectionEnd(n)):(t.setSelectionStart(n),t.setSelectionEnd(t.__selectionStartOnMouseDown))}})},_setEditingProps:function(){this.hoverCursor="text",this.canvas&&(this.canvas.defaultCursor=this.canvas.moveCursor="text"),this.borderColor=this.editingBorderColor,this.hasControls=this.selectable=!1,this.lockMovementX=this.lockMovementY=!0},_updateTextarea:function(){this.hiddenTextarea&&(this.hiddenTextarea.value=this.text,this.hiddenTextarea.selectionStart=this.selectionStart,this.hiddenTextarea.selectionEnd=this.selectionEnd)},_saveEditingProps:function(){this._savedProps={hasControls:this.hasControls,borderColor:this.borderColor,lockMovementX:this.lockMovementX,lockMovementY:this.lockMovementY,hoverCursor:this.hoverCursor,defaultCursor:this.canvas&&this.canvas.defaultCursor,moveCursor:this.canvas&&this.canvas.moveCursor}},_restoreEditingProps:function(){this._savedProps&&(this.hoverCursor=this._savedProps.overCursor,this.hasControls=this._savedProps.hasControls,this.borderColor=this._savedProps.borderColor,this.lockMovementX=this._savedProps.lockMovementX,this.lockMovementY=this._savedProps.lockMovementY,this.canvas&&(this.canvas.defaultCursor=this._savedProps.defaultCursor,this.canvas.moveCursor=this._savedProps.moveCursor))},exitEditing:function(){return this.selected=!1,this.isEditing=!1,this.selectable=!0,this.selectionEnd=this.selectionStart,this.hiddenTextarea&&this.canvas&&this.hiddenTextarea.parentNode.removeChild(this.hiddenTextarea),this.hiddenTextarea=null,this.abortCursorAnimation(),this._restoreEditingProps(),this._currentCursorOpacity=0,this.fire("editing:exited"),this.canvas&&this.canvas.fire("text:editing:exited",{target:this}),this},_removeExtraneousStyles:function(){for(var t in this.styles)this._textLines[t]||delete this.styles[t]},_removeCharsFromTo:function(t,e){for(;e!==t;)this._removeSingleCharAndStyle(t+1),e--;this.setSelectionStart(t)},_removeSingleCharAndStyle:function(t){var e="\n"===this.text[t-1],n=e?t:t-1;this.removeStyleObject(e,n),this.text=this.text.slice(0,t-1)+this.text.slice(t),this._textLines=this.text.split(this._reNewline)},insertChars:function(t,e){this.selectionEnd-this.selectionStart>1&&(this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart));var n="\n"===this.text[this.selectionStart];this.text=this.text.slice(0,this.selectionStart)+t+this.text.slice(this.selectionEnd),this.insertStyleObjects(t,n,e),this.setSelectionStart(this.selectionStart+t.length),this.setSelectionEnd(this.selectionStart),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},insertNewlineStyleObject:function(e,n,i){this.shiftLineStyles(e,1),this.styles[e+1]||(this.styles[e+1]={});var r={},o={};if(this.styles[e]&&this.styles[e][n-1]&&(r=this.styles[e][n-1]),i)o[0]=t(r),this.styles[e+1]=o;else{for(var a in this.styles[e])parseInt(a,10)>=n&&(o[parseInt(a,10)-n]=this.styles[e][a],delete this.styles[e][a]);this.styles[e+1]=o}this._clearCache()},insertCharStyleObject:function(e,n,i){var r=this.styles[e],o=t(r);0!==n||i||(n=1);for(var a in o){var s=parseInt(a,10);s>=n&&(r[s+1]=o[s])}this.styles[e][n]=i||t(r[n-1]),this._clearCache()},insertStyleObjects:function(t,e,n){var i=this.get2DCursorLocation(),r=i.lineIndex,o=i.charIndex;this.styles[r]||(this.styles[r]={}),"\n"===t?this.insertNewlineStyleObject(r,o,e):n?this._insertStyles(this.copiedStyles):this.insertCharStyleObject(r,o)},_insertStyles:function(t){for(var e=0,n=t.length;n>e;e++){var i=this.get2DCursorLocation(this.selectionStart+e),r=i.lineIndex,o=i.charIndex;this.insertCharStyleObject(r,o,t[e])}},shiftLineStyles:function(e,n){var i=t(this.styles);for(var r in this.styles){var o=parseInt(r,10);o>e&&(this.styles[o+n]=i[o],i[o-n]||delete this.styles[o])}},removeStyleObject:function(e,n){var i=this.get2DCursorLocation(n),r=i.lineIndex,o=i.charIndex;if(e){var a=this._textLines[r-1],s=a?a.length:0;this.styles[r-1]||(this.styles[r-1]={});for(o in this.styles[r])this.styles[r-1][parseInt(o,10)+s]=this.styles[r][o];this.shiftLineStyles(r,-1)}else{var l=this.styles[r];l&&delete l[o];var c=t(l);for(var u in c){var h=parseInt(u,10);h>=o&&0!==h&&(l[h-1]=c[h],delete l[h])}}},insertNewline:function(){this.insertChars("\n")}})}(),fabric.util.object.extend(fabric.IText.prototype,{initDoubleClickSimulation:function(){this.__lastClickTime=+new Date,this.__lastLastClickTime=+new Date,this.__lastPointer={},this.on("mousedown",this.onMouseDown.bind(this))},onMouseDown:function(t){this.__newClickTime=+new Date;var e=this.canvas.getPointer(t.e);this.isTripleClick(e)?(this.fire("tripleclick",t),this._stopEvent(t.e)):this.isDoubleClick(e)&&(this.fire("dblclick",t),this._stopEvent(t.e)),this.__lastLastClickTime=this.__lastClickTime,this.__lastClickTime=this.__newClickTime,this.__lastPointer=e,this.__lastIsEditing=this.isEditing,this.__lastSelected=this.selected},isDoubleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y&&this.__lastIsEditing},isTripleClick:function(t){return this.__newClickTime-this.__lastClickTime<500&&this.__lastClickTime-this.__lastLastClickTime<500&&this.__lastPointer.x===t.x&&this.__lastPointer.y===t.y},_stopEvent:function(t){t.preventDefault&&t.preventDefault(),t.stopPropagation&&t.stopPropagation()},initCursorSelectionHandlers:function(){this.initSelectedHandler(),this.initMousedownHandler(),this.initMouseupHandler(),this.initClicks()},initClicks:function(){this.on("dblclick",function(t){this.selectWord(this.getSelectionStartFromPointer(t.e))}),this.on("tripleclick",function(t){this.selectLine(this.getSelectionStartFromPointer(t.e))})},initMousedownHandler:function(){this.on("mousedown",function(t){var e=this.canvas.getPointer(t.e);this.__mousedownX=e.x,this.__mousedownY=e.y,this.__isMousedown=!0,this.hiddenTextarea&&this.canvas&&this.canvas.wrapperEl.appendChild(this.hiddenTextarea),this.selected&&this.setCursorByClick(t.e),this.isEditing&&(this.__selectionStartOnMouseDown=this.selectionStart,this.initDelayedCursor(!0))})},_isObjectMoved:function(t){var e=this.canvas.getPointer(t);return this.__mousedownX!==e.x||this.__mousedownY!==e.y},initMouseupHandler:function(){this.on("mouseup",function(t){this.__isMousedown=!1,this._isObjectMoved(t.e)||(this.__lastSelected&&(this.enterEditing(),this.initDelayedCursor(!0)),this.selected=!0)})},setCursorByClick:function(t){var e=this.getSelectionStartFromPointer(t);t.shiftKey?e<this.selectionStart?(this.setSelectionEnd(this.selectionStart),this.setSelectionStart(e)):this.setSelectionEnd(e):(this.setSelectionStart(e),this.setSelectionEnd(e))},_getLocalRotatedPointer:function(t){var e=this.canvas.getPointer(t),n=new fabric.Point(e.x,e.y),i=new fabric.Point(this.left,this.top),r=fabric.util.rotatePoint(n,i,fabric.util.degreesToRadians(-this.angle));return this.getLocalPointer(t,r)},getSelectionStartFromPointer:function(t){for(var e,n,i=this._getLocalRotatedPointer(t),r=0,o=0,a=0,s=0,l=0,c=this._textLines.length;c>l;l++){n=this._textLines[l],a+=this._getHeightOfLine(this.ctx,l)*this.scaleY;var u=this._getLineWidth(this.ctx,l),h=this._getLineLeftOffset(u);o=h*this.scaleX,this.flipX&&(this._textLines[l]=n.reverse().join(""));for(var d=0,f=n.length;f>d;d++){if(r=o,o+=this._getWidthOfChar(this.ctx,n[d],l,this.flipX?f-d:d)*this.scaleX,!(a<=i.y||o<=i.x))return this._getNewSelectionStartFromOffset(i,r,o,s+l,f);s++}if(i.y<a)return this._getNewSelectionStartFromOffset(i,r,o,s+l,f)}return"undefined"==typeof e?this.text.length:void 0},_getNewSelectionStartFromOffset:function(t,e,n,i,r){var o=t.x-e,a=n-t.x,s=a>o?0:1,l=i+s;return this.flipX&&(l=r-l),l>this.text.length&&(l=this.text.length),l}}),fabric.util.object.extend(fabric.IText.prototype,{initHiddenTextarea:function(){this.hiddenTextarea=fabric.document.createElement("textarea"),this.hiddenTextarea.setAttribute("autocapitalize","off"),this.hiddenTextarea.style.cssText="position: fixed; bottom: 20px; left: 0px; opacity: 0; width: 0px; height: 0px; z-index: -999;",fabric.document.body.appendChild(this.hiddenTextarea),fabric.util.addListener(this.hiddenTextarea,"keydown",this.onKeyDown.bind(this)),fabric.util.addListener(this.hiddenTextarea,"keypress",this.onKeyPress.bind(this)),fabric.util.addListener(this.hiddenTextarea,"copy",this.copy.bind(this)),fabric.util.addListener(this.hiddenTextarea,"paste",this.paste.bind(this)),!this._clickHandlerInitialized&&this.canvas&&(fabric.util.addListener(this.canvas.upperCanvasEl,"click",this.onClick.bind(this)),this._clickHandlerInitialized=!0)},_keysMap:{8:"removeChars",9:"exitEditing",27:"exitEditing",13:"insertNewline",33:"moveCursorUp",34:"moveCursorDown",35:"moveCursorRight",36:"moveCursorLeft",37:"moveCursorLeft",38:"moveCursorUp",39:"moveCursorRight",40:"moveCursorDown",46:"forwardDelete"},_ctrlKeysMap:{65:"selectAll",88:"cut"},onClick:function(){this.hiddenTextarea&&this.hiddenTextarea.focus()},onKeyDown:function(t){if(this.isEditing){if(t.keyCode in this._keysMap)this[this._keysMap[t.keyCode]](t);else{if(!(t.keyCode in this._ctrlKeysMap&&(t.ctrlKey||t.metaKey)))return;this[this._ctrlKeysMap[t.keyCode]](t)}t.stopImmediatePropagation(),t.preventDefault(),this.canvas&&this.canvas.renderAll()}},forwardDelete:function(t){this.selectionStart===this.selectionEnd&&this.moveCursorRight(t),this.removeChars(t)},copy:function(t){var e=this.getSelectedText(),n=this._getClipboardData(t);n&&n.setData("text",e),this.copiedText=e,this.copiedStyles=this.getSelectionStyles(this.selectionStart,this.selectionEnd)},paste:function(t){var e=null,n=this._getClipboardData(t);e=n?n.getData("text"):this.copiedText,e&&this.insertChars(e,!0)},cut:function(t){this.selectionStart!==this.selectionEnd&&(this.copy(),this.removeChars(t))},_getClipboardData:function(t){return t&&(t.clipboardData||fabric.window.clipboardData)},onKeyPress:function(t){!this.isEditing||t.metaKey||t.ctrlKey||(0!==t.which&&this.insertChars(String.fromCharCode(t.which)),t.stopPropagation())},getDownCursorOffset:function(t,e){var n,i,r=e?this.selectionEnd:this.selectionStart,o=this.get2DCursorLocation(r),a=o.lineIndex,s=this._textLines[a].slice(0,o.charIndex),l=this._textLines[a].slice(o.charIndex),c=this._textLines[a+1]||"";if(a===this._textLines.length-1||t.metaKey||34===t.keyCode)return this.text.length-r;var u=this._getLineWidth(this.ctx,a);i=this._getLineLeftOffset(u);for(var h=i,d=0,f=s.length;f>d;d++)n=s[d],h+=this._getWidthOfChar(this.ctx,n,a,d);var p=this._getIndexOnNextLine(o,c,h);return l.length+1+p},_getIndexOnNextLine:function(t,e,n){for(var i,r=t.lineIndex+1,o=this._getLineWidth(this.ctx,r),a=this._getLineLeftOffset(o),s=a,l=0,c=0,u=e.length;u>c;c++){var h=e[c],d=this._getWidthOfChar(this.ctx,h,r,c);if(s+=d,s>n){i=!0;var f=s-d,p=s,m=Math.abs(f-n),g=Math.abs(p-n);l=m>g?c+1:c;break}}return i||(l=e.length),l},moveCursorDown:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getDownCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorDownWithShift(e):this.moveCursorDownWithoutShift(e),this.initDelayedCursor()},moveCursorDownWithoutShift:function(t){this._selectionDirection="right",this.setSelectionStart(this.selectionStart+t),this.setSelectionEnd(this.selectionStart)},swapSelectionPoints:function(){var t=this.selectionEnd;this.setSelectionEnd(this.selectionStart),this.setSelectionStart(t)},moveCursorDownWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="right"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd+t):this.setSelectionStart(this.selectionStart+t),this.selectionEnd<this.selectionStart&&"left"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="right"),this.selectionEnd>this.text.length&&this.setSelectionEnd(this.text.length)},getUpCursorOffset:function(t,e){var n=e?this.selectionEnd:this.selectionStart,i=this.get2DCursorLocation(n),r=i.lineIndex;if(0===r||t.metaKey||33===t.keyCode)return n;for(var o,a=this._textLines[r].slice(0,i.charIndex),s=this._textLines[r-1]||"",l=this._getLineWidth(this.ctx,i.lineIndex),c=this._getLineLeftOffset(l),u=c,h=0,d=a.length;d>h;h++)o=a[h],u+=this._getWidthOfChar(this.ctx,o,r,h);var f=this._getIndexOnPrevLine(i,s,u);return s.length-f+a.length},_getIndexOnPrevLine:function(t,e,n){for(var i,r=t.lineIndex-1,o=this._getLineWidth(this.ctx,r),a=this._getLineLeftOffset(o),s=a,l=0,c=0,u=e.length;u>c;c++){var h=e[c],d=this._getWidthOfChar(this.ctx,h,r,c);if(s+=d,s>n){i=!0;var f=s-d,p=s,m=Math.abs(f-n),g=Math.abs(p-n);l=m>g?c:c-1;break}}return i||(l=e.length-1),l},moveCursorUp:function(t){this.abortCursorAnimation(),this._currentCursorOpacity=1;var e=this.getUpCursorOffset(t,"right"===this._selectionDirection);t.shiftKey?this.moveCursorUpWithShift(e):this.moveCursorUpWithoutShift(e),this.initDelayedCursor()},moveCursorUpWithShift:function(t){this.selectionEnd===this.selectionStart&&(this._selectionDirection="left"),"right"===this._selectionDirection?this.setSelectionEnd(this.selectionEnd-t):this.setSelectionStart(this.selectionStart-t),this.selectionEnd<this.selectionStart&&"right"===this._selectionDirection&&(this.swapSelectionPoints(),this._selectionDirection="left")},moveCursorUpWithoutShift:function(t){this.selectionStart===this.selectionEnd&&this.setSelectionStart(this.selectionStart-t),this.setSelectionEnd(this.selectionStart),this._selectionDirection="left"},moveCursorLeft:function(t){(0!==this.selectionStart||0!==this.selectionEnd)&&(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorLeftWithShift(t):this.moveCursorLeftWithoutShift(t),this.initDelayedCursor())},_move:function(t,e,n){var i="selectionStart"===e?"setSelectionStart":"setSelectionEnd";this[i](t.altKey?this["findWordBoundary"+n](this[e]):t.metaKey||35===t.keyCode||36===t.keyCode?this["findLineBoundary"+n](this[e]):this[e]+("Left"===n?-1:1))},_moveLeft:function(t,e){this._move(t,e,"Left")},_moveRight:function(t,e){this._move(t,e,"Right")},moveCursorLeftWithoutShift:function(t){this._selectionDirection="left",this.selectionEnd===this.selectionStart&&this._moveLeft(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)},moveCursorLeftWithShift:function(t){"right"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveLeft(t,"selectionEnd"):(this._selectionDirection="left",this._moveLeft(t,"selectionStart"))},moveCursorRight:function(t){this.selectionStart>=this.text.length&&this.selectionEnd>=this.text.length||(this.abortCursorAnimation(),this._currentCursorOpacity=1,t.shiftKey?this.moveCursorRightWithShift(t):this.moveCursorRightWithoutShift(t),this.initDelayedCursor())},moveCursorRightWithShift:function(t){"left"===this._selectionDirection&&this.selectionStart!==this.selectionEnd?this._moveRight(t,"selectionStart"):(this._selectionDirection="right",this._moveRight(t,"selectionEnd"))},moveCursorRightWithoutShift:function(t){this._selectionDirection="right",this.selectionStart===this.selectionEnd?(this._moveRight(t,"selectionStart"),this.setSelectionEnd(this.selectionStart)):(this.setSelectionEnd(this.selectionEnd+this.getNumNewLinesInSelectedText()),this.setSelectionStart(this.selectionEnd))},removeChars:function(t){this.selectionStart===this.selectionEnd?this._removeCharsNearCursor(t):this._removeCharsFromTo(this.selectionStart,this.selectionEnd),this.setSelectionEnd(this.selectionStart),this._removeExtraneousStyles(),this._clearCache(),this.canvas&&this.canvas.renderAll(),this.setCoords(),this.fire("changed"),this.canvas&&this.canvas.fire("text:changed",{target:this})},_removeCharsNearCursor:function(t){if(0!==this.selectionStart)if(t.metaKey){var e=this.findLineBoundaryLeft(this.selectionStart);this._removeCharsFromTo(e,this.selectionStart),this.setSelectionStart(e)}else if(t.altKey){var n=this.findWordBoundaryLeft(this.selectionStart);this._removeCharsFromTo(n,this.selectionStart),this.setSelectionStart(n)}else this._removeSingleCharAndStyle(this.selectionStart),this.setSelectionStart(this.selectionStart-1)}}),function(){var t=fabric.util.toFixed,e=fabric.Object.NUM_FRACTION_DIGITS;fabric.util.object.extend(fabric.IText.prototype,{_setSVGTextLineText:function(t,e,n,i,r,o){this.styles[t]?this._setSVGTextLineChars(t,e,n,i,o):this.callSuper("_setSVGTextLineText",t,e,n,i,r)},_setSVGTextLineChars:function(t,e,n,i,r){for(var o=this._textLines[t],a=0,s=this._getSVGLineLeftOffset(t)-this.width/2,l=this._getSVGLineTopOffset(t),c=this._getHeightOfLine(this.ctx,t),u=0,h=o.length;h>u;u++){var d=this.styles[t][u]||{};e.push(this._createTextCharSpan(o[u],d,s,l.lineTop+l.offset,a));var f=this._getWidthOfChar(this.ctx,o[u],t,u);d.textBackgroundColor&&r.push(this._createTextCharBg(d,s,l.lineTop,c,f,a)),a+=f}},_getSVGLineLeftOffset:function(t){return fabric.util.toFixed(this._getLineLeftOffset(this.__lineWidths[t]),2)},_getSVGLineTopOffset:function(t){for(var e=0,n=0,i=0;t>i;i++)e+=this._getHeightOfLine(this.ctx,i);return n=this._getHeightOfLine(this.ctx,i),{lineTop:e,offset:(this._fontSizeMult-this._fontSizeFraction)*n/(this.lineHeight*this._fontSizeMult)}},_createTextCharBg:function(n,i,r,o,a,s){return['<rect fill="',n.textBackgroundColor,'" x="',t(i+s,e),'" y="',t(r-this.height/2,e),'" width="',t(a,e),'" height="',t(o/this.lineHeight,e),'"></rect>'].join("")},_createTextCharSpan:function(t,e,n,i,r){var o=this.getSvgStyles.call(fabric.util.object.extend({visible:!0,fill:this.fill,stroke:this.stroke,type:"text"},e));return['<tspan x="',n+r,'" y="',i-this.height/2,'" ',e.fontFamily?'font-family="'+e.fontFamily.replace(/"/g,"'")+'" ':"",e.fontSize?'font-size="'+e.fontSize+'" ':"",e.fontStyle?'font-style="'+e.fontStyle+'" ':"",e.fontWeight?'font-weight="'+e.fontWeight+'" ':"",e.textDecoration?'text-decoration="'+e.textDecoration+'" ':"",'style="',o,'">',fabric.util.string.escapeXml(t),"</tspan>"].join("")}})}(),function(){function request(t,e,n){var i=URL.parse(t);i.port||(i.port=0===i.protocol.indexOf("https:")?443:80);var r=0===i.protocol.indexOf("https:")?HTTPS:HTTP,o=r.request({hostname:i.hostname,port:i.port,path:i.path,method:"GET"},function(t){var i="";e&&t.setEncoding(e),t.on("end",function(){n(i)}),t.on("data",function(e){200===t.statusCode&&(i+=e)})});o.on("error",function(t){fabric.log(t.errno===process.ECONNREFUSED?"ECONNREFUSED: connection refused to "+i.hostname+":"+i.port:t.message),n(null)}),o.end()}function requestFs(t,e){var n=require("fs");n.readFile(t,function(t,n){if(t)throw fabric.log(t),t;e(n)})}if("undefined"==typeof document||"undefined"==typeof window){var DOMParser=require("xmldom").DOMParser,URL=require("url"),HTTP=require("http"),HTTPS=require("https"),Canvas=require("canvas"),Image=require("canvas").Image;fabric.util.loadImage=function(t,e,n){function i(i){i?(r.src=new Buffer(i,"binary"),r._src=t,e&&e.call(n,r)):(r=null,e&&e.call(n,null,!0))}var r=new Image;t&&(t instanceof Buffer||0===t.indexOf("data"))?(r.src=r._src=t,e&&e.call(n,r)):t&&0!==t.indexOf("http")?requestFs(t,i):t?request(t,"binary",i):e&&e.call(n,t)},fabric.loadSVGFromURL=function(t,e,n){t=t.replace(/^\n\s*/,"").replace(/\?.*$/,"").trim(),0!==t.indexOf("http")?requestFs(t,function(t){fabric.loadSVGFromString(t.toString(),e,n)}):request(t,"",function(t){fabric.loadSVGFromString(t,e,n)})},fabric.loadSVGFromString=function(t,e,n){var i=(new DOMParser).parseFromString(t);fabric.parseSVGDocument(i.documentElement,function(t,n){e&&e(t,n)},n)},fabric.util.getScript=function(url,callback){request(url,"",function(body){eval(body),callback&&callback()})},fabric.Image.fromObject=function(t,e){fabric.util.loadImage(t.src,function(n){var i=new fabric.Image(n);i._initConfig(t),i._initFilters(t.filters,function(n){i.filters=n||[],i._initFilters(t.resizeFilters,function(t){i.resizeFilters=t||[],e&&e(i)})})})},fabric.createCanvasForNode=function(t,e,n,i){i=i||n;var r=fabric.document.createElement("canvas"),o=new Canvas(t||600,e||600,i);r.style={},r.width=o.width,r.height=o.height;var a=fabric.Canvas||fabric.StaticCanvas,s=new a(r,n);return s.contextContainer=o.getContext("2d"),s.nodeCanvas=o,s.Font=Canvas.Font,s},fabric.StaticCanvas.prototype.createPNGStream=function(){return this.nodeCanvas.createPNGStream()},fabric.StaticCanvas.prototype.createJPEGStream=function(t){return this.nodeCanvas.createJPEGStream(t)};var origSetWidth=fabric.StaticCanvas.prototype.setWidth;fabric.StaticCanvas.prototype.setWidth=function(t,e){return origSetWidth.call(this,t,e),this.nodeCanvas.width=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setWidth=fabric.StaticCanvas.prototype.setWidth);var origSetHeight=fabric.StaticCanvas.prototype.setHeight;fabric.StaticCanvas.prototype.setHeight=function(t,e){return origSetHeight.call(this,t,e),this.nodeCanvas.height=t,this},fabric.Canvas&&(fabric.Canvas.prototype.setHeight=fabric.StaticCanvas.prototype.setHeight)}}(),angular.module("ImageEditor",["ngMaterial","ngAnimate","image.crop","image.text","image.drawing","image.filters","image.shapes","image.directives","image.basics"]).config(["$mdThemingProvider",function(t){t.theme("default").primaryPalette("deep-orange").accentPalette("brown")}]).controller("MainController",["$rootScope","$scope","$timeout","$$rAF","$mdBottomSheet","canvas","history","simpleShapes",function(t,e,n,i,r,o,a,s){t.started=!1,t.isDemo=document.URL.indexOf("pixie.vebto.com")>-1,t.isIntegrationMode=function(){try{return window.self!==window.top&&-1===window.top.location.href.indexOf("codecanyon")}catch(t){return!0}},o.start(),t.isIntegrationMode()&&(t.pixie=window.top.Pixie),$(".actions-menu").draggable({handle:".menu-header",containment:"body"}),t.canvas=o,t.history=a,t.shapes=s,t.loading=!1,t.animationEndEvent="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",t.transitionEndEvent="webkitTransitionEnd mozTransitionEnd MSTransitionEnd oatransitionend atransitionend transitionend",t.maxPanelHeight=$(window).height()-120,t.openPanel=function(e,n){if(t.activePanel!==e){t.activePanel=e;var r=$('[data-name="'+e+'"]'),o=n.target.getBoundingClientRect(),a=r[0].getBoundingClientRect(),s=Math.min(.5,o.width/a.width),l=Math.min(.5,o.height/a.height);r.removeClass("transition-in").css("transform","translate3d("+(-a.left+o.left+o.width/2-a.width/2)+"px,"+(-a.top+o.top+o.height/2-a.height/2)+"px,0) scale("+s+","+l+")"),i(function(){$(r).addClass("transition-in").css("transform","")})}},t.isLoading=function(){n(function(){t.loading=!0})},t.isNotLoading=function(){n(function(){t.loading=!1})},t.activePanel=!1,t.activeTab=!1,t.keys={google_fonts:"AIzaSyDhc_8NKxXjtv69htFcUPe6A7oGSQ4om2o"},t.$watch("activePanel",function(){setTimeout(function(){$(window).resize()},100)}),o.fabric.on("object:selected",function(e){if("text"==e.target.name)t.activeTab="text";else if("sticker"==e.target.name&&"stickers"!==t.activeTab)t.activeTab="stickers";else if(e.target.name&&"simple-shapes"!==t.activeTab)for(var i=0;i<s.available.length;i++){var r=s.available[i];r.name===e.target.name&&"simple-shapes"!==t.activeTab&&(s.selected=r,t.activeTab="simple-shapes")}n(angular.noop)}),e.openBottomSheet=function(t){r.show({template:$("#"+t+"-sheet-template").html(),controller:"BottomSheetController"})},e.$on("$destroy",function(){$(".sp-container").remove()}),t.spacify=function(t){if(t){var e=t.replace(/([A-Z])/g," $1");return e.charAt(0).toUpperCase()+e.slice(1)}}}]).controller("BottomSheetController",["$rootScope","$scope","$mdBottomSheet","$mdDialog","simpleShapes",function(t,e,n,i,r){e.shapes=r,e.showDialog=function(t){i.show({template:$("#texture-upload-dialog-template").html(),targetEvent:t,controller:"BottomSheetController"})}}]),angular.module("ImageEditor").controller("EditorController",["$scope","$rootScope","$http","$state","folders","canvas","saver","photos","utils","selectedItem",function(t,e,n,i,r,o,a,s,l,c){function u(n){o.fabric.deactivateAll().renderAll();var i=o.fabric.toDatalessJSON(["selectable","name"]);i.customActions=angular.copy(e.editorCustomActions);for(var a=i.customActions&&i.customActions.roundCorners?"png":n.extension,s=o.fabric.toDataURL({format:a||"png",quality:1}),l=o.original,c=0;c<i.objects.length;c++){var u=i.objects[c];if("mainImage"===u.name){u.src=t.active.originalUrl;break}}return console.log(i),angular.isString(i)||(i=JSON.stringify(i)),{id:n.id,name:n.name||e.userPreset.name,folder_id:n.folder_id||r.selected.id,serialized_editor_state:i,imageData:s,width:l.width,height:l.height,extension:a}}function h(t){var e=JSON.parse(t.serialized_editor_state);e.customActions&&!$.isEmptyObject(e.customActions)&&(o.fabric.clear(),o.zoom(1),o.loadMainImage(t.absoluteUrl))}t.active={},a.saveImage=function(){t.ajaxInProgress=!0;var n=u(t.active);if(n.id)var i=c.update(n);else var i=s.save(n);i.success(function(e){l.showToast("savedPhotoSuccessfully",!0),t.active=e})["finally"](function(){t.ajaxInProgress=!1}),e.$emit("activity.happened","edited","photo",[n])};var d=e.$on("canvas.init",function(){i.params.id?n.get(e.baseUrl+"photos/"+i.params.id).success(function(n){t.active=n,c.set(n),n.serialized_editor_state?o.loadFromJSON(n,h):o.loadMainImage(n.originalUrl),e.started=!0}):(o.openNew(e.userPreset.width,e.userPreset.height,e.userPreset.name),e.started=!0)});t.$on("$destroy",function(){o.destroy(),e.started=!1,d()}),$(".pagination").click("a",function(t){t.preventDefault()})}]),angular.module("ImageEditor").service("canvas",["$rootScope","$mdDialog",function(t,e){var n={original:{},oldWindowDimensions:{width:window.innerWidth,height:window.innerHeight},mainImage:!1,fabric:!1,ctx:!1,container:!1,viewport:!1,offset:!1,element:!1,minWidth:50,minHeight:50,imageStatic:{locked:!0,selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1},destroy:function(){this.fabric.dispose(),this.mainImage=!1,this.fabric=!1,this.ctx=!1,this.container=!1,this.viewport=!1,this.offset=!1,this.element=!1,this.original={},this.currentZoom=1,t.editorCustomActions={},$(window).off("resize")},start:function(i){this.element=document.getElementById("canvas"),this.fabric=new fabric.Canvas("canvas"),this.ctx=this.fabric.getContext("2d"),this.container=$(".canvas-container"),this.viewport=document.getElementById("viewport"),t.editorCustomActions={},this.fabric.selection=!1,this.fabric.renderOnAddRemove=!1,fabric.Object.prototype.borderColor="#2196F3",fabric.Object.prototype.cornerColor="#2196F3",fabric.Object.prototype.transparentCorners=!1,i&&(this.loadMainImage(i),t.started=!0),t.started||t.isIntegrationMode()||t.delayEditorStart||e.show({template:$("#main-image-upload-dialog-template").html(),controller:"TopPanelController",clickOutsideToClose:!1}),$(window).off("resize").on("resize",function(t){(n.oldWindowDimensions.height!==t.target.innerHeight||n.oldWindowDimensions.width!==t.target.innerWidth)&&n.fitToScreen(),n.oldWindowDimensions.width=t.target.innerWidth,n.oldWindowDimensions.height=t.target.innerHeight}),t.$emit("canvas.init")},hideModals:function(){e.hide()},mergeObjects:function(){n.zoom(1),this.fabric.deactivateAll();var t=this.fabric.toDataURL();this.fabric.clear(),this.loadMainImage(t)},loadFromJSON:function(e,i){n.fabric.loadFromJSON(e.serialized_editor_state||e.state,function(){n.fabric.forEachObject(function(t){t.applyFilters&&t.filters.length&&t.applyFilters(n.fabric.renderAll.bind(n.fabric)),"mainImage"==t.name&&(n.mainImage=t)}),e.width&&e.height&&(n.fabric.setWidth(e.width),n.fabric.setHeight(e.height),n.original.height=e.height,n.original.width=e.width),n.fabric.renderAll(),n.fabric.calcOffset(),n.fitToScreen(),t.$emit("history.loaded"),i&&i(e)})},openNew:function(e,i,r){e=e<this.minWidth?this.minWidth:e,i=i<this.minHeight?this.minHeight:i,this.fabric.clear(),this.fabric.setWidth(e),this.fabric.setHeight(i),this.fabric.renderAll(),n.fitToScreen(),t.userPreset={width:e,
height:i,name:r},t.$emit("canvas.openedNew")},center:function(t){t.center(),n.zoom>100&&(t.setLeft(10),t.setTop(35)),t.setCoords()},serialize:function(){return this.fabric.toJSON(["selectable","name"])},loadMainImage:function(e,i,r,o,a){var s;fabric.util.loadImage(e,function(e){s=new fabric.Image(e,n.imageStatic),s.name="mainImage",r&&i&&(s.width=r,s.height=i),n.mainImage=s,n.fabric.forEachObject(function(t){"mainImage"==t.name&&n.fabric.remove(t)}),n.fabric.add(s),s.moveTo(0),n.fabric.setHeight(s.height),n.fabric.setWidth(s.width),n.original.height=s.height,n.original.width=s.width,o||n.fitToScreen(),t.$apply(function(){t.$emit("editor.mainImage.loaded")}),a&&a()})},openImage:function(t){fabric.util.loadImage(t,function(t){if(t){var e=new fabric.Image(t);e.name="image";var i=n.mainImage?n.mainImage.getWidth():n.fabric.getWidth(),r=n.mainImage?n.mainImage.getHeight():n.fabric.getHeight();if(e.width>=i||e.height>=r){var o=i-.1*i,a=r-.1*r,s=1/Math.min(a/e.getHeight(),o/e.getWidth());e.scaleX=e.scaleX*(1/s),e.scaleY=e.scaleY*(1/s)}n.fabric.add(e),e.left=(n.fabric.getWidth()-e.getWidth())/2,e.top=(n.fabric.getHeight()-e.getHeight())/2,e.setCoords(),n.fabric.setActiveObject(e),n.fabric.renderAll()}})},getDataURL:function(t){return t||(t={}),t.multiplier=1/n.currentZoom,this.fabric.toDataURL(t)},currentZoom:1,zoom:function(t){this.fabric.setZoom(t),this.fabric.setHeight(this.original.height*t),this.fabric.setWidth(this.original.width*t),this.currentZoom=t},fitToScreen:function(){var t=n.viewport.offsetWidth-40,e=n.viewport.offsetHeight-120,i=n.mainImage||n.fabric,r=Math.min(e/i.getHeight(),t/i.getWidth());(i.getHeight()>e||i.getWidth()>t)&&n.zoom(r)}};return n}]),angular.module("image.crop",[]).service("cropper",["$rootScope","cropzone","canvas","history",function(t,e,n,i){var r={start:function(n){e.initiated||(e.add(),t.openPanel("crop",n))},stop:function(n){e.remove(),t.activePanel=!1},crop:function(){if(!e.initiated)return!1;e.hide();var r=new Image;r.onload=function(){var r=new fabric.Image(this,n.imageStatic);r.name="mainImage",n.mainImage&&n.mainImage.remove(),n.fabric.clear(),n.fabric.setWidth(Math.ceil(e.rect.getWidth())),n.fabric.setHeight(Math.ceil(e.rect.getHeight())),n.fabric.add(r),r.moveTo(0),n.mainImage=r,e.remove(),i.add("crop","crop"),t.$apply(function(){t.activePanel=!1})},n.zoom(1),t.editorCustomActions.crop={left:e.rect.getLeft(),top:e.rect.getTop(),width:Math.ceil(e.rect.getWidth()),height:Math.ceil(e.rect.getHeight())},r.src=n.fabric.toDataURL({left:e.rect.getLeft(),top:e.rect.getTop(),width:Math.ceil(e.rect.getWidth()),height:Math.ceil(e.rect.getHeight())}),n.original.width=Math.ceil(e.rect.getWidth()),n.original.height=Math.ceil(e.rect.getHeight())}};return r}]),angular.module("image.crop").service("cropzone",["$rootScope","canvas",function(t,e){var n={rect:{},dragging:!1,initiated:!1,minHeight:25,minWidth:25,setWidth:function(t){t&&(t=parseInt(t),t<this.minWidth&&(t=this.minWidth),t>e.original.width&&(t=e.original.width-25),this.rect.width=t,this.rect.setTop((e.original.height-this.rect.getHeight())/2),this.rect.setLeft((e.original.width-this.rect.getWidth())/2),this.rect.setCoords(),this.drawGrid(),this.drawOverlay(),e.fabric.renderAll())},setHeight:function(t){t&&(t=parseInt(t),t<this.minHeight&&(t=this.minHeight),t>e.original.height&&(t=e.original.height-25),this.rect.height=t,this.rect.setTop((e.original.height-this.rect.getHeight())/2),this.rect.setLeft((e.original.width-this.rect.getWidth())/2),this.rect.setCoords(),this.drawGrid(),this.drawOverlay(),e.fabric.renderAll())},add:function(){this.drawMainZone(),this.drawOverlay(),this.drawGrid(),this.attachEvents(),e.fabric.renderAll(),this.initiated=!0,t.$emit("cropzone.added")},constrainWithinCanvas:function(t){var n=t.getLeft(),i=t.getTop(),r=t.getWidth(),o=t.getHeight(),a=e.original.width-r,s=e.original.height-o;0>n&&t.set("left",0),0>i&&t.set("top",0),n>a&&t.set("left",a),i>s&&t.set("top",s)},constrainWithinCanvasOnScaling:function(t){var n=t.getLeft(),i=t.getTop(),r=t.getLeft()+t.getWidth(),o=t.getTop()+t.getHeight();if(0>n||r>e.original.width){var a=this.lastScaleX||1;t.setScaleX(a)}if(0>n&&t.setLeft(0),0>i||o>e.original.height){var s=this.lastScaleY||1;t.setScaleY(s)}0>i&&t.setTop(0),t.getWidth()<this.minWidth&&(t.width=this.minWidth,t.setScaleX(1)),t.getHeight()<this.minHeight&&(t.height=this.minHeight,t.setScaleY(1)),this.lastScaleX=t.getScaleX(),this.lastScaleY=t.getScaleY()},onMouseDown:function(t){(!t.target||"cropzone"!==t.target.name&&"crop.grid"!==t.target.name)&&(n.dragging=!0,n.overlay.visible=!1,n.grid.visible=!1,n.rect.visible=!1,n.rect.left=t.e.pageX-e.fabric._offset.left,n.rect.top=t.e.pageY-e.fabric._offset.top,n.rect.scale(1),n.overlay.scale(1),n.grid.scale(1),n.mousex=t.e.pageX,n.mousey=t.e.pageY,e.fabric.selection=!1,n.drawOverlay())},onMouseMove:function(t){if(n.dragging){var i=t.e.pageX-n.mousex,r=t.e.pageY-n.mousey;e.offset.left+e.original.width<t.e.pageX&&(i=e.offset.left+e.original.width-n.mousex),e.offset.left>t.e.pageX&&(i=e.offset.left-n.mousex),e.offset.top+e.original.height<t.e.pageY&&(r=e.offset.top+e.original.height-n.mousey),e.offset.top>t.e.pageY&&(r=e.offset.top-n.mousey),n.rect.width=i,n.rect.height=r,n.rect.moveTo(3),n.rect.setCoords(),n.drawOverlay(),n.drawGrid(),n.rect.visible||(n.rect.visible=!0,n.overlay.visible=!0,n.grid.visible=!0)}},onMouseUp:function(){n.dragging=!1,e.fabric.selection=!0,n.rect.setCoords(),n.grid.setCoords(),n.overlay.setCoords(),n.rect.visible&&e.fabric.setActiveObject(n.rect)},attachEvents:function(){this.rect.on("moving",function(){n.constrainWithinCanvas(n.rect),n.drawOverlay(),n.drawGrid()}),this.rect.on("scaling",function(t){n.constrainWithinCanvasOnScaling(n.rect,t),n.drawOverlay(),n.drawGrid()}),e.fabric.on("mouse:down",n.onMouseDown),e.fabric.on("mouse:move",n.onMouseMove),e.fabric.on("mouse:up",n.onMouseUp)},remove:function(){e.fabric.off("mouse:down",n.onMouseDown),e.fabric.off("mouse:move",n.onMouseMove),e.fabric.off("mouse:up",n.onMouseUp),e.fabric.remove(this.rect),e.fabric.remove(this.grid),e.fabric.remove(this.overlay),e.fabric.renderAll(),this.initiated=!1},hide:function(){this.rect.visible=!1,this.rect.hasControls=!1,this.grid.visible=!1,this.overlay.visible=!1},getOptimalDimensions:function(){var t=e.original.width/2,n=e.original.height/2,i=e.original.width/4,r=e.original.height/4;return e.viewport.offsetWidth<e.original.width&&(t=e.viewport.offsetWidth/2,i=e.viewport.offsetWidth/4),e.viewport.offsetHeight<e.original.height&&(n=e.viewport.offsetHeight/2,r=e.viewport.offsetHeight/4),{width:t,height:n,left:i,top:r}},drawMainZone:function(){var t=this.getOptimalDimensions();this.rect=new fabric.Rect({fill:"transparent",stroke:"rgba(255, 255, 255, 0.6)",hasBorders:!1,width:t.width,height:t.height,left:t.left,top:t.top,hasRotatingPoint:!1,name:"cropzone",cornerColor:"rgba(255, 255, 255, 0.6)",transparentCorners:!1,ignore:!0}),e.fabric.add(this.rect),this.rect.moveTo(3),e.fabric.setActiveObject(n.rect)},drawGrid:function(){this.initiated||(this.line1=new fabric.Line([],{stroke:"rgba(255, 255, 255, 0.6)",strokeWidth:1,selectable:!1,evented:!1}),this.line2=new fabric.Line([],{stroke:"rgba(255, 255, 255, 0.6)",strokeWidth:1,selectable:!1,evented:!1}),this.line3=new fabric.Line([],{stroke:"rgba(255, 255, 255, 0.6)",strokeWidth:1,selectable:!1,evented:!1}),this.line4=new fabric.Line([],{stroke:"rgba(255, 255, 255, 0.6)",strokeWidth:1,selectable:!1,evented:!1}),this.grid=new fabric.Group([this.line1,this.line2,this.line3,this.line4]),this.grid.originY="left",this.grid.originX="top",this.grid.ignore=!0,this.grid.selectable=!1,e.fabric.add(this.grid),this.grid.moveTo(10)),this.grid.width=this.rect.getWidth(),this.grid.height=this.rect.getHeight(),this.grid.left=this.rect.getLeft(),this.grid.top=this.rect.getTop();var t=n.rect.getWidth()/3,i=n.rect.getHeight()/3;this.line1.set({x1:t,y1:0,x2:t,y2:n.grid.getHeight()}),this.line2.set({x1:2*t,y1:0,x2:2*t,y2:n.grid.getHeight()}),this.line3.set({x1:0,y1:i,x2:n.grid.getWidth(),y2:i}),this.line4.set({x1:0,y1:2*i,x2:n.grid.getWidth(),y2:2*i}),this.constrainWithinCanvas(this.grid)},drawOverlay:function(){this.initiated||(this.topRect=new fabric.Rect({fill:"rgba(0,0,0,0.7)",selectable:!0,evented:!1}),this.rightRect=new fabric.Rect({fill:"rgba(0,0,0,0.7)",selectable:!0,evented:!1}),this.bottomRect=new fabric.Rect({fill:"rgba(0,0,0,0.7)",selectable:!0,evented:!1}),this.leftRect=new fabric.Rect({fill:"rgba(0,0,0,0.7)",selectable:!0,evented:!1}),this.overlay=new fabric.Group([this.topRect,this.rightRect,this.bottomRect,this.leftRect]),this.overlay.ignore=!0,this.overlay.name="grid.overlay",e.fabric.add(this.overlay),this.overlay.moveTo(1)),this.topRect.set({left:0,top:0,width:e.original.width,height:this.rect.getHeight()<0?this.rect.getTop()-Math.abs(this.rect.getHeight()):this.rect.getTop()}),this.rightRect.set({left:this.rect.getWidth()<0?this.rect.getLeft():this.rect.getLeft()+this.rect.getWidth(),top:this.rect.getTop(),width:this.rect.getWidth()<0?e.original.width-(this.rect.getLeft()+this.rect.getWidth())-Math.abs(this.rect.getWidth()):e.original.width-(this.rect.getLeft()+this.rect.getWidth()),height:this.rect.getHeight()}),this.bottomRect.set({left:0,top:this.rect.getHeight()<0?this.rect.getTop():this.rect.getTop()+this.rect.getHeight(),width:e.original.width,height:this.rect.getHeight()<0?e.original.height-this.rect.getTop():e.original.height-(this.rect.getTop()+this.rect.getHeight())}),this.leftRect.set({left:0,top:this.rect.getTop(),width:this.rect.getWidth()>0?this.rect.getLeft():this.rect.getLeft()-Math.abs(this.rect.getWidth()),height:this.rect.getHeight()})}};return n}]),angular.module("image.crop").controller("CropController",["$scope","$rootScope","cropper","cropzone",function(t,e,n,i){t.cropper=n,t.cropzone=i,e.$on("tab.changed",function(t,e,i){"basics"===i&&"basics"!==e&&n.stop()}),e.$watch("activePanel",function(t,e){"crop"!==t&&"crop"===e&&i.remove()}),e.$on("cropzone.added",function(){t.width=Math.round(i.rect.width),t.height=Math.round(i.rect.height)})}]),angular.module("image.basics",[]).controller("RotateController",["$scope","$rootScope","canvas","history",function(t,e,n,i){t.angle=0,t.startRotator=function(e){i.add("rotate-original-state","backup",!0),t.openPanel("rotate",e)},t.applyRotation=function(){e.activePanel=!1,i.add("rotation","cw-outline")},t.cancel=function(){i.load("rotate-original-state"),e.activePanel=!1,t.angle=0},t.rotateProper=function(t){n.zoom(1);var i=(n.mainImage.getAngle()+t)%360,r=Math.abs(n.mainImage.getWidth()*Math.sin(i*Math.PI/180))+Math.abs(n.mainImage.getHeight()*Math.cos(i*Math.PI/180)),o=Math.abs(n.mainImage.getHeight()*Math.sin(i*Math.PI/180))+Math.abs(n.mainImage.getWidth()*Math.cos(i*Math.PI/180));n.fabric.setWidth(o*n.currentZoom),n.fabric.setHeight(r*n.currentZoom),n.original.height=r,n.original.width=o,n.mainImage.center(),n.fabric.forEachObject(function(e){e.rotate((e.getAngle()+t)%360),e.setCoords()}),e.editorCustomActions.rotate=t,n.fabric.renderAll(),n.fitToScreen()},t.rotate=function(e,i){if(!(!e||e>360||0>e)){var r=!1;n.fabric.forEachObject(function(n){i&&"left"===i?e=n.getAngle()-90:i&&"right"===i&&(e=n.getAngle()+90),"center"===n.originX&&"center"===n.originY||!n.centeredRotation||(t.setOriginToCenter&&t.setOriginToCenter(n),r=!0),e=e>360?90:0>e?270:e,n.setAngle(e).setCoords(),r&&t.setCenterToOrigin&&t.setCenterToOrigin(n)}),n.fitToScreen(),n.fabric.renderAll()}},t.setOriginToCenter=function(t){t._originalOriginX=t.originX,t._originalOriginY=t.originY;var e=t.getCenterPoint();t.set({originX:"center",originY:"center",left:e.x,top:e.y})},t.setCenterToOrigin=function(t){var e=t.translateToOriginPoint(t.getCenterPoint(),t._originalOriginX,t._originalOriginY);t.set({originX:t._originalOriginX,originY:t._originalOriginY,left:e.x,top:e.y})}}]),angular.module("image.basics").controller("CanvasBackgroundController",["$scope","$rootScope","canvas","history",function(t,e,n,i){t.setBackground=function(t){n.fabric.setBackgroundColor(t),n.fabric.renderAll()},t.apply=function(){e.activePanel=!1,i.add("Canvas Color","eyedropper")},t.cancel=function(){e.activePanel=!1,n.fabric.setBackgroundColor(""),n.fabric.renderAll()}}]),angular.module("image.basics").controller("ResizeController",["$scope","$rootScope","canvas","history",function(t,e,n,i){function r(t,e){var i=Math.round(n.original.height*e),r=Math.round(n.original.width*t);n.fabric.setHeight(i),n.fabric.setWidth(r),n.original.width=r,n.original.height=i;var o=n.fabric.getObjects();for(var a in o){var s=o[a].scaleX,l=o[a].scaleY,c=o[a].left,u=o[a].top,h=s*t,d=l*e,f=c*t,p=u*e;o[a].scaleX=h,o[a].scaleY=d,o[a].left=f,o[a].top=p,o[a].setCoords()}n.fabric.renderAll()}t.constrainProportions=!0,t.percent=100,t.startResizer=function(e){t.width=t.usePercentages?100:Math.ceil(n.original.width),t.height=t.usePercentages?100:Math.ceil(n.original.height),i.add("beforeResize",!1,!0),n.zoom(1),t.openPanel("resize",e)},t.togglePercentages=function(e){e?(t.width=t.width/n.original.width*100,t.height=t.height/n.original.height*100):(t.width=t.width*n.original.width/100,t.height=t.height*n.original.height/100)},t.apply=function(){var o=Math.ceil(n.original.width),a=Math.ceil(n.original.height),s=Math.ceil(t.width),l=Math.ceil(t.height);if(t.usePercentages)var c=t.width/100,u=t.height/100;else var c=t.width/n.original.width,u=t.height/n.original.height;(o!==s||a!==l)&&(r(c,u),e.activePanel=!1,i.add("resize","resize-full-outline"),n.fitToScreen())},t.close=function(){e.activePanel=!1,n.fitToScreen()},t.aspectToHeight=function(e){if(t.constrainProportions)if(t.usePercentages)t.height=e;else{var i=parseFloat((n.original.width/e).toPrecision(3));t.height=Math.ceil(n.original.height/i)}},t.aspectToWidth=function(e){if(t.constrainProportions)if(t.usePercentages)t.width=e;else{var i=parseFloat((n.original.height/e).toPrecision(3));t.width=Math.floor(n.original.width/i)}}}]),angular.module("image.basics").controller("RoundedCornersController",["$scope","$rootScope","canvas","history",function(t,e,n,i){t.radius=50,t.startRoundedCorners=function(i){"round"!==e.activePanel&&(e.openPanel("round",i),t.rect=new fabric.Rect({width:n.original.width,height:n.original.height,rx:t.radius,ry:t.radius,opacity:1,fill:"transparent",name:"rounding-rect",stroke:"#fff",strokeDashArray:[5,5],selectable:!1,evented:!1,ignore:!0}),n.fabric.add(t.rect),n.fabric.renderAll())},t.adjustPreview=function(){t.rect&&(t.rect.set({rx:t.radius,ry:t.radius}),n.fabric.renderAll())},t.cancel=function(i){n.fabric.remove(t.rect),t.rect=!1,t.radius=50,n.fabric.renderAll(),i||(e.activePanel=!1)},t.apply=function(){e.editorCustomActions.roundCorners=angular.copy(t.radius),n.fabric.remove(t.rect),n.zoom(1),n.fabric.clipTo=function(e){t.rect.render(e),n.fabric.clipTo=!1};var r=n.fabric.toDataURL();n.fabric.clear(),t.cancel(),n.loadMainImage(r,!1,!1,!1,function(){e.$apply(function(){i.add("Round Corners","check-empty")})})},e.$on("tab.changed",function(e,n,i){"basics"===i&&t.rect&&"basics"!==n&&t.cancel()}),e.$watch("activePanel",function(e,n){"round"!==e&&"round"===n&&t.cancel(!0)})}]),angular.module("ImageEditor").controller("ZoomController",["$rootScope","$scope","canvas",function(t,e,n){e.canvas=n,e.zoom=1,e.maxScale=200,e.minScale=30,t.$on("editor.mainImage.loaded",function(){e.fitToScreen()}),t.$on("canvas.openedNew",function(){e.fitToScreen()}),e.$watch("canvas.currentZoom",function(t){var n=100*t;n!==e.zoom&&(e.zoom=n)}),e.fitToScreen=function(){if(e.zoom=100*n.currentScale,n.mainImage)var t=n.mainImage.originalState.width,i=n.mainImage.originalState.height;else var t=n.fabric.getWidth(),i=n.fabric.getHeight();var r=100*Math.min(3582/i,5731/t),o=100*Math.min(141/i,211/t);e.maxScale=Math.ceil(r),e.minScale=Math.ceil(o)},t.$on("history.loaded",function(){e.zoom=100*n.currentScale}),e.doZoom=function(){n.zoom(e.zoom/100)},e.getCurrentZoom=function(){return Math.round(100*n.currentZoom)}}]),angular.module("ImageEditor").controller("TopPanelController",["$rootScope","$scope","$mdDialog","$mdToast","$$rAF","canvas","history","saver",function(t,e,n,i,r,o,a,s){e.history=a,e.isDemo=t.isDemo,e.canOpenImage=!1,e.canvas=o,e.openImageMode="open",e.canvasWidth=800,e.canvasHeight=600,e.imageName="image",e.imageType="jpeg",e.imageQuality=8,e.objectsPanelOpen=!0,e.historyPanelOpen=!1,e.openUploadDialog=function(t){n.show({template:$("#main-image-upload-dialog-template").html(),targetEvent:t,controller:"TopPanelController"})},e.toggleRightPanel=function(t,n){var i=e[t+"PanelOpen"];i?(e[t+"PanelOpen"]=!1,$("#"+t).hide()):(e[t+"PanelOpen"]=!0,$("#"+t).show())},e.transformOpen=function(t,n){var i=$("#"+t);i.removeClass("transition-out transition-in").show(),e.transformToClickElement(i,n),r(function(){i.addClass("transition-in").css("transform",""),n.currentTarget.blur()})},e.transformClose=function(n,i){var r=$("#"+n);r.addClass("transition-out").removeClass("transition-in"),e.transformToClickElement(r,i),r.one(t.transitionEndEvent,function(){r.hide().css("transform","").removeClass("transition-out"),i.currentTarget.blur()})},e.transformToClickElement=function(t,e){var n=e.target.getBoundingClientRect(),i=t[0].getBoundingClientRect(),r=Math.min(.5,n.width/i.width),o=Math.min(.5,n.height/i.height);t.css("transform","translate3d("+(-i.left+n.left+n.width/2-i.width/2)+"px,"+(-i.top+n.top+n.height/2-i.height/2)+"px,0) scale("+r+","+o+")")},e.openSaveDialog=function(e){return t.isIntegrationMode()&&t.pixie.getParams().onSaveButtonClick?t.pixie.getParams().onSaveButtonClick():t.delayEditorStart?s.saveImage():void n.show({template:$("#save-image-dialog").html(),targetEvent:e,controller:"TopPanelController"})},e.createNewCanvas=function(n,i){o.openNew(n,i),e.closeUploadDialog(),t.started=!0},e.openSampleImage=function(){o.loadMainImage("assets/images/lotus.jpg"),e.closeUploadDialog(),t.started=!0},e.saveImage=function(t){s.saveImage(e.imageType,e.imageQuality,e.imageName,t)},e.showImagePreview=function(t){fabric.util.loadImage(t,function(t){e.$apply(t?function(){$(".img-preview").html("").append(t),e.canOpenImage=!0}:function(){e.canOpenImage=!1})})},e.openImage=function(){var n=$(".img-preview img").attr("src");n&&e.canOpenImage&&(o.fabric._objects.length&&o.mainImage||!t.userPreset&&t.userPreset.width?o.openImage(n):(o.fabric.clear(),o.loadMainImage(n)),e.closeUploadDialog(),t.started=!0)},e.closeUploadDialog=function(){e.canUploadImage=!1,e.openImageMode="open",$(".img-preview").html(),n.hide()}}]),angular.module("image.directives",[]).directive("edTabs",["$rootScope",function(t){return{link:function(e,n,i){$("#"+i.edTabs).addClass("open"),$('[data-activates="'+i.edTabs+'"]').addClass("active"),n.find("#navigation-bar").on("click",".nav-item",function(n){e.$apply(function(){t.activeTab=n.currentTarget.dataset.activates})}),t.$watch("activeTab",function(t,e){t&&t!==e&&r(t,n.find(".tab.open"),n.find("#"+t),$('[data-activates="'+t+'"]'))});var r=function(e,n,i,r){var o="fadeInLeft",a="fadeOutRight";r.hasClass("active")||($(".nav-item.active").removeClass("active"),r.addClass("active"),parseInt(i.data("index"))<parseInt(n.data("index"))&&(a="fadeOutLeft",o="fadeInRight"),n.addClass("animated "+a).one(t.animationEndEvent,function(){$(this).removeClass("open "+a)}),i.addClass("open animated "+o).one(t.animationEndEvent,function(){$(this).removeClass(o)}),t.$emit("tab.changed",e,n[0].id),t.activePanel=!1)}}}}]),angular.module("image.directives").directive("edPrettyScrollbar",function(){return{restrict:"A",compile:function(t,e){setTimeout(function(){t.mCustomScrollbar({theme:e.edScrollTheme||"inset",scrollInertia:300,autoExpandScrollbar:!1,axis:e.edScrollAxis||"x",advanced:{autoExpandHorizontalScroll:!0}})},1)}}}).directive("edIeSliderFix",function(){return{restrict:"A",template:'<div class="slider-fix-outter" style="height: 2px; position: absolute"><div class="slider-fix-inner" style="height: 1px; overflow: auto;">IE FIX</div></div>',compile:function(t){t.find(".slider-fix-inner").mCustomScrollbar()}}}),angular.module("image.directives").directive("edColorPicker",["$rootScope","$parse",function(t,e){return{link:function(t,n,i){var r="edFlat"in i;t.$watch(i.ngDisabled,function(t){n.spectrum(t?"disable":"enable")});var o={color:i.startColor,clickoutFiresChange:!0,showPalette:!r,palette:colorsForPicker,preferredFormat:"hex",showAlpha:!0,showInput:!0,flat:r,showButtons:!r},a=function(r){e(i.edColorPicker)(t,{color:r.toString()}),n.val(r.toString())};void 0!==i.edDiscrete?(n.on("dragstop.spectrum",function(t,e){a(e)}),o.change=function(t){a(t)}):o.move=function(t){a(t)},n.spectrum(o)}}}]),angular.module("image.directives").directive("edFileUploader",["$parse","$mdDialog","$mdBottomSheet",function(t,e,n){var i=["png","jpg","jpeg","gif"];return{restrict:"A",link:function(r,o,a){var s=t(a.edFileUploader)(r);$(o[0]).on("change",function(t){var r=new FileReader;r.onload=function(t){var r=t.target.result.split(",")[0].split(":")[1].split(";")[0].split("/")[1];i.indexOf(r)<0,s&&(s(t.target.result),"undefined"!=typeof a.edCloseAfter&&(e.hide(),n.hide()))},r.readAsDataURL(t.target.files[0])})}}}]),angular.module("image.directives").directive("edTogglePanelVisibility",function(){return{restrict:"A",compile:function(t,e){t.on("click",function(){t.find(".icon").toggleClass("toggled"),$("#"+e.edTogglePanelVisibility).find("ul").mCustomScrollbar("disable").slideToggle(150,function(){$(this).mCustomScrollbar("update")})})}}}),angular.module("image.directives").directive("edToggleSidebar",function(){return{restrict:"A",compile:function(t,e){var n=$("#left-sidebar");t.on("click",function(){n.toggleClass("open")})}}}),angular.module("image.directives").directive("edLazyShow",["$animate",function(t){return{multiElement:!0,transclude:"element",replace:!0,priority:600,terminal:!0,restrict:"A",link:function(e,n,i,r,o){var a,s=e.$watch(i.edLazyShow,function(e){e&&!a&&(a=!0,o(function(e){e[e.length++]=document.createComment(" end ngLazyShow: "+i.ngLazyShow+" "),t.enter(e,n.parent(),n),n=e}),s())})}}}]),angular.module("image.text",[]).service("text",["$rootScope","canvas",function(t,e){var n={removeTextFromCanvas:function(t){t||(t=e.fabric.getActiveObject()),t.setFontSize&&e.fabric.remove(t)},getTextObject:function(){var t=e.fabric.getActiveObject();if(t&&t.fontFamily)return t;if(!t||!t.fontFamily)for(var n=e.fabric.getObjects(),i=0;i<n.length;i++)if(n[i].fontFamily)return n[i]},toggleTextDecoration:function(t){var n=this.getTextObject(),i=n.textDecoration.trim();"italic"==t?n.setFontStyle(n.fontStyle.indexOf("italic")>-1?"normal":"italic"):(i.indexOf(t)>-1?i=i.replace(t,"").trim():i+=" "+t,n.setTextDecoration&&n.setTextDecoration(i)),e.fabric.renderAll();var r=n.fontStyle+" "+n.textDecoration.trim();return r.split(" ")},setProperty:function(t,n){var i=this.getTextObject(),r=this.makeSetterName(t);i[r]&&i[r](n),e.fabric.renderAll()},toggleProperty:function(t,n){var i=this.getTextObject(),r=this.makeSetterName(t);i[r]&&i[r](n),e.fabric.renderAll()},makeSetterName:function(t){return"set"+t.charAt(0).toUpperCase()+t.slice(1)}};return n}]),angular.module("image.text").controller("TextController",["$scope","$rootScope","$timeout","canvas","text","fonts",function(t,e,n,i,r,o){t.text=r,t.fonts=o,t.opacity=1,t.fontSize=25,t.enableOutline=!0,t.filters={category:"handwriting",family:""},t.isPanelEnabled=function(){var t=i.fabric.getActiveObject();return t&&"text"===t.name&&"text"===e.activeTab},t.changeFont=function(t,n){var o=i.fabric.getActiveObject();if(e.openPanel("text",n),!o||"text"!==o.name){var a=new fabric.IText("Double click me to edit my contents.",{fontWeight:400,fontSize:28/i.currentZoom,fill:"#fff",removeOnCancel:!0,name:"text"});i.fabric.add(a),a.setTop(25),a.setLeft(25),i.fabric.setActiveObject(a),i.fabric.renderAll()}r.setProperty("fontFamily",t)},t.cancelAddingTextToCanvas=function(){var t=r.getTextObject();t.removeOnCancel&&r.removeTextFromCanvas(t),e.activePanel=!1},t.finishAddingTextToCanvas=function(){e.activePanel=!1,e.$emit("text.added",r.getTextObject()),i.fabric.setActiveObject(i.mainImage)},e.$on("tab.changed",function(e,n){if("text"==n){var r=t.text.getTextObject();r&&(r.removeOnCancel=!1,i.fabric.setActiveObject(r))}}),o.getAll(t.filters)}]),angular.module("image.text").directive("edTextAlignButtons",["text",function(t){return{compile:function(e){e.on("click","i",function(n){var i=n.currentTarget.dataset.align;t.setProperty("textAlign",i),e.find("i").removeClass("active"),$(n.currentTarget).addClass("active")})}}}]),angular.module("image.text").directive("edTextDecorationButtons",["text",function(t){return{compile:function(e){e.on("click",".toolbar-btn",function(n){var i=n.currentTarget.dataset.decoration,r=t.toggleTextDecoration(i);e.find(".toolbar-btn").removeClass("active");for(var o=0;o<r.length;o++)e.find('[data-decoration="'+r[o].trim()+'"]').addClass("active")})}}}]),angular.module("image.text").directive("edFontsPagination",["$rootScope","fonts",function(t,e){return{restrict:"A",link:function(t,n){n.pagination({items:0,itemsOnPage:e.paginator.perPage,onPageClick:function(n){t.$apply(function(){e.paginator.selectPage(n)})}}),t.$watch("fonts.paginator.totalItems",function(t){t&&n.pagination("updateItems",t)})}}}]).factory("fonts",["$rootScope","$http","$timeout","$filter","localStorage",function(t,e,n,i,r){var o={loading:!1,paginator:{sourceItems:[],filteredItems:[],currentItems:[],perPage:17,totalItems:0,selectPage:function(t){this.currentItems=this.filteredItems.slice((t-1)*this.perPage,(t-1)*this.perPage+this.perPage),o.load()},filter:function(t){this.start(i("filter")(o.paginator.sourceItems,t))},start:function(t){this.filteredItems=t,this.totalItems=t.length,this.currentItems=t.slice(0,this.perPage),o.load()}},getAll:function(n){var i=this,o=r.get("googleFonts"),a=t.keys.google_fonts;return o?(i.paginator.sourceItems=o,n?i.paginator.filter(n):i.paginator.start(o)):void e.get("https://www.googleapis.com/webfonts/v1/webfonts?sort=popularity&key="+a).success(function(t){r.set("googleFonts",t.items),i.paginator.sourceItems=t.items,n?i.paginator.filter(n):i.paginator.start(t.items)})},load:function(e){var n=$("head");t.loading=!0,e?angular.isArray(e)||(e=[e]):e=$.map(o.paginator.currentItems,function(t){return t.family}),$(n).find("#dynamic-fonts").remove(),n.append('<link rel="stylesheet" id="dynamic-fonts" href="http://fonts.googleapis.com/css?family='+e.join("|").replace(/ /g,"+")+'">'),t.loading=!1}};return o}]),angular.module("image.drawing",[]).service("drawing",["$rootScope","canvas",function(t,e){var n={availableBrushes:["pencil","vLine","diamond","hLine","circle","square","spray"],defaultBrushName:"pencil",activeBrushName:!1,isEnabled:!1,params:{shadowColor:"#1E89E6",brushWidth:9,brushColor:"#000",shadowBlur:30,shadowOffsetX:10,shadowOffsetY:10,enableShadow:!1},enable:function(){e.fabric.isDrawingMode=!0,this.changeBrush(this.defaultBrushName),this.shadow||(this.shadow=new fabric.Shadow({color:this.params.shadowColor,blur:this.params.shadowBlur,offsetX:this.params.shadowOffsetX,offsetY:this.params.shadowOffsetY})),this.isEnabled=!0},disable:function(){e.fabric.isDrawingMode=!1,this.isEnabled=!1},setShadowProperty:function(t,n){e.fabric.freeDrawingBrush.shadow[t]&&(e.fabric.freeDrawingBrush.shadow[t]=n)},setProperty:function(t,n){e.fabric.freeDrawingBrush[t]&&(e.fabric.freeDrawingBrush[t]=n)},toggleShadow:function(t){t?e.fabric.freeDrawingBrush.shadow=this.shadow:(this.shadow=e.fabric.freeDrawingBrush.shadow,e.fabric.freeDrawingBrush.shadow=void 0)},changeBrush:function(t){this.activeBrushName=t,t=this.makeBrushName(t),fabric[t]?e.fabric.freeDrawingBrush=new fabric[t](e.fabric):this[t]?e.fabric.freeDrawingBrush=this[t]:this["make"+t]&&(e.fabric.freeDrawingBrush=this["make"+t]()),e.fabric.freeDrawingBrush.width=this.params.brushWidth,e.fabric.freeDrawingBrush.color=this.params.brushColor,this.params.enableShadow&&(e.fabric.freeDrawingBrush.shadow=this.shadow)},makeBrushName:function(t){return t.charAt(0).toUpperCase()+t.slice(1)+"Brush"},makeVLineBrush:function(){return this.VLineBrush=new fabric.PatternBrush(e.fabric),this.VLineBrush.getPatternSrc=function(){var t=fabric.document.createElement("canvas");t.width=t.height=10;var e=t.getContext("2d");return e.strokeStyle=this.color,e.lineWidth=5,e.beginPath(),e.moveTo(0,5),e.lineTo(10,5),e.closePath(),e.stroke(),t},this.VLineBrush},makeDiamondBrush:function(){return this.DiamondBrush=new fabric.PatternBrush(e.fabric),this.DiamondBrush.getPatternSrc=function(){var t=10,e=5,n=fabric.document.createElement("canvas"),i=new fabric.Rect({width:t,height:t,angle:45,fill:this.color}),r=i.getBoundingRectWidth();n.width=n.height=r+e,i.set({left:r/2,top:r/2});var o=n.getContext("2d");return i.render(o),n},this.DiamondBrush},makeHLineBrush:function(){return this.HLineBrush=new fabric.PatternBrush(e.fabric),this.HLineBrush.getPatternSrc=function(){var t=fabric.document.createElement("canvas");t.width=t.height=10;var e=t.getContext("2d");return e.strokeStyle=this.color,e.lineWidth=5,e.beginPath(),e.moveTo(5,0),e.lineTo(5,10),e.closePath(),e.stroke(),t},this.HLineBrush},makeSquareBrush:function(){return this.SquareBrush=new fabric.PatternBrush(e.fabric),this.SquareBrush.getPatternSrc=function(){var t=10,e=2,n=fabric.document.createElement("canvas");n.width=n.height=t+e;var i=n.getContext("2d");return i.fillStyle=this.color,i.fillRect(0,0,t,t),n},this.SquareBrush}};return n}]),angular.module("image.drawing").controller("DrawingController",["$scope","$rootScope","canvas","drawing","history",function(t,e,n,i,r){t.drawing=i,window.fb=n.fabric,t.changeBrush=function(e,n){t.openPanel("drawing",n),i.isEnabled||i.enable(),i.changeBrush(e)},t.finishAddingDrawingsToCanvas=function(){e.activePanel=!1,n.mainImage&&n.fabric.setActiveObject(n.mainImage),n.fabric.forEachObject(function(t){"freeDrawing"===t.name&&(t.removeOnCancel=!1)}),i.disable(),r.add("added drawing","brush")},t.cancelAddingDrawingsToCanvas=function(){n.fabric.forEachObject(function(t){"freeDrawing"===t.name&&t.removeOnCancel&&n.fabric.remove(t)}),i.disable(),n.fabric.renderAll(),e.activePanel=!1},e.$on("tab.changed",function(e,n){"drawing"!==n&&(i.disable(),t.cancelAddingDrawingsToCanvas())}),n.fabric.on("path:created",function(t){i.isEnabled&&(t.path.setOptions(n.imageStatic),t.path.name="freeDrawing",t.path.removeOnCancel=!0)})}]),angular.module("image.directives").directive("edRenderBrushes",["$rootScope","$compile",function(t,e){return{link:function(n,i){var r='<div ng-repeat="brush in drawing.availableBrushes" ng-class="{ active: drawing.activeBrushName == brush }" class="brush animated-in-sequence" ng-click="changeBrush(brush)"><img class="img-responsive" ng-src="assets/images/brushes/{{brush}}.png"/><div class="brush-name">{{ brush }}</div></div>',o=t.$on("tab.changed",function(t,a){"drawing"===a&&(n.$apply(function(){i.append(e(r)(n))}),o())})}}}]),angular.module("ImageEditor").factory("history",["$rootScope","canvas",function(t,e){var n={all:[],ignored:[],add:function(t,n,i){var r=i?"ignored":"all";if("ignored"===r)for(var o=0;o<this.ignored.length;o++)this.ignored[o].name===t&&this.ignored.splice(o,1);this[r].unshift({name:t,state:e.fabric.toJSON(["selectable","name"]),index:this.all.length+1,icon:n,zoom:e.zoom,canvasWidth:e.original.width||e.fabric.getWidth(),canvasHeight:e.original.height||e.fabric.getHeight()})},get:function(t,e){e||(e="ignored");for(var i=0;i<n[e].length;i++)if(n[e][i].name===t)return n[e][i]},load:function(n){return t.isLoading(),angular.isString(n)&&(n=this.get(n)),n?void setTimeout(function(){e.fabric.loadFromJSON(n.state,function(){e.fabric.forEachObject(function(t){t.applyFilters&&t.filters.length&&t.applyFilters(e.fabric.renderAll.bind(e.fabric)),"mainImage"==t.name&&(e.mainImage=t)}),e.zoom(1),n.canvasWidth&&n.canvasHeight&&(e.fabric.setWidth(n.canvasWidth),e.fabric.setHeight(n.canvasHeight),e.original.width=n.canvasWidth,e.original.height=n.canvasHeight),e.fabric.renderAll(),e.fabric.calcOffset(),t.isNotLoading(),e.fitToScreen(),t.$emit("history.loaded")})},30):t.isNotLoading();

}};return window.hist=n.all,n}]),angular.module("ImageEditor").factory("saver",["$rootScope","$mdDialog","$http","$timeout","canvas",function(t,e,n,i,r){var o={saveImage:function(e,n,i,r){return t.isDemo?this.handleDemoSiteSave(r):t.isIntegrationMode()?this.handleIntegrationModeSave(e,n):void this.saveToComputer(e,n,i)},handleIntegrationModeSave:function(i,o){r.resetZoom();var a=this.getDataUrl(i,o);if(t.pixie.getParams().replaceOriginal&&t.pixie.getParams().image&&(t.pixie.getParams().image.src=a),t.pixie.getParams().saveUrl&&n.post(t.pixie.getParams().saveUrl,{data:a}),t.pixie.getParams().onSave){var s=t.pixie.getParams().image||new Image(a);t.pixie.getParams().onSave(a,s)}$(".md-dialog-container").remove(),e.hide(),t.pixie.close()},saveToComputer:function(t,n,i){r.resetZoom();var o=document.createElement("a");if("undefined"!=typeof o.download){var a=this.getDataUrl(t,n);o.download=(i||"image")+"."+t,o.href=a,document.body.appendChild(o),o.click(),document.body.removeChild(o)}else r.fabric.lowerCanvasEl.toBlob(function(e){saveAs(e,i+"."+t)},"image/"+t,n);e.hide()},handleDemoSiteSave:function(e){$(".demo-alert").one(t.animationEndEvent,function(){$(this).removeClass("animated shake"),e.target.blur()}).addClass("animated shake")},getDataUrl:function(t,e){return r.fabric.toDataURL({format:t||"png",quality:(e||8)/10})}};return o}]),angular.module("image.filters",[]).controller("FiltersController",["$scope","$rootScope","canvas","filters",function(t,e,n,i){t.filters=i,e.$on("history.loaded",function(){if(n.mainImage){for(var e=[],r=0;r<n.mainImage.filters.length;r++)e.push(n.mainImage.filters[r].name);t.$apply(function(){i.appliedFilters=e})}})}]),angular.module("image.filters").service("filters",["$rootScope","canvas","history",function(t,e,n){var i={all:[{name:"grayscale"},{name:"invert"},{name:"sepia"},{name:"sepia2"},{name:"removeWhite",options:{distance:{current:10},threshold:{current:50}}},{name:"brightness",options:{brightness:{current:50}}},{name:"noise",options:{noise:{current:40,max:600}}},{name:"GradientTransparency",displayName:"Gradient",options:{threshold:{current:40}}},{name:"pixelate",options:{blocksize:{max:40,current:2}}},{name:"sharpen",uses:"Convolute",matrix:[0,-1,0,-1,5,-1,0,-1,0]},{name:"blur",uses:"Convolute",matrix:[1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9,1/9]},{name:"emboss",uses:"Convolute",matrix:[1,1,1,1,.7,-1,-1,-1,-1]},{name:"tint",options:{opacity:{current:.5,min:.1,max:1,step:.1},color:{colorpicker:!0,current:"#FF4081"}}},{name:"multiply",options:{color:{colorpicker:!0,current:"#FF4081"}}},{name:"blend",options:{mode:{current:"add",select:!0,available:["add","multiply","subtract","diff","screen","lighten","darken"]},alpha:{current:.5,min:.1,max:1,step:.1},color:{colorpicker:!0,current:"#FF4081"}}}],appliedFilters:[],applyFilter:function(r){if(this.filterExists(r)){if(this.filterAlreadyApplied(r.name))return this.removeFilter(r);t.isLoading(),i.markAsApplied(r.name),setTimeout(function(){e.fabric.forEachObject(function(t){t.applyFilters&&(t.filters.push(i.getFilter(r)),t.applyFilters(e.fabric.renderAll.bind(e.fabric)))}),n.add("filter: "+(r.displayName||r.name),"color-adjust"),i.lastAppliedFilter=r,t.isNotLoading()},30)}},removeFilter:function(n){this.filterExists(n)&&(t.isLoading(),i.unmarkAsApplied(n.name),setTimeout(function(){e.fabric.forEachObject(function(t){if(t.applyFilters)for(var i=0;i<t.filters.length;i++)t.filters[i].name.toLowerCase()===n.name.toLowerCase()&&(t.filters.splice(i,1),t.applyFilters(e.fabric.renderAll.bind(e.fabric)))}),i.lastAppliedFilter=!1,t.isNotLoading()},30))},applyValue:function(n,i,r){t.isLoading(),setTimeout(function(){e.fabric.forEachObject(function(t){if(t.applyFilters)for(var o=0;o<t.filters.length;o++){var a=t.filters[o];a.type.toLowerCase()===n.toLowerCase()&&(a[i]=r,t.applyFilters(e.fabric.renderAll.bind(e.fabric)))}}),t.isNotLoading()},30)},filterAlreadyApplied:function(t){return-1!==this.appliedFilters.indexOf(t)},markAsApplied:function(t){-1===this.appliedFilters.indexOf(t)&&this.appliedFilters.push(t)},unmarkAsApplied:function(t){for(var e=0;e<this.appliedFilters.length;e++)this.appliedFilters[e]===t&&this.appliedFilters.splice(e,1)},filterExists:function(t){return void 0!==fabric.Image.filters[fabric.util.string.capitalize(t.uses||t.name,!0)]},getFilter:function(t){var e;if(t.uses)e=new(fabric.Image.filters[fabric.util.string.capitalize(t.uses,!0)])({matrix:t.matrix});else{var n={};for(var i in t.options)n[i]=t.options[i].current;e=new(fabric.Image.filters[fabric.util.string.capitalize(t.name,!0)])(n)}return e.name=t.name,e}};return i}]),angular.module("image.shapes",[]).controller("SimpleShapesController",["$scope","$rootScope","$timeout","canvas","simpleShapes",function(t,e,n,i,r){t.shapes=r,t.available=["rect","triangle","circle","ellipse","polygon"],t.isPanelEnabled=function(){var e=i.fabric.getActiveObject();return e&&t.available.indexOf(e.name)>-1&&r.selected.options},i.fabric.on("object:selected",function(t){"simple-shapes"===e.activeTab&&r.selectShape(t.target.name)})}]),angular.module("image.shapes").controller("StickersController",["$scope","$rootScope","canvas","simpleShapes","history",function(t,e,n,i,r){t.shapes=i,t.opacity=.9,t.categories=[{name:"bubbles",items:new Array(104),type:"png"},{name:"stars",items:new Array(6),type:"png",darkbg:!0},{name:"transportation",items:new Array(22),type:"svg"},{name:"doodles",items:new Array(100),type:"svg"},{name:"landmarks",items:new Array(100),type:"svg"},{name:"beach",items:new Array(22),type:"svg"},{name:"animals",items:new Array(10),type:"png"},{name:"clouds",items:new Array(15),type:"png",darkbg:!0}],t.activeCategory="doodles",t.activeStickerIsSvg=function(){var t=n.fabric.getActiveObject();return t&&angular.isDefined(t.svgUid)},t.isPanelEnabled=function(){var t=n.fabric.getActiveObject();return t&&"sticker"===t.name&&"stickers"===e.activeTab},t.setActiveCategory=function(e){t.activeCategory=t.activeCategory===e?!1:e},t.setOpacity=function(t){i.getShape("sticker").setOpacity(t),n.fabric.renderAll()},t.setColor=function(t){var e=i.getShape("sticker");if(e.isSameColor&&e.isSameColor()||!e.paths)e.setFill(t);else if(e.paths)for(var r=0;r<e.paths.length;r++)e.paths[r].setFill(t);n.fabric.renderAll()},t.addToCanvas=function(e,i,o){t.loading||(t.loading=!0,t.openPanel("stickers",o),"svg"===e.type?fabric.loadSVGFromURL("assets/images/stickers/"+e.name+"/"+i+"."+e.type,function(e,i){var o=fabric.util.groupSVGElements(e,i);o.name="sticker",n.fabric.add(o),o.scaleToHeight(.4*n.fabric.getHeight()),o.center(),o.setCoords(),n.fabric.setActiveObject(o),n.fabric.renderAll(),t.$apply(function(){t.loading=!1}),r.add("Added: Sticker","heart-filled")}):fabric.util.loadImage("assets/images/stickers/"+e.name+"/"+i+"."+e.type,function(e){var i=new fabric.Image(e);i.name="sticker",n.fabric.add(i),i.center(),i.setCoords(),i.scaleToHeight(.4*n.original.height),n.fabric.setActiveObject(i),n.fabric.renderAll(),t.$apply(function(){t.loading=!1}),r.add("Added: Sticker","heart-filled")}))}}]),angular.module("image.shapes").directive("edStickersCategories",function(){return{restrict:"A",link:function(t,e){var n=t.$watch("activeTab",function(t){if("stickers"===t){var e=$(".category-stickers.open");e.find("img").each(function(){this.src=this.dataset.src}),e.parent().addClass("loaded"),n()}});e.on("click",".category-header",function(e){t.$apply(function(){t.setActiveCategory(e.target.dataset.name)});var n=$(e.currentTarget).parent();n.hasClass("loaded")||n.addClass("loaded").find("img").each(function(){this.src=this.dataset.src})})}}}),angular.module("image.shapes").filter("orderOptions",function(){return function(t,e,n){var i=[];return angular.forEach(t,function(t,e){t.name=e,i.push(t)}),i.sort(function(t,n){return t[e]>n[e]?1:-1}),n&&i.reverse(),i}}).service("simpleShapes",["$rootScope","canvas","polygon","history",function(t,e,n,i){var r={gradients:edGradients,textures:new Array(28),baseOptions:{main:{enabled:!0,opacity:{type:"slider",current:1,min:.1,max:1,step:.1},fill:{type:"colorpicker",current:"#263238",hidden:!0}},border:{enabled:!1,onToggle:"toggleBorder",stroke:{type:"colorpicker",current:"#2196F3",displayName:"Color"},strokeWidth:{type:"slider",current:5,max:40,displayName:"Width"}},shadow:{enabled:!1,onToggle:"toggleShadow",color:{type:"colorpicker",current:"rgba(0,0,0,0.5)"},blur:{type:"slider",current:5,max:80},offsetX:{type:"slider",current:8,max:30},offsetY:{type:"slider",current:5,max:30}}},available:[],selected:!1,fillWithGradient:function(t,n){var i=e.fabric.getActiveObject();i.setGradient(n||"fill",this.gradients[t]),e.fabric.renderAll()},fillWithImage:function(t){var n=e.fabric.getActiveObject();fabric.util.loadImage(t,function(t){n.setPatternFill({source:t}),e.fabric.renderAll()})},addToCanvas:function(t){if(this.shapeExists(t)){if(this.selected=t,t.service&&t.service.enable)return t.service.enable();var n=this.createNewShape(t);e.fabric.add(n),e.center(n),e.fabric.setActiveObject(n),e.fabric.renderAll(),i.add("Added: "+t.name,"squares")}},applyValue:function(t,n,i,r){var o="set"+fabric.util.string.capitalize(i,!0),a=this.getShape(n);return"shadow"===t?this.applyShadowValue(a,i,r):void(this.selected&&this.selected.name===n&&(a[o]?a[o](r):a[i]=r,a.setCoords(),e.fabric.setActiveObject(a),e.fabric.renderAll()))},applyShadowValue:function(t,n,i){if(t){var r={color:this.selected.options.shadow.color.current,blur:this.selected.options.shadow.blur.current,offsetX:this.selected.options.shadow.offsetX.current,offsetY:this.selected.options.shadow.offsetY.current};n&&i&&(r[n]=i),t.setShadow(r),e.fabric.renderAll()}},toggleShadow:function(t,n){n?this.applyShadowValue(this.getShape(t)):(this.getShape(t).setShadow(!1),e.fabric.renderAll())},toggleBorder:function(t,n){this.getShape(t).setStroke(n?this.selected.options.border.stroke:!1),e.fabric.renderAll()},shapeExists:function(t){for(var e=0;e<this.available.length;e++)if(this.available[e].name===t.name)return!0},getShape:function(t){var n=e.fabric.getActiveObject();return n&&n.name===t?n:(e.fabric.forEachObject(function(i){return i.name===t?(e.fabric.setActiveObject(i),n=i):void 0}),n)},createNewShape:function(t){var e=fabric.util.string.capitalize(t.name,!0);if(fabric[e]){var n={strokeWidth:t.options.border.strokeWidth.current};if(angular.forEach(t.options.main,function(t,e){"boolean"!=typeof t&&(n[e]=t.current)}),t.options.points)var i=new fabric[e](t.options.points.current,n);else var i=new fabric[e](n);return i.name=t.name,i}},selectShape:function(t){if(t&&this.selected.name!==t)for(var e=0;e<this.available.length;e++)if(this.available[e].name===t)return this.selected=this.available[e]}},o=angular.copy(r.baseOptions);o.main.radius={type:"slider",current:72,min:20},r.available.push({name:"circle",options:o});var a=angular.copy(r.baseOptions);a.main.width={type:"slider",current:140},a.main.height={type:"slider",current:140},r.available.push({name:"rect",displayName:"rectangle",options:a});var s=angular.copy(r.baseOptions);s.main.width={type:"slider",current:140,min:25},s.main.height={type:"slider",current:140,min:25},r.available.push({name:"triangle",options:s});var l=angular.copy(r.baseOptions);return l.main.rx={type:"slider",current:80,displayName:"horizontal radius"},l.main.ry={type:"slider",current:30,displayName:"vertical radius"},r.available.push({name:"ellipse",options:l}),r.available.push({name:"polygon",options:angular.copy(r.baseOptions),service:n}),r}]),angular.module("image.shapes").service("polygon",["$rootScope","$mdDialog","canvas",function(t,e,n){var i={mode:"add",currentShape:!1,onMouseMove:function(t){var e=n.fabric.getPointer(t.e);if("edit"===i.mode&&i.currentShape){var r=i.currentShape.get("points");r[r.length-1].x=e.x-i.currentShape.get("left"),r[r.length-1].y=e.y-i.currentShape.get("top"),i.currentShape.set({points:r}),n.fabric.renderAll()}},onMouseDown:function(t){var e=n.fabric.getPointer(t.e);if("add"===i.mode){var r=new fabric.Polygon([{x:e.x,y:e.y},{x:e.x+.5,y:e.y+.5}],{fill:"black",opacity:1,selectable:!1});i.currentShape=r,i.currentShape.name="polygon",n.fabric.add(i.currentShape),i.mode="edit"}else if("edit"===i.mode&&i.currentShape&&"polygon"===i.currentShape.type){var o=i.currentShape.get("points");o.push({x:e.x-i.currentShape.get("left"),y:e.y-i.currentShape.get("top")}),i.currentShape.set({points:o}),n.fabric.renderAll()}},onEscape:function(t){(!t&&i.currentShape||t&&27===t.keyCode)&&("edit"===i.mode||"add"===i.mode?(i.mode="normal",i.currentShape.set({selectable:!0}),i.currentShape._calcDimensions(),i.currentShape.setCoords(),n.fabric.setActiveObject(i.currentShape),n.fabric.renderAll()):i.mode="add",i.currentShape=null)},onClick:function(t){var e=$(t.target).closest(".md-dialog-container")[0];"CANVAS"===t.target.nodeName||"polygon"===$(t.target).closest(".shape").data("name")||e||i.disable()},enable:function(){this.enabled||(this.enabled=!0,n.fabric.on("mouse:move",i.onMouseMove),n.fabric.on("mouse:down",i.onMouseDown),fabric.util.addListener(window,"keyup",i.onEscape),setTimeout(function(){fabric.util.addListener(window,"click",i.onClick)},20),e.show({templateUrl:"modals/polygon.html",clickOutsideToClose:!0,controller:["$scope","$mdDialog",function(t,e){t.closeModal=e.hide}]}))},disable:function(){this.enabled=!1,n.fabric.off("mouse:move",i.onMouseMove),n.fabric.off("mouse:down",i.onMouseDown),fabric.util.removeListener(window,"keyup",i.onEscape),fabric.util.removeListener(window,"click",i.onClick),i.onEscape()}};return i}]),angular.module("ImageEditor").controller("ObjectsPanelController",["$scope","$rootScope","canvas",function(t,e,n){t.objects=n.fabric._objects||[],t.setAsActive=function(t){t&&n.fabric.setActiveObject(t)},t.toggleVisibility=function(t){t&&(t.visible?t.set({visible:!1,evented:!1,selectable:!1,hasBorders:!1,hasCorners:!1}):(t.set({visible:!0,evented:!0,selectable:!0,hasBorders:!0,hasCorners:!0}),n.fabric.setActiveObject(t)),n.fabric.renderAll())},t.deleteObject=function(t){t&&(n.fabric.remove(t),n.fabric.renderAll())},t.toggleLock=function(t){t&&(t.locked?(t.set({locked:!1,selectable:!0,evented:!0,lockMovementX:!1,lockMovementY:!1,lockRotation:!1,lockScalingX:!1,lockScalingY:!1,lockUniScaling:!1,hasControls:!0,hasBorders:!0}),n.fabric.setActiveObject(t)):t.set({locked:!0,selectable:!1,evented:!1,lockMovementX:!0,lockMovementY:!0,lockRotation:!0,lockScalingX:!0,lockScalingY:!0,lockUniScaling:!0,hasControls:!1,hasBorders:!1}),n.fabric.renderAll())}}]),angular.module("ImageEditor").directive("edObjectsPanelSortable",["$rootScope","canvas",function(t,e){return{link:function(n,i){var r,o,a;i.sortable({items:".object:visible",scroll:!1,containment:"parent",start:function(t,e){r=$(e.item).index()},update:function(n,i){if(o=$(i.item).index(),a=e.fabric.getObjects()[r]){if(o>r)for(var s=0;o-r>s;s++)e.fabric.bringForward(a);else for(var s=0;r-o>s;s++)e.fabric.sendBackwards(a);t.$apply(function(){e.fabric.renderAll(),r=!1})}}})}}}]),angular.module("ImageEditor").controller("EditorUploadsController",["$scope","$rootScope","$http","$state","photos","canvas","folders","utils",function(t,e,n,i,r,o,a,s){t.photos=[],t.openImage=function(t){o.openImage(t.absoluteUrl)},e.$on("photos.uploaded",function(e,n){n.uploaded&&n.uploaded.length&&(t.photos.unshift(n.uploaded[0]),t.openImage(n.uploaded[0]))}),r.getAll().success(function(e){t.photos=e})}]);